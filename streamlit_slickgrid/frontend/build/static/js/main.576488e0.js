/*! For license information please see main.576488e0.js.LICENSE.txt */
(()=>{"use strict";var e={219:(e,t,i)=>{var n=i(763),s={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return n.isMemo(e)?o:a[e.$$typeof]||s}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=o;var d=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,i,n){if("string"!==typeof i){if(m){var s=p(i);s&&s!==m&&e(t,s,n)}var o=c(i);h&&(o=o.concat(h(i)));for(var a=l(t),g=l(i),f=0;f<o.length;++f){var v=o[f];if(!r[v]&&(!n||!n[v])&&(!g||!g[v])&&(!a||!a[v])){var b=u(i,v);try{d(t,v,b)}catch(y){}}}}return t}},983:(e,t)=>{var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,s=i?Symbol.for("react.portal"):60106,r=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,a=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,c=i?Symbol.for("react.async_mode"):60111,h=i?Symbol.for("react.concurrent_mode"):60111,u=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,g=i?Symbol.for("react.memo"):60115,f=i?Symbol.for("react.lazy"):60116,v=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,y=i?Symbol.for("react.responder"):60118,_=i?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case c:case h:case r:case a:case o:case p:return e;default:switch(e=e&&e.$$typeof){case d:case u:case f:case g:case l:return e;default:return t}}case s:return t}}}function w(e){return S(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=d,t.ContextProvider=l,t.Element=n,t.ForwardRef=u,t.Fragment=r,t.Lazy=f,t.Memo=g,t.Portal=s,t.Profiler=a,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return w(e)||S(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return S(e)===d},t.isContextProvider=function(e){return S(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return S(e)===u},t.isFragment=function(e){return S(e)===r},t.isLazy=function(e){return S(e)===f},t.isMemo=function(e){return S(e)===g},t.isPortal=function(e){return S(e)===s},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===o},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===r||e===h||e===a||e===o||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===g||e.$$typeof===l||e.$$typeof===d||e.$$typeof===u||e.$$typeof===b||e.$$typeof===y||e.$$typeof===_||e.$$typeof===v)},t.typeOf=S},763:(e,t,i)=>{e.exports=i(983)},4:(e,t,i)=>{var n=i(853),s=i(43),r=i(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var l=Symbol.for("react.element"),d=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),g=Symbol.for("react.consumer"),f=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),S=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var w=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel"),E=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=E&&e[E]||e["@@iterator"])?e:null}var x=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===x?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case h:return"Fragment";case c:return"Portal";case p:return"Profiler";case u:return"StrictMode";case b:return"Suspense";case y:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Provider";case g:return(e._context.displayName||"Context")+".Consumer";case v:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case S:t=e._payload,e=e._init;try{return T(e(t))}catch($a){}}return null}var k,I,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=Object.assign;function D(e){if(void 0===k)try{throw Error()}catch($a){var t=$a.stack.trim().match(/\n( *(at )?)/);k=t&&t[1]||"",I=-1<$a.stack.indexOf("\n    at")?" (<anonymous>)":-1<$a.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+k+e+I}var P=!1;function F(e,t){if(!e||P)return"";P=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch($a){var n=$a}Reflect.construct(e,[],i)}else{try{i.call()}catch(s){n=s}e.call(i.prototype)}}else{try{throw Error()}catch(r){n=r}(i=e())&&"function"===typeof i.catch&&i.catch((function(){}))}}catch(o){if(o&&n&&"string"===typeof o.stack)return[o.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=n.DetermineComponentFrameRoot(),o=r[0],a=r[1];if(o&&a){var l=o.split("\n"),d=a.split("\n");for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<d.length&&!d[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===d.length)for(n=l.length-1,s=d.length-1;1<=n&&0<=s&&l[n]!==d[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==d[s]){if(1!==n||1!==s)do{if(n--,0>--s||l[n]!==d[s]){var c="\n"+l[n].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=n&&0<=s);break}}}finally{P=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?D(i):""}function M(e){switch(e.tag){case 26:case 27:case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function L(e){try{var t="";do{t+=M(e),e=e.return}while(e);return t}catch($a){return"\nError generating stack: "+$a.message+"\n"+$a.stack}}function N(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function B(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function H(e){if(N(e)!==e)throw Error(o(188))}function z(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=z(e)))return t;e=e.sibling}return null}var $=Array.isArray,U=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},W=[],j=-1;function G(e){return{current:e}}function Y(e){0>j||(e.current=W[j],W[j]=null,j--)}function K(e,t){j++,W[j]=e.current,e.current=t}var q=G(null),X=G(null),Q=G(null),Z=G(null);function J(e,t){switch(K(Q,t),K(X,e),K(q,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Zc(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Jc(e=Zc(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(q),K(q,t)}function ee(){Y(q),Y(X),Y(Q)}function te(e){null!==e.memoizedState&&K(Z,e);var t=q.current,i=Jc(t,e.type);t!==i&&(K(X,e),K(q,i))}function ie(e){X.current===e&&(Y(q),Y(X)),Z.current===e&&(Y(Z),Bh._currentValue=V)}var ne=Object.prototype.hasOwnProperty,se=n.unstable_scheduleCallback,re=n.unstable_cancelCallback,oe=n.unstable_shouldYield,ae=n.unstable_requestPaint,le=n.unstable_now,de=n.unstable_getCurrentPriorityLevel,ce=n.unstable_ImmediatePriority,he=n.unstable_UserBlockingPriority,ue=n.unstable_NormalPriority,pe=n.unstable_LowPriority,me=n.unstable_IdlePriority,ge=n.log,fe=n.unstable_setDisableYieldValue,ve=null,be=null;function ye(e){if("function"===typeof ge&&fe(e),be&&"function"===typeof be.setStrictMode)try{be.setStrictMode(ve,e)}catch($d){}}var _e=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(Se(e)/we|0)|0},Se=Math.log,we=Math.LN2;var Ce=128,Ee=4194304;function Oe(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xe(e,t){var i=e.pendingLanes;if(0===i)return 0;var n=0,s=e.suspendedLanes,r=e.pingedLanes,o=e.warmLanes;e=0!==e.finishedLanes;var a=134217727&i;return 0!==a?0!==(i=a&~s)?n=Oe(i):0!==(r&=a)?n=Oe(r):e||0!==(o=a&~o)&&(n=Oe(o)):0!==(a=i&~s)?n=Oe(a):0!==r?n=Oe(r):e||0!==(o=i&~o)&&(n=Oe(o)),0===n?0:0!==t&&t!==n&&0===(t&s)&&((s=n&-n)>=(o=t&-t)||32===s&&0!==(4194176&o))?t:n}function Te(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function ke(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ie(){var e=Ce;return 0===(4194176&(Ce<<=1))&&(Ce=128),e}function Re(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Ae(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function De(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Pe(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-_e(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|4194218&i}function Fe(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-_e(i),s=1<<n;s&t|e[n]&t&&(e[n]|=t),i&=~s}}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=U.p;return 0!==e?e:void 0===(e=window.event)?32:Jh(e.type)}var Ne=Math.random().toString(36).slice(2),Be="__reactFiber$"+Ne,He="__reactProps$"+Ne,ze="__reactContainer$"+Ne,$e="__reactEvents$"+Ne,Ue="__reactListeners$"+Ne,Ve="__reactHandles$"+Ne,We="__reactResources$"+Ne,je="__reactMarker$"+Ne;function Ge(e){delete e[Be],delete e[He],delete e[$e],delete e[Ue],delete e[Ve]}function Ye(e){var t=e[Be];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ze]||i[Be]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=ch(e);null!==e;){if(i=e[Be])return i;e=ch(e)}return t}i=(e=i).parentNode}return null}function Ke(e){if(e=e[Be]||e[ze]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Xe(e){var t=e[We];return t||(t=e[We]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Qe(e){e[je]=!0}var Ze=new Set,Je={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Je[e]=t,e=0;e<t.length;e++)Ze.add(t[e])}var it=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),st={},rt={};function ot(e,t,i){if(s=t,ne.call(rt,s)||!ne.call(st,s)&&(nt.test(s)?rt[s]=!0:(st[s]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var s}function at(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function lt(e,t,i,n){if(null===n)e.removeAttribute(i);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+n)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var s=i.get,r=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ut(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=ct(e)?e.checked?"true":"false":e.value),(e=n)!==i&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function gt(e){return e.replace(mt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function ft(e,t,i,n,s,r,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,dt(t)):null!=i?bt(e,o,dt(i)):null!=n&&e.removeAttribute("value"),null==s&&null!=r&&(e.defaultChecked=!!r),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+dt(a):e.removeAttribute("name")}function vt(e,t,i,n,s,r,o,a){if(null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&"boolean"!==typeof r&&(e.type=r),null!=t||null!=i){if(!("submit"!==r&&"reset"!==r||void 0!==t&&null!==t))return;i=null!=i?""+dt(i):"",t=null!=t?""+dt(t):i,a||t===e.value||(e.value=t),e.defaultValue=t}n="function"!==typeof(n=null!=n?n:s)&&"symbol"!==typeof n&&!!n,e.checked=a?e.checked:!!n,e.defaultChecked=!!n,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function bt(e,t,i){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function yt(e,t,i,n){if(e=e.options,t){t={};for(var s=0;s<i.length;s++)t["$"+i[s]]=!0;for(i=0;i<e.length;i++)s=t.hasOwnProperty("$"+e[i].value),e[i].selected!==s&&(e[i].selected=s),s&&n&&(e[i].defaultSelected=!0)}else{for(i=""+dt(i),t=null,s=0;s<e.length;s++){if(e[s].value===i)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function _t(e,t,i){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+dt(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,i,n){if(null==t){if(null!=n){if(null!=i)throw Error(o(92));if($(n)){if(1<n.length)throw Error(o(93));n=n[0]}i=n}null==i&&(i=""),t=i}i=dt(t),e.defaultValue=i,(n=e.textContent)===i&&""!==n&&null!==n&&(e.value=n)}function wt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var Ct=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,i){var n=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,i):"number"!==typeof i||0===i||Ct.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Ot(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=i){for(var n in i)!i.hasOwnProperty(n)||null!=t&&t.hasOwnProperty(n)||(0===n.indexOf("--")?e.setProperty(n,""):"float"===n?e.cssFloat="":e[n]="");for(var s in t)n=t[s],t.hasOwnProperty(s)&&i[s]!==n&&Et(e,s,n)}else for(var r in t)t.hasOwnProperty(r)&&Et(e,r,t[r])}function xt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),kt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return kt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Pt=null;function Ft(e){var t=Ke(e);if(t&&(e=t.stateNode)){var i=e[He]||null;e:switch(e=t.stateNode,t.type){case"input":if(ft(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+gt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var s=n[He]||null;if(!s)throw Error(o(90));ft(n,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<i.length;t++)(n=i[t]).form===e.form&&ut(n)}break e;case"textarea":_t(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&yt(e,!!i.multiple,t,!1)}}}var Mt=!1;function Lt(e,t,i){if(Mt)return e(t,i);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Dt||null!==Pt)&&(Hd(),Dt&&(t=Dt,e=Pt,Pt=Dt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function Nt(e,t){var i=e.stateNode;if(null===i)return null;var n=i[He]||null;if(null===n)return null;i=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(o(231,t,typeof i));return i}var Bt=!1;if(it)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(Cu){Bt=!1}var zt=null,$t=null,Ut=null;function Vt(){if(Ut)return Ut;var e,t,i=$t,n=i.length,s="value"in zt?zt.value:zt.textContent,r=s.length;for(e=0;e<n&&i[e]===s[e];e++);var o=n-e;for(t=1;t<=o&&i[n-t]===s[r-t];t++);return Ut=s.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function jt(){return!0}function Gt(){return!1}function Yt(e){function t(t,i,n,s,r){for(var o in this._reactName=t,this._targetInst=n,this.type=i,this.nativeEvent=s,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?jt:Gt,this.isPropagationStopped=Gt,this}return A(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=jt)},persist:function(){},isPersistent:jt}),t}var Kt,qt,Xt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Yt(Qt),Jt=A({},Qt,{view:0,detail:0}),ei=Yt(Jt),ti=A({},Jt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ui,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Kt=e.screenX-Xt.screenX,qt=e.screenY-Xt.screenY):qt=Kt=0,Xt=e),Kt)},movementY:function(e){return"movementY"in e?e.movementY:qt}}),ii=Yt(ti),ni=Yt(A({},ti,{dataTransfer:0})),si=Yt(A({},Jt,{relatedTarget:0})),ri=Yt(A({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),oi=Yt(A({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),ai=Yt(A({},Qt,{data:0})),li={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},di={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ci={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hi(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=ci[e])&&!!t[e]}function ui(){return hi}var pi=Yt(A({},Jt,{key:function(e){if(e.key){var t=li[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?di[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ui,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mi=Yt(A({},ti,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gi=Yt(A({},Jt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ui})),fi=Yt(A({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vi=Yt(A({},ti,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bi=Yt(A({},Qt,{newState:0,oldState:0})),yi=[9,13,27,32],_i=it&&"CompositionEvent"in window,Si=null;it&&"documentMode"in document&&(Si=document.documentMode);var wi=it&&"TextEvent"in window&&!Si,Ci=it&&(!_i||Si&&8<Si&&11>=Si),Ei=String.fromCharCode(32),Oi=!1;function xi(e,t){switch(e){case"keyup":return-1!==yi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var ki=!1;var Ii={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ri(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ii[e.type]:"textarea"===t}function Ai(e,t,i,n){Dt?Pt?Pt.push(n):Pt=[n]:Dt=n,0<(t=Bc(t,"onChange")).length&&(i=new Zt("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Di=null,Pi=null;function Fi(e){Rc(e,0)}function Mi(e){if(ut(qe(e)))return e}function Li(e,t){if("change"===e)return t}var Ni=!1;if(it){var Bi;if(it){var Hi="oninput"in document;if(!Hi){var zi=document.createElement("div");zi.setAttribute("oninput","return;"),Hi="function"===typeof zi.oninput}Bi=Hi}else Bi=!1;Ni=Bi&&(!document.documentMode||9<document.documentMode)}function $i(){Di&&(Di.detachEvent("onpropertychange",Ui),Pi=Di=null)}function Ui(e){if("value"===e.propertyName&&Mi(Pi)){var t=[];Ai(t,Pi,e,At(e)),Lt(Fi,t)}}function Vi(e,t,i){"focusin"===e?($i(),Pi=i,(Di=t).attachEvent("onpropertychange",Ui)):"focusout"===e&&$i()}function Wi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mi(Pi)}function ji(e,t){if("click"===e)return Mi(t)}function Gi(e,t){if("input"===e||"change"===e)return Mi(t)}var Yi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Ki(e,t){if(Yi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var s=i[n];if(!ne.call(t,s)||!Yi(e[s],t[s]))return!1}return!0}function qi(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xi(e,t){var i,n=qi(e);for(e=0;n;){if(3===n.nodeType){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qi(n)}}function Qi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zi(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch($d){i=!1}if(!i)break;t=pt((e=t.contentWindow).document)}return t}function Ji(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function en(e,t){var i=Zi(t);t=e.focusedElem;var n=e.selectionRange;if(i!==t&&t&&t.ownerDocument&&Qi(t.ownerDocument.documentElement,t)){if(null!==n&&Ji(t))if(e=n.start,void 0===(i=n.end)&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if((i=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){i=i.getSelection();var s=t.textContent.length,r=Math.min(n.start,s);n=void 0===n.end?r:Math.min(n.end,s),!i.extend&&r>n&&(s=n,n=r,r=s),s=Xi(t,r);var o=Xi(t,n);s&&o&&(1!==i.rangeCount||i.anchorNode!==s.node||i.anchorOffset!==s.offset||i.focusNode!==o.node||i.focusOffset!==o.offset)&&((e=e.createRange()).setStart(s.node,s.offset),i.removeAllRanges(),r>n?(i.addRange(e),i.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),i.addRange(e)))}for(e=[],i=t;i=i.parentNode;)1===i.nodeType&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(i=e[t]).element.scrollLeft=i.left,i.element.scrollTop=i.top}}var tn=it&&"documentMode"in document&&11>=document.documentMode,nn=null,sn=null,rn=null,on=!1;function an(e,t,i){var n=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;on||null==nn||nn!==pt(n)||("selectionStart"in(n=nn)&&Ji(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},rn&&Ki(rn,n)||(rn=n,0<(n=Bc(sn,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=nn)))}function ln(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var dn={animationend:ln("Animation","AnimationEnd"),animationiteration:ln("Animation","AnimationIteration"),animationstart:ln("Animation","AnimationStart"),transitionrun:ln("Transition","TransitionRun"),transitionstart:ln("Transition","TransitionStart"),transitioncancel:ln("Transition","TransitionCancel"),transitionend:ln("Transition","TransitionEnd")},cn={},hn={};function un(e){if(cn[e])return cn[e];if(!dn[e])return e;var t,i=dn[e];for(t in i)if(i.hasOwnProperty(t)&&t in hn)return cn[e]=i[t];return e}it&&(hn=document.createElement("div").style,"AnimationEvent"in window||(delete dn.animationend.animation,delete dn.animationiteration.animation,delete dn.animationstart.animation),"TransitionEvent"in window||delete dn.transitionend.transition);var pn=un("animationend"),mn=un("animationiteration"),gn=un("animationstart"),fn=un("transitionrun"),vn=un("transitionstart"),bn=un("transitioncancel"),yn=un("transitionend"),_n=new Map,Sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function wn(e,t){_n.set(e,t),et(t,[e])}var Cn=[],En=0,On=0;function xn(){for(var e=En,t=On=En=0;t<e;){var i=Cn[t];Cn[t++]=null;var n=Cn[t];Cn[t++]=null;var s=Cn[t];Cn[t++]=null;var r=Cn[t];if(Cn[t++]=null,null!==n&&null!==s){var o=n.pending;null===o?s.next=s:(s.next=o.next,o.next=s),n.pending=s}0!==r&&Rn(i,s,r)}}function Tn(e,t,i,n){Cn[En++]=e,Cn[En++]=t,Cn[En++]=i,Cn[En++]=n,On|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function kn(e,t,i,n){return Tn(e,t,i,n),An(e)}function In(e,t){return Tn(e,null,null,t),An(e)}function Rn(e,t,i){e.lanes|=i;var n=e.alternate;null!==n&&(n.lanes|=i);for(var s=!1,r=e.return;null!==r;)r.childLanes|=i,null!==(n=r.alternate)&&(n.childLanes|=i),22===r.tag&&(null===(e=r.stateNode)||1&e._visibility||(s=!0)),e=r,r=r.return;s&&null!==t&&3===e.tag&&(r=e.stateNode,s=31-_e(i),null===(e=(r=r.hiddenUpdates)[s])?r[s]=[t]:e.push(t),t.lane=536870912|i)}function An(e){if(50<Id)throw Id=0,Rd=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dn={},Pn=new WeakMap;function Fn(e,t){if("object"===typeof e&&null!==e){var i=Pn.get(e);return void 0!==i?i:(t={value:e,source:t,stack:L(t)},Pn.set(e,t),t)}return{value:e,source:t,stack:L(t)}}var Mn=[],Ln=0,Nn=null,Bn=0,Hn=[],zn=0,$n=null,Un=1,Vn="";function Wn(e,t){Mn[Ln++]=Bn,Mn[Ln++]=Nn,Nn=e,Bn=t}function jn(e,t,i){Hn[zn++]=Un,Hn[zn++]=Vn,Hn[zn++]=$n,$n=e;var n=Un;e=Vn;var s=32-_e(n)-1;n&=~(1<<s),i+=1;var r=32-_e(t)+s;if(30<r){var o=s-s%5;r=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Un=1<<32-_e(t)+s|i<<s|n,Vn=r+e}else Un=1<<r|i<<s|n,Vn=e}function Gn(e){null!==e.return&&(Wn(e,1),jn(e,1,0))}function Yn(e){for(;e===Nn;)Nn=Mn[--Ln],Mn[Ln]=null,Bn=Mn[--Ln],Mn[Ln]=null;for(;e===$n;)$n=Hn[--zn],Hn[zn]=null,Vn=Hn[--zn],Hn[zn]=null,Un=Hn[--zn],Hn[zn]=null}var Kn=null,qn=null,Xn=!1,Qn=null,Zn=!1,Jn=Error(o(519));function es(e){throw rs(Fn(Error(o(418,"")),e)),Jn}function ts(e){var t=e.stateNode,i=e.type,n=e.memoizedProps;switch(t[Be]=e,t[He]=n,i){case"dialog":Ac("cancel",t),Ac("close",t);break;case"iframe":case"object":case"embed":Ac("load",t);break;case"video":case"audio":for(i=0;i<kc.length;i++)Ac(kc[i],t);break;case"source":Ac("error",t);break;case"img":case"image":case"link":Ac("error",t),Ac("load",t);break;case"details":Ac("toggle",t);break;case"input":Ac("invalid",t),vt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0),ht(t);break;case"select":Ac("invalid",t);break;case"textarea":Ac("invalid",t),St(t,n.value,n.defaultValue,n.children),ht(t)}"string"!==typeof(i=n.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===n.suppressHydrationWarning||Wc(t.textContent,i)?(null!=n.popover&&(Ac("beforetoggle",t),Ac("toggle",t)),null!=n.onScroll&&Ac("scroll",t),null!=n.onScrollEnd&&Ac("scrollend",t),null!=n.onClick&&(t.onclick=jc),t=!0):t=!1,t||es(e)}function is(e){for(Kn=e.return;Kn;)switch(Kn.tag){case 3:case 27:return void(Zn=!0);case 5:case 13:return void(Zn=!1);default:Kn=Kn.return}}function ns(e){if(e!==Kn)return!1;if(!Xn)return is(e),Xn=!0,!1;var t,i=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||eh(e.type,e.memoizedProps)),t=!t),t&&(i=!0),i&&qn&&es(e),is(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,i=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===i){qn=dh(e.nextSibling);break e}i--}else"$"!==t&&"$!"!==t&&"$?"!==t||i++;e=e.nextSibling}qn=null}}else qn=Kn?dh(e.stateNode.nextSibling):null;return!0}function ss(){qn=Kn=null,Xn=!1}function rs(e){null===Qn?Qn=[e]:Qn.push(e)}var os=Error(o(460)),as=Error(o(474)),ls={then:function(){}};function ds(e){return"fulfilled"===(e=e.status)||"rejected"===e}function cs(){}function hs(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(cs,cs),t=i),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===os)throw Error(o(483));throw e;default:if("string"===typeof t.status)t.then(cs,cs);else{if(null!==(e=id)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}}),(function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===os)throw Error(o(483));throw e}throw us=t,os}}var us=null;function ps(){if(null===us)throw Error(o(459));var e=us;return us=null,e}var ms=null,gs=0;function fs(e){var t=gs;return gs+=1,null===ms&&(ms=[]),hs(ms,e,t)}function vs(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function bs(e,t){if(t.$$typeof===l)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,i){if(e){var n=t.deletions;null===n?(t.deletions=[i],t.flags|=16):n.push(i)}}function i(i,n){if(!e)return null;for(;null!==n;)t(i,n),n=n.sibling;return null}function n(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Bl(e,t)).index=0,e.sibling=null,e}function r(t,i,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<i?(t.flags|=33554434,i):n:(t.flags|=33554434,i):(t.flags|=1048576,i)}function a(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function l(e,t,i,n){return null===t||6!==t.tag?((t=Vl(i,e.mode,n)).return=e,t):((t=s(t,i)).return=e,t)}function u(e,t,i,n){var r=i.type;return r===h?m(e,t,i.props.children,n,i.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===S&&ys(r)===t.type)?(vs(t=s(t,i.props),i),t.return=e,t):(vs(t=zl(i.type,i.key,i.props,null,e.mode,n),i),t.return=e,t)}function p(e,t,i,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=Wl(i,e.mode,n)).return=e,t):((t=s(t,i.children||[])).return=e,t)}function m(e,t,i,n,r){return null===t||7!==t.tag?((t=$l(i,e.mode,n,r)).return=e,t):((t=s(t,i)).return=e,t)}function g(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Vl(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case d:return vs(i=zl(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case c:return(t=Wl(t,e.mode,i)).return=e,t;case S:return g(e,t=(0,t._init)(t._payload),i)}if($(t)||O(t))return(t=$l(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return g(e,fs(t),i);if(t.$$typeof===f)return g(e,xa(e,t),i);bs(e,t)}return null}function v(e,t,i,n){var s=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==s?null:l(e,t,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case d:return i.key===s?u(e,t,i,n):null;case c:return i.key===s?p(e,t,i,n):null;case S:return v(e,t,i=(s=i._init)(i._payload),n)}if($(i)||O(i))return null!==s?null:m(e,t,i,n,null);if("function"===typeof i.then)return v(e,t,fs(i),n);if(i.$$typeof===f)return v(e,t,xa(e,i),n);bs(e,i)}return null}function b(e,t,i,n,s){if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return l(t,e=e.get(i)||null,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case d:return u(t,e=e.get(null===n.key?i:n.key)||null,n,s);case c:return p(t,e=e.get(null===n.key?i:n.key)||null,n,s);case S:return b(e,t,i,n=(0,n._init)(n._payload),s)}if($(n)||O(n))return m(t,e=e.get(i)||null,n,s,null);if("function"===typeof n.then)return b(e,t,i,fs(n),s);if(n.$$typeof===f)return b(e,t,i,xa(t,n),s);bs(t,n)}return null}function y(l,u,p,m){if("object"===typeof p&&null!==p&&p.type===h&&null===p.key&&(p=p.props.children),"object"===typeof p&&null!==p){switch(p.$$typeof){case d:e:{for(var _=p.key;null!==u;){if(u.key===_){if((_=p.type)===h){if(7===u.tag){i(l,u.sibling),(m=s(u,p.props.children)).return=l,l=m;break e}}else if(u.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===S&&ys(_)===u.type){i(l,u.sibling),vs(m=s(u,p.props),p),m.return=l,l=m;break e}i(l,u);break}t(l,u),u=u.sibling}p.type===h?((m=$l(p.props.children,l.mode,m,p.key)).return=l,l=m):(vs(m=zl(p.type,p.key,p.props,null,l.mode,m),p),m.return=l,l=m)}return a(l);case c:e:{for(_=p.key;null!==u;){if(u.key===_){if(4===u.tag&&u.stateNode.containerInfo===p.containerInfo&&u.stateNode.implementation===p.implementation){i(l,u.sibling),(m=s(u,p.children||[])).return=l,l=m;break e}i(l,u);break}t(l,u),u=u.sibling}(m=Wl(p,l.mode,m)).return=l,l=m}return a(l);case S:return y(l,u,p=(_=p._init)(p._payload),m)}if($(p))return function(s,o,a,l){for(var d=null,c=null,h=o,u=o=0,p=null;null!==h&&u<a.length;u++){h.index>u?(p=h,h=null):p=h.sibling;var m=v(s,h,a[u],l);if(null===m){null===h&&(h=p);break}e&&h&&null===m.alternate&&t(s,h),o=r(m,o,u),null===c?d=m:c.sibling=m,c=m,h=p}if(u===a.length)return i(s,h),Xn&&Wn(s,u),d;if(null===h){for(;u<a.length;u++)null!==(h=g(s,a[u],l))&&(o=r(h,o,u),null===c?d=h:c.sibling=h,c=h);return Xn&&Wn(s,u),d}for(h=n(h);u<a.length;u++)null!==(p=b(h,s,u,a[u],l))&&(e&&null!==p.alternate&&h.delete(null===p.key?u:p.key),o=r(p,o,u),null===c?d=p:c.sibling=p,c=p);return e&&h.forEach((function(e){return t(s,e)})),Xn&&Wn(s,u),d}(l,u,p,m);if(O(p)){if("function"!==typeof(_=O(p)))throw Error(o(150));return function(s,a,l,d){if(null==l)throw Error(o(151));for(var c=null,h=null,u=a,p=a=0,m=null,f=l.next();null!==u&&!f.done;p++,f=l.next()){u.index>p?(m=u,u=null):m=u.sibling;var y=v(s,u,f.value,d);if(null===y){null===u&&(u=m);break}e&&u&&null===y.alternate&&t(s,u),a=r(y,a,p),null===h?c=y:h.sibling=y,h=y,u=m}if(f.done)return i(s,u),Xn&&Wn(s,p),c;if(null===u){for(;!f.done;p++,f=l.next())null!==(f=g(s,f.value,d))&&(a=r(f,a,p),null===h?c=f:h.sibling=f,h=f);return Xn&&Wn(s,p),c}for(u=n(u);!f.done;p++,f=l.next())null!==(f=b(u,s,p,f.value,d))&&(e&&null!==f.alternate&&u.delete(null===f.key?p:f.key),a=r(f,a,p),null===h?c=f:h.sibling=f,h=f);return e&&u.forEach((function(e){return t(s,e)})),Xn&&Wn(s,p),c}(l,u,p=_.call(p),m)}if("function"===typeof p.then)return y(l,u,fs(p),m);if(p.$$typeof===f)return y(l,u,xa(l,p),m);bs(l,p)}return"string"===typeof p&&""!==p||"number"===typeof p||"bigint"===typeof p?(p=""+p,null!==u&&6===u.tag?(i(l,u.sibling),(m=s(u,p)).return=l,l=m):(i(l,u),(m=Vl(p,l.mode,m)).return=l,l=m),a(l)):i(l,u)}return function(e,t,i,n){try{gs=0;var s=y(e,t,i,n);return ms=null,s}catch($a){if($a===os)throw $a;var r=Ll(29,$a,null,e.mode);return r.lanes=n,r.return=e,r}}}var Ss=_s(!0),ws=_s(!1),Cs=G(null),Es=G(0);function Os(e,t){K(Es,e=cd),K(Cs,t),cd=e|t.baseLanes}function xs(){K(Es,cd),K(Cs,Cs.current)}function Ts(){cd=Es.current,Y(Cs),Y(Es)}var ks=G(null),Is=null;function Rs(e){var t=e.alternate;K(Fs,1&Fs.current),K(ks,e),null===Is&&(null===t||null!==Cs.current||null!==t.memoizedState)&&(Is=e)}function As(e){if(22===e.tag){if(K(Fs,Fs.current),K(ks,e),null===Is){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Is=e)}}else Ds()}function Ds(){K(Fs,Fs.current),K(ks,ks.current)}function Ps(e){Y(ks),Is===e&&(Is=null),Y(Fs)}var Fs=G(0);function Ms(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||"$!"===i.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ls="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ns=n.unstable_scheduleCallback,Bs=n.unstable_NormalPriority,Hs={$$typeof:f,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zs(){return{controller:new Ls,data:new Map,refCount:0}}function $s(e){e.refCount--,0===e.refCount&&Ns(Bs,(function(){e.controller.abort()}))}var Us=null,Vs=0,Ws=0,js=null;function Gs(){if(0===--Vs&&null!==Us){null!==js&&(js.status="fulfilled");var e=Us;Us=null,Ws=0,js=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ys=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Us){var i=Us=[];Vs=0,Ws=Cc(),js={status:"pending",value:void 0,then:function(e){i.push(e)}}}Vs++,t.then(Gs,Gs)}(0,t),null!==Ys&&Ys(e,t)};var Ks=G(null);function qs(){var e=Ks.current;return null!==e?e:id.pooledCache}function Xs(e,t){K(Ks,null===t?Ks.current:t.pool)}function Qs(){var e=qs();return null===e?null:{parent:Hs._currentValue,pool:e}}var Zs=0,Js=null,er=null,tr=null,ir=!1,nr=!1,sr=!1,rr=0,or=0,ar=null,lr=0;function dr(){throw Error(o(321))}function cr(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Yi(e[i],t[i]))return!1;return!0}function hr(e,t,i,n,s,r){return Zs=r,Js=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?xo:To,sr=!1,r=i(n,s),sr=!1,nr&&(r=pr(t,i,n,s)),ur(e),r}function ur(e){R.H=Oo;var t=null!==er&&null!==er.next;if(Zs=0,tr=er=Js=null,ir=!1,or=0,ar=null,t)throw Error(o(300));null===e||Wo||null!==(e=e.dependencies)&&Ca(e)&&(Wo=!0)}function pr(e,t,i,n){Js=e;var s=0;do{if(nr&&(ar=null),or=0,nr=!1,25<=s)throw Error(o(301));if(s+=1,tr=er=null,null!=e.updateQueue){var r=e.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,null!=r.memoCache&&(r.memoCache.index=0)}R.H=ko,r=t(i,n)}while(nr);return r}function mr(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?_r(t):t,e=e.useState()[0],(null!==er?er.memoizedState:null)!==e&&(Js.flags|=1024),t}function gr(){var e=0!==rr;return rr=0,e}function fr(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function vr(e){if(ir){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ir=!1}Zs=0,tr=er=Js=null,nr=!1,or=rr=0,ar=null}function br(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===tr?Js.memoizedState=tr=e:tr=tr.next=e,tr}function yr(){if(null===er){var e=Js.alternate;e=null!==e?e.memoizedState:null}else e=er.next;var t=null===tr?Js.memoizedState:tr.next;if(null!==t)tr=t,er=e;else{if(null===e){if(null===Js.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(er=e).memoizedState,baseState:er.baseState,baseQueue:er.baseQueue,queue:er.queue,next:null},null===tr?Js.memoizedState=tr=e:tr=tr.next=e}return tr}function _r(e){var t=or;return or+=1,null===ar&&(ar=[]),e=hs(ar,e,t),t=Js,null===(null===tr?t.memoizedState:tr.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?xo:To),e}function Sr(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return _r(e);if(e.$$typeof===f)return Oa(e)}throw Error(o(438,String(e)))}function wr(e){var t=null,i=Js.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var n=Js.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),n=0;n<e;n++)i[n]=C;return t.index++,i}function Cr(e,t){return"function"===typeof t?t(e):t}function Er(e){return Or(yr(),er,e)}function Or(e,t,i){var n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=i;var s=e.baseQueue,r=n.pending;if(null!==r){if(null!==s){var a=s.next;s.next=r.next,r.next=a}t.baseQueue=s=r,n.pending=null}if(r=e.baseState,null===s)e.memoizedState=r;else{var l=a=null,d=null,c=t=s.next,h=!1;do{var u=-536870913&c.lane;if(u!==c.lane?(sd&u)===u:(Zs&u)===u){var p=c.revertLane;if(0===p)null!==d&&(d=d.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),u===Ws&&(h=!0);else{if((Zs&p)===p){c=c.next,p===Ws&&(h=!0);continue}u={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=u,a=r):d=d.next=u,Js.lanes|=p,ud|=p}u=c.action,sr&&i(r,u),r=c.hasEagerState?c.eagerState:i(r,u)}else p={lane:u,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===d?(l=d=p,a=r):d=d.next=p,Js.lanes|=u,ud|=u;c=c.next}while(null!==c&&c!==t);if(null===d?a=r:d.next=l,!Yi(r,e.memoizedState)&&(Wo=!0,h&&null!==(i=js)))throw i;e.memoizedState=r,e.baseState=a,e.baseQueue=d,n.lastRenderedState=r}return null===s&&(n.lanes=0),[e.memoizedState,n.dispatch]}function xr(e){var t=yr(),i=t.queue;if(null===i)throw Error(o(311));i.lastRenderedReducer=e;var n=i.dispatch,s=i.pending,r=t.memoizedState;if(null!==s){i.pending=null;var a=s=s.next;do{r=e(r,a.action),a=a.next}while(a!==s);Yi(r,t.memoizedState)||(Wo=!0),t.memoizedState=r,null===t.baseQueue&&(t.baseState=r),i.lastRenderedState=r}return[r,n]}function Tr(e,t,i){var n=Js,s=yr(),r=Xn;if(r){if(void 0===i)throw Error(o(407));i=i()}else i=t();var a=!Yi((er||s).memoizedState,i);if(a&&(s.memoizedState=i,Wo=!0),s=s.queue,Zr(Rr.bind(null,n,s,e),[e]),s.getSnapshot!==t||a||null!==tr&&1&tr.memoizedState.tag){if(n.flags|=2048,Yr(9,Ir.bind(null,n,s,i,t),{destroy:void 0},null),null===id)throw Error(o(349));r||0!==(60&Zs)||kr(n,t,i)}return i}function kr(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=Js.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ir(e,t,i,n){t.value=i,t.getSnapshot=n,Ar(t)&&Dr(e)}function Rr(e,t,i){return i((function(){Ar(t)&&Dr(e)}))}function Ar(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Yi(e,i)}catch(n){return!0}}function Dr(e){var t=In(e,2);null!==t&&Pd(t,e,2)}function Pr(e){var t=br();if("function"===typeof e){var i=e;if(e=i(),sr){ye(!0);try{i()}finally{ye(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:e},t}function Fr(e,t,i,n){return e.baseState=i,Or(e,er,"function"===typeof n?n:Cr)}function Mr(e,t,i,n,s){if(wo(e))throw Error(o(485));if(null!==(e=t.action)){var r={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){r.listeners.push(e)}};null!==R.T?i(!0):r.isTransition=!1,n(r),null===(i=t.pending)?(r.next=t.pending=r,Lr(t,r)):(r.next=i.next,t.pending=i.next=r)}}function Lr(e,t){var i=t.action,n=t.payload,s=e.state;if(t.isTransition){var r=R.T,o={};R.T=o;try{var a=i(s,n),l=R.S;null!==l&&l(o,a),Nr(e,t,a)}catch(d){Hr(e,t,d)}finally{R.T=r}}else try{Nr(e,t,r=i(s,n))}catch(c){Hr(e,t,c)}}function Nr(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then((function(i){Br(e,t,i)}),(function(i){return Hr(e,t,i)})):Br(e,t,i)}function Br(e,t,i){t.status="fulfilled",t.value=i,zr(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,Lr(e,i)))}function Hr(e,t,i){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=i,zr(t),t=t.next}while(t!==n)}e.action=null}function zr(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function $r(e,t){return t}function Ur(e,t){if(Xn){var i=id.formState;if(null!==i){e:{var n=Js;if(Xn){if(qn){t:{for(var s=qn,r=Zn;8!==s.nodeType;){if(!r){s=null;break t}if(null===(s=dh(s.nextSibling))){s=null;break t}}s="F!"===(r=s.data)||"F"===r?s:null}if(s){qn=dh(s.nextSibling),n="F!"===s.data;break e}}es(n)}n=!1}n&&(t=i[0])}}return(i=br()).memoizedState=i.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$r,lastRenderedState:t},i.queue=n,i=yo.bind(null,Js,n),n.dispatch=i,n=Pr(!1),r=So.bind(null,Js,!1,n.queue),s={state:t,dispatch:null,action:e,pending:null},(n=br()).queue=s,i=Mr.bind(null,Js,s,r,i),s.dispatch=i,n.memoizedState=e,[t,i,!1]}function Vr(e){return Wr(yr(),er,e)}function Wr(e,t,i){t=Or(e,t,$r)[0],e=Er(Cr)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?_r(t):t;var n=yr(),s=n.queue,r=s.dispatch;return i!==n.memoizedState&&(Js.flags|=2048,Yr(9,jr.bind(null,s,i),{destroy:void 0},null)),[t,r,e]}function jr(e,t){e.action=t}function Gr(e){var t=yr(),i=er;if(null!==i)return Wr(t,i,e);yr(),t=t.memoizedState;var n=(i=yr()).queue.dispatch;return i.memoizedState=e,[t,n,!1]}function Yr(e,t,i,n){return e={tag:e,create:t,inst:i,deps:n,next:null},null===(t=Js.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Js.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e),e}function Kr(){return yr().memoizedState}function qr(e,t,i,n){var s=br();Js.flags|=e,s.memoizedState=Yr(1|t,i,{destroy:void 0},void 0===n?null:n)}function Xr(e,t,i,n){var s=yr();n=void 0===n?null:n;var r=s.memoizedState.inst;null!==er&&null!==n&&cr(n,er.memoizedState.deps)?s.memoizedState=Yr(t,i,r,n):(Js.flags|=e,s.memoizedState=Yr(1|t,i,r,n))}function Qr(e,t){qr(8390656,8,e,t)}function Zr(e,t){Xr(2048,8,e,t)}function Jr(e,t){return Xr(4,2,e,t)}function eo(e,t){return Xr(4,4,e,t)}function to(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function io(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,Xr(4,4,to.bind(null,t,e),i)}function no(){}function so(e,t){var i=yr();t=void 0===t?null:t;var n=i.memoizedState;return null!==t&&cr(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function ro(e,t){var i=yr();t=void 0===t?null:t;var n=i.memoizedState;if(null!==t&&cr(t,n[1]))return n[0];if(n=e(),sr){ye(!0);try{e()}finally{ye(!1)}}return i.memoizedState=[n,t],n}function oo(e,t,i){return void 0===i||0!==(1073741824&Zs)?e.memoizedState=t:(e.memoizedState=i,e=Dd(),Js.lanes|=e,ud|=e,i)}function ao(e,t,i,n){return Yi(i,t)?i:null!==Cs.current?(e=oo(e,i,n),Yi(e,t)||(Wo=!0),e):0===(42&Zs)?(Wo=!0,e.memoizedState=i):(e=Dd(),Js.lanes|=e,ud|=e,t)}function lo(e,t,i,n,s){var r=U.p;U.p=0!==r&&8>r?r:8;var o=R.T,a={};R.T=a,So(e,!1,t,i);try{var l=s(),d=R.S;if(null!==d&&d(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then){var c=function(e,t){var i=[],n={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then((function(){n.status="fulfilled",n.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)}),(function(e){for(n.status="rejected",n.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)})),n}(l,n);_o(e,t,c,Ad())}else _o(e,t,n,Ad())}catch(h){_o(e,t,{then:function(){},status:"rejected",reason:h},Ad())}finally{U.p=r,R.T=o}}function co(){}function ho(e,t,i,n){if(5!==e.tag)throw Error(o(476));var s=uo(e).queue;lo(e,s,t,V,null===i?co:function(){return po(e),i(n)})}function uo(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:V},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function po(e){_o(e,uo(e).next.queue,{},Ad())}function mo(){return Oa(Bh)}function go(){return yr().memoizedState}function fo(){return yr().memoizedState}function vo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Ad(),n=Da(t,e=Aa(i),i);return null!==n&&(Pd(n,t,i),Pa(n,t,i)),t={cache:zs()},void(e.payload=t)}t=t.return}}function bo(e,t,i){var n=Ad();i={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},wo(e)?Co(t,i):null!==(i=kn(e,t,i,n))&&(Pd(i,e,n),Eo(i,t,n))}function yo(e,t,i){_o(e,t,i,Ad())}function _o(e,t,i,n){var s={lane:n,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(wo(e))Co(t,s);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=r(o,i);if(s.hasEagerState=!0,s.eagerState=a,Yi(a,o))return Tn(e,t,s,0),null===id&&xn(),!1}catch(l){}if(null!==(i=kn(e,t,s,n)))return Pd(i,e,n),Eo(i,t,n),!0}return!1}function So(e,t,i,n){if(n={lane:2,revertLane:Cc(),action:n,hasEagerState:!1,eagerState:null,next:null},wo(e)){if(t)throw Error(o(479))}else null!==(t=kn(e,i,n,2))&&Pd(t,e,2)}function wo(e){var t=e.alternate;return e===Js||null!==t&&t===Js}function Co(e,t){nr=ir=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Eo(e,t,i){if(0!==(4194176&i)){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Fe(e,i)}}var Oo={readContext:Oa,use:Sr,useCallback:dr,useContext:dr,useEffect:dr,useImperativeHandle:dr,useLayoutEffect:dr,useInsertionEffect:dr,useMemo:dr,useReducer:dr,useRef:dr,useState:dr,useDebugValue:dr,useDeferredValue:dr,useTransition:dr,useSyncExternalStore:dr,useId:dr};Oo.useCacheRefresh=dr,Oo.useMemoCache=dr,Oo.useHostTransitionStatus=dr,Oo.useFormState=dr,Oo.useActionState=dr,Oo.useOptimistic=dr;var xo={readContext:Oa,use:Sr,useCallback:function(e,t){return br().memoizedState=[e,void 0===t?null:t],e},useContext:Oa,useEffect:Qr,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,qr(4194308,4,to.bind(null,t,e),i)},useLayoutEffect:function(e,t){return qr(4194308,4,e,t)},useInsertionEffect:function(e,t){qr(4,2,e,t)},useMemo:function(e,t){var i=br();t=void 0===t?null:t;var n=e();if(sr){ye(!0);try{e()}finally{ye(!1)}}return i.memoizedState=[n,t],n},useReducer:function(e,t,i){var n=br();if(void 0!==i){var s=i(t);if(sr){ye(!0);try{i(t)}finally{ye(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=bo.bind(null,Js,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},br().memoizedState=e},useState:function(e){var t=(e=Pr(e)).queue,i=yo.bind(null,Js,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:no,useDeferredValue:function(e,t){return oo(br(),e,t)},useTransition:function(){var e=Pr(!1);return e=lo.bind(null,Js,e.queue,!0,!1),br().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var n=Js,s=br();if(Xn){if(void 0===i)throw Error(o(407));i=i()}else{if(i=t(),null===id)throw Error(o(349));0!==(60&sd)||kr(n,t,i)}s.memoizedState=i;var r={value:i,getSnapshot:t};return s.queue=r,Qr(Rr.bind(null,n,r,e),[e]),n.flags|=2048,Yr(9,Ir.bind(null,n,r,i,t),{destroy:void 0},null),i},useId:function(){var e=br(),t=id.identifierPrefix;if(Xn){var i=Vn;t=":"+t+"R"+(i=(Un&~(1<<32-_e(Un)-1)).toString(32)+i),0<(i=rr++)&&(t+="H"+i.toString(32)),t+=":"}else t=":"+t+"r"+(i=lr++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return br().memoizedState=vo.bind(null,Js)}};xo.useMemoCache=wr,xo.useHostTransitionStatus=mo,xo.useFormState=Ur,xo.useActionState=Ur,xo.useOptimistic=function(e){var t=br();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=So.bind(null,Js,!0,i),i.dispatch=t,[e,t]};var To={readContext:Oa,use:Sr,useCallback:so,useContext:Oa,useEffect:Zr,useImperativeHandle:io,useInsertionEffect:Jr,useLayoutEffect:eo,useMemo:ro,useReducer:Er,useRef:Kr,useState:function(){return Er(Cr)},useDebugValue:no,useDeferredValue:function(e,t){return ao(yr(),er.memoizedState,e,t)},useTransition:function(){var e=Er(Cr)[0],t=yr().memoizedState;return["boolean"===typeof e?e:_r(e),t]},useSyncExternalStore:Tr,useId:go};To.useCacheRefresh=fo,To.useMemoCache=wr,To.useHostTransitionStatus=mo,To.useFormState=Vr,To.useActionState=Vr,To.useOptimistic=function(e,t){return Fr(yr(),0,e,t)};var ko={readContext:Oa,use:Sr,useCallback:so,useContext:Oa,useEffect:Zr,useImperativeHandle:io,useInsertionEffect:Jr,useLayoutEffect:eo,useMemo:ro,useReducer:xr,useRef:Kr,useState:function(){return xr(Cr)},useDebugValue:no,useDeferredValue:function(e,t){var i=yr();return null===er?oo(i,e,t):ao(i,er.memoizedState,e,t)},useTransition:function(){var e=xr(Cr)[0],t=yr().memoizedState;return["boolean"===typeof e?e:_r(e),t]},useSyncExternalStore:Tr,useId:go};function Io(e,t,i,n){i=null===(i=i(n,t=e.memoizedState))||void 0===i?t:A({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}ko.useCacheRefresh=fo,ko.useMemoCache=wr,ko.useHostTransitionStatus=mo,ko.useFormState=Gr,ko.useActionState=Gr,ko.useOptimistic=function(e,t){var i=yr();return null!==er?Fr(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])};var Ro={isMounted:function(e){return!!(e=e._reactInternals)&&N(e)===e},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=Ad(),s=Aa(n);s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=Da(e,s,n))&&(Pd(t,e,n),Pa(t,e,n))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=Ad(),s=Aa(n);s.tag=1,s.payload=t,void 0!==i&&null!==i&&(s.callback=i),null!==(t=Da(e,s,n))&&(Pd(t,e,n),Pa(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Ad(),n=Aa(i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Da(e,n,i))&&(Pd(t,e,i),Pa(t,e,i))}};function Ao(e,t,i,n,s,r,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,r,o):!t.prototype||!t.prototype.isPureReactComponent||(!Ki(i,n)||!Ki(s,r))}function Do(e,t,i,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Ro.enqueueReplaceState(t,t.state,null)}function Po(e,t){var i=t;if("ref"in t)for(var n in i={},t)"ref"!==n&&(i[n]=t[n]);if(e=e.defaultProps)for(var s in i===t&&(i=A({},i)),e)void 0===i[s]&&(i[s]=e[s]);return i}var Fo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function Mo(e){Fo(e)}function Lo(e){console.error(e)}function No(e){Fo(e)}function Bo(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout((function(){throw i}))}}function Ho(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout((function(){throw n}))}}function zo(e,t,i){return(i=Aa(i)).tag=3,i.payload={element:null},i.callback=function(){Bo(e,t)},i}function $o(e){return(e=Aa(e)).tag=3,e}function Uo(e,t,i,n){var s=i.type.getDerivedStateFromError;if("function"===typeof s){var r=n.value;e.payload=function(){return s(r)},e.callback=function(){Ho(t,i,n)}}var o=i.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){Ho(t,i,n),"function"!==typeof s&&(null===Cd?Cd=new Set([this]):Cd.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Vo=Error(o(461)),Wo=!1;function jo(e,t,i,n){t.child=null===e?ws(t,null,i,n):Ss(t,e.child,i,n)}function Go(e,t,i,n,s){i=i.render;var r=t.ref;if("ref"in n){var o={};for(var a in n)"ref"!==a&&(o[a]=n[a])}else o=n;return Ea(t),n=hr(e,t,i,o,r,s),a=gr(),null===e||Wo?(Xn&&a&&Gn(t),t.flags|=1,jo(e,t,n,s),t.child):(fr(e,t,s),ua(e,t,s))}function Yo(e,t,i,n,s){if(null===e){var r=i.type;return"function"!==typeof r||Nl(r)||void 0!==r.defaultProps||null!==i.compare?((e=zl(i.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ko(e,t,r,n,s))}if(r=e.child,!pa(e,s)){var o=r.memoizedProps;if((i=null!==(i=i.compare)?i:Ki)(o,n)&&e.ref===t.ref)return ua(e,t,s)}return t.flags|=1,(e=Bl(r,n)).ref=t.ref,e.return=t,t.child=e}function Ko(e,t,i,n,s){if(null!==e){var r=e.memoizedProps;if(Ki(r,n)&&e.ref===t.ref){if(Wo=!1,t.pendingProps=n=r,!pa(e,s))return t.lanes=e.lanes,ua(e,t,s);0!==(131072&e.flags)&&(Wo=!0)}}return Zo(e,t,i,n,s)}function qo(e,t,i){var n=t.pendingProps,s=n.children,r=0!==(2&t.stateNode._pendingVisibility),o=null!==e?e.memoizedState:null;if(Qo(e,t),"hidden"===n.mode||r){if(0!==(128&t.flags)){if(n=null!==o?o.baseLanes|i:i,null!==e){for(s=t.child=e.child,r=0;null!==s;)r=r|s.lanes|s.childLanes,s=s.sibling;t.childLanes=r&~n}else t.childLanes=0,t.child=null;return Xo(e,t,n,i)}if(0===(536870912&i))return t.lanes=t.childLanes=536870912,Xo(e,t,null!==o?o.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xs(0,null!==o?o.cachePool:null),null!==o?Os(t,o):xs(),As(t)}else null!==o?(Xs(0,o.cachePool),Os(t,o),Ds(),t.memoizedState=null):(null!==e&&Xs(0,null),xs(),Ds());return jo(e,t,s,i),t.child}function Xo(e,t,i,n){var s=qs();return s=null===s?null:{parent:Hs._currentValue,pool:s},t.memoizedState={baseLanes:i,cachePool:s},null!==e&&Xs(0,null),xs(),As(t),null!==e&&wa(e,t,n,!0),null}function Qo(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(o(284));null!==e&&e.ref===i||(t.flags|=2097664)}}function Zo(e,t,i,n,s){return Ea(t),i=hr(e,t,i,n,void 0,s),n=gr(),null===e||Wo?(Xn&&n&&Gn(t),t.flags|=1,jo(e,t,i,s),t.child):(fr(e,t,s),ua(e,t,s))}function Jo(e,t,i,n,s,r){return Ea(t),t.updateQueue=null,i=pr(t,n,i,s),ur(e),n=gr(),null===e||Wo?(Xn&&n&&Gn(t),t.flags|=1,jo(e,t,i,r),t.child):(fr(e,t,r),ua(e,t,r))}function ea(e,t,i,n,s){if(Ea(t),null===t.stateNode){var r=Dn,o=i.contextType;"object"===typeof o&&null!==o&&(r=Oa(o)),r=new i(n,r),t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,r.updater=Ro,t.stateNode=r,r._reactInternals=t,(r=t.stateNode).props=n,r.state=t.memoizedState,r.refs={},Ia(t),o=i.contextType,r.context="object"===typeof o&&null!==o?Oa(o):Dn,r.state=t.memoizedState,"function"===typeof(o=i.getDerivedStateFromProps)&&(Io(t,i,o,n),r.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(o=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),o!==r.state&&Ro.enqueueReplaceState(r,r.state,null),Na(t,n,r,s),La(),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){r=t.stateNode;var a=t.memoizedProps,l=Po(i,a);r.props=l;var d=r.context,c=i.contextType;o=Dn,"object"===typeof c&&null!==c&&(o=Oa(c));var h=i.getDerivedStateFromProps;c="function"===typeof h||"function"===typeof r.getSnapshotBeforeUpdate,a=t.pendingProps!==a,c||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(a||d!==o)&&Do(t,r,n,o),ka=!1;var u=t.memoizedState;r.state=u,Na(t,n,r,s),La(),d=t.memoizedState,a||u!==d||ka?("function"===typeof h&&(Io(t,i,h,n),d=t.memoizedState),(l=ka||Ao(t,i,l,n,u,d,o))?(c||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||("function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount()),"function"===typeof r.componentDidMount&&(t.flags|=4194308)):("function"===typeof r.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),r.props=n,r.state=d,r.context=o,n=l):("function"===typeof r.componentDidMount&&(t.flags|=4194308),n=!1)}else{r=t.stateNode,Ra(e,t),c=Po(i,o=t.memoizedProps),r.props=c,h=t.pendingProps,u=r.context,d=i.contextType,l=Dn,"object"===typeof d&&null!==d&&(l=Oa(d)),(d="function"===typeof(a=i.getDerivedStateFromProps)||"function"===typeof r.getSnapshotBeforeUpdate)||"function"!==typeof r.UNSAFE_componentWillReceiveProps&&"function"!==typeof r.componentWillReceiveProps||(o!==h||u!==l)&&Do(t,r,n,l),ka=!1,u=t.memoizedState,r.state=u,Na(t,n,r,s),La();var p=t.memoizedState;o!==h||u!==p||ka||null!==e&&null!==e.dependencies&&Ca(e.dependencies)?("function"===typeof a&&(Io(t,i,a,n),p=t.memoizedState),(c=ka||Ao(t,i,c,n,u,p,l)||null!==e&&null!==e.dependencies&&Ca(e.dependencies))?(d||"function"!==typeof r.UNSAFE_componentWillUpdate&&"function"!==typeof r.componentWillUpdate||("function"===typeof r.componentWillUpdate&&r.componentWillUpdate(n,p,l),"function"===typeof r.UNSAFE_componentWillUpdate&&r.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof r.componentDidUpdate&&(t.flags|=4),"function"===typeof r.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),r.props=n,r.state=p,r.context=l,n=c):("function"!==typeof r.componentDidUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=4),"function"!==typeof r.getSnapshotBeforeUpdate||o===e.memoizedProps&&u===e.memoizedState||(t.flags|=1024),n=!1)}return r=n,Qo(e,t),n=0!==(128&t.flags),r||n?(r=t.stateNode,i=n&&"function"!==typeof i.getDerivedStateFromError?null:r.render(),t.flags|=1,null!==e&&n?(t.child=Ss(t,e.child,null,s),t.child=Ss(t,null,i,s)):jo(e,t,i,s),t.memoizedState=r.state,e=t.child):e=ua(e,t,s),e}function ta(e,t,i,n){return ss(),t.flags|=256,jo(e,t,i,n),t.child}var ia={dehydrated:null,treeContext:null,retryLane:0};function na(e){return{baseLanes:e,cachePool:Qs()}}function sa(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=gd),e}function ra(e,t,i){var n,s=t.pendingProps,r=!1,a=0!==(128&t.flags);if((n=a)||(n=(null===e||null!==e.memoizedState)&&0!==(2&Fs.current)),n&&(r=!0,t.flags&=-129),n=0!==(32&t.flags),t.flags&=-33,null===e){if(Xn){if(r?Rs(t):Ds(),Xn){var l,d=qn;if(l=d){e:{for(l=d,d=Zn;8!==l.nodeType;){if(!d){d=null;break e}if(null===(l=dh(l.nextSibling))){d=null;break e}}d=l}null!==d?(t.memoizedState={dehydrated:d,treeContext:null!==$n?{id:Un,overflow:Vn}:null,retryLane:536870912},(l=Ll(18,null,null,0)).stateNode=d,l.return=t,t.child=l,Kn=t,qn=null,l=!0):l=!1}l||es(t)}if(null!==(d=t.memoizedState)&&null!==(d=d.dehydrated))return"$!"===d.data?t.lanes=16:t.lanes=536870912,null;Ps(t)}return d=s.children,s=s.fallback,r?(Ds(),d=aa({mode:"hidden",children:d},r=t.mode),s=$l(s,r,i,null),d.return=t,s.return=t,d.sibling=s,t.child=d,(r=t.child).memoizedState=na(i),r.childLanes=sa(e,n,i),t.memoizedState=ia,s):(Rs(t),oa(t,d))}if(null!==(l=e.memoizedState)&&null!==(d=l.dehydrated)){if(a)256&t.flags?(Rs(t),t.flags&=-257,t=la(e,t,i)):null!==t.memoizedState?(Ds(),t.child=e.child,t.flags|=128,t=null):(Ds(),r=s.fallback,d=t.mode,s=aa({mode:"visible",children:s.children},d),(r=$l(r,d,i,null)).flags|=2,s.return=t,r.return=t,s.sibling=r,t.child=s,Ss(t,e.child,null,i),(s=t.child).memoizedState=na(i),s.childLanes=sa(e,n,i),t.memoizedState=ia,t=r);else if(Rs(t),"$!"===d.data){if(n=d.nextSibling&&d.nextSibling.dataset)var c=n.dgst;n=c,(s=Error(o(419))).stack="",s.digest=n,rs({value:s,source:null,stack:null}),t=la(e,t,i)}else if(Wo||wa(e,t,i,!1),n=0!==(i&e.childLanes),Wo||n){if(null!==(n=id)){if(0!==(42&(s=i&-i)))s=1;else switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=64;break;case 268435456:s=134217728;break;default:s=0}if(0!==(s=0!==(s&(n.suspendedLanes|i))?0:s)&&s!==l.retryLane)throw l.retryLane=s,In(e,s),Pd(n,e,s),Vo}"$?"===d.data||Gd(),t=la(e,t,i)}else"$?"===d.data?(t.flags|=128,t.child=e.child,t=dc.bind(null,e),d._reactRetry=t,t=null):(e=l.treeContext,qn=dh(d.nextSibling),Kn=t,Xn=!0,Qn=null,Zn=!1,null!==e&&(Hn[zn++]=Un,Hn[zn++]=Vn,Hn[zn++]=$n,Un=e.id,Vn=e.overflow,$n=t),(t=oa(t,s.children)).flags|=4096);return t}return r?(Ds(),r=s.fallback,d=t.mode,c=(l=e.child).sibling,(s=Bl(l,{mode:"hidden",children:s.children})).subtreeFlags=31457280&l.subtreeFlags,null!==c?r=Bl(c,r):(r=$l(r,d,i,null)).flags|=2,r.return=t,s.return=t,s.sibling=r,t.child=s,s=r,r=t.child,null===(d=e.child.memoizedState)?d=na(i):(null!==(l=d.cachePool)?(c=Hs._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Qs(),d={baseLanes:d.baseLanes|i,cachePool:l}),r.memoizedState=d,r.childLanes=sa(e,n,i),t.memoizedState=ia,s):(Rs(t),e=(i=e.child).sibling,(i=Bl(i,{mode:"visible",children:s.children})).return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i)}function oa(e,t){return(t=aa({mode:"visible",children:t},e.mode)).return=e,e.child=t}function aa(e,t){return Ul(e,t,0,null)}function la(e,t,i){return Ss(t,e.child,null,i),(e=oa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function da(e,t,i){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),_a(e.return,t,i)}function ca(e,t,i,n,s){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:s}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=n,r.tail=i,r.tailMode=s)}function ha(e,t,i){var n=t.pendingProps,s=n.revealOrder,r=n.tail;if(jo(e,t,n.children,i),0!==(2&(n=Fs.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&da(e,i,t);else if(19===e.tag)da(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}switch(K(Fs,n),s){case"forwards":for(i=t.child,s=null;null!==i;)null!==(e=i.alternate)&&null===Ms(e)&&(s=i),i=i.sibling;null===(i=s)?(s=t.child,t.child=null):(s=i.sibling,i.sibling=null),ca(t,!1,s,i,r);break;case"backwards":for(i=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Ms(e)){t.child=s;break}e=s.sibling,s.sibling=i,i=s,s=e}ca(t,!0,i,null,r);break;case"together":ca(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ua(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),ud|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(wa(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(i=Bl(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Bl(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function pa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ca(e))}function ma(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Wo=!0;else{if(!pa(e,i)&&0===(128&t.flags))return Wo=!1,function(e,t,i){switch(t.tag){case 3:J(t,t.stateNode.containerInfo),ba(t,Hs,e.memoizedState.cache),ss();break;case 27:case 5:te(t);break;case 4:J(t,t.stateNode.containerInfo);break;case 10:ba(t,t.type,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Rs(t),t.flags|=128,null):0!==(i&t.child.childLanes)?ra(e,t,i):(Rs(t),null!==(e=ua(e,t,i))?e.sibling:null);Rs(t);break;case 19:var s=0!==(128&e.flags);if((n=0!==(i&t.childLanes))||(wa(e,t,i,!1),n=0!==(i&t.childLanes)),s){if(n)return ha(e,t,i);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),K(Fs,Fs.current),n)break;return null;case 22:case 23:return t.lanes=0,qo(e,t,i);case 24:ba(t,Hs,e.memoizedState.cache)}return ua(e,t,i)}(e,t,i);Wo=0!==(131072&e.flags)}else Wo=!1,Xn&&0!==(1048576&t.flags)&&jn(t,Bn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var n=t.elementType,s=n._init;if(n=s(n._payload),t.type=n,"function"!==typeof n){if(void 0!==n&&null!==n){if((s=n.$$typeof)===v){t.tag=11,t=Go(null,t,n,e,i);break e}if(s===_){t.tag=14,t=Yo(null,t,n,e,i);break e}}throw t=T(n)||n,Error(o(306,t,""))}Nl(n)?(e=Po(n,e),t.tag=1,t=ea(null,t,n,e,i)):(t.tag=0,t=Zo(null,t,n,e,i))}return t;case 0:return Zo(e,t,t.type,t.pendingProps,i);case 1:return ea(e,t,n=t.type,s=Po(n,t.pendingProps),i);case 3:e:{if(J(t,t.stateNode.containerInfo),null===e)throw Error(o(387));var r=t.pendingProps;n=(s=t.memoizedState).element,Ra(e,t),Na(t,r,null,i);var a=t.memoizedState;if(r=a.cache,ba(t,Hs,r),r!==s.cache&&Sa(t,[Hs],i,!0),La(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ta(e,t,r,i);break e}if(r!==n){rs(n=Fn(Error(o(424)),t)),t=ta(e,t,r,i);break e}for(qn=dh(t.stateNode.containerInfo.firstChild),Kn=t,Xn=!0,Qn=null,Zn=!0,i=ws(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(ss(),r===n){t=ua(e,t,i);break e}jo(e,t,r,i)}t=t.child}return t;case 26:return Qo(e,t),null===e?(i=bh(t.type,null,t.pendingProps,null))?t.memoizedState=i:Xn||(i=t.type,e=t.pendingProps,(n=Qc(Q.current).createElement(i))[Be]=t,n[He]=e,Kc(n,i,e),Qe(n),t.stateNode=n):t.memoizedState=bh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Xn&&(n=t.stateNode=hh(t.type,t.pendingProps,Q.current),Kn=t,Zn=!0,qn=dh(n.firstChild)),n=t.pendingProps.children,null!==e||Xn?jo(e,t,n,i):t.child=Ss(t,null,n,i),Qo(e,t),t.child;case 5:return null===e&&Xn&&((s=n=qn)&&(n=function(e,t,i,n){for(;1===e.nodeType;){var s=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(r=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(r!==s.rel||e.getAttribute("href")!==(null==s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((r=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&r&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var r=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===r)return e}if(null===(e=dh(e.nextSibling)))break}return null}(n,t.type,t.pendingProps,Zn),null!==n?(t.stateNode=n,Kn=t,qn=dh(n.firstChild),Zn=!1,s=!0):s=!1),s||es(t)),te(t),s=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,n=r.children,eh(s,r)?n=null:null!==a&&eh(s,a)&&(t.flags|=32),null!==t.memoizedState&&(s=hr(e,t,mr,null,null,i),Bh._currentValue=s),Qo(e,t),jo(e,t,n,i),t.child;case 6:return null===e&&Xn&&((e=i=qn)&&(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=dh(e.nextSibling)))return null}return e}(i,t.pendingProps,Zn),null!==i?(t.stateNode=i,Kn=t,qn=null,e=!0):e=!1),e||es(t)),null;case 13:return ra(e,t,i);case 4:return J(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=Ss(t,null,n,i):jo(e,t,n,i),t.child;case 11:return Go(e,t,t.type,t.pendingProps,i);case 7:return jo(e,t,t.pendingProps,i),t.child;case 8:case 12:return jo(e,t,t.pendingProps.children,i),t.child;case 10:return n=t.pendingProps,ba(t,t.type,n.value),jo(e,t,n.children,i),t.child;case 9:return s=t.type._context,n=t.pendingProps.children,Ea(t),n=n(s=Oa(s)),t.flags|=1,jo(e,t,n,i),t.child;case 14:return Yo(e,t,t.type,t.pendingProps,i);case 15:return Ko(e,t,t.type,t.pendingProps,i);case 19:return ha(e,t,i);case 22:return qo(e,t,i);case 24:return Ea(t),n=Oa(Hs),null===e?(null===(s=qs())&&(s=id,r=zs(),s.pooledCache=r,r.refCount++,null!==r&&(s.pooledCacheLanes|=i),s=r),t.memoizedState={parent:n,cache:s},Ia(t),ba(t,Hs,s)):(0!==(e.lanes&i)&&(Ra(e,t),Na(t,null,null,i),La()),s=e.memoizedState,r=t.memoizedState,s.parent!==n?(s={parent:n,cache:n},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),ba(t,Hs,n)):(n=r.cache,ba(t,Hs,n),n!==s.cache&&Sa(t,[Hs],i,!0))),jo(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}var ga=G(null),fa=null,va=null;function ba(e,t,i){K(ga,t._currentValue),t._currentValue=i}function ya(e){e._currentValue=ga.current,Y(ga)}function _a(e,t,i){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Sa(e,t,i,n){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var r=s.dependencies;if(null!==r){var a=s.child;r=r.firstContext;e:for(;null!==r;){var l=r;r=s;for(var d=0;d<t.length;d++)if(l.context===t[d]){r.lanes|=i,null!==(l=r.alternate)&&(l.lanes|=i),_a(r.return,i,e),n||(a=null);break e}r=l.next}}else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=i,null!==(r=a.alternate)&&(r.lanes|=i),_a(a,i,e),a=null}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}function wa(e,t,i,n){e=null;for(var s=t,r=!1;null!==s;){if(!r)if(0!==(524288&s.flags))r=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var a=s.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=s.type;Yi(s.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(s===Z.current){if(null===(a=s.alternate))throw Error(o(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Bh):e=[Bh])}s=s.return}null!==e&&Sa(t,e,i,n),t.flags|=262144}function Ca(e){for(e=e.firstContext;null!==e;){if(!Yi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ea(e){fa=e,va=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Oa(e){return Ta(fa,e)}function xa(e,t){return null===fa&&Ea(e),Ta(e,t)}function Ta(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===va){if(null===e)throw Error(o(308));va=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else va=va.next=t;return i}var ka=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Da(e,t,i){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&td)){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=An(e),Rn(e,null,i),t}return Tn(e,n,t,i),An(e)}function Pa(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&i))){var n=t.lanes;i|=n&=e.pendingLanes,t.lanes=i,Fe(e,i)}}function Fa(e,t){var i=e.updateQueue,n=e.alternate;if(null!==n&&i===(n=n.updateQueue)){var s=null,r=null;if(null!==(i=i.firstBaseUpdate)){do{var o={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===r?s=r=o:r=r.next=o,i=i.next}while(null!==i);null===r?s=r=t:r=r.next=t}else s=r=t;return i={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var Ma=!1;function La(){if(Ma){if(null!==js)throw js}}function Na(e,t,i,n){Ma=!1;var s=e.updateQueue;ka=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,d=l.next;l.next=null,null===o?r=d:o.next=d,o=l;var c=e.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===a?c.firstBaseUpdate=d:a.next=d,c.lastBaseUpdate=l))}if(null!==r){var h=s.baseState;for(o=0,c=d=l=null,a=r;;){var u=-536870913&a.lane,p=u!==a.lane;if(p?(sd&u)===u:(n&u)===u){0!==u&&u===Ws&&(Ma=!0),null!==c&&(c=c.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;u=t;var f=i;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(f,h,u);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(u="function"===typeof(m=g.payload)?m.call(f,h,u):m)||void 0===u)break e;h=A({},h,u);break e;case 2:ka=!0}}null!==(u=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[u]:p.push(u))}else p={lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(d=c=p,l=h):c=c.next=p,o|=u;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(p=a).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===c&&(l=h),s.baseState=l,s.firstBaseUpdate=d,s.lastBaseUpdate=c,null===r&&(s.shared.lanes=0),ud|=o,e.lanes=o,e.memoizedState=h}}function Ba(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Ha(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)Ba(i[e],t)}function za(e,t){try{var i=t.updateQueue,n=null!==i?i.lastEffect:null;if(null!==n){var s=n.next;i=s;do{if((i.tag&e)===e){n=void 0;var r=i.create,o=i.inst;n=r(),o.destroy=n}i=i.next}while(i!==s)}}catch(a){rc(t,t.return,a)}}function Ua(e,t,i){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var r=s.next;n=r;do{if((n.tag&e)===e){var o=n.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,s=t;var l=i;try{a()}catch(d){rc(s,l,d)}}}n=n.next}while(n!==r)}}catch(d){rc(t,t.return,d)}}function Va(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{Ha(t,i)}catch(n){rc(e,e.return,n)}}}function Wa(e,t,i){i.props=Po(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(n){rc(e,t,n)}}function ja(e,t){try{var i=e.ref;if(null!==i){var n=e.stateNode;switch(e.tag){case 26:case 27:case 5:var s=n;break;default:s=n}"function"===typeof i?e.refCleanup=i(s):i.current=s}}catch(r){rc(e,t,r)}}function Ga(e,t){var i=e.ref,n=e.refCleanup;if(null!==i)if("function"===typeof n)try{n()}catch(s){rc(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(r){rc(e,t,r)}else i.current=null}function Ya(e){var t=e.type,i=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break e;case"img":i.src?n.src=i.src:i.srcSet&&(n.srcset=i.srcSet)}}catch(s){rc(e,e.return,s)}}function Ka(e,t,i){try{var n=e.stateNode;!function(e,t,i,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,a=null,l=null,d=null,c=null,h=null;for(m in i){var u=i[m];if(i.hasOwnProperty(m)&&null!=u)switch(m){case"checked":case"value":break;case"defaultValue":d=u;default:n.hasOwnProperty(m)||Gc(e,t,m,null,n,u)}}for(var p in n){var m=n[p];if(u=i[p],n.hasOwnProperty(p)&&(null!=m||null!=u))switch(p){case"type":r=m;break;case"name":s=m;break;case"checked":c=m;break;case"defaultChecked":h=m;break;case"value":a=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:m!==u&&Gc(e,t,p,m,n,u)}}return void ft(e,a,l,d,c,h,r,s);case"select":for(r in m=a=l=p=null,i)if(d=i[r],i.hasOwnProperty(r)&&null!=d)switch(r){case"value":break;case"multiple":m=d;default:n.hasOwnProperty(r)||Gc(e,t,r,null,n,d)}for(s in n)if(r=n[s],d=i[s],n.hasOwnProperty(s)&&(null!=r||null!=d))switch(s){case"value":p=r;break;case"defaultValue":l=r;break;case"multiple":a=r;default:r!==d&&Gc(e,t,s,r,n,d)}return t=l,i=a,n=m,void(null!=p?yt(e,!!i,p,!1):!!n!==!!i&&(null!=t?yt(e,!!i,t,!0):yt(e,!!i,i?[]:"",!1)));case"textarea":for(l in m=p=null,i)if(s=i[l],i.hasOwnProperty(l)&&null!=s&&!n.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Gc(e,t,l,null,n,s)}for(a in n)if(s=n[a],r=i[a],n.hasOwnProperty(a)&&(null!=s||null!=r))switch(a){case"value":p=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==r&&Gc(e,t,a,s,n,r)}return void _t(e,p,m);case"option":for(var g in i)if(p=i[g],i.hasOwnProperty(g)&&null!=p&&!n.hasOwnProperty(g))if("selected"===g)e.selected=!1;else Gc(e,t,g,null,n,p);for(d in n)if(p=n[d],m=i[d],n.hasOwnProperty(d)&&p!==m&&(null!=p||null!=m))if("selected"===d)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Gc(e,t,d,p,n,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var f in i)p=i[f],i.hasOwnProperty(f)&&null!=p&&!n.hasOwnProperty(f)&&Gc(e,t,f,null,n,p);for(c in n)if(p=n[c],m=i[c],n.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:Gc(e,t,c,p,n,m)}return;default:if(xt(t)){for(var v in i)p=i[v],i.hasOwnProperty(v)&&void 0!==p&&!n.hasOwnProperty(v)&&Yc(e,t,v,void 0,n,p);for(h in n)p=n[h],m=i[h],!n.hasOwnProperty(h)||p===m||void 0===p&&void 0===m||Yc(e,t,h,p,n,m);return}}for(var b in i)p=i[b],i.hasOwnProperty(b)&&null!=p&&!n.hasOwnProperty(b)&&Gc(e,t,b,null,n,p);for(u in n)p=n[u],m=i[u],!n.hasOwnProperty(u)||p===m||null==p&&null==m||Gc(e,t,u,p,n,m)}(n,e.type,i,t),n[He]=t}catch(s){rc(e,e.return,s)}}function qa(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Xa(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||qa(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Qa(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===i.nodeType?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(8===i.nodeType?(t=i.parentNode).insertBefore(e,i):(t=i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=jc));else if(4!==n&&27!==n&&null!==(e=e.child))for(Qa(e,t,i),e=e.sibling;null!==e;)Qa(e,t,i),e=e.sibling}function Za(e,t,i){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==n&&27!==n&&null!==(e=e.child))for(Za(e,t,i),e=e.sibling;null!==e;)Za(e,t,i),e=e.sibling}var Ja=!1,el=!1,tl=!1,il="function"===typeof WeakSet?WeakSet:Set,nl=null,sl=!1;function rl(e,t,i){var n=i.flags;switch(i.tag){case 0:case 11:case 15:bl(e,i),4&n&&za(5,i);break;case 1:if(bl(e,i),4&n)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(a){rc(i,i.return,a)}else{var s=Po(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(l){rc(i,i.return,l)}}64&n&&Va(i),512&n&&ja(i,i.return);break;case 3:if(bl(e,i),64&n&&null!==(n=i.updateQueue)){if(e=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:e=i.child.stateNode}try{Ha(n,e)}catch(a){rc(i,i.return,a)}}break;case 26:bl(e,i),512&n&&ja(i,i.return);break;case 27:case 5:bl(e,i),null===t&&4&n&&Ya(i),512&n&&ja(i,i.return);break;case 12:default:bl(e,i);break;case 13:bl(e,i),4&n&&hl(e,i);break;case 22:if(!(s=null!==i.memoizedState||Ja)){t=null!==t&&null!==t.memoizedState||el;var r=Ja,o=el;Ja=s,(el=t)&&!o?_l(e,i,0!==(8772&i.subtreeFlags)):bl(e,i),Ja=r,el=o}512&n&&("manual"===i.memoizedProps.mode?ja(i,i.return):Ga(i,i.return))}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ge(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var al=null,ll=!1;function dl(e,t,i){for(i=i.child;null!==i;)cl(e,t,i),i=i.sibling}function cl(e,t,i){if(be&&"function"===typeof be.onCommitFiberUnmount)try{be.onCommitFiberUnmount(ve,i)}catch($d){}switch(i.tag){case 26:el||Ga(i,t),dl(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:el||Ga(i,t);var n=al,s=ll;for(al=i.stateNode,dl(e,t,i),t=(i=i.stateNode).attributes;t.length;)i.removeAttributeNode(t[0]);Ge(i),al=n,ll=s;break;case 5:el||Ga(i,t);case 6:s=al;var r=ll;if(al=null,dl(e,t,i),ll=r,null!==(al=s))if(ll)try{e=al,n=i.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)}catch(o){rc(i,t,o)}else try{al.removeChild(i.stateNode)}catch(o){rc(i,t,o)}break;case 18:null!==al&&(ll?(t=al,i=i.stateNode,8===t.nodeType?ah(t.parentNode,i):1===t.nodeType&&ah(t,i),vu(t)):ah(al,i.stateNode));break;case 4:n=al,s=ll,al=i.stateNode.containerInfo,ll=!0,dl(e,t,i),al=n,ll=s;break;case 0:case 11:case 14:case 15:el||Ua(2,i,t),el||Ua(4,i,t),dl(e,t,i);break;case 1:el||(Ga(i,t),"function"===typeof(n=i.stateNode).componentWillUnmount&&Wa(i,t,n)),dl(e,t,i);break;case 21:dl(e,t,i);break;case 22:el||Ga(i,t),el=(n=el)||null!==i.memoizedState,dl(e,t,i),el=n;break;default:dl(e,t,i)}}function hl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{vu(e)}catch(i){rc(t,t.return,i)}}function ul(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new il),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new il),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var n=cc.bind(null,e,t);i.has(t)||(i.add(t),t.then(n,n))}))}function pl(e,t){var i=t.deletions;if(null!==i)for(var n=0;n<i.length;n++){var s=i[n],r=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:case 5:al=l.stateNode,ll=!1;break e;case 3:case 4:al=l.stateNode.containerInfo,ll=!0;break e}l=l.return}if(null===al)throw Error(o(160));cl(r,a,s),al=null,ll=!1,null!==(r=s.alternate)&&(r.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}var ml=null;function gl(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:pl(t,e),fl(e),4&n&&(Ua(3,e,e.return),za(3,e),Ua(5,e,e.return));break;case 1:pl(t,e),fl(e),512&n&&(el||null===i||Ga(i,i.return)),64&n&&Ja&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?n:i.concat(n))));break;case 26:var s=ml;if(pl(t,e),fl(e),512&n&&(el||null===i||Ga(i,i.return)),4&n){var r=null!==i?i.memoizedState:null;if(n=e.memoizedState,null===i)if(null===n)if(null===e.stateNode){e:{n=e.type,i=e.memoizedProps,s=s.ownerDocument||s;t:switch(n){case"title":(!(r=s.getElementsByTagName("title")[0])||r[je]||r[Be]||"http://www.w3.org/2000/svg"===r.namespaceURI||r.hasAttribute("itemprop"))&&(r=s.createElement(n),s.head.insertBefore(r,s.querySelector("head > title"))),Kc(r,n,i),r[Be]=e,Qe(r),n=r;break e;case"link":var a=Ih("link","href",s).get(n+(i.href||""));if(a)for(var l=0;l<a.length;l++)if((r=a[l]).getAttribute("href")===(null==i.href?null:i.href)&&r.getAttribute("rel")===(null==i.rel?null:i.rel)&&r.getAttribute("title")===(null==i.title?null:i.title)&&r.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){a.splice(l,1);break t}Kc(r=s.createElement(n),n,i),s.head.appendChild(r);break;case"meta":if(a=Ih("meta","content",s).get(n+(i.content||"")))for(l=0;l<a.length;l++)if((r=a[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&r.getAttribute("name")===(null==i.name?null:i.name)&&r.getAttribute("property")===(null==i.property?null:i.property)&&r.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&r.getAttribute("charset")===(null==i.charSet?null:i.charSet)){a.splice(l,1);break t}Kc(r=s.createElement(n),n,i),s.head.appendChild(r);break;default:throw Error(o(468,n))}r[Be]=e,Qe(r),n=r}e.stateNode=n}else Rh(s,e.type,e.stateNode);else e.stateNode=Eh(s,n,e.memoizedProps);else r!==n?(null===r?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):r.count--,null===n?Rh(s,e.type,e.stateNode):Eh(s,n,e.memoizedProps)):null===n&&null!==e.stateNode&&Ka(e,e.memoizedProps,i.memoizedProps)}break;case 27:if(4&n&&null===e.alternate){s=e.stateNode,r=e.memoizedProps;try{for(var d=s.firstChild;d;){var c=d.nextSibling,h=d.nodeName;d[je]||"HEAD"===h||"BODY"===h||"SCRIPT"===h||"STYLE"===h||"LINK"===h&&"stylesheet"===d.rel.toLowerCase()||s.removeChild(d),d=c}for(var u=e.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);Kc(s,u,r),s[Be]=e,s[He]=r}catch(g){rc(e,e.return,g)}}case 5:if(pl(t,e),fl(e),512&n&&(el||null===i||Ga(i,i.return)),32&e.flags){s=e.stateNode;try{wt(s,"")}catch(g){rc(e,e.return,g)}}4&n&&null!=e.stateNode&&Ka(e,s=e.memoizedProps,null!==i?i.memoizedProps:s),1024&n&&(tl=!0);break;case 6:if(pl(t,e),fl(e),4&n){if(null===e.stateNode)throw Error(o(162));n=e.memoizedProps,i=e.stateNode;try{i.nodeValue=n}catch(g){rc(e,e.return,g)}}break;case 3:if(kh=null,s=ml,ml=mh(t.containerInfo),pl(t,e),ml=s,fl(e),4&n&&null!==i&&i.memoizedState.isDehydrated)try{vu(t.containerInfo)}catch(g){rc(e,e.return,g)}tl&&(tl=!1,vl(e));break;case 4:n=ml,ml=mh(e.stateNode.containerInfo),pl(t,e),fl(e),ml=n;break;case 12:pl(t,e),fl(e);break;case 13:pl(t,e),fl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(_d=le()),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,ul(e,n)));break;case 22:if(512&n&&(el||null===i||Ga(i,i.return)),d=null!==e.memoizedState,c=null!==i&&null!==i.memoizedState,Ja=(h=Ja)||d,el=(u=el)||c,pl(t,e),el=u,Ja=h,fl(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&n&&(t._visibility=d?-2&t._visibility:1|t._visibility,d&&(t=Ja||el,null===i||c||t||yl(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(i=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===i){c=i=t;try{if(s=c.stateNode,d)"function"===typeof(r=s.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{a=c.stateNode;var m=void 0!==(l=c.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null;a.style.display=null==m||"boolean"===typeof m?"":(""+m).trim()}}catch(g){rc(c,c.return,g)}}}else if(6===t.tag){if(null===i){c=t;try{c.stateNode.nodeValue=d?"":c.memoizedProps}catch(g){rc(c,c.return,g)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&n&&(null!==(n=e.updateQueue)&&(null!==(i=n.retryQueue)&&(n.retryQueue=null,ul(e,i))));break;case 19:pl(t,e),fl(e),4&n&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,ul(e,n)));break;case 21:break;default:pl(t,e),fl(e)}}function fl(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var i=e.return;null!==i;){if(qa(i)){var n=i;break e}i=i.return}throw Error(o(160))}switch(n.tag){case 27:var s=n.stateNode;Za(e,Xa(e),s);break;case 5:var r=n.stateNode;32&n.flags&&(wt(r,""),n.flags&=-33),Za(e,Xa(e),r);break;case 3:case 4:var a=n.stateNode.containerInfo;Qa(e,Xa(e),a);break;default:throw Error(o(161))}}}catch(l){rc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;vl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function bl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)rl(e,t.alternate,t),t=t.sibling}function yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ua(4,t,t.return),yl(t);break;case 1:Ga(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&Wa(t,t.return,i),yl(t);break;case 26:case 27:case 5:Ga(t,t.return),yl(t);break;case 22:Ga(t,t.return),null===t.memoizedState&&yl(t);break;default:yl(t)}e=e.sibling}}function _l(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,s=e,r=t,o=r.flags;switch(r.tag){case 0:case 11:case 15:_l(s,r,i),za(4,r);break;case 1:if(_l(s,r,i),"function"===typeof(s=(n=r).stateNode).componentDidMount)try{s.componentDidMount()}catch(d){rc(n,n.return,d)}if(null!==(s=(n=r).updateQueue)){var a=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Ba(l[s],a)}catch(d){rc(n,n.return,d)}}i&&64&o&&Va(r),ja(r,r.return);break;case 26:case 27:case 5:_l(s,r,i),i&&null===n&&4&o&&Ya(r),ja(r,r.return);break;case 12:default:_l(s,r,i);break;case 13:_l(s,r,i),i&&4&o&&hl(s,r);break;case 22:null===r.memoizedState&&_l(s,r,i),ja(r,r.return)}t=t.sibling}}function Sl(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&$s(i))}function wl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&$s(e))}function Cl(e,t,i,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t,i,n),t=t.sibling}function El(e,t,i,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Cl(e,t,i,n),2048&s&&za(9,t);break;case 3:Cl(e,t,i,n),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&$s(e)));break;case 12:if(2048&s){Cl(e,t,i,n),e=t.stateNode;try{var r=t.memoizedProps,o=r.id,a=r.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){rc(t,t.return,l)}}else Cl(e,t,i,n);break;case 23:break;case 22:r=t.stateNode,null!==t.memoizedState?4&r._visibility?Cl(e,t,i,n):xl(e,t):4&r._visibility?Cl(e,t,i,n):(r._visibility|=4,Ol(e,t,i,n,0!==(10256&t.subtreeFlags))),2048&s&&Sl(t.alternate,t);break;case 24:Cl(e,t,i,n),2048&s&&wl(t.alternate,t);break;default:Cl(e,t,i,n)}}function Ol(e,t,i,n,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var r=e,o=t,a=i,l=n,d=o.flags;switch(o.tag){case 0:case 11:case 15:Ol(r,o,a,l,s),za(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?4&c._visibility?Ol(r,o,a,l,s):xl(r,o):(c._visibility|=4,Ol(r,o,a,l,s)),s&&2048&d&&Sl(o.alternate,o);break;case 24:Ol(r,o,a,l,s),s&&2048&d&&wl(o.alternate,o);break;default:Ol(r,o,a,l,s)}t=t.sibling}}function xl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,n=t,s=n.flags;switch(n.tag){case 22:xl(i,n),2048&s&&Sl(n.alternate,n);break;case 24:xl(i,n),2048&s&&wl(n.alternate,n);break;default:xl(i,n)}t=t.sibling}}var Tl=8192;function kl(e){if(e.subtreeFlags&Tl)for(e=e.child;null!==e;)Il(e),e=e.sibling}function Il(e){switch(e.tag){case 26:kl(e),e.flags&Tl&&null!==e.memoizedState&&function(e,t,i){if(null===Dh)throw Error(o(475));var n=Dh;if("stylesheet"===t.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=yh(i.href),r=e.querySelector(_h(s));if(r)return null!==(e=r._p)&&"object"===typeof e&&"function"===typeof e.then&&(n.count++,n=Fh.bind(n),e.then(n,n)),t.state.loading|=4,t.instance=r,void Qe(r);r=e.ownerDocument||e,i=Sh(i),(s=uh.get(s))&&xh(i,s),Qe(r=r.createElement("link"));var a=r;a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Kc(r,"link",i),t.instance=r}null===n.stylesheets&&(n.stylesheets=new Map),n.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(n.count++,t=Fh.bind(n),e.addEventListener("load",t),e.addEventListener("error",t))}}(ml,e.memoizedState,e.memoizedProps);break;case 5:default:kl(e);break;case 3:case 4:var t=ml;ml=mh(e.stateNode.containerInfo),kl(e),ml=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Tl,Tl=16777216,kl(e),Tl=t):kl(e))}}function Rl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Al(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];nl=n,Fl(n,e)}Rl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Dl(e),e=e.sibling}function Dl(e){switch(e.tag){case 0:case 11:case 15:Al(e),2048&e.flags&&Ua(9,e,e.return);break;case 3:case 12:default:Al(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Pl(e)):Al(e)}}function Pl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var n=t[i];nl=n,Fl(n,e)}Rl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ua(8,t,t.return),Pl(t);break;case 22:4&(i=t.stateNode)._visibility&&(i._visibility&=-5,Pl(t));break;default:Pl(t)}e=e.sibling}}function Fl(e,t){for(;null!==nl;){var i=nl;switch(i.tag){case 0:case 11:case 15:Ua(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var n=i.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:$s(i.memoizedState.cache)}if(null!==(n=i.child))n.return=i,nl=n;else e:for(i=e;null!==nl;){var s=(n=nl).sibling,r=n.return;if(ol(n),n===i){nl=null;break e}if(null!==s){s.return=r,nl=s;break e}nl=r}}}function Ml(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ll(e,t,i,n){return new Ml(e,t,i,n)}function Nl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Bl(e,t){var i=e.alternate;return null===i?((i=Ll(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=31457280&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Hl(e,t){e.flags&=31457282;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zl(e,t,i,n,s,r){var a=0;if(n=e,"function"===typeof e)Nl(e)&&(a=1);else if("string"===typeof e)a=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case h:return $l(i.children,s,r,t);case u:a=8,s|=24;break;case p:return(e=Ll(12,i,t,2|s)).elementType=p,e.lanes=r,e;case b:return(e=Ll(13,i,t,s)).elementType=b,e.lanes=r,e;case y:return(e=Ll(19,i,t,s)).elementType=y,e.lanes=r,e;case w:return Ul(i,s,r,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case m:case f:a=10;break e;case g:a=9;break e;case v:a=11;break e;case _:a=14;break e;case S:a=16,n=null;break e}a=29,i=Error(o(130,null===e?"null":typeof e,"")),n=null}return(t=Ll(a,i,t,s)).elementType=e,t.type=n,t.lanes=r,t}function $l(e,t,i,n){return(e=Ll(7,e,n,t)).lanes=i,e}function Ul(e,t,i,n){(e=Ll(22,e,n,t)).elementType=w,e.lanes=i;var s={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=s._current;if(null===e)throw Error(o(456));if(0===(2&s._pendingVisibility)){var t=In(e,2);null!==t&&(s._pendingVisibility|=2,Pd(t,e,2))}},attach:function(){var e=s._current;if(null===e)throw Error(o(456));if(0!==(2&s._pendingVisibility)){var t=In(e,2);null!==t&&(s._pendingVisibility&=-3,Pd(t,e,2))}}};return e.stateNode=s,e}function Vl(e,t,i){return(e=Ll(6,e,null,t)).lanes=i,e}function Wl(e,t,i){return(t=Ll(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jl(e){e.flags|=4}function Gl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Ah(t)){if(null!==(t=ks.current)&&((4194176&sd)===sd?null!==Is:(62914560&sd)!==sd&&0===(536870912&sd)||t!==Is))throw us=ls,as;e.flags|=8192}}function Yl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Re():536870912,e.lanes|=t,fd|=t)}function Kl(e,t){if(!Xn)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;null!==i;)null!==i.alternate&&(n=i),i=i.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ql(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,n=0;if(t)for(var s=e.child;null!==s;)i|=s.lanes|s.childLanes,n|=31457280&s.subtreeFlags,n|=31457280&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)i|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function Xl(e,t,i){var n=t.pendingProps;switch(Yn(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return ql(t),null;case 3:return i=t.stateNode,n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ya(Hs),ee(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ns(t)?jl(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Qn&&(Md(Qn),Qn=null))),ql(t),null;case 26:return i=t.memoizedState,null===e?(jl(t),null!==i?(ql(t),Gl(t,i)):(ql(t),t.flags&=-16777217)):i?i!==e.memoizedState?(jl(t),ql(t),Gl(t,i)):(ql(t),t.flags&=-16777217):(e.memoizedProps!==n&&jl(t),ql(t),t.flags&=-16777217),null;case 27:ie(t),i=Q.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==n&&jl(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return ql(t),null}e=q.current,ns(t)?ts(t):(e=hh(s,n,i),t.stateNode=e,jl(t))}return ql(t),null;case 5:if(ie(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==n&&jl(t);else{if(!n){if(null===t.stateNode)throw Error(o(166));return ql(t),null}if(e=q.current,ns(t))ts(t);else{switch(s=Qc(Q.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof n.is?s.createElement("select",{is:n.is}):s.createElement("select"),n.multiple?e.multiple=!0:n.size&&(e.size=n.size);break;default:e="string"===typeof n.is?s.createElement(i,{is:n.is}):s.createElement(i)}}e[Be]=t,e[He]=n;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(Kc(e,i,n),i){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&jl(t)}}return ql(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==n&&jl(t);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(e=Q.current,ns(t)){if(e=t.stateNode,i=t.memoizedProps,n=null,null!==(s=Kn))switch(s.tag){case 27:case 5:n=s.memoizedProps}e[Be]=t,(e=!!(e.nodeValue===i||null!==n&&!0===n.suppressHydrationWarning||Wc(e.nodeValue,i)))||es(t)}else(e=Qc(e).createTextNode(n))[Be]=t,t.stateNode=e}return ql(t),null;case 13:if(n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=ns(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Be]=t}else ss(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;ql(t),s=!1}else null!==Qn&&(Md(Qn),Qn=null),s=!0;if(!s)return 256&t.flags?(Ps(t),t):(Ps(t),null)}if(Ps(t),0!==(128&t.flags))return t.lanes=i,t;if(i=null!==n,e=null!==e&&null!==e.memoizedState,i){s=null,null!==(n=t.child).alternate&&null!==n.alternate.memoizedState&&null!==n.alternate.memoizedState.cachePool&&(s=n.alternate.memoizedState.cachePool.pool);var r=null;null!==n.memoizedState&&null!==n.memoizedState.cachePool&&(r=n.memoizedState.cachePool.pool),r!==s&&(n.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),Yl(t,t.updateQueue),ql(t),null;case 4:return ee(),null===e&&Fc(t.stateNode.containerInfo),ql(t),null;case 10:return ya(t.type),ql(t),null;case 19:if(Y(Fs),null===(s=t.memoizedState))return ql(t),null;if(n=0!==(128&t.flags),null===(r=s.rendering))if(n)Kl(s,!1);else{if(0!==hd||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(r=Ms(e))){for(t.flags|=128,Kl(s,!1),e=r.updateQueue,t.updateQueue=e,Yl(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)Hl(i,e),i=i.sibling;return K(Fs,1&Fs.current|2),t.child}e=e.sibling}null!==s.tail&&le()>Sd&&(t.flags|=128,n=!0,Kl(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=Ms(r))){if(t.flags|=128,n=!0,e=e.updateQueue,t.updateQueue=e,Yl(t,e),Kl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!r.alternate&&!Xn)return ql(t),null}else 2*le()-s.renderingStartTime>Sd&&536870912!==i&&(t.flags|=128,n=!0,Kl(s,!1),t.lanes=4194304);s.isBackwards?(r.sibling=t.child,t.child=r):(null!==(e=s.last)?e.sibling=r:t.child=r,s.last=r)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=le(),t.sibling=null,e=Fs.current,K(Fs,n?1&e|2:1&e),t):(ql(t),null);case 22:case 23:return Ps(t),Ts(),n=null!==t.memoizedState,null!==e?null!==e.memoizedState!==n&&(t.flags|=8192):n&&(t.flags|=8192),n?0!==(536870912&i)&&0===(128&t.flags)&&(ql(t),6&t.subtreeFlags&&(t.flags|=8192)):ql(t),null!==(i=t.updateQueue)&&Yl(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),n=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(n=t.memoizedState.cachePool.pool),n!==i&&(t.flags|=2048),null!==e&&Y(Ks),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),ya(Hs),ql(t),null;case 25:return null}throw Error(o(156,t.tag))}function Ql(e,t){switch(Yn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ya(Hs),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ie(t),null;case 13:if(Ps(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ss()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Y(Fs),null;case 4:return ee(),null;case 10:return ya(t.type),null;case 22:case 23:return Ps(t),Ts(),null!==e&&Y(Ks),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ya(Hs),null;default:return null}}function Zl(e,t){switch(Yn(t),t.tag){case 3:ya(Hs),ee();break;case 26:case 27:case 5:ie(t);break;case 4:ee();break;case 13:Ps(t);break;case 19:Y(Fs);break;case 10:ya(t.type);break;case 22:case 23:Ps(t),Ts(),null!==e&&Y(Ks);break;case 24:ya(Hs)}}var Jl={getCacheForType:function(e){var t=Oa(Hs),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i}},ed="function"===typeof WeakMap?WeakMap:Map,td=0,id=null,nd=null,sd=0,rd=0,od=null,ad=!1,ld=!1,dd=!1,cd=0,hd=0,ud=0,pd=0,md=0,gd=0,fd=0,vd=null,bd=null,yd=!1,_d=0,Sd=1/0,wd=null,Cd=null,Ed=!1,Od=null,xd=0,Td=0,kd=null,Id=0,Rd=null;function Ad(){if(0!==(2&td)&&0!==sd)return sd&-sd;if(null!==R.T){return 0!==Ws?Ws:Cc()}return Le()}function Dd(){0===gd&&(gd=0===(536870912&sd)||Xn?Ie():536870912);var e=ks.current;return null!==e&&(e.flags|=32),gd}function Pd(e,t,i){(e===id&&2===rd||null!==e.cancelPendingCommit)&&(Ud(e,0),Bd(e,sd,gd,!1)),De(e,i),0!==(2&td)&&e===id||(e===id&&(0===(2&td)&&(pd|=i),4===hd&&Bd(e,sd,gd,!1)),vc(e))}function Fd(e,t,i){if(0!==(6&td))throw Error(o(327));for(var n=!i&&0===(60&t)&&0===(t&e.expiredLanes)||Te(e,t),s=n?function(e,t){var i=td;td|=2;var n=Wd(),s=jd();id!==e||sd!==t?(wd=null,Sd=le()+500,Ud(e,t)):ld=Te(e,t);e:for(;;)try{if(0!==rd&&null!==nd){t=nd;var r=od;t:switch(rd){case 1:rd=0,od=null,Zd(e,t,r,1);break;case 2:if(ds(r)){rd=0,od=null,Qd(t);break}t=function(){2===rd&&id===e&&(rd=7),vc(e)},r.then(t,t);break e;case 3:rd=7;break e;case 4:rd=5;break e;case 7:ds(r)?(rd=0,od=null,Qd(t)):(rd=0,od=null,Zd(e,t,r,7));break;case 5:var a=null;switch(nd.tag){case 26:a=nd.memoizedState;case 5:case 27:var l=nd;if(!a||Ah(a)){rd=0,od=null;var d=l.sibling;if(null!==d)nd=d;else{var c=l.return;null!==c?(nd=c,Jd(c)):nd=null}break t}}rd=0,od=null,Zd(e,t,r,5);break;case 6:rd=0,od=null,Zd(e,t,r,6);break;case 8:zd(),hd=6;break e;default:throw Error(o(462))}}qd();break}catch(h){Vd(e,h)}return va=fa=null,R.H=n,R.A=s,td=i,null!==nd?0:(id=null,sd=0,xn(),hd)}(e,t):Yd(e,t,!0),r=n;;){if(0===s){ld&&!n&&Bd(e,t,0,!1);break}if(6===s)Bd(e,t,0,!ad);else{if(i=e.current.alternate,r&&!Nd(i)){s=Yd(e,t,!1),r=!1;continue}if(2===s){if(r=t,e.errorRecoveryDisabledLanes&r)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;s=vd;var d=l.current.memoizedState.isDehydrated;if(d&&(Ud(l,a).flags|=256),2!==(a=Yd(l,a,!1))){if(dd&&!d){l.errorRecoveryDisabledLanes|=r,pd|=r,s=4;break e}r=bd,bd=s,null!==r&&Md(r)}s=a}if(r=!1,2!==s)continue}}if(1===s){Ud(e,0),Bd(e,t,0,!0);break}e:{switch(n=e,s){case 0:case 1:throw Error(o(345));case 4:if((4194176&t)===t){Bd(n,t,gd,!ad);break e}break;case 2:bd=null;break;case 3:case 5:break;default:throw Error(o(329))}if(n.finishedWork=i,n.finishedLanes=t,(62914560&t)===t&&10<(r=_d+300-le())){if(Bd(n,t,gd,!ad),0!==xe(n,0))break e;n.timeoutHandle=ih(Ld.bind(null,n,i,bd,wd,yd,t,gd,pd,fd,ad,2,-0,0),r)}else Ld(n,i,bd,wd,yd,t,gd,pd,fd,ad,0,-0,0)}}break}vc(e)}function Md(e){null===bd?bd=e:bd.push.apply(bd,e)}function Ld(e,t,i,n,s,r,a,l,d,c,h,u,p){var m=t.subtreeFlags;if((8192&m||16785408===(16785408&m))&&(Dh={stylesheets:null,count:0,unsuspend:Ph},Il(t),null!==(t=function(){if(null===Dh)throw Error(o(475));var e=Dh;return e.stylesheets&&0===e.count&&Lh(e,e.stylesheets),0<e.count?function(t){var i=setTimeout((function(){if(e.stylesheets&&Lh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}())))return e.cancelPendingCommit=t(tc.bind(null,e,i,n,s,a,l,d,1,u,p)),void Bd(e,r,a,!c);tc(e,i,n,s,a,l,d,h,u,p)}function Nd(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var n=0;n<i.length;n++){var s=i[n],r=s.getSnapshot;s=s.value;try{if(!Yi(r(),s))return!1}catch(o){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bd(e,t,i,n){t&=~md,t&=~pd,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var r=31-_e(s),o=1<<r;n[r]=-1,s&=~o}0!==i&&Pe(e,i,t)}function Hd(){return 0!==(6&td)||(bc(0,!1),!1)}function zd(){if(null!==nd){if(0===rd)var e=nd.return;else va=fa=null,vr(e=nd),ms=null,gs=0,e=nd;for(;null!==e;)Zl(e.alternate,e),e=e.return;nd=null}}function Ud(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,nh(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),zd(),id=e,nd=i=Bl(e.current,null),sd=t,rd=0,od=null,ad=!1,ld=Te(e,t),dd=!1,fd=gd=md=pd=ud=hd=0,bd=vd=null,yd=!1,0!==(8&t)&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var s=31-_e(n),r=1<<s;t|=e[s],n&=~r}return cd=t,xn(),i}function Vd(e,t){Js=null,R.H=Oo,t===os?(t=ps(),rd=3):t===as?(t=ps(),rd=4):rd=t===Vo?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,od=t,null===nd&&(hd=1,Bo(e,Fn(t,e.current)))}function Wd(){var e=R.H;return R.H=Oo,null===e?Oo:e}function jd(){var e=R.A;return R.A=Jl,e}function Gd(){hd=4,ad||(4194176&sd)!==sd&&null!==ks.current||(ld=!0),0===(134217727&ud)&&0===(134217727&pd)||null===id||Bd(id,sd,gd,!1)}function Yd(e,t,i){var n=td;td|=2;var s=Wd(),r=jd();id===e&&sd===t||(wd=null,Ud(e,t)),t=!1;var o=hd;e:for(;;)try{if(0!==rd&&null!==nd){var a=nd,l=od;switch(rd){case 8:zd(),o=6;break e;case 3:case 2:case 6:null===ks.current&&(t=!0);var d=rd;if(rd=0,od=null,Zd(e,a,l,d),i&&ld){o=0;break e}break;default:d=rd,rd=0,od=null,Zd(e,a,l,d)}}Kd(),o=hd;break}catch(c){Vd(e,c)}return t&&e.shellSuspendCounter++,va=fa=null,td=n,R.H=s,R.A=r,null===nd&&(id=null,sd=0,xn()),o}function Kd(){for(;null!==nd;)Xd(nd)}function qd(){for(;null!==nd&&!oe();)Xd(nd)}function Xd(e){var t=ma(e.alternate,e,cd);e.memoizedProps=e.pendingProps,null===t?Jd(e):nd=t}function Qd(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Jo(i,t,t.pendingProps,t.type,void 0,sd);break;case 11:t=Jo(i,t,t.pendingProps,t.type.render,t.ref,sd);break;case 5:vr(t);default:Zl(i,t),t=ma(i,t=nd=Hl(t,cd),cd)}e.memoizedProps=e.pendingProps,null===t?Jd(e):nd=t}function Zd(e,t,i,n){va=fa=null,vr(t),ms=null,gs=0;var s=t.return;try{if(function(e,t,i,n,s){if(i.flags|=32768,null!==n&&"object"===typeof n&&"function"===typeof n.then){if(null!==(t=i.alternate)&&wa(t,i,s,!0),null!==(i=ks.current)){switch(i.tag){case 13:return null===Is?Gd():null===i.alternate&&0===hd&&(hd=3),i.flags&=-257,i.flags|=65536,i.lanes=s,n===ls?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([n]):t.add(n),oc(e,n,s)),!1;case 22:return i.flags|=65536,n===ls?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([n])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([n]):i.add(n),oc(e,n,s)),!1}throw Error(o(435,i.tag))}return oc(e,n,s),Gd(),!1}if(Xn)return null!==(t=ks.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,n!==Jn&&rs(Fn(e=Error(o(422),{cause:n}),i))):(n!==Jn&&rs(Fn(t=Error(o(423),{cause:n}),i)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,n=Fn(n,i),Fa(e,s=zo(e.stateNode,n,s)),4!==hd&&(hd=2)),!1;var r=Error(o(520),{cause:n});if(r=Fn(r,i),null===vd?vd=[r]:vd.push(r),4!==hd&&(hd=2),null===t)return!0;n=Fn(n,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=s&-s,i.lanes|=e,Fa(i,e=zo(i.stateNode,n,e)),!1;case 1:if(t=i.type,r=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==r&&"function"===typeof r.componentDidCatch&&(null===Cd||!Cd.has(r))))return i.flags|=65536,s&=-s,i.lanes|=s,Uo(s=$o(s),e,i,n),Fa(i,s),!1}i=i.return}while(null!==i);return!1}(e,s,t,i,sd))return hd=1,Bo(e,Fn(i,e.current)),void(nd=null)}catch(r){if(null!==s)throw nd=s,r;return hd=1,Bo(e,Fn(i,e.current)),void(nd=null)}32768&t.flags?(Xn||1===n?e=!0:ld||0!==(536870912&sd)?e=!1:(ad=e=!0,(2===n||3===n||6===n)&&(null!==(n=ks.current)&&13===n.tag&&(n.flags|=16384))),ec(t,e)):Jd(t)}function Jd(e){var t=e;do{if(0!==(32768&t.flags))return void ec(t,ad);e=t.return;var i=Xl(t.alternate,t,cd);if(null!==i)return void(nd=i);if(null!==(t=t.sibling))return void(nd=t);nd=t=e}while(null!==t);0===hd&&(hd=5)}function ec(e,t){do{var i=Ql(e.alternate,e);if(null!==i)return i.flags&=32767,void(nd=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(nd=e);nd=e=i}while(null!==e);hd=6,nd=null}function tc(e,t,i,n,s,r,a,l,d,c){var h=R.T,u=U.p;try{U.p=2,R.T=null,function(e,t,i,n,s,r,a,l){do{nc()}while(null!==Od);if(0!==(6&td))throw Error(o(327));var d=e.finishedWork;if(n=e.finishedLanes,null===d)return null;if(e.finishedWork=null,e.finishedLanes=0,d===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var c=d.lanes|d.childLanes;if(function(e,t,i,n,s,r){var o=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,d=e.hiddenUpdates;for(i=o&~i;0<i;){var c=31-_e(i),h=1<<c;a[c]=0,l[c]=-1;var u=d[c];if(null!==u)for(d[c]=null,c=0;c<u.length;c++){var p=u[c];null!==p&&(p.lane&=-536870913)}i&=~h}0!==n&&Pe(e,n,0),0!==r&&0===s&&0!==e.tag&&(e.suspendedLanes|=r&~(o&~t))}(e,n,c|=On,r,a,l),e===id&&(nd=id=null,sd=0),0===(10256&d.subtreeFlags)&&0===(10256&d.flags)||Ed||(Ed=!0,Td=c,kd=i,function(e,t){se(e,t)}(ue,(function(){return nc(),null}))),i=0!==(15990&d.flags),0!==(15990&d.subtreeFlags)||i?(i=R.T,R.T=null,r=U.p,U.p=2,a=td,td|=4,function(e,t){if(e=e.containerInfo,qc=Gh,Ji(e=Zi(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(n&&0!==n.rangeCount){i=n.anchorNode;var s=n.anchorOffset,r=n.focusNode;n=n.focusOffset;try{i.nodeType,r.nodeType}catch(f){i=null;break e}var a=0,l=-1,d=-1,c=0,h=0,u=e,p=null;t:for(;;){for(var m;u!==i||0!==s&&3!==u.nodeType||(l=a+s),u!==r||0!==n&&3!==u.nodeType||(d=a+n),3===u.nodeType&&(a+=u.nodeValue.length),null!==(m=u.firstChild);)p=u,u=m;for(;;){if(u===e)break t;if(p===i&&++c===s&&(l=a),p===r&&++h===n&&(d=a),null!==(m=u.nextSibling))break;p=(u=p).parentNode}u=m}i=-1===l||-1===d?null:{start:l,end:d}}else i=null}i=i||{start:0,end:0}}else i=null;for(Xc={focusedElem:e,selectionRange:i},Gh=!1,nl=t;null!==nl;)if(e=(t=nl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nl=e;else for(;null!==nl;){switch(r=(t=nl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==r){e=void 0,i=t,s=r.memoizedProps,r=r.memoizedState,n=i.stateNode;try{var g=Po(i.type,s,(i.elementType,i.type));e=n.getSnapshotBeforeUpdate(g,r),n.__reactInternalSnapshotBeforeUpdate=e}catch(v){rc(i,i.return,v)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))lh(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":lh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,nl=e;break}nl=t.return}g=sl,sl=!1}(e,d),gl(d,e),en(Xc,e.containerInfo),Gh=!!qc,Xc=qc=null,e.current=d,rl(e,d.alternate,d),ae(),td=a,U.p=r,R.T=i):e.current=d,Ed?(Ed=!1,Od=e,xd=n):ic(e,c),c=e.pendingLanes,0===c&&(Cd=null),function(e){if(be&&"function"===typeof be.onCommitFiberRoot)try{be.onCommitFiberRoot(ve,e,void 0,128===(128&e.current.flags))}catch($d){}}(d.stateNode),vc(e),null!==t)for(s=e.onRecoverableError,d=0;d<t.length;d++)c=t[d],s(c.value,{componentStack:c.stack});0!==(3&xd)&&nc(),c=e.pendingLanes,0!==(4194218&n)&&0!==(42&c)?e===Rd?Id++:(Id=0,Rd=e):Id=0,bc(0,!1)}(e,t,i,n,u,s,r,a)}finally{R.T=h,U.p=u}}function ic(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,$s(t)))}function nc(){if(null!==Od){var e=Od,t=Td;Td=0;var i=Me(xd),n=R.T,s=U.p;try{if(U.p=32>i?32:i,R.T=null,null===Od)var r=!1;else{i=kd,kd=null;var a=Od,l=xd;if(Od=null,xd=0,0!==(6&td))throw Error(o(331));var d=td;if(td|=4,Dl(a.current),El(a,a.current,l,i),td=d,bc(0,!1),be&&"function"===typeof be.onPostCommitFiberRoot)try{be.onPostCommitFiberRoot(ve,a)}catch($d){}r=!0}return r}finally{U.p=s,R.T=n,ic(e,t)}}return!1}function sc(e,t,i){t=Fn(i,t),null!==(e=Da(e,t=zo(e.stateNode,t,2),2))&&(De(e,2),vc(e))}function rc(e,t,i){if(3===e.tag)sc(e,e,i);else for(;null!==t;){if(3===t.tag){sc(t,e,i);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===Cd||!Cd.has(n))){e=Fn(i,e),null!==(n=Da(t,i=$o(2),2))&&(Uo(i,n,t,e),De(n,2),vc(n));break}}t=t.return}}function oc(e,t,i){var n=e.pingCache;if(null===n){n=e.pingCache=new ed;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(i)||(dd=!0,s.add(i),e=ac.bind(null,e,t,i),t.then(e,e))}function ac(e,t,i){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,id===e&&(sd&i)===i&&(4===hd||3===hd&&(62914560&sd)===sd&&300>le()-_d?0===(2&td)&&Ud(e,0):md|=i,fd===sd&&(fd=0)),vc(e)}function lc(e,t){0===t&&(t=Re()),null!==(e=In(e,t))&&(De(e,t),vc(e))}function dc(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),lc(e,i)}function cc(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;null!==s&&(i=s.retryLane);break;case 19:n=e.stateNode;break;case 22:n=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==n&&n.delete(t),lc(e,i)}var hc=null,uc=null,pc=!1,mc=!1,gc=!1,fc=0;function vc(e){var t;e!==uc&&null===e.next&&(null===uc?hc=uc=e:uc=uc.next=e),mc=!0,pc||(pc=!0,t=yc,rh((function(){0!==(6&td)?se(ce,t):t()})))}function bc(e,t){if(!gc&&mc){gc=!0;do{for(var i=!1,n=hc;null!==n;){if(!t)if(0!==e){var s=n.pendingLanes;if(0===s)var r=0;else{var o=n.suspendedLanes,a=n.pingedLanes;r=(1<<31-_e(42|e)+1)-1,r=201326677&(r&=s&~(o&~a))?201326677&r|1:r?2|r:0}0!==r&&(i=!0,wc(n,r))}else r=sd,0===(3&(r=xe(n,n===id?r:0)))||Te(n,r)||(i=!0,wc(n,r));n=n.next}}while(i);gc=!1}}function yc(){mc=pc=!1;var e=0;0!==fc&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==th&&(th=e,!0);return th=null,!1}()&&(e=fc),fc=0);for(var t=le(),i=null,n=hc;null!==n;){var s=n.next,r=_c(n,t);0===r?(n.next=null,null===i?hc=s:i.next=s,null===s&&(uc=i)):(i=n,(0!==e||0!==(3&r))&&(mc=!0)),n=s}bc(e,!1)}function _c(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,r=-62914561&e.pendingLanes;0<r;){var o=31-_e(r),a=1<<o,l=s[o];-1===l?0!==(a&i)&&0===(a&n)||(s[o]=ke(a,t)):l<=t&&(e.expiredLanes|=a),r&=~a}if(i=sd,i=xe(e,e===(t=id)?i:0),n=e.callbackNode,0===i||e===t&&2===rd||null!==e.cancelPendingCommit)return null!==n&&null!==n&&re(n),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||Te(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==n&&re(n),Me(i)){case 2:case 8:i=he;break;case 32:default:i=ue;break;case 268435456:i=me}return n=Sc.bind(null,e),i=se(i,n),e.callbackPriority=t,e.callbackNode=i,t}return null!==n&&null!==n&&re(n),e.callbackPriority=2,e.callbackNode=null,2}function Sc(e,t){var i=e.callbackNode;if(nc()&&e.callbackNode!==i)return null;var n=sd;return 0===(n=xe(e,e===id?n:0))?null:(Fd(e,n,t),_c(e,le()),null!=e.callbackNode&&e.callbackNode===i?Sc.bind(null,e):null)}function wc(e,t){if(nc())return null;Fd(e,t,!0)}function Cc(){return 0===fc&&(fc=Ie()),fc}function Ec(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Oc(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var xc=0;xc<Sn.length;xc++){var Tc=Sn[xc];wn(Tc.toLowerCase(),"on"+(Tc[0].toUpperCase()+Tc.slice(1)))}wn(pn,"onAnimationEnd"),wn(mn,"onAnimationIteration"),wn(gn,"onAnimationStart"),wn("dblclick","onDoubleClick"),wn("focusin","onFocus"),wn("focusout","onBlur"),wn(fn,"onTransitionRun"),wn(vn,"onTransitionStart"),wn(bn,"onTransitionCancel"),wn(yn,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ic=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kc));function Rc(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var n=e[i],s=n.event;n=n.listeners;e:{var r=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,d=a.currentTarget;if(a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=d;try{r(s)}catch(c){Fo(c)}s.currentTarget=null,r=l}else for(o=0;o<n.length;o++){if(l=(a=n[o]).instance,d=a.currentTarget,a=a.listener,l!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=d;try{r(s)}catch(c){Fo(c)}s.currentTarget=null,r=l}}}}function Ac(e,t){var i=t[$e];void 0===i&&(i=t[$e]=new Set);var n=e+"__bubble";i.has(n)||(Mc(t,e,2,!1),i.add(n))}function Dc(e,t,i){var n=0;t&&(n|=4),Mc(i,e,n,t)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Fc(e){if(!e[Pc]){e[Pc]=!0,Ze.forEach((function(t){"selectionchange"!==t&&(Ic.has(t)||Dc(t,!1,e),Dc(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Pc]||(t[Pc]=!0,Dc("selectionchange",!1,t))}}function Mc(e,t,i,n){switch(Jh(t)){case 2:var s=Yh;break;case 8:s=Kh;break;default:s=qh}i=s.bind(null,t,i,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,i,{capture:!0,passive:s}):e.addEventListener(t,i,!0):void 0!==s?e.addEventListener(t,i,{passive:s}):e.addEventListener(t,i,!1)}function Lc(e,t,i,n,s){var r=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var a=n.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=n.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=Ye(a)))return;if(5===(l=o.tag)||6===l||26===l||27===l){n=r=o;continue e}a=a.parentNode}}n=n.return}Lt((function(){var n=r,s=At(i),o=[];e:{var a=_n.get(e);if(void 0!==a){var l=Zt,d=e;switch(e){case"keypress":if(0===Wt(i))break e;case"keydown":case"keyup":l=pi;break;case"focusin":d="focus",l=si;break;case"focusout":d="blur",l=si;break;case"beforeblur":case"afterblur":l=si;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ii;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=gi;break;case pn:case mn:case gn:l=ri;break;case yn:l=fi;break;case"scroll":case"scrollend":l=ei;break;case"wheel":l=vi;break;case"copy":case"cut":case"paste":l=oi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=mi;break;case"toggle":case"beforetoggle":l=bi}var c=0!==(4&t),h=!c&&("scroll"===e||"scrollend"===e),u=c?null!==a?a+"Capture":null:a;c=[];for(var p,m=n;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===u||null!=(g=Nt(m,u))&&c.push(Nc(m,g,p)),h)break;m=m.return}0<c.length&&(a=new l(a,d,null,i,s),o.push({event:a,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||i===Rt||!(d=i.relatedTarget||i.fromElement)||!Ye(d)&&!d[ze])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(d=(d=i.relatedTarget||i.toElement)?Ye(d):null)&&(h=N(d),c=d.tag,d!==h||5!==c&&27!==c&&6!==c)&&(d=null)):(l=null,d=n),l!==d)){if(c=ii,g="onMouseLeave",u="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(c=mi,g="onPointerLeave",u="onPointerEnter",m="pointer"),h=null==l?a:qe(l),p=null==d?a:qe(d),(a=new c(g,m+"leave",l,i,s)).target=h,a.relatedTarget=p,g=null,Ye(s)===n&&((c=new c(u,m+"enter",d,i,s)).target=p,c.relatedTarget=h,g=c),h=g,l&&d)e:{for(u=d,m=0,p=c=l;p;p=Hc(p))m++;for(p=0,g=u;g;g=Hc(g))p++;for(;0<m-p;)c=Hc(c),m--;for(;0<p-m;)u=Hc(u),p--;for(;m--;){if(c===u||null!==u&&c===u.alternate)break e;c=Hc(c),u=Hc(u)}c=null}else c=null;null!==l&&zc(o,a,l,c,!1),null!==d&&null!==h&&zc(o,h,d,c,!0)}if("select"===(l=(a=n?qe(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var f=Li;else if(Ri(a))if(Ni)f=Gi;else{f=Wi;var v=Vi}else!(l=a.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?n&&xt(n.elementType)&&(f=Li):f=ji;switch(f&&(f=f(e,n))?Ai(o,f,i,s):(v&&v(e,a,n),"focusout"===e&&n&&"number"===a.type&&null!=n.memoizedProps.value&&bt(a,"number",a.value)),v=n?qe(n):window,e){case"focusin":(Ri(v)||"true"===v.contentEditable)&&(nn=v,sn=n,rn=null);break;case"focusout":rn=sn=nn=null;break;case"mousedown":on=!0;break;case"contextmenu":case"mouseup":case"dragend":on=!1,an(o,i,s);break;case"selectionchange":if(tn)break;case"keydown":case"keyup":an(o,i,s)}var b;if(_i)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ki?xi(e,i)&&(y="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(y="onCompositionStart");y&&(Ci&&"ko"!==i.locale&&(ki||"onCompositionStart"!==y?"onCompositionEnd"===y&&ki&&(b=Vt()):($t="value"in(zt=s)?zt.value:zt.textContent,ki=!0)),0<(v=Bc(n,y)).length&&(y=new ai(y,e,null,i,s),o.push({event:y,listeners:v}),b?y.data=b:null!==(b=Ti(i))&&(y.data=b))),(b=wi?function(e,t){switch(e){case"compositionend":return Ti(t);case"keypress":return 32!==t.which?null:(Oi=!0,Ei);case"textInput":return(e=t.data)===Ei&&Oi?null:e;default:return null}}(e,i):function(e,t){if(ki)return"compositionend"===e||!_i&&xi(e,t)?(e=Vt(),Ut=$t=zt=null,ki=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ci&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(y=Bc(n,"onBeforeInput")).length&&(v=new ai("onBeforeInput","beforeinput",null,i,s),o.push({event:v,listeners:y}),v.data=b)),function(e,t,i,n,s){if("submit"===t&&i&&i.stateNode===s){var r=Ec((s[He]||null).action),o=n.submitter;o&&null!==(t=(t=o[He]||null)?Ec(t.formAction):o.getAttribute("formAction"))&&(r=t,o=null);var a=new Zt("action","action",null,n,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==fc){var e=o?Oc(s,o):new FormData(s);ho(i,{pending:!0,data:e,method:s.method,action:r},null,e)}}else"function"===typeof r&&(a.preventDefault(),e=o?Oc(s,o):new FormData(s),ho(i,{pending:!0,data:e,method:s.method,action:r},r,e))},currentTarget:s}]})}}(o,e,n,i,s)}Rc(o,t)}))}function Nc(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Bc(e,t){for(var i=t+"Capture",n=[];null!==e;){var s=e,r=s.stateNode;5!==(s=s.tag)&&26!==s&&27!==s||null===r||(null!=(s=Nt(e,i))&&n.unshift(Nc(e,s,r)),null!=(s=Nt(e,t))&&n.push(Nc(e,s,r))),e=e.return}return n}function Hc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function zc(e,t,i,n,s){for(var r=t._reactName,o=[];null!==i&&i!==n;){var a=i,l=a.alternate,d=a.stateNode;if(a=a.tag,null!==l&&l===n)break;5!==a&&26!==a&&27!==a||null===d||(l=d,s?null!=(d=Nt(i,r))&&o.unshift(Nc(i,d,l)):s||null!=(d=Nt(i,r))&&o.push(Nc(i,d,l))),i=i.return}0!==o.length&&e.push({event:t,listeners:o})}var $c=/\r\n?/g,Uc=/\u0000|\uFFFD/g;function Vc(e){return("string"===typeof e?e:""+e).replace($c,"\n").replace(Uc,"")}function Wc(e,t){return t=Vc(t),Vc(e)===t}function jc(){}function Gc(e,t,i,n,s,r){switch(i){case"children":"string"===typeof n?"body"===t||"textarea"===t&&""===n||wt(e,n):("number"===typeof n||"bigint"===typeof n)&&"body"!==t&&wt(e,""+n);break;case"className":at(e,"class",n);break;case"tabIndex":at(e,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":at(e,i,n);break;case"style":Ot(e,n,r);break;case"data":if("object"!==t){at(e,"data",n);break}case"src":case"href":if(""===n&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==n||"function"===typeof n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=It(""+n),e.setAttribute(i,n);break;case"action":case"formAction":if("function"===typeof n){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof r&&("formAction"===i?("input"!==t&&Gc(e,t,"name",s.name,s,null),Gc(e,t,"formEncType",s.formEncType,s,null),Gc(e,t,"formMethod",s.formMethod,s,null),Gc(e,t,"formTarget",s.formTarget,s,null)):(Gc(e,t,"encType",s.encType,s,null),Gc(e,t,"method",s.method,s,null),Gc(e,t,"target",s.target,s,null))),null==n||"symbol"===typeof n||"boolean"===typeof n){e.removeAttribute(i);break}n=It(""+n),e.setAttribute(i,n);break;case"onClick":null!=n&&(e.onclick=jc);break;case"onScroll":null!=n&&Ac("scroll",e);break;case"onScrollEnd":null!=n&&Ac("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(i=n.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=i}}break;case"multiple":e.multiple=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"muted":e.muted=n&&"function"!==typeof n&&"symbol"!==typeof n;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==n||"function"===typeof n||"boolean"===typeof n||"symbol"===typeof n){e.removeAttribute("xlink:href");break}i=It(""+n),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""+n):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===n?e.setAttribute(i,""):!1!==n&&null!=n&&"function"!==typeof n&&"symbol"!==typeof n?e.setAttribute(i,n):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=n&&"function"!==typeof n&&"symbol"!==typeof n&&!isNaN(n)&&1<=n?e.setAttribute(i,n):e.removeAttribute(i);break;case"rowSpan":case"start":null==n||"function"===typeof n||"symbol"===typeof n||isNaN(n)?e.removeAttribute(i):e.setAttribute(i,n);break;case"popover":Ac("beforetoggle",e),Ac("toggle",e),ot(e,"popover",n);break;case"xlinkActuate":lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":lt(e,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":lt(e,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":lt(e,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":lt(e,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":ot(e,"is",n);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&ot(e,i=Tt.get(i)||i,n)}}function Yc(e,t,i,n,s,r){switch(i){case"style":Ot(e,n,r);break;case"dangerouslySetInnerHTML":if(null!=n){if("object"!==typeof n||!("__html"in n))throw Error(o(61));if(null!=(i=n.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=i}}break;case"children":"string"===typeof n?wt(e,n):("number"===typeof n||"bigint"===typeof n)&&wt(e,""+n);break;case"onScroll":null!=n&&Ac("scroll",e);break;case"onScrollEnd":null!=n&&Ac("scrollend",e);break;case"onClick":null!=n&&(e.onclick=jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Je.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(s=i.endsWith("Capture"),t=i.slice(2,s?i.length-7:void 0),"function"===typeof(r=null!=(r=e[He]||null)?r[i]:null)&&e.removeEventListener(t,r,s),"function"!==typeof n)?i in e?e[i]=n:!0===n?e.setAttribute(i,""):ot(e,i,n):("function"!==typeof r&&null!==r&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,n,s)))}}function Kc(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ac("error",e),Ac("load",e);var n,s=!1,r=!1;for(n in i)if(i.hasOwnProperty(n)){var a=i[n];if(null!=a)switch(n){case"src":s=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Gc(e,t,n,a,i,null)}}return r&&Gc(e,t,"srcSet",i.srcSet,i,null),void(s&&Gc(e,t,"src",i.src,i,null));case"input":Ac("invalid",e);var l=n=a=r=null,d=null,c=null;for(s in i)if(i.hasOwnProperty(s)){var h=i[s];if(null!=h)switch(s){case"name":r=h;break;case"type":a=h;break;case"checked":d=h;break;case"defaultChecked":c=h;break;case"value":n=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Gc(e,t,s,h,i,null)}}return vt(e,n,l,d,c,a,r,!1),void ht(e);case"select":for(r in Ac("invalid",e),s=a=n=null,i)if(i.hasOwnProperty(r)&&null!=(l=i[r]))switch(r){case"value":n=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Gc(e,t,r,l,i,null)}return t=n,i=a,e.multiple=!!s,void(null!=t?yt(e,!!s,t,!1):null!=i&&yt(e,!!s,i,!0));case"textarea":for(a in Ac("invalid",e),n=r=s=null,i)if(i.hasOwnProperty(a)&&null!=(l=i[a]))switch(a){case"value":s=l;break;case"defaultValue":r=l;break;case"children":n=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Gc(e,t,a,l,i,null)}return St(e,s,r,n),void ht(e);case"option":for(d in i)if(i.hasOwnProperty(d)&&null!=(s=i[d]))if("selected"===d)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Gc(e,t,d,s,i,null);return;case"dialog":Ac("cancel",e),Ac("close",e);break;case"iframe":case"object":Ac("load",e);break;case"video":case"audio":for(s=0;s<kc.length;s++)Ac(kc[s],e);break;case"image":Ac("error",e),Ac("load",e);break;case"details":Ac("toggle",e);break;case"embed":case"source":case"link":Ac("error",e),Ac("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in i)if(i.hasOwnProperty(c)&&null!=(s=i[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Gc(e,t,c,s,i,null)}return;default:if(xt(t)){for(h in i)i.hasOwnProperty(h)&&(void 0!==(s=i[h])&&Yc(e,t,h,s,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(s=i[l])&&Gc(e,t,l,s,i,null))}var qc=null,Xc=null;function Qc(e){return 9===e.nodeType?e:e.ownerDocument}function Zc(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Jc(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function eh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var th=null;var ih="function"===typeof setTimeout?setTimeout:void 0,nh="function"===typeof clearTimeout?clearTimeout:void 0,sh="function"===typeof Promise?Promise:void 0,rh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sh?function(e){return sh.resolve(null).then(e).catch(oh)}:ih;function oh(e){setTimeout((function(){throw e}))}function ah(e,t){var i=t,n=0;do{var s=i.nextSibling;if(e.removeChild(i),s&&8===s.nodeType)if("/$"===(i=s.data)){if(0===n)return e.removeChild(s),void vu(t);n--}else"$"!==i&&"$?"!==i&&"$!"!==i||n++;i=s}while(i);vu(t)}function lh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":lh(i),Ge(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function dh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function ch(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}function hh(e,t,i){switch(t=Qc(i),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}var uh=new Map,ph=new Set;function mh(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var gh=U.d;U.d={f:function(){var e=gh.f(),t=Hd();return e||t},r:function(e){var t=Ke(e);null!==t&&5===t.tag&&"form"===t.type?po(t):gh.r(e)},D:function(e){gh.D(e),vh("dns-prefetch",e,null)},C:function(e,t){gh.C(e,t),vh("preconnect",e,t)},L:function(e,t,i){gh.L(e,t,i);var n=fh;if(n&&e&&t){var s='link[rel="preload"][as="'+gt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(s+='[imagesrcset="'+gt(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(s+='[imagesizes="'+gt(i.imageSizes)+'"]')):s+='[href="'+gt(e)+'"]';var r=s;switch(t){case"style":r=yh(e);break;case"script":r=wh(e)}uh.has(r)||(e=A({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),uh.set(r,e),null!==n.querySelector(s)||"style"===t&&n.querySelector(_h(r))||"script"===t&&n.querySelector(Ch(r))||(Kc(t=n.createElement("link"),"link",e),Qe(t),n.head.appendChild(t)))}},m:function(e,t){gh.m(e,t);var i=fh;if(i&&e){var n=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+gt(n)+'"][href="'+gt(e)+'"]',r=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=wh(e)}if(!uh.has(r)&&(e=A({rel:"modulepreload",href:e},t),uh.set(r,e),null===i.querySelector(s))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Ch(r)))return}Kc(n=i.createElement("link"),"link",e),Qe(n),i.head.appendChild(n)}}},X:function(e,t){gh.X(e,t);var i=fh;if(i&&e){var n=Xe(i).hoistableScripts,s=wh(e),r=n.get(s);r||((r=i.querySelector(Ch(s)))||(e=A({src:e,async:!0},t),(t=uh.get(s))&&Th(e,t),Qe(r=i.createElement("script")),Kc(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}},S:function(e,t,i){gh.S(e,t,i);var n=fh;if(n&&e){var s=Xe(n).hoistableStyles,r=yh(e);t=t||"default";var o=s.get(r);if(!o){var a={loading:0,preload:null};if(o=n.querySelector(_h(r)))a.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":t},i),(i=uh.get(r))&&xh(e,i);var l=o=n.createElement("link");Qe(l),Kc(l,"link",e),l._p=new Promise((function(e,t){l.onload=e,l.onerror=t})),l.addEventListener("load",(function(){a.loading|=1})),l.addEventListener("error",(function(){a.loading|=2})),a.loading|=4,Oh(o,t,n)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(r,o)}}},M:function(e,t){gh.M(e,t);var i=fh;if(i&&e){var n=Xe(i).hoistableScripts,s=wh(e),r=n.get(s);r||((r=i.querySelector(Ch(s)))||(e=A({src:e,async:!0,type:"module"},t),(t=uh.get(s))&&Th(e,t),Qe(r=i.createElement("script")),Kc(r,"link",e),i.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},n.set(s,r))}}};var fh="undefined"===typeof document?null:document;function vh(e,t,i){var n=fh;if(n&&"string"===typeof t&&t){var s=gt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof i&&(s+='[crossorigin="'+i+'"]'),ph.has(s)||(ph.add(s),e={rel:e,crossOrigin:i,href:t},null===n.querySelector(s)&&(Kc(t=n.createElement("link"),"link",e),Qe(t),n.head.appendChild(t)))}}function bh(e,t,i,n){var s,r,a,l,d=(d=Q.current)?mh(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=yh(i.href),(n=(i=Xe(d).hoistableStyles).get(t))||(n={type:"style",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=yh(i.href);var c=Xe(d).hoistableStyles,h=c.get(e);if(h||(d=d.ownerDocument||d,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,h),(c=d.querySelector(_h(e)))&&!c._p&&(h.instance=c,h.state.loading=5),uh.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},uh.set(e,i),c||(s=d,r=e,a=i,l=h.state,s.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=s.createElement("link"),l.preload=r,r.addEventListener("load",(function(){return l.loading|=1})),r.addEventListener("error",(function(){return l.loading|=2})),Kc(r,"link",a),Qe(r),s.head.appendChild(r))))),t&&null===n)throw Error(o(528,""));return h}if(t&&null!==n)throw Error(o(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=wh(i),(n=(i=Xe(d).hoistableScripts).get(t))||(n={type:"script",instance:null,count:0,state:null},i.set(t,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function yh(e){return'href="'+gt(e)+'"'}function _h(e){return'link[rel="stylesheet"]['+e+"]"}function Sh(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function wh(e){return'[src="'+gt(e)+'"]'}function Ch(e){return"script[async]"+e}function Eh(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var n=e.querySelector('style[data-href~="'+gt(i.href)+'"]');if(n)return t.instance=n,Qe(n),n;var s=A({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return Qe(n=(e.ownerDocument||e).createElement("style")),Kc(n,"style",s),Oh(n,i.precedence,e),t.instance=n;case"stylesheet":s=yh(i.href);var r=e.querySelector(_h(s));if(r)return t.state.loading|=4,t.instance=r,Qe(r),r;n=Sh(i),(s=uh.get(s))&&xh(n,s),Qe(r=(e.ownerDocument||e).createElement("link"));var a=r;return a._p=new Promise((function(e,t){a.onload=e,a.onerror=t})),Kc(r,"link",n),t.state.loading|=4,Oh(r,i.precedence,e),t.instance=r;case"script":return r=wh(i.src),(s=e.querySelector(Ch(r)))?(t.instance=s,Qe(s),s):(n=i,(s=uh.get(r))&&Th(n=A({},i),s),Qe(s=(e=e.ownerDocument||e).createElement("script")),Kc(s,"link",n),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(n=t.instance,t.state.loading|=4,Oh(n,i.precedence,e));return t.instance}function Oh(e,t,i){for(var n=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,r=s,o=0;o<n.length;o++){var a=n[o];if(a.dataset.precedence===t)r=a;else if(r!==s)break}r?r.parentNode.insertBefore(e,r.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function xh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var kh=null;function Ih(e,t,i){if(null===kh){var n=new Map,s=kh=new Map;s.set(i,n)}else(n=(s=kh).get(i))||(n=new Map,s.set(i,n));if(n.has(e))return n;for(n.set(e,null),i=i.getElementsByTagName(e),s=0;s<i.length;s++){var r=i[s];if(!(r[je]||r[Be]||"link"===e&&"stylesheet"===r.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==r.namespaceURI){var o=r.getAttribute(t)||"";o=e+o;var a=n.get(o);a?a.push(r):n.set(o,[r])}}return n}function Rh(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function Ah(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Dh=null;function Ph(){}function Fh(){if(this.count--,0===this.count)if(this.stylesheets)Lh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Mh=null;function Lh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Mh=new Map,t.forEach(Nh,e),Mh=null,Fh.call(e))}function Nh(e,t){if(!(4&t.state.loading)){var i=Mh.get(e);if(i)var n=i.get(null);else{i=new Map,Mh.set(e,i);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(i.set(o.dataset.precedence,o),n=o)}n&&i.set(null,n)}o=(s=t.instance).getAttribute("data-precedence"),(r=i.get(o)||n)===n&&i.set(null,s),i.set(o,s),this.count++,n=Fh.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),r?r.parentNode.insertBefore(s,r.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Bh={$$typeof:f,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function Hh(e,t,i,n,s,r,o,a){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ae(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ae(0),this.hiddenUpdates=Ae(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function zh(e,t,i,n,s,r,o,a,l,d,c,h){return e=new Hh(e,t,i,o,a,l,d,h),t=1,!0===r&&(t|=24),r=Ll(3,null,null,t),e.current=r,r.stateNode=e,(t=zs()).refCount++,e.pooledCache=t,t.refCount++,r.memoizedState={element:n,isDehydrated:i,cache:t},Ia(r),e}function $h(e){return e?e=Dn:Dn}function Uh(e,t,i,n,s,r){s=$h(s),null===n.context?n.context=s:n.pendingContext=s,(n=Aa(t)).payload={element:i},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(i=Da(e,n,t))&&(Pd(i,0,t),Pa(i,e,t))}function Vh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function Wh(e,t){Vh(e,t),(e=e.alternate)&&Vh(e,t)}function jh(e){if(13===e.tag){var t=In(e,67108864);null!==t&&Pd(t,0,67108864),Wh(e,67108864)}}var Gh=!0;function Yh(e,t,i,n){var s=R.T;R.T=null;var r=U.p;try{U.p=2,qh(e,t,i,n)}finally{U.p=r,R.T=s}}function Kh(e,t,i,n){var s=R.T;R.T=null;var r=U.p;try{U.p=8,qh(e,t,i,n)}finally{U.p=r,R.T=s}}function qh(e,t,i,n){if(Gh){var s=Xh(n);if(null===s)Lc(e,t,n,Qh,i),lu(e,n);else if(function(e,t,i,n,s){switch(t){case"focusin":return tu=du(tu,e,t,i,n,s),!0;case"dragenter":return iu=du(iu,e,t,i,n,s),!0;case"mouseover":return nu=du(nu,e,t,i,n,s),!0;case"pointerover":var r=s.pointerId;return su.set(r,du(su.get(r)||null,e,t,i,n,s)),!0;case"gotpointercapture":return r=s.pointerId,ru.set(r,du(ru.get(r)||null,e,t,i,n,s)),!0}return!1}(s,e,t,i,n))n.stopPropagation();else if(lu(e,n),4&t&&-1<au.indexOf(e)){for(;null!==s;){var r=Ke(s);if(null!==r)switch(r.tag){case 3:if((r=r.stateNode).current.memoizedState.isDehydrated){var o=Oe(r.pendingLanes);if(0!==o){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-_e(o);a.entanglements[1]|=l,o&=~l}vc(r),0===(6&td)&&(Sd=le()+500,bc(0,!1))}}break;case 13:null!==(a=In(r,2))&&Pd(a,0,2),Hd(),Wh(r,2)}if(null===(r=Xh(n))&&Lc(e,t,n,Qh,i),r===s)break;s=r}null!==s&&n.stopPropagation()}else Lc(e,t,n,null,i)}}function Xh(e){return Zh(e=At(e))}var Qh=null;function Zh(e){if(Qh=null,null!==(e=Ye(e))){var t=N(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=B(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qh=e,null}function Jh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(de()){case ce:return 2;case he:return 8;case ue:case pe:return 32;case me:return 268435456;default:return 32}default:return 32}}var eu=!1,tu=null,iu=null,nu=null,su=new Map,ru=new Map,ou=[],au="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lu(e,t){switch(e){case"focusin":case"focusout":tu=null;break;case"dragenter":case"dragleave":iu=null;break;case"mouseover":case"mouseout":nu=null;break;case"pointerover":case"pointerout":su.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ru.delete(t.pointerId)}}function du(e,t,i,n,s,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:r,targetContainers:[s]},null!==t&&(null!==(t=Ke(t))&&jh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function cu(e){var t=Ye(e.target);if(null!==t){var i=N(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=B(i)))return e.blockedOn=t,void function(e,t){var i=U.p;try{return U.p=e,t()}finally{U.p=i}}(e.priority,(function(){if(13===i.tag){var e=Ad(),t=In(i,e);null!==t&&Pd(t,0,e),Wh(i,e)}}))}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function hu(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=Xh(e.nativeEvent);if(null!==i)return null!==(t=Ke(i))&&jh(t),e.blockedOn=i,!1;var n=new(i=e.nativeEvent).constructor(i.type,i);Rt=n,i.target.dispatchEvent(n),Rt=null,t.shift()}return!0}function uu(e,t,i){hu(e)&&i.delete(t)}function pu(){eu=!1,null!==tu&&hu(tu)&&(tu=null),null!==iu&&hu(iu)&&(iu=null),null!==nu&&hu(nu)&&(nu=null),su.forEach(uu),ru.forEach(uu)}function mu(e,t){e.blockedOn===t&&(e.blockedOn=null,eu||(eu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,pu)))}var gu=null;function fu(e){gu!==e&&(gu=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,(function(){gu===e&&(gu=null);for(var t=0;t<e.length;t+=3){var i=e[t],n=e[t+1],s=e[t+2];if("function"!==typeof n){if(null===Zh(n||i))continue;break}var r=Ke(i);null!==r&&(e.splice(t,3),t-=3,ho(r,{pending:!0,data:s,method:i.method,action:n},n,s))}})))}function vu(e){function t(t){return mu(t,e)}null!==tu&&mu(tu,e),null!==iu&&mu(iu,e),null!==nu&&mu(nu,e),su.forEach(t),ru.forEach(t);for(var i=0;i<ou.length;i++){var n=ou[i];n.blockedOn===e&&(n.blockedOn=null)}for(;0<ou.length&&null===(i=ou[0]).blockedOn;)cu(i),null===i.blockedOn&&ou.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<i.length;n+=3){var s=i[n],r=i[n+1],o=s[He]||null;if("function"===typeof r)o||fu(i);else if(o){var a=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[He]||null)a=o.formAction;else if(null!==Zh(s))continue}else a=o.action;"function"===typeof a?i[n+1]=a:(i.splice(n,3),n-=3),fu(i)}}}function bu(e){this._internalRoot=e}function yu(e){this._internalRoot=e}yu.prototype.render=bu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Uh(t.current,Ad(),e,t,null,null)},yu.prototype.unmount=bu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&nc(),Uh(e.current,2,null,e,null,null),Hd(),t[ze]=null}},yu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ou.length&&0!==t&&t<ou[i].priority;i++);ou.splice(i,0,e),0===i&&cu(e)}};var _u=s.version;if("19.0.0"!==_u)throw Error(o(527,_u,"19.0.0"));U.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=N(e)))throw Error(o(188));return t!==e?null:e}for(var i=e,n=t;;){var s=i.return;if(null===s)break;var r=s.alternate;if(null===r){if(null!==(n=s.return)){i=n;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===i)return H(s),e;if(r===n)return H(s),t;r=r.sibling}throw Error(o(188))}if(i.return!==n.return)i=s,n=r;else{for(var a=!1,l=s.child;l;){if(l===i){a=!0,i=s,n=r;break}if(l===n){a=!0,n=s,i=r;break}l=l.sibling}if(!a){for(l=r.child;l;){if(l===i){a=!0,i=r,n=s;break}if(l===n){a=!0,n=r,i=s;break}l=l.sibling}if(!a)throw Error(o(189))}}if(i.alternate!==n)throw Error(o(190))}if(3!==i.tag)throw Error(o(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?z(e):null)?null:e.stateNode};var Su={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:Ye,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{ve=wu.inject(Su),be=wu}catch($d){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var i=!1,n="",s=Mo,r=Lo,l=No;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(r=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=zh(e,1,!1,null,0,i,n,s,r,l,0,null),e[ze]=t.current,Fc(8===e.nodeType?e.parentNode:e),new bu(t)}},672:(e,t,i)=>{var n=i(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var o={d:{f:r,r:function(){throw Error(s(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==n?null:""+n,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=i,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,n=d(i,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,r="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:n,integrity:s,fetchPriority:r}):"script"===i&&o.d.X(e,{crossOrigin:n,integrity:s,fetchPriority:r,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=d(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,n=d(i,t.crossOrigin);o.d.L(e,i,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=d(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.0.0"},391:(e,t,i)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch($d){console.error($d)}}(),e.exports=i(4)},950:(e,t,i)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch($d){console.error($d)}}(),e.exports=i(672)},799:(e,t)=>{var i=Symbol.for("react.transitional.element");function n(e,t,n){var s=null;if(void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),"key"in t)for(var r in n={},t)"key"!==r&&(n[r]=t[r]);else n=t;return t=n.ref,{$$typeof:i,type:e,key:s,ref:void 0!==t?t:null,props:n}}Symbol.for("react.fragment"),t.jsx=n},288:(e,t)=>{var i=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,f={};function v(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||m}function b(){}function y(e,t,i){this.props=e,this.context=t,this.refs=f,this.updater=i||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var _=y.prototype=new b;_.constructor=y,g(_,v.prototype),_.isPureReactComponent=!0;var S=Array.isArray,w={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function E(e,t,n,s,r,o){return n=o.ref,{$$typeof:i,type:e,key:t,ref:void 0!==n?n:null,props:o}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var x=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function k(){}function I(e,t,s,r,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,d,c=!1;if(null===e)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case i:case n:c=!0;break;case u:return I((c=e._init)(e._payload),t,s,r,o)}}if(c)return o=o(e),c=""===r?"."+T(e,0):r,S(o)?(s="",null!=c&&(s=c.replace(x,"$&/")+"/"),I(o,t,s,"",(function(e){return e}))):null!=o&&(O(o)&&(l=o,d=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+c,o=E(l.type,d,void 0,0,0,l.props)),t.push(o)),1;c=0;var h,m=""===r?".":r+":";if(S(e))for(var g=0;g<e.length;g++)c+=I(r=e[g],t,s,a=m+T(r,g),o);else if("function"===typeof(g=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=g.call(e),g=0;!(r=e.next()).done;)c+=I(r=r.value,t,s,a=m+T(r,g++),o);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(k,k):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,r,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function R(e,t,i){if(null==e)return e;var n=[],s=0;return I(e,n,"","",(function(e){return t.call(i,e,s++)})),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function P(){}t.Children={map:R,forEach:function(e,t,i){R(e,(function(){t.apply(this,arguments)}),i)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=s,t.Profiler=o,t.PureComponent=y,t.StrictMode=r,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var n=g({},e.props),s=e.key;if(null!=t)for(r in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!C.call(t,r)||"key"===r||"__self"===r||"__source"===r||"ref"===r&&void 0===t.ref||(n[r]=t[r]);var r=arguments.length-2;if(1===r)n.children=i;else if(1<r){for(var o=Array(r),a=0;a<r;a++)o[a]=arguments[a+2];n.children=o}return E(e.type,s,void 0,0,0,n)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,i){var n,s={},r=null;if(null!=t)for(n in void 0!==t.key&&(r=""+t.key),t)C.call(t,n)&&"key"!==n&&"__self"!==n&&"__source"!==n&&(s[n]=t[n]);var o=arguments.length-2;if(1===o)s.children=i;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===s[n]&&(s[n]=o[n]);return E(e,r,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:u,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,i={};w.T=i;try{var n=e(),s=w.S;null!==s&&s(i,n),"object"===typeof n&&null!==n&&"function"===typeof n.then&&n.then(P,D)}catch(r){D(r)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,i){return w.H.useActionState(e,t,i)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return w.H.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,i){return w.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return w.H.useReducer(e,t,i)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return w.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return w.H.useTransition()},t.version="19.0.0"},43:(e,t,i)=>{e.exports=i(288)},579:(e,t,i)=>{e.exports=i(799)},896:(e,t)=>{function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var n=i-1>>>1,s=e[n];if(!(0<r(s,t)))break e;e[n]=t,e[i]=s,i=n}}function n(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var n=0,s=e.length,o=s>>>1;n<o;){var a=2*(n+1)-1,l=e[a],d=a+1,c=e[d];if(0>r(l,i))d<s&&0>r(c,l)?(e[n]=c,e[d]=i,n=d):(e[n]=l,e[a]=i,n=a);else{if(!(d<s&&0>r(c,i)))break e;e[n]=c,e[d]=i,n=d}}}return t}function r(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var d=[],c=[],h=1,u=null,p=3,m=!1,g=!1,f=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=n(c);null!==t;){if(null===t.callback)s(c);else{if(!(t.startTime<=e))break;s(c),t.sortIndex=t.expirationTime,i(d,t)}t=n(c)}}function S(e){if(f=!1,_(e),!g)if(null!==n(d))g=!0,A();else{var t=n(c);null!==t&&D(S,t.startTime-e)}}var w,C=!1,E=-1,O=5,x=-1;function T(){return!(t.unstable_now()-x<O)}function k(){if(C){var e=t.unstable_now();x=e;var i=!0;try{e:{g=!1,f&&(f=!1,b(E),E=-1),m=!0;var r=p;try{t:{for(_(e),u=n(d);null!==u&&!(u.expirationTime>e&&T());){var o=u.callback;if("function"===typeof o){u.callback=null,p=u.priorityLevel;var a=o(u.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){u.callback=a,_(e),i=!0;break t}u===n(d)&&s(d),_(e)}else s(d);u=n(d)}if(null!==u)i=!0;else{var l=n(c);null!==l&&D(S,l.startTime-e),i=!1}}break e}finally{u=null,p=r,m=!1}i=void 0}}finally{i?w():C=!1}}}if("function"===typeof y)w=function(){y(k)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,R=I.port2;I.port1.onmessage=k,w=function(){R.postMessage(null)}}else w=function(){v(k,0)};function A(){C||(C=!0,w())}function D(e,i){E=v((function(){e(t.unstable_now())}),i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,A())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,s,r){var o=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?o+r:o:r=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:r,expirationTime:a=r+a,sortIndex:-1},r>o?(e.sortIndex=r,i(c,e),null===n(d)&&e===n(c)&&(f?(b(E),E=-1):f=!0,D(S,r-o))):(e.sortIndex=a,i(d,e),g||m||(g=!0,A())),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},853:(e,t,i)=>{e.exports=i(896)}},t={};function i(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};i.r(n),i.d(n,{BackendUtilityService:()=>h});var s={};i.r(s),i.d(s,{collectionObserver:()=>u,propertyObserver:()=>p});var r={};i.r(r),i.d(r,{CancelledException:()=>T,addTreeLevelAndAggregatorsByMutation:()=>A,addTreeLevelByMutation:()=>R,cancellablePromise:()=>k,castObservableToPromise:()=>I,decimalFormatted:()=>L,findItemInTreeStructure:()=>M,findOrDefault:()=>K,flattenToParentChildArray:()=>D,formatNumber:()=>N,getCellValueFromQueryFieldGetter:()=>B,getColumnFieldType:()=>$,getDescendantProperty:()=>H,getTranslationPrefix:()=>z,getTreeDataOptionPropName:()=>P,isColumnDateType:()=>U,mapOperatorByFieldType:()=>j,mapOperatorToShorthandDesignation:()=>W,mapOperatorType:()=>V,objectWithoutKey:()=>G,thousandSeparatorFormatted:()=>Y,unflattenParentChildArrayToTree:()=>F,unsubscribeAll:()=>q});var o={};i.r(o),i.d(o,{addToArrayWhenNotExists:()=>we,addWhiteSpaces:()=>Ce,arrayRemoveItemByIndex:()=>Ee,calculateAvailableSpace:()=>X,classNameToList:()=>Z,createDomElement:()=>Q,deepCopy:()=>Oe,deepMerge:()=>xe,destroyAllElementProps:()=>J,emptyElement:()=>ee,emptyObject:()=>Te,extend:()=>Se,findFirstAttribute:()=>oe,findWidthOrDefault:()=>ae,getFunctionDetails:()=>ke,getHtmlStringOutput:()=>te,getInnerSize:()=>se,getOffset:()=>ne,getOffsetRelativeToParent:()=>ie,getStyleProp:()=>re,htmlEncode:()=>le,htmlEncodeWithPadding:()=>ce,htmlEntityDecode:()=>de,insertAfterElement:()=>he,isDefined:()=>Re,isDefinedNumber:()=>Ae,isEmptyObject:()=>Ie,isNumber:()=>Me,isObject:()=>De,isObjectEmpty:()=>Le,isPrimitiveOrHTML:()=>Fe,isPrimitiveValue:()=>Pe,parseBoolean:()=>Ne,removeAccentFromText:()=>Be,setDeepValue:()=>He,stripTags:()=>Ze,titleCase:()=>ze,toCamelCase:()=>$e,toKebabCase:()=>Ue,toSentenceCase:()=>Ve,toSnakeCase:()=>We,uniqueArray:()=>je,uniqueObjectArray:()=>Ge,windowScrollPosition:()=>ue});var a={};i.r(a),i.d(a,{sortByFieldType:()=>Ht});var l,d=i(43),c=i(391);!function(e){e.local="local",e.remote="remote"}(l||(l={}));class h{constructor(e){this.rxjs=e,this._infiniteScrollBottomHit=!1}addRxJsResource(e){this.rxjs=e}executeBackendProcessesCallback(e,t,i,n){const s=new Date;t&&i.service.postProcess&&i.service.postProcess(t),t&&i?.internalPostProcess&&i.internalPostProcess(t),void 0!==i.postProcess&&(t instanceof Object&&(t.metrics={startTime:e,endTime:s,executionTime:s.valueOf()-e.valueOf(),itemCount:n,totalItemCount:n},i.service.options?.infiniteScroll&&(t.infiniteScrollBottomHit=this._infiniteScrollBottomHit,delete t.itemCount)),i.postProcess(t),this.setInfiniteScrollBottomHit(!1))}onBackendError(e,t){if("function"!==typeof t?.onError)throw e;t.onError(e)}executeBackendCallback(e,t,i,n,s,r){if(e){i&&!i.clearFilterTriggered&&!i.clearSortTriggered&&r?.emitActionChangedCallback&&r.emitActionChangedCallback.call(this,l.remote);const o=e.process(t);if(o instanceof Promise&&o.then)o.then((t=>{this.executeBackendProcessesCallback(n,t,e,s),r?.successCallback?.call(this,i)})).catch((t=>{r?.errorCallback?.call(this,i),this.onBackendError(t,e)}));else if(this.rxjs?.isObservable(o)){const t=this.rxjs;t.isObservable(r?.httpCancelRequestSubject)&&r?.httpCancelRequestSubject.next(),o.pipe(t.takeUntil(t.iif((()=>t.isObservable(r?.httpCancelRequestSubject)),r?.httpCancelRequestSubject,t.EMPTY))).subscribe((t=>{this.executeBackendProcessesCallback(n,t,e,s),r?.successCallback?.call(this,i)}),(t=>{r?.errorCallback?.call(this,i),this.onBackendError(t,e)}))}}}refreshBackendDataset(e){let t="";const i=e?.backendServiceApi;if(!i||!i.service||!i.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(i.service&&(t=i.service.buildQuery()),t&&""!==t){const n=new Date;i.preProcess&&i.preProcess();const s=e?.pagination?.totalItems??0;this.executeBackendCallback(i,t,null,n,s)}}setInfiniteScrollBottomHit(e){this._infiniteScrollBottomHit=e}}function u(e,t){if(Array.isArray(e)){const i=["pop","push","reverse","shift","unshift","splice","sort"],n=[];i.forEach((i=>{e[i]=function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];const a=Array.prototype[i].apply(e,r);return n.push({method:i,action:a}),t.apply(e,[e,r]),a}}));return{disconnect:()=>i.forEach((t=>{e[t]=()=>n[t].action}))}}return null}function p(e,t,i){let n=e[t];Object.defineProperty(e,t,{configurable:!0,get:()=>n,set(s){n=s,i.apply(e,[s,e[t]])}})}Array.prototype.map,Array.prototype.reduce;const m=e=>e;class g{}var f,v,b;g.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FILTER_SHORTCUTS:"Filter Shortcuts",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_DARK_MODE:"Toggle Dark Mode",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},g.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},g.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2,g.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2,g.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2,g.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4,g.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0,g.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0,g.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".",g.DEFAULT_NUMBER_THOUSAND_SEPARATOR="",g.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1,g.SLIDER_DEFAULT_MIN_VALUE=0,g.SLIDER_DEFAULT_MAX_VALUE=100,g.SLIDER_DEFAULT_STEP=1,g.VALIDATION_REQUIRED_FIELD="Field is required",g.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",g.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",g.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",g.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",g.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",g.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",g.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",g.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",g.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",g.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",g.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",g.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",g.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",g.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",g.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",g.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",g.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",g.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)",function(e){e[e.camelCase=0]="camelCase",e[e.pascalCase=1]="pascalCase",e[e.snakeCase=2]="snakeCase",e[e.kebabCase=3]="kebabCase"}(f||(f={})),function(e){e.colon=":",e.comma=",",e.equalSign="=",e.pipe="|",e.semicolon=";",e.space=" ",e.tab="\t",e.doubleColon="::",e.doublePipe="||",e.doubleSemicolon=";;"}(v||(v={})),function(e){e.autoTooltip="autoTooltip",e.cellExternalCopyManager="cellExternalCopyManager",e.cellMenu="cellMenu",e.checkboxSelector="checkboxSelector",e.columnPicker="columnPicker",e.contextMenu="contextMenu",e.customTooltip="customTooltip",e.draggableGrouping="draggableGrouping",e.groupItemMetaProvider="groupItemMetaProvider",e.gridMenu="gridMenu",e.headerButton="headerButton",e.headerMenu="headerMenu",e.rowBasedEdit="rowBasedEdit",e.rowDetailView="rowDetailView",e.rowMoveManager="rowMoveManager",e.rowSelection="rowSelection"}(b||(b={}));const y={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var _,S,w,C,E,O,x;!function(e){e.csv="csv",e.txt="txt",e.xls="xls",e.xlsx="xlsx"}(_||(_={})),function(e){e.merge="merge",e.chain="chain"}(S||(S={})),function(e){e.columns="columns",e.filter="filter",e.pagination="pagination",e.pinning="pinning",e.rowSelection="rowSelection",e.sorter="sorter",e.treeData="treeData"}(w||(w={})),function(e){e.empty="",e.custom="Custom",e.contains="Contains",e.notContains="Not_Contains",e.lessThan="LT",e.lessThanOrEqual="LE",e.greaterThan="GT",e.greaterThanOrEqual="GE",e.notEqual="NE",e.equal="EQ",e.endsWith="EndsWith",e.rangeInclusive="RangeInclusive",e.rangeExclusive="RangeExclusive",e.startsWith="StartsWith",e.startsWithEndsWith="StartsWithEndsWith",e.in="IN",e.notIn="NOT_IN",e.inContains="IN_CONTAINS",e.notInContains="NOT_IN_CONTAINS",e.inCollection="IN_COLLECTION",e.notInCollection="NOT_IN_COLLECTION"}(C||(C={})),function(e){e.asc="asc",e.ASC="ASC",e.desc="desc",e.DESC="DESC"}(E||(E={})),function(e){e[e.asc=1]="asc",e[e.desc=-1]="desc",e[e.neutral=0]="neutral"}(O||(O={})),function(e){e.toggleCollapse="toggle-collapse",e.fullExpand="full-expand",e.fullCollapse="full-collapse",e.toggleExpand="toggle-expand"}(x||(x={}));class T extends Error{constructor(e){super(e),Object.setPrototypeOf(this,T.prototype)}}function k(e){let t=!1;return e instanceof Promise?{promise:e.then((e=>{if(t)throw new T("Cancelled Promise");return e})),cancel:()=>t=!0}:e}function I(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=t;if(t instanceof Promise)return t;if(e.isObservable(t)&&(n=e.firstValueFrom(t)),!(n instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${i} is not able to convert the Observable into a Promise.`);return n}function R(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=P(t,"childrenPropName");Array.isArray(e)&&e.forEach((e=>{e&&(Array.isArray(e[n])&&e[n].length>0&&(i++,R(e[n],t,i),i--),e[t.levelPropName]=i)}))}function A(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s=P(t,"childrenPropName"),{aggregator:r}=t;Array.isArray(e)&&e.forEach((e=>{if(e){const o=Array.isArray(e[s]);Array.isArray(e[s])&&e[s].length>0&&(r.init(e,!0),i++,A(e[s],t,i,e),i--),n&&r.isInitialized&&"function"===typeof r.accumulate&&!e?.__filteredOut&&(r.accumulate(e,o),r.storeResult(n.__treeTotals)),e[t.levelPropName]=i}}))}function D(e,t){const i=P(t,"identifierPropName"),n=P(t,"childrenPropName"),s=P(t,"hasChildrenPropName"),r=P(t,"parentPropName"),o=P(t,"levelPropName");t?.shouldAddTreeLevelNumber&&(Array.isArray(t?.aggregators)?t.aggregators.forEach((t=>{A(e,{childrenPropName:n,levelPropName:o,aggregator:t})})):R(e,{childrenPropName:n,levelPropName:o}));const a=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};const s=e&&e.length?[{pointer:e,offset:0}]:[],r=[];let o;for(;s.length;)for(o=s.pop();o.offset<o.pointer.length;){const e=o.pointer[o.offset],a=n(e),l=t(e);r.push(i(e,o.node,a,o.nodeId)),o.offset+=1,l&&(s.push(o),o={pointer:l,offset:0,node:e,nodeId:a})}return r}(e,(e=>e[n]),((e,t)=>({[i]:e[i],[r]:void 0!==t?t[i]:null,[s]:!!e[n],...G(e,n)})));return a}function P(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n="";switch(t){case"childrenPropName":n=e?.childrenPropName??g.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":n=e?.collapsedPropName??g.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":n=e?.hasChildrenPropName??g.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":n=e?.identifierPropName??i;break;case"levelPropName":n=e?.levelPropName??g.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":n=e?.parentPropName??g.treeDataProperties.PARENT_PROP}return n}function F(e,t){const i=P(t,"identifierPropName"),n=P(t,"childrenPropName"),s=P(t,"parentPropName"),r=P(t,"levelPropName"),o=P(t,"collapsedPropName"),a=[],l={};return(e||[]).forEach((e=>{l[e[i]]=e,delete e[n]})),Object.keys(l).forEach((e=>{const i=l[e];if(s in i&&null!==i[s]&&void 0!==i[s]&&""!==i[s]){if(i[s]in l){const e=l[i[s]];n in e||(e[n]=[]),e[n].push(i),void 0===e[o]&&(e[o]=t?.initiallyCollapsed??!1)}}else a.push(i)})),Array.isArray(t?.aggregators)?t.aggregators.forEach((e=>{A(a,{childrenPropName:n,levelPropName:r,aggregator:e},0)})):R(a,{childrenPropName:n,levelPropName:r},0),a}function M(e,t,i){if(!i)throw new Error('findItemInTreeStructure requires parameter "childrenPropertyName"');const n=e.find(t),s=e.filter((e=>i in e&&e[i]));if(n)return n;if(s.length){const e=[];for(const t of s)i in t&&e.push(...t[i]);return M(e,t,i)}}function L(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(isNaN(+e))return e;const r=void 0===t?2:t,o=void 0===i?2:i;let a=String(Math.round(+e*Math.pow(10,o))/Math.pow(10,o));for(a.indexOf(".")<0&&r>0&&(a+=".");a.length-a.indexOf(".")<=r;)a+="0";const l=a.split(".");let d,c;d=s?l.length>=1?Y(l[0],s):void 0:l.length>=1?l[0]:a,l.length>1&&(c=l[1]);let h="";return void 0!==d&&void 0!==c?h=`${d}${n}${c}`:void 0!==d&&null!==d&&(h=d),h}function N(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:".",a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";if(isNaN(+e))return e;const l=Math.round(1e6*parseFloat(e))/1e6;if(l<0){const e=Math.abs(l);if(n){if(!isNaN(t)||!isNaN(i))return`(${s}${L(e,t,i,o,a)}${r})`;return`(${s}${Y(`${e}`,a)}${r})`}if(!isNaN(t)||!isNaN(i))return`-${s}${L(e,t,i,o,a)}${r}`;return`-${s}${Y(`${e}`,a)}${r}`}if(!isNaN(t)||!isNaN(i))return`${s}${L(e,t,i,o,a)}${r}`;return`${s}${Y(`${e}`,a)}${r}`}function B(e,t,i){if("function"===typeof e.queryFieldNameGetterFn){const n=e.queryFieldNameGetterFn(t);i=n?.indexOf(".")>=0?H(t,n):t.hasOwnProperty(n)?t[n]:i}return i}function H(e,t){return e&&t?t.split(".").reduce(((e,t)=>e&&e[t]),e):e}function z(e){return e&&e.translationNamespace?e.translationNamespace+(e.translationNamespaceSeparator||""):""}function $(e){return e.outputType||e.type||y.string}function U(e){switch(e){case y.date:case y.dateTime:case y.dateIso:case y.dateTimeIso:case y.dateTimeShortIso:case y.dateTimeIsoAmPm:case y.dateTimeIsoAM_PM:case y.dateEuro:case y.dateEuroShort:case y.dateTimeEuro:case y.dateTimeShortEuro:case y.dateTimeEuroAmPm:case y.dateTimeEuroAM_PM:case y.dateTimeEuroShort:case y.dateTimeEuroShortAmPm:case y.dateTimeEuroShortAM_PM:case y.dateUs:case y.dateUsShort:case y.dateTimeUs:case y.dateTimeShortUs:case y.dateTimeUsAmPm:case y.dateTimeUsAM_PM:case y.dateTimeUsShort:case y.dateTimeUsShortAmPm:case y.dateTimeUsShortAM_PM:case y.dateUtc:return!0;default:return!1}}function V(e){let t;switch(e){case"<":case"LT":t=C.lessThan;break;case"<=":case"LE":t=C.lessThanOrEqual;break;case">":case"GT":t=C.greaterThan;break;case">=":case"GE":t=C.greaterThanOrEqual;break;case"!=":case"NE":t=C.notEqual;break;case"*":case"a*":case"StartsWith":t=C.startsWith;break;case"*z":case"EndsWith":t=C.endsWith;break;case"=":case"==":case"EQ":t=C.equal;break;case"IN":t=C.in;break;case"NIN":case"NOT_IN":t=C.notIn;break;case"<>":case"Not_Contains":case"NOT_CONTAINS":t=C.notContains;break;default:t=C.contains}return t}function W(e){let t="";switch(e){case C.greaterThan:case">":t=">";break;case C.greaterThanOrEqual:case">=":t=">=";break;case C.lessThan:case"<":t="<";break;case C.lessThanOrEqual:case"<=":t="<=";break;case C.notEqual:case"<>":t="<>";break;case C.equal:case"=":case"==":case"EQ":t="=";break;case C.startsWith:case"a*":case"*":t="a*";break;case C.endsWith:case"*z":t="*z";break;default:t=e}return t}function j(e){let t;if(U(e))t=C.equal;else switch(e){case y.unknown:case y.string:case y.text:case y.password:case y.readonly:t=C.contains;break;case y.float:case y.number:default:t=C.equal}return t}function G(e,t){return Object.keys(e).reduce(((i,n)=>(n!==t&&(i[n]=e[n]),i)),{})}function Y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(null!==e&&void 0!==e){const i=`${e}`,n=i.split(".");return 2===n.length?`${n[0].replace(/\B(?=(\d{3})+(?!\d))/g,t)}.${n[1]}`:i.replace(/\B(?=(\d{3})+(?!\d))/g,t)}return e}function K(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(e)?e.find(t)||i:e}function q(e){if(Array.isArray(e))for(;e.length>0;){const t=e.pop();t?.unsubscribe&&t.unsubscribe()}return e}function X(e){let t=0,i=0,n=0,s=0;const r=window.innerHeight||0,o=window.innerWidth||0,a=ue(),l=a.top,d=a.left,c=ne(e);if(c){const a=c.top,h=c.left;i=a-l,n=h-d,t=r-(a-l+e.clientHeight),s=o-(h-d+e.clientWidth)}return{top:i,bottom:t,left:n,right:s}}function Q(e,t,i){const n=document.createElement(e);return t&&Object.keys(t).forEach((i=>{"innerHTML"===i&&console.warn(`[Slickgrid-Universal] For better CSP (Content Security Policy) support, do not use "innerHTML" directly in "createDomElement('${e}', { innerHTML: 'some html'})", it is better as separate assignment: "const elm = createDomElement('span'); elm.innerHTML = 'some html';"`);const s=t[i];"object"===typeof s?Object.assign(n[i],s):n[i]=t[i]})),i?.appendChild&&i.appendChild(n),n}function Z(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").filter((e=>e))}function J(e){"object"===typeof e&&Object.keys(e).forEach((t=>{Array.isArray(e[t])&&J(e[t]),e[t]instanceof HTMLElement&&(e[t]=null)}))}function ee(e){for(;e?.firstChild;)e.removeChild(e.firstChild);return e}function te(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"innerHTML";return e instanceof DocumentFragment?[].map.call(e.childNodes,(e=>e[t])).join("")||e.textContent||"":e instanceof HTMLElement?e[t]:String(e??"")}function ie(e,t){if(!e||!t)return;const i=e.getBoundingClientRect(),n=t.getBoundingClientRect();return{top:n.top-i.top,right:n.right-i.right,bottom:n.bottom-i.bottom,left:n.left-i.left}}function ne(e){let t=0,i=0,n=0,s=0;if(!e||!e.getBoundingClientRect)return{top:t,bottom:n,left:i,right:s};const r=e.getBoundingClientRect(),o=document.documentElement;return void 0!==r?.top&&void 0!==r.left&&(t=r.top+window.pageYOffset-o.clientTop,i=r.left+window.pageXOffset-o.clientLeft,s=r.right,n=r.bottom),{top:t,left:i,bottom:n,right:s}}function se(e,t){let i=0;if(e){const n="height"===t?["top","bottom"]:["left","right"];i=e["height"===t?"clientHeight":"clientWidth"];for(const t of n){i-=parseFloat(re(e,`padding-${t}`)||"")||0}}return i}function re(e,t){return e?window.getComputedStyle(e).getPropertyValue(t):null}function oe(e,t){if(e)for(const i of t){const t=e.getAttribute(i);if(t)return t}return null}function ae(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return(/^[0-9]+$/i.test(`${e}`)?+e+"px":e)||t}function le(e){const t="string"===typeof e?e:String(e),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(t||"").toString().replace(/[&<>"']/g,(e=>i[e]))}function de(e){return e.replace(/&#(\d+);/g,((e,t)=>String.fromCharCode(t)))}function ce(e,t){const i=e.length;let n=le(e);if(i<t)for(let s=i;s<t;s++)n+="&nbsp;";return n}function he(e,t){e.parentNode?.insertBefore(t,e.nextSibling)}function ue(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}const pe=Object.prototype.hasOwnProperty,me=Object.prototype.toString,ge=Object.defineProperty,fe=Object.getOwnPropertyDescriptor,ve=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===me.call(e)},be=function(e){if(!e||"[object Object]"!==me.call(e))return!1;const t=pe.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&pe.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!i)return!1;let n;for(n in e);return"undefined"===typeof n||pe.call(e,n)},ye=function(e,t){ge&&"__proto__"===t.name?ge(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},_e=function(e,t){if("__proto__"===t){if(!pe.call(e,t))return;if(fe)return fe(e,t).value}return e[t]};function Se(){let e,t,i,n,s,r,o=arguments.length<=0?void 0:arguments[0],a=1;const l=arguments.length;let d=!1;for("boolean"===typeof o&&(d=o,o=(arguments.length<=1?void 0:arguments[1])||{},a=2),(null===o||void 0===o||"object"!==typeof o&&"function"!==typeof o)&&(o={});a<l;++a)if(e=a<0||arguments.length<=a?void 0:arguments[a],null!==e&&void 0!==e)for(t in e)i=_e(o,t),n=_e(e,t),o!==n&&(d&&n&&(be(n)||(s=ve(n)))?(s?(s=!1,r=i&&ve(i)?i:[]):r=i&&be(i)?i:{},ye(o,{name:t,newValue:Se(d,r,n)})):"undefined"!==typeof n&&ye(o,{name:t,newValue:n}));return o}function we(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=-1;n=t&&"object"===typeof t&&i in t?e.findIndex((e=>e[i]===t[i])):e.findIndex((e=>e===t)),n<0&&e.push(t)}function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",i="";for(let n=0;n<e;n++)i+=t;return i}function Ee(e,t){return e.filter(((e,i)=>t!==i))}function Oe(e){if(!Array.isArray(e)&&!De(e))return e;return Se(!0,Array.isArray(e)?[]:{},e)}function xe(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(!i.length)return e;const s=i.shift();return e=!De(e)&&De(s)?{}:e,De(e)&&De(s)&&Object.keys(s).forEach((t=>{s.hasOwnProperty(t)&&(t in e?"object"!==typeof e[t]||"object"!==typeof s[t]?e[t]=s[t]:e[t].concat&&s[t].concat?e[t]=e[t].concat(s[t]):e[t]=xe(e[t],s[t]):e[t]=s[t])})),xe(e,...i)}function Te(e){return De(e)&&Object.keys(e).forEach((t=>{e.hasOwnProperty(t)&&delete e[t]})),e=null,e={}}function ke(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!1;return{params:(e=>{const t=e.toString().replace(/(\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s*=[^,)]*(('(?:\\'|[^'\r\n])*')|("(?:\\"|[^"\r\n])*"))|(\s*=[^,)]*))/gm,"");return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)??[]})(e),body:(e=>{const n=e.toString();if(i=n.includes("async "),n.replaceAll(" ","").includes("=>({")){const e=n.match(/(({.*}))/g)||[];return e.length>=1?`return ${e[0].trimStart()}`:n}const s=!n.includes("{")&&n.includes("=>"),r=n.substring(n.indexOf("{")+1||n.indexOf("=>")+2,n.includes("}")?n.lastIndexOf("}"):n.length);return t&&s&&!r.startsWith("return")?"return "+r.trimStart():r})(e),isAsync:i}}function Ie(e){return null===e||void 0===e||0===Object.entries(e).length}function Re(e){return void 0!==e&&null!==e&&""!==e}function Ae(e){return null!==e&&!isNaN(e)&&""!==e}function De(e){return null!==e&&"object"===typeof e&&!Array.isArray(e)&&!(e instanceof Date)}function Pe(e){return"boolean"===typeof e||"number"===typeof e||"string"===typeof e||null===e||void 0===e}function Fe(e){return e instanceof HTMLElement||e instanceof DocumentFragment||Pe(e)}function Me(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?null!==e&&void 0!==e&&"string"!==typeof e&&!isNaN(e):null!==e&&void 0!==e&&""!==e&&!isNaN(+e)}function Le(e){return!e||e&&"object"===typeof e&&0===Object.keys(e).length}function Ne(e){return/(true|1)/i.test(e+"")}function Be(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i="function"===typeof e.normalize?e.normalize("NFD").replace(/[\u0300-\u036f]/g,""):e;return t?i.toLowerCase():i}function He(e,t,i){if("string"===typeof t&&(t=t.split(".")),t.length>1){const n=t.shift();e&&void 0!==n&&He(e[n]=Re(e[n])&&(Array.isArray(e[n])||"[object Object]"===Object.prototype.toString.call(e[n]))?e[n]:{},t,i)}else e&&t[0]&&(e[t[0]]=i)}function ze(e){return"string"===typeof e?arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.replace(/\w\S*/g,(e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase())):e.charAt(0).toUpperCase()+e.slice(1):e}function $e(e){return"string"===typeof e?e.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_/])/g,((e,t)=>/[\s+\-_/]/.test(e)?"":0===t?e.toLowerCase():e.toUpperCase())):e}function Ue(e){return"string"===typeof e?$e(e).replace(/([A-Z])|([-_])/g,"-$1").toLowerCase():e}function Ve(e){if("string"===typeof e){const t=e.replace(/([A-Z])|([-_])/g," $1").replace(/\s+/g," ").trim();return t.charAt(0).toUpperCase()+t.slice(1)}return e}function We(e){return"string"===typeof e?$e(e).replace(/([A-Z])/g,"_$1").toLowerCase():e}function je(e){return Array.isArray(e)&&e.length>0?e.filter(((t,i)=>e.indexOf(t)>=i)):e}function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";if(Array.isArray(e)&&e.length>0){const i=[],n=new Map;for(const s of e)s&&!n.has(s[t])&&(n.set(s[t],!0),i.push({id:s[t],name:s.name}));return i}return e}const Ye=Symbol("plaintext"),Ke=Symbol("html"),qe=Symbol("comment"),Xe=/<(\w*)>/g,Qe=/<\/?([^\s/>]+)/;function Ze(e,t,i){function n(e){let t=new Set;if("string"===typeof e){let i;for(;i=Xe.exec(e);)t.add(i[1])}else"function"===typeof e[Symbol.iterator]&&(t=new Set(e));return t}function s(e){const t=Qe.exec(e);return t?t[1].toLowerCase():null}return function(e,t,i){if("string"!==typeof e&&(Me(e)||"boolean"===typeof e))return String(e);if(e instanceof HTMLElement&&(e=e.innerHTML),"string"!==typeof e&&void 0!==e&&null!==e)throw new TypeError("'html' parameter must be a string");return function(e,t){const i=t.allowable_tags,n=t.tag_replacement;let r=t.state,o=t.tag_buffer,a=t.depth,l=t.in_quote_char,d="";for(let c=0,h=e.length;c<h;c++){const t=e[c];if(r===Ye)if("<"===t)r=Ke,o+=t;else d+=t;else if(r===Ke)switch(t){case"<":if(l)break;a++;break;case">":if(l)break;if(a){a--;break}l="",r=Ye,o+=">",i.has(s(o))?d+=o:d+=n,o="";break;case'"':case"'":l=t===l?"":l||t,o+=t;break;case"-":"<!-"===o&&(r=qe),o+=t;break;case" ":case"\n":if("<"===o){r=Ye,d+="< ",o="";break}o+=t;break;default:o+=t}else if(r===qe)if(">"===t)"--"===o.slice(-2)&&(r=Ye),o="";else o+=t}return t.state=r,t.tag_buffer=o,t.depth=a,t.in_quote_char=l,d}(e||"",function(e,t){return{allowable_tags:n(e),tag_replacement:t,state:Ye,tag_buffer:"",depth:0,in_quote_char:""}}(t||"",i||""))}(e,t,i)}var Je=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function et(e){if(e||(e=new Date),e instanceof Date){const t=new Date(e);return t.setMilliseconds(0),t}if(function(e){const t=e.match(Je);if(t){const e=Number(t[2]);if(e<1||e>12)return!1;if(void 0!==typeof t[3]){const e=Number(t[3]);if(e<1||e>31)return!1}if(void 0!==typeof t[4]){const e=Number(t[4]);if(e<0||e>23)return!1}return!0}return!1}(e=e.trim()))return new Date(function(e){const t=e.match(Je);return t&&"undefined"===typeof t[4]?e+"T00:00:00":e}(e));throw new Error(`Non ISO 8601 compliant date (${e}).`)}var tt="1999-03-04T02:05:01.000Z",it=new Map,nt=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],st=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],rt=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],ot={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function at(e){if(/^[+-]\d{2}:\d{2}/.test(e))return 6;if(/^[+-]\d{4}/.test(e))return 5;throw new Error("Invalid offset format")}var lt=["MMMM","MMM","dddd","ddd"],dt=new Map([...nt,...st,...rt].map((e=>[e[0],e]))),ct=new Map,ht=["full","long","medium","short"],ut=e=>String(e).padStart(2,"0"),pt=e=>String(e).padStart(2,"0");function mt(e){return"literal"===e.type&&(e.value=e.value.normalize("NFKC")),e}function gt(e,t,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const s=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=et(e),r=t.filter((e=>e.hour12)),o=t.filter((e=>!e.hour12)),a=[],l=[];function d(e){const t=`${i}-u-hc-${arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"h12":"h23"}`;if(a.push(...new Intl.DateTimeFormat(t,e.reduce(((e,t)=>"literal"===t.partName?e:(n&&lt.includes(t.token)&&l.push(t),Object.assign(e,t.option))),{timeZone:"UTC"})).formatToParts(s).map(mt)),n&&l.length)for(const i of l){let e=[];switch(i.token){case"MMMM":e=new Intl.DateTimeFormat(t,{dateStyle:"long",timeZone:"UTC"}).formatToParts(s).map(mt);break;case"MMM":e=new Intl.DateTimeFormat(t,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(s).map(mt)}const n=e.find((e=>e.type===i.partName)),r=a.findIndex((e=>e.type===i.partName));n&&r>-1&&(a[r]=n)}}r.length&&d(r,!0);o.length&&d(o);return a.reduce(((e,t)=>(e[t.type]=t.value,e)),{})}(e,t,i,arguments.length>3&&void 0!==arguments[3]&&arguments[3]),r=et(e);function o(e){let{partName:t,partValue:o,token:a}=e;if("literal"===t)return o;const l=s[t];if("hour"===t&&"H"===a)return l.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(a)&&1===l.length)return`0${l}`;if("dayPeriod"===t){const e=yt(r.getUTCHours()<12?"am":"pm",i);return"A"===a?e.toUpperCase():e.toLowerCase()}return"timeZoneName"===t?null!=n?n:ft(-1*r.getTimezoneOffset(),a):l}return t.map((e=>({...e,value:o(e)})))}function ft(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Z";const i=String(Math.floor(Math.abs(e/60))).padStart(2,"0"),n=String(Math.abs(e%60)).padStart(2,"0"),s=e<0?"-":"+";return"ZZ"===t?`${s}${i}${n}`:`${s}${i}:${n}`}function vt(e){if(!(t=>{switch(t){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(e);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(e)}})(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Z"))throw new Error(`Invalid offset: ${e}`);return e}function bt(e){return["numeric","2-digit"].includes(e.partValue)}function yt(e,t){const i=ct.get(t);if(i&&i[e])return i[e];const n=new Date(tt);n.setUTCHours("am"===e?5:20);const s=new Intl.DateTimeFormat(t,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(n).map(mt).find((e=>"dayPeriod"===e.type));if(s){const n=i||{};return ct.set(t,Object.assign(n,{[e]:s.value})),s.value}return e}function _t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+00:00";const i=et(e),n=(()=>{switch(at(t)){case 5:return"ZZ";case 6:return"Z"}})(),s=function(e,t){vt(e,t);const[i,n,s,r]=e.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),o=60*Number(s)+Number(r);return"+"===n?o:-o}(t,n);return new Date(i.getTime()+1e3*s*60)}function St(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function wt(e,t){const i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hourCycle:"h23"}).formatToParts(e).map(mt),n={};return i.forEach((e=>{n[e.type]=e.value})),new Date(`${n.year}-${n.month}-${n.day}T${n.hour}:${n.minute}:${n.second}Z`)}function Ct(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UTC",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"device",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"Z";var s;i="device"===i?null!=(s=St())?s:"utc":i;const r=et(e),o=wt(r,t),a=wt(r,i);return ft(Math.round((a.getTime()-o.getTime())/1e3/60),n)}function Et(e){const t=et(e);return t.setHours(0,0,0),t}function Ot(e,t){if(ht.includes(e)||"object"===typeof e)return function(e,t){const i={timeZone:"UTC"};"string"===typeof e?i.dateStyle=e:("date"in e&&(i.dateStyle=e.date),"time"in e&&(i.timeStyle=e.time));const n=new Intl.DateTimeFormat(t,i),s=n.formatToParts(new Date(tt)).map(mt),r=n.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(mt).find((e=>"hour"===e.type)),o=r&&"23"===r.value?24:12;return s.map((e=>{const n=e.type,s=function(e,t,i,n,s){const r=t.length,o=!isNaN(Number(t));let a;switch(e){case"year":return 2===r?dt.get("YY"):dt.get("YYYY");case"month":return o?1===r?dt.get("M"):dt.get("MM"):(a=xt(i,e,t),"long"===a?dt.get("MMMM"):dt.get("MMM"));case"day":return 1===r?dt.get("D"):dt.get("DD");case"weekday":switch(a=xt(i,e,t),a){case"narrow":return dt.get("d");case"short":return dt.get("ddd");default:return dt.get("dddd")}case"hour":return 12===n?1===r?dt.get("h"):dt.get("hh"):1===r?dt.get("H"):dt.get("HH");case"minute":return 1===r?dt.get("m"):dt.get("mm");case"second":return 1===r?dt.get("s"):dt.get("ss");case"dayPeriod":return/^[A-Z]+$/u.test(t)?dt.get("A"):dt.get("a");case"literal":return[t,{literal:t},new RegExp("")];case"timeZoneName":return"full"===s.timeStyle?dt.get("Z"):dt.get("ZZ");default:return}}(e.type,e.value,t,"hour"===e.type?o:void 0,i);if(void 0===s)return;const r=s[1][n];return r?(s[2]||(s[2]=new RegExp(`${s[0]}`,"g")),{option:{[n]:r},partName:n,partValue:r,token:s[0],pattern:s[2],hour12:12===o}):void 0})).filter((e=>!!e))}(e,t);let i=e,n=0;const s=e=>{if(e[2]||(e[2]=new RegExp(`(.)?(${e[0]})`,"g")),e[2].test(i)){let t=0;return i=i.replace(e[2],((e,i,s)=>"\\"===i?s:`${"string"===typeof i?i:""}{!${t++?n:n++}!}`)),!!t}return!1};function r(e,t){let[i,n,s]=t;const r=Object.keys(n)[0];return{option:n,partName:r,partValue:n[r],token:i,pattern:s,hour12:e}}const o=function(e){const t=e.map((e=>e.partName)),i=new Set(t);if(t.length>i.size)throw new Error("Cannot reuse format tokens.");return e}(nt.filter(s).concat(st.filter(s)).map(r.bind(null,!1)).concat(rt.filter(s).map(r.bind(null,!0)))),a=/^\{!(\d+)!\}$/;return i.split(/(\{!\d+!\})/).map((e=>{const t=e.match(a);return t?o[Number(t[1])]:{option:{literal:e},partName:"literal",partValue:e,token:e,pattern:new RegExp(""),hour12:!1}})).filter((e=>!("literal"===e.partName&&""===e.partValue)))}function xt(e,t,i){if(!it.has(e)){const t=new Date(tt),i=[3,8,9,7,6,4,3],n=["weekday","month","dayPeriod"],s=["long","short","narrow"],r={};for(let o=0;o<12;o++){t.setMonth(0+o),o in i&&t.setDate(i[o]),t.setUTCHours(8+o);for(const i of s){const s=new Intl.DateTimeFormat(e,n.reduce(((e,t)=>Object.assign(e,{[t]:i})),{hour12:!0,timeZone:"UTC"})).formatToParts(t).map(mt);if("long"===i||"short"===i){const n=new Intl.DateTimeFormat(e,{dateStyle:"short"===i?"medium":"long",timeZone:"UTC"}).formatToParts(t).map(mt).find((e=>"month"===e.type)),r=s.findIndex((e=>"month"===e.type));r>-1&&n&&(s[r]=n)}s.forEach((e=>{if("literal"===e.type)return;const t=e.type;r[t]=Object.assign(r[t]||{},{[e.value]:i})}))}}it.set(e,r)}const n=it.get(e);return n?n[t][i]:void 0}function Tt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+00:00";const i="+"===t.slice(0,1);return _t(e,t.replace(i?"+":"-",i?"-":"+"))}function kt(e){let t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"device",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return"object"!==typeof e||e instanceof Date||({date:e,format:n,locale:s,genitive:r,partFilter:o,tz:t}=e),"ISO8601"===n?et(e).toISOString():(t&&(i=Ct(e,"utc",t,function(e){return"string"===typeof e?e.includes("ZZ")?"ZZ":"Z":"time"in e&&"full"===e.time?"Z":"ZZ"}(n))),null!=t||(t=St()),"utc"!==(null==t?void 0:t.toLowerCase())&&(e=Tt(e,Ct(e,t,"utc"))),s&&"device"!==s||(s=Intl.DateTimeFormat().resolvedOptions().locale),gt(e,Ot(n,s).filter(null!=o?o:()=>!0),s,r,i).map((e=>e.value)).join(""))}function It(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>!0;return Ot(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en").filter(i).reduce(((e,i)=>{return e+(t&&"literal"===i.partName?(n=i.token,nt.concat(st).concat(rt).sort(((e,t)=>e[0].length>t[0].length?1:-1)).reduce(((e,t)=>e.replace(t[0],`\\${t[0]}`)),n)):i.token);var n}),"").normalize("NFKC")}function Rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=(e,t)=>Array(e).fill("").map(((e,i)=>`${t(i)}`));if("M"===e)return n(12,(e=>e+1));if("MM"===e)return n(12,(e=>{const t=e+1;return t<10?`0${t}`:t}));if(e.startsWith("M"))return Rt("MM").map((n=>kt(`2000-${n}-05`,e,t,i)));if(e.startsWith("d"))return n(7,(e=>`0${e+2}`)).map((i=>kt(`2022-10-${i}`,e,t)));if("a"===e)return[yt("am",t).toLowerCase(),yt("pm",t).toLowerCase()];if("A"===e)return[yt("am",t).toUpperCase(),yt("pm",t).toUpperCase()];if(e.startsWith("Y")){const i=(new Date).getFullYear();return n(120,(e=>e+1)).reduce(((n,s)=>("120"!==s&&n.push(kt(`${i+Number(s)}-06-06`,e,t)),n.unshift(kt(i-Number(s)+"-06-06",e,t)),n)),[kt(`${i}-06-06`,e,t)])}return e.startsWith("D")?n(31,(t=>`${"DD"===e&&t<9?"0":""}${t+1}`)):e.startsWith("H")?n(24,(t=>`${"HH"===e&&t<10?"0":""}${t}`)):e.startsWith("h")?n(12,(t=>`${"hh"===e&&t<9?"0":""}${t+1}`)):e.startsWith("m")||e.startsWith("s")?n(60,(t=>`${e.length>1&&t<10?"0":""}${t}`)):[]}function At(e){const t=function(e){const t=et(e);return t.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0),t}(e);return t.getDate()}function Dt(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ISO8601",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"device",s=()=>!0,r="backward";if("object"===typeof e?({date:t,format:i="ISO8601",locale:n="device",dateOverflow:r="backward",partFilter:s=()=>!0}=e):t=e,!t)throw new Error("parse() requires a date string.");const o=()=>{throw new Error(`Date (${t}) does not match format (${It(i,n)})`)};if("ISO8601"===i)return et(t);const a=ht.includes(i)||"object"===typeof i,l=function(e){let t;for(const i of e){if("literal"===i.partName&&!isNaN(parseFloat(i.partValue)))throw new Error(`Numbers in format (${i.partValue}).`);if(t&&"literal"!==t.partName&&"literal"!==i.partName&&!(t.token in ot)&&!(i.token in ot)&&(!bt(t)||"a"!==i.token.toLowerCase()))throw new Error(`Illegal adjacent tokens (${t.token}, ${i.token})`);t=i}return e}(Ot(i,n).filter(s));if(!l.length)throw new Error("parse() requires a pattern.");let d;try{d=function(e,t){let i=0;const n=e=>[e[i++],e[i]];let s=0;const r=[];let o;do{const[i,a]=n(t);o=a;let l=1;if("literal"===i.partName)l=i.partValue.length;else if("timeZoneName"===i.partName)l=at(e.substring(s));else if(i.token in ot)l=ot[i.token];else if(a)if("literal"===a.partName){if(l=e.indexOf(a.partValue,s)-s,l<0)throw new Error}else if("dayPeriod"===a.partName){for(let t=1;t<=4;t++)if(isNaN(Number(e.charAt(s+t)))){l=t;break}}else{const t=e.substring(s).search(/\d/);-1!==t&&(l=s+t)}else l=e.length;r.push({...i,value:e.substring(s,s+l)}),s+=l}while(o);return r}(t,l)}catch{return o()}const c=new Date,h=new Map([["YYYY",c.getFullYear()],["MM",c.getMonth()+1],["DD",c.getDate()],["HH",0],["mm",0],["ss",0]]);let u=null,p="";d.forEach((e=>{if("literal"===e.partName)return;if(e.token===e.value)return o();const t=Number(e.value);if(h.has(e.token))h.set(e.token,t);else if("YY"===e.token)h.set("YYYY",function(e){const t=(new Date).getFullYear(),i=t%100,n=Math.floor(t/100),s=Number(e);return 100*(n+(s>i+20?-1:0))+s}(e.value));else{const i=e.token;if(i.startsWith("d"))return;if("D"===i)h.set("DD",t);else if("H"===i||i.startsWith("h"))h.set("HH",t);else if("M"===i)h.set("MM",t);else if("a"===i||"A"===i)u=e.value.toLowerCase()===yt("am",n).toLowerCase();else if("Z"===i||"ZZ"===i)p=vt(e.value,i);else{const t=Rt(i,n,a).indexOf(e.value);if(-1!==t)switch(i){case"MMM":case"MMMM":h.set("MM",t+1)}}}}));let m=h.get("HH")||0;!1===u?(m+=12===m?0:12,h.set("HH",24===m?0:m)):!0===u&&12===m&&h.set("HH",0),h.set("MM",(h.get("MM")||1)-1);let[g,f,v,b,y,_]=Array.from(h.values());const S=At(new Date(`${pt(g)}-${ut(f+1)}-10`));if(S<v&&"throw"===r)throw new Error(`Invalid date ${pt(g)}-${ut(f+1)}-${ut(v)}`);v="backward"===r?Math.min(v,S):v;const w=`${pt(g)}-${ut(f+1)}-${ut(v)}T${ut(b)}:${ut(y)}:${ut(_)}${p}`,C=new Date(w);return isFinite(+C)?C:o()}function Pt(e,t){let i;const n=t?.withZeroPadding??!1;switch(e){case y.dateTime:case y.dateTimeIso:i="YYYY-MM-DD HH:mm:ss";break;case y.dateTimeIsoAmPm:i="YYYY-MM-DD hh:mm:ss a";break;case y.dateTimeIsoAM_PM:i="YYYY-MM-DD hh:mm:ss A";break;case y.dateTimeShortIso:i="YYYY-MM-DD HH:mm";break;case y.dateEuro:i="DD/MM/YYYY";break;case y.dateEuroShort:i=n?"DD/MM/YY":"D/M/YY";break;case y.dateTimeEuro:i="DD/MM/YYYY HH:mm:ss";break;case y.dateTimeShortEuro:i=n?"DD/MM/YYYY HH:mm":"D/M/YYYY H:m";break;case y.dateTimeEuroAmPm:i="DD/MM/YYYY hh:mm:ss a";break;case y.dateTimeEuroAM_PM:i="DD/MM/YYYY hh:mm:ss A";break;case y.dateTimeEuroShort:i=n?"DD/MM/YY HH:mm:ss":"D/M/YY H:m:s";break;case y.dateTimeEuroShortAmPm:i=n?"DD/MM/YY hh:mm:ss a":"D/M/YY h:m:s a";break;case y.dateTimeEuroShortAM_PM:i=n?"DD/MM/YY hh:mm:ss A":"D/M/YY h:m:s A";break;case y.dateUs:i="MM/DD/YYYY";break;case y.dateUsShort:i=n?"MM/DD/YY":"M/D/YY";break;case y.dateTimeUs:i="MM/DD/YYYY HH:mm:ss";break;case y.dateTimeUsAmPm:i="MM/DD/YYYY hh:mm:ss a";break;case y.dateTimeUsAM_PM:i="MM/DD/YYYY hh:mm:ss A";break;case y.dateTimeUsShort:i=n?"MM/DD/YY HH:mm:ss":"M/D/YY H:m:s";break;case y.dateTimeUsShortAmPm:i=n?"MM/DD/YY hh:mm:ss a":"M/D/YY h:m:s a";break;case y.dateTimeUsShortAM_PM:i=n?"MM/DD/YY hh:mm:ss A":"M/D/YY h:m:s A";break;case y.dateTimeShortUs:i=n?"MM/DD/YYYY HH:mm":"M/D/YYYY H:m";break;case y.dateUtc:i="ISO8601";break;case y.date:case y.dateIso:default:i=t?.withDefaultIso8601?"ISO8601":"YYYY-MM-DD"}return i}function Ft(e,t,i){const n=t?Pt(t):void 0,s=Pt(i),r=e instanceof Date?e:Mt(e,n);return r&&void 0!==e?i===y.dateUtc?r.toISOString():kt(r,s,"en-US"):""}function Mt(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{return!!e&&(e instanceof Date?e:Dt({date:e,format:t,dateOverflow:i?"throw":"backward",locale:"en-US"}))}catch(Su){return!1}}function Lt(e,t,i,n,s){let r=0;if(e===t)r=0;else{let i=Mt(e,n,s),o=Mt(t,n,s);i||(i=new Date(1001,1,1)),o||(o=new Date(1001,1,1)),r=i.valueOf()-o.valueOf()}return i*r}function Nt(e){const t=e===y.date?void 0:Pt(e);return(e,i,n)=>Lt(e,i,n,t,void 0!==t)}const Bt={boolean:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.neutral,n=0;return n=e===t?0:null===e?-1:null===t?1:i?e<t?-1:1:e<t?1:-1,i*n},date:Nt(y.date),dateIso:Nt(y.dateIso),dateUtc:Nt(y.dateUtc),dateTime:Nt(y.dateTime),dateTimeIso:Nt(y.dateTimeIso),dateTimeIsoAmPm:Nt(y.dateTimeIsoAmPm),dateTimeIsoAM_PM:Nt(y.dateTimeIsoAM_PM),dateTimeShortIso:Nt(y.dateTimeShortIso),dateEuro:Nt(y.dateEuro),dateEuroShort:Nt(y.dateEuroShort),dateTimeShortEuro:Nt(y.dateTimeShortEuro),dateTimeEuro:Nt(y.dateTimeEuro),dateTimeEuroAmPm:Nt(y.dateTimeEuroAmPm),dateTimeEuroAM_PM:Nt(y.dateTimeEuroAM_PM),dateTimeEuroShort:Nt(y.dateTimeEuroShort),dateTimeEuroShortAmPm:Nt(y.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:Nt(y.dateTimeEuroShortAM_PM),dateUs:Nt(y.dateUs),dateUsShort:Nt(y.dateUsShort),dateTimeShortUs:Nt(y.dateTimeShortUs),dateTimeUs:Nt(y.dateTimeUs),dateTimeUsAmPm:Nt(y.dateTimeUsAmPm),dateTimeUsAM_PM:Nt(y.dateTimeUsAM_PM),dateTimeUsShort:Nt(y.dateTimeUsShort),dateTimeUsShortAmPm:Nt(y.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:Nt(y.dateTimeUsShortAM_PM),numeric:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.neutral,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const r=n?.valueCouldBeUndefined??s?.cellValueCouldBeUndefined??!1,o=isNaN(e)||""===e||null===e||r&&void 0===e?-1/0:parseFloat(e),a=isNaN(t)||""===t||null===t||r&&void 0===t?-1/0:parseFloat(t);return i*(o===a?0:o>a?1:-1)},objectString:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.neutral,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(!n||!n.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');const r=e?.hasOwnProperty(n.dataKey)?e[n.dataKey]:e,o=t?.hasOwnProperty(n.dataKey)?t[n.dataKey]:t,a=n?.valueCouldBeUndefined??s?.cellValueCouldBeUndefined??!1;let l=0;return l="object"!==typeof e?-1/0:"object"!==typeof t?1/0:null===r||a&&void 0===r?-1:null===o||a&&void 0===o?1:r===o?0:i?r<o?-1:1:r<o?1:-1,i*l},string:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O.neutral,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,r=0;const o=n?.valueCouldBeUndefined??s?.cellValueCouldBeUndefined??!1;return e===t?r=0:null===e||o&&void 0===e?r=-1:null===t||o&&void 0===t?r=1:(s?.ignoreAccentOnStringFilterAndSort&&(e=Be(e,!1),t=Be(t,!1)),r=i?e<t?-1:1:e<t?1:-1),i*r}};function Ht(e,t,i,n,s,r){let o=0;if(U(e))o=Nt(e).call(this,t,i,n,s,r);else switch(e){case y.boolean:o=Bt.boolean(t,i,n,s,r);break;case y.float:case y.integer:case y.number:o=Bt.numeric(t,i,n,s,r);break;case y.object:o=Bt.objectString(t,i,n,s,r);break;case y.string:case y.text:case y.password:case y.readonly:default:o=Bt.string(t,i,n,s,r)}return o}var zt;!function(e){e.camelCase="camelCase",e.camelCaseWithExtraOnPrefix="camelCaseWithExtraOnPrefix",e.kebabCase="kebabCase",e.lowerCase="lowerCase",e.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix"}(zt||(zt={}));class $t{get elementSource(){return this._elementSource}set elementSource(e){this._elementSource=e}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map((e=>e.name))}constructor(e){this._subscribedEvents=[],this.eventNamingStyle=zt.camelCase,this._elementSource=e||document.createElement("div")}dispose(){this.unsubscribeAll(),this._subscribedEvents=[],window.clearTimeout(this._timer),this._elementSource?.remove(),this._elementSource=null}dispatchCustomEvent(e,t){let i=arguments.length>4?arguments[4]:void 0;const n={bubbles:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],cancelable:!(arguments.length>3&&void 0!==arguments[3])||arguments[3]};t&&(n.detail=t);const s=new CustomEvent(e,n);return"function"===typeof i&&i(s),this._elementSource?.dispatchEvent(s)}getEventNameByNamingConvention(e,t){let i="";switch(this.eventNamingStyle===zt.lowerCaseWithoutOnPrefix?i=`${t}${e.replace(/^on/,"")}`:this.eventNamingStyle===zt.camelCaseWithExtraOnPrefix&&(i=`${t}${e.replace(/^on/,"onOn")}`),this.eventNamingStyle){case zt.camelCase:i=""!==t?`${t}${ze(e)}`:e;break;case zt.kebabCase:i=""!==t?`${t}-${Ue(e)}`:Ue(e);break;case zt.lowerCase:i=`${t}${e}`.toLowerCase()}return i}publish(e,t,i,n){const s=this.getEventNameByNamingConvention(e,"");return i?new Promise((e=>{window.clearTimeout(this._timer),this._timer=window.setTimeout((()=>e(this.dispatchCustomEvent(s,t,!0,!0,n))),i)})):this.dispatchCustomEvent(s,t,!0,!0,n)}subscribe(e,t){e=Array.isArray(e)?e:[e];const i=[];return e.forEach((e=>{const n=this.getEventNameByNamingConvention(e,"");this._elementSource.addEventListener(n,(e=>t.call(null,e.detail))),this._subscribedEvents.push({name:n,listener:t}),i.push((()=>this.unsubscribe(n,t)))})),{unsubscribe:()=>i.forEach((e=>e()))}}subscribeEvent(e,t){const i=this.getEventNameByNamingConvention(e,"");return this._elementSource.addEventListener(i,t),this._subscribedEvents.push({name:i,listener:t}),{unsubscribe:()=>this.unsubscribe(i,t)}}unsubscribe(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this.getEventNameByNamingConvention(e,"");this._elementSource.removeEventListener(n,t),i&&this.removeSubscribedEventWhenFound(e,t)}unsubscribeAll(e){if(Array.isArray(e)){let t;do{t=e.pop(),t?.dispose?t.dispose():t?.unsubscribe&&t.unsubscribe()}while(t)}else{let e=this._subscribedEvents.pop();for(;e;)this.unsubscribe(e.name,e.listener,!1),e=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(e,t){const i=this._subscribedEvents.findIndex((i=>i.name===e&&i.listener===t));i>=0&&this._subscribedEvents.splice(i,1)}}const Ut=function(e){var t=document,i=e.container||t.createElement("div"),n=e.preventSubmit||0;i.id=i.id||"autocomplete-"+b();var s,r,o=i.style,a=e.debounceWaitMs||0,l=e.disableAutoSelect||!1,d=i.parentElement,c=[],h="",u=2,p=e.showOnFocus,m=0,g=!1,f=!1;if(void 0!==e.minLength&&(u=e.minLength),!e.input)throw new Error("input undefined");var v=e.input;function b(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function y(){var e=i.parentNode;e&&e.removeChild(i)}function _(){r&&window.clearTimeout(r)}function S(){return!!i.parentNode}function w(){m++,c=[],h="",s=void 0,v.setAttribute("aria-activedescendant",""),v.setAttribute("aria-expanded","false"),y()}function C(){i.textContent="",v.setAttribute("aria-activedescendant","");var n=function(e,i,n){var s=t.createElement("div");return s.textContent=e.label||"",s};e.render&&(n=e.render);var r=function(e,i){var n=t.createElement("div");return n.textContent=e,n};e.renderGroup&&(r=e.renderGroup);var a=t.createDocumentFragment(),l=b();if(c.forEach((function(t,o){if(t.group&&t.group!==l){l=t.group;var d=r(t.group,h);d&&(d.className+=" group",a.appendChild(d))}var c=n(t,h,o);c&&(c.id=i.id+"_"+o,c.setAttribute("role","option"),c.addEventListener("click",(function(i){f=!0;try{e.onSelect(t,v)}finally{f=!1}w(),i.preventDefault(),i.stopPropagation()})),t===s&&(c.className+=" selected",c.setAttribute("aria-selected","true"),v.setAttribute("aria-activedescendant",c.id)),a.appendChild(c))})),i.appendChild(a),c.length<1){if(!e.emptyMsg)return void w();var u=t.createElement("div");u.id=i.id+"_"+b(),u.className="empty",u.textContent=e.emptyMsg,i.appendChild(u),v.setAttribute("aria-activedescendant",u.id)}i.parentNode||(d||t.body).appendChild(i),function(){if(S()){v.setAttribute("aria-expanded","true"),o.height="auto",o.width=v.offsetWidth+"px";var n,s=0;r(),r(),e.customize&&n&&e.customize(v,n,i,s)}function r(){var e=t.documentElement,i=e.clientTop||t.body.clientTop||0,r=e.clientLeft||t.body.clientLeft||0,a=window.pageYOffset||e.scrollTop,l=window.pageXOffset||e.scrollLeft,d=(n=v.getBoundingClientRect()).top+v.offsetHeight+a-i,c=n.left+l-r;o.top=d+"px",o.left=c+"px",(s=window.innerHeight-(n.top+v.offsetHeight))<0&&(s=0),o.top=d+"px",o.bottom="",o.left=c+"px",o.maxHeight=s+"px"}}(),k()}function E(){S()&&C()}function O(){E()}function x(e){e.target!==i?E():e.preventDefault()}function T(){f||P(0)}function k(){var e=i.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<i.scrollTop)i.scrollTop=t.offsetTop;else{var s=t.offsetTop+t.offsetHeight,r=i.scrollTop+i.offsetHeight;s>r&&(i.scrollTop+=s-r)}}}function I(e){c.length>0&&(!function(e){var n=t.getElementById(i.id+"_"+e);n&&(n.classList.remove("selected"),n.removeAttribute("aria-selected"),v.removeAttribute("aria-activedescendant"))}(e),function(e){var n=t.getElementById(i.id+"_"+e);n&&(n.classList.add("selected"),n.setAttribute("aria-selected","true"),v.setAttribute("aria-activedescendant",n.id))}(c.indexOf(s)),k())}function R(e,t){var i=S();if("Escape"===t)w();else{if(!i||c.length<1)return;"ArrowUp"===t?function(){var e=c.indexOf(s);s=-1===e?void 0:c[(e+c.length-1)%c.length],I(e)}():function(){var e=c.indexOf(s);s=c.length<1?void 0:-1===e?c[0]:c[(e+1)%c.length],I(e)}()}e.preventDefault(),i&&e.stopPropagation()}function A(t){var i=t.key;switch(i){case"ArrowUp":case"ArrowDown":case"Escape":R(t,i);break;case"Enter":!function(t){if(s){2===n&&t.preventDefault(),f=!0;try{e.onSelect(s,v)}finally{f=!1}w()}1===n&&t.preventDefault()}(t)}}function D(){p&&P(1)}function P(e){v.value.length>=u||1===e?(_(),r=window.setTimeout((function(){return F(v.value,e,v.selectionStart||0)}),0===e||2===e?a:0)):w()}function F(t,i,n){if(!g){var r=++m;e.fetch(t,(function(e){m===r&&e&&(h=t,s=(c=e).length<1||l?void 0:c[0],C())}),i,n)}}function M(t){e.keyup?e.keyup({event:t,fetch:function(){return P(0)}}):S()||"ArrowDown"!==t.key||P(0)}function L(t){e.click&&e.click({event:t,fetch:function(){return P(2)}})}function N(){setTimeout((function(){t.activeElement!==v&&w()}),200)}return i.className=[i.className,"autocomplete",e.className||""].join(" ").trim(),i.setAttribute("role","listbox"),v.setAttribute("role","combobox"),v.setAttribute("aria-expanded","false"),v.setAttribute("aria-autocomplete","list"),v.setAttribute("aria-controls",i.id),v.setAttribute("aria-owns",i.id),v.setAttribute("aria-activedescendant",""),v.setAttribute("aria-haspopup","listbox"),o.position="absolute",i.addEventListener("mousedown",(function(e){e.stopPropagation(),e.preventDefault()})),i.addEventListener("focus",(function(){return v.focus()})),y(),v.addEventListener("keyup",M),v.addEventListener("click",L),v.addEventListener("keydown",A),v.addEventListener("input",T),v.addEventListener("blur",N),v.addEventListener("focus",D),window.addEventListener("resize",O),t.addEventListener("scroll",x,!0),{destroy:function(){v.removeEventListener("focus",D),v.removeEventListener("keyup",M),v.removeEventListener("click",L),v.removeEventListener("keydown",A),v.removeEventListener("input",T),v.removeEventListener("blur",N),window.removeEventListener("resize",O),t.removeEventListener("scroll",x,!0),v.removeAttribute("role"),v.removeAttribute("aria-expanded"),v.removeAttribute("aria-autocomplete"),v.removeAttribute("aria-controls"),v.removeAttribute("aria-activedescendant"),v.removeAttribute("aria-owns"),v.removeAttribute("aria-haspopup"),_(),w(),g=!0},fetch:function(){F(v.value,3,v.selectionStart||0)}}};class Vt{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const r=Array.isArray(t)?t:[t];if(e instanceof HTMLElement||e instanceof DocumentFragment||!e?.forEach){if(e)for(const o of r)e.addEventListener(o,i,n),this._boundedEvents.push({element:e,eventName:o,listener:i,groupName:s})}else e.forEach((e=>{for(const t of r)e.addEventListener(t,i,n),this._boundedEvents.push({element:e,eventName:t,listener:i,groupName:s})}))}unbind(e,t,i){const n=Array.isArray(e)?e:[e],s=Array.isArray(t)?t:[t];for(const r of s)for(const e of n)"function"===typeof e?.removeEventListener&&e.removeEventListener(r,i)}unbindByEventName(e,t){const i=this._boundedEvents.find((i=>i.element===e&&i.eventName===t));i&&this.unbind(i.element,i.eventName,i.listener)}unbindAll(e){if(e){const t=Array.isArray(e)?e:[e];for(let e=this._boundedEvents.length-1;e>=0;--e){const i=this._boundedEvents[e];if(t.some((e=>e===i.groupName))){const{element:t,eventName:n,listener:s}=i;this.unbind(t,n,s),this._boundedEvents.splice(e,1)}}}else for(;this._boundedEvents.length>0;){const e=this._boundedEvents.pop(),{element:t,eventName:i,listener:n}=e;this.unbind(t,i,n)}}}var Wt=Object.prototype.hasOwnProperty;function jt(e,t){var i,n;if(e===t)return!0;if(e&&t&&(i=e.constructor)===t.constructor){if(i===Date)return e.getTime()===t.getTime();if(i===RegExp)return e.toString()===t.toString();if(i===Array){if((n=e.length)===t.length)for(;n--&&jt(e[n],t[n]););return-1===n}if(!i||"object"===typeof e){for(i in n=0,e){if(Wt.call(e,i)&&++n&&!Wt.call(t,i))return!1;if(!(i in t)||!jt(e[i],t[i]))return!1}return Object.keys(t).length===n}}return e!==e&&t!==t}function Gt(e,t){const i=t.fetch;i&&(t.fetch=(t,n,s,r)=>{e.classList.add("slick-autocomplete-loading");const o=n;i(t,(t=>{o(t),e.classList.remove("slick-autocomplete-loading")}),s,r)})}function Yt(e){const t=new Date;e.settings.selected={dates:[],month:t.getMonth(),year:t.getFullYear()};const i=e.HTMLInputElement;i&&(i.value=""),e.update({dates:!0,month:!0,year:!0,time:!0})}function Kt(e,t,i,n){const{oldVal:s,newVal:r,columnDef:o,selectedSettings:a,updatePickerUI:l}=n;if(s!==r){const n=e.type||o.type,s=o.outputType||e.type||o.type||y.dateUtc,d=Array.isArray(r)?r:[r||""],c=[],h=Pt(y.dateIso),u=n?Pt(n):void 0;for(const e of d){const t=e instanceof Date?e:Mt(e,u);t&&c.push(t)}const p=a??{dates:[c.map((e=>kt(e,h))).join(":")],month:c[0]?.getMonth(),year:c[0]?.getFullYear(),time:"ISO8601"===u||(u||"").toLowerCase().includes("h")?kt(c[0],"HH:mm"):void 0};jt(i.settings.selected,p)||(i.settings.selected=p,l&&i?.update&&i.update({dates:!0,month:!0,year:!0,time:!0})),t.value=d.length?c.map((e=>Ft(e,void 0,s))).join(" \u2014 "):""}}function qt(e,t){const i=Q("select",{className:"form-control"});for(const n of e){const e=document.createElement("option");e.value=n.operator,t.applyHtmlCode(e,`${ce(n.operatorAlt||n.operator,3)}${n.descAlt||n.desc}`),i.appendChild(e)}return i}async function Xt(e,t,i,n,s){const r=t?.filter??{},o=r?.collectionOptions??{};let a=null;if(e){const l=n?.isObservable(e)??!1;l&&n&&(a=await I(n,e));const d=await e;if(Array.isArray(d)?a=d:d?.status>=200&&d.status<300&&"function"===typeof d.json?a=await d.json():d&&d.content&&(a=d.content),!Array.isArray(a)&&o?.collectionInsideObjectProperty){a=H(a||d,o.collectionInsideObjectProperty||"")}if(!Array.isArray(a))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');r.collection=a,i(a),l&&function(e,t,i,n){const s=e?.filter??{},r=i?.createSubject();s.collectionAsync=r,n&&r&&n.push(r.subscribe((i=>function(e,t,i){const n=t?.filter??{},s=n?.collectionOptions??{};s&&s.collectionInsideObjectProperty&&(e=H(e,s.collectionInsideObjectProperty));if(!Array.isArray(e))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');n.collection=e,i(e)}(i,e,t))))}(t,i,n,s)}return a}function Qt(e,t,i,n,s){if(n?.enableTranslate&&s?.translate){const t=z(n);return s.translate(`${t}${e}`)}const r=n.locales||g.locales;return r?.[t]??i}function Zt(e,t){return[{operator:"",desc:""},{operator:"=",desc:Qt("EQUAL_TO","TEXT_EQUAL_TO","Equal to",e,t)},{operator:"<",desc:Qt("LESS_THAN","TEXT_LESS_THAN","Less than",e,t)},{operator:"<=",desc:Qt("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",e,t)},{operator:">",desc:Qt("GREATER_THAN","TEXT_GREATER_THAN","Greater than",e,t)},{operator:">=",desc:Qt("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",e,t)},{operator:"<>",desc:Qt("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",e,t)}]}function Jt(e,t,i){if(e.compoundOperatorAltTexts)for(const n of t)if(e.compoundOperatorAltTexts.hasOwnProperty(i)){const t=e.compoundOperatorAltTexts[i][n.operator];n.operatorAlt=t?.operatorAlt||"",n.descAlt=t?.descAlt||""}}class ei{get defaultPrevented(){return this._isDefaultPrevented}constructor(e,t){this.event=e,this.args=t,this._isPropagationStopped=!1,this._isImmediatePropagationStopped=!1,this._isDefaultPrevented=!1,this.returnValue=void 0,this.nativeEvent=e,this._arguments=t,e&&["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","target","type","which","x","y"].forEach((t=>this[t]=e[t])),this._eventTarget=this.nativeEvent?this.nativeEvent.target:void 0}stopPropagation(){this._isPropagationStopped=!0,this.nativeEvent?.stopPropagation()}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0,this.nativeEvent&&this.nativeEvent.stopImmediatePropagation()}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}getNativeEvent(){return this.nativeEvent}preventDefault(){this.nativeEvent&&this.nativeEvent.preventDefault(),this._isDefaultPrevented=!0}isDefaultPrevented(){return this.nativeEvent?this.nativeEvent.defaultPrevented:this._isDefaultPrevented}addReturnValue(e){void 0===this.returnValue&&void 0!==e&&(this.returnValue=e)}getReturnValue(){return this.returnValue}getArguments(){return this._arguments}resetReturnValue(){this.returnValue=void 0}}class ti{get subscriberCount(){return this._handlers.length}constructor(e,t){this.eventName=e,this.pubSub=t,this._handlers=[],this._pubSubService=t}subscribe(e){this._handlers.push(e)}unsubscribe(e){for(let t=this._handlers.length-1;t>=0;t--)this._handlers[t]===e&&this._handlers.splice(t,1)}notify(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=t instanceof ei?t:new ei(t,e);n&&s.resetReturnValue(),i=i||this;for(let r=0;r<this._handlers.length&&!s.isPropagationStopped()&&!s.isImmediatePropagationStopped();r++){const t=this._handlers[r].call(i,s,e);s.addReturnValue(t)}if("function"===typeof this._pubSubService?.publish&&this.eventName){const t=this._pubSubService.publish(this.eventName,{args:e,eventData:s},void 0,(e=>s.nativeEvent??=e));s.addReturnValue(t)}return s}setPubSubService(e){this._pubSubService=e}}class ii{constructor(){this.handlers=[]}get subscriberCount(){return this.handlers.length}subscribe(e,t){return this.handlers.push({event:e,handler:t}),e.subscribe(t),this}unsubscribe(e,t){let i=this.handlers.length;for(;i--;)if(this.handlers[i].event===e&&this.handlers[i].handler===t)return this.handlers.splice(i,1),void e.unsubscribe(t);return this}unsubscribeAll(){let e=this.handlers.length;for(;e--;)this.handlers[e].event.unsubscribe(this.handlers[e].handler);return this.handlers=[],this}}class ni{constructor(e,t,i,n){void 0===i&&void 0===n&&(i=e,n=t),this.fromRow=Math.min(e,i),this.fromCell=Math.min(t,n),this.toRow=Math.max(e,i),this.toCell=Math.max(t,n)}isSingleCell(){return this.fromRow===this.toRow&&this.fromCell===this.toCell}isSingleRow(){return this.fromRow===this.toRow}contains(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell}toString(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}}class si{constructor(){this.__nonDataRow=!0}}class ri extends si{constructor(){super(),this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=""}equals(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title}}class oi extends si{constructor(){super(),this.__groupTotals=!0,this.group=null,this.initialized=!1}}class ai{static height(e,t){if(e)return void 0===t?e.getBoundingClientRect().height:void ai.setStyleSize(e,"height",t)}static width(e,t){if(e&&e.getBoundingClientRect)return void 0===t?e.getBoundingClientRect().width:void ai.setStyleSize(e,"width",t)}static setStyleSize(e,t,i){"function"===typeof i&&(i=i()),e.style[t]="string"===typeof i?i:`${i}px`}static isHidden(e){return 0===e.offsetWidth&&0===e.offsetHeight}static parents(e,t){const i=[],n=":visible"===t,s=":hidden"===t;for(;(e=e.parentNode)&&e!==document&&e&&e.parentNode;)s?ai.isHidden(e)&&i.push(e):n?ai.isHidden(e)||i.push(e):t&&!e.matches(t)||i.push(e);return i}static toFloat(e){const t=parseFloat(e);return isNaN(t)?0:t}static show(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Array.isArray(e)?e.forEach((e=>e.style.display=t)):e.style.display=t}static hide(e){Array.isArray(e)?e.forEach((e=>e.style.display="none")):e.style.display="none"}static applyDefaults(e,t){"object"===typeof t&&Object.keys(t).forEach((i=>{t.hasOwnProperty(i)&&!e.hasOwnProperty(i)&&(e[i]=t[i])}))}static addSlickEventPubSubWhenDefined(e,t){if(e)for(const i in t)t[i]instanceof ti&&"function"===typeof t[i].setPubSubService&&t[i].setPubSubService(e)}}ai.storage={_storage:new WeakMap,put:function(e,t,i){this._storage.has(e)||this._storage.set(e,new Map),this._storage.get(e).set(t,i)},get:function(e,t){const i=this._storage.get(e);return i?i.get(t):null},remove:function(e,t){const i=this._storage.get(e).delete(t);return 0!==this._storage.get(e).size&&this._storage.delete(e),i}};const li=new class{constructor(){this.activeEditController=null}isActive(e){return e?this.activeEditController===e:null!==this.activeEditController}activate(e){if(e!==this.activeEditController){if(null!==this.activeEditController)throw new Error("SlickEditorLock.activate: an editController is still active, can't activate another editController");if(!e.commitCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .commitCurrentEdit()");if(!e.cancelCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .cancelCurrentEdit()");this.activeEditController=e}}deactivate(e){if(this.activeEditController){if(this.activeEditController!==e)throw new Error("SlickEditorLock.deactivate: specified editController is not the currently active one");this.activeEditController=null}}commitCurrentEdit(){return!this.activeEditController||this.activeEditController.commitCurrentEdit()}cancelCurrentEdit(){return!this.activeEditController||this.activeEditController.cancelCurrentEdit()}};class di{constructor(e){this.pluginName="GroupItemMetadataProvider",this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new ii,this._options=Se(!0,{},this._defaults,e)}get eventHandler(){return this._eventHandler}get dataView(){return this._grid?.getData()??{}}get gridOptions(){return this._grid?.getOptions()||{}}init(e,t){this._grid=e,this._options={...this._defaults,...t},this._eventHandler.subscribe(e.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(e.onKeyDown,this.handleGridKeyDown.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}getOptions(){return this._options}setOptions(e){this._options={...this._options,...e}}getGroupRowMetadata(e,t){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${e?.level||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter||void 0,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editorClass:null}}}}getTotalsRowMetadata(e,t){return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${e?.group?.level||0}`,formatter:this._options.totalsFormatter,editorClass:null}}defaultGroupCellFormatter(e,t,i,n,s){if(!this._options.enableExpandCollapse)return s.title;const r=s.level||0,o=r*(this._options?.indentation??15)+"px",a=s.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass,l=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;l.appendChild(Q("span",{className:`${this._options.toggleCssClass} ${a}`,ariaExpanded:String(!s.collapsed),style:{marginLeft:o}}));const d=Q("span",{className:this._options.groupTitleCssClass||""});return d.setAttribute("level",r),s.title instanceof HTMLElement||s.title instanceof DocumentFragment?d.appendChild(s.title):this._grid.applyHtmlCode(d,s.title??""),l.appendChild(d),l}defaultTotalsCellFormatter(e,t,i,n,s,r){return n?.groupTotalsFormatter?.(s,n,r)??""}handleGridClick(e,t){const i=e.target,n=this._grid?.getDataItem(t.row);n instanceof ri&&i.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(n),e.stopImmediatePropagation(),e.preventDefault())}handleGridKeyDown(e){if(this._options.enableExpandCollapse&&" "===e.key){const t=this._grid?.getActiveCell();if(t){const i=this._grid.getDataItem(t.row);i instanceof ri&&(this.handleDataViewExpandOrCollapse(i),e.stopImmediatePropagation(),e.preventDefault())}}}handleDataViewExpandOrCollapse(e){const t=this._grid?.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:t.top,ignoreDiffsAfter:t.bottom+1}),e.collapsed?this.dataView.expandGroup(e.groupingKey):this.dataView.collapseGroup(e.groupingKey)}}class ci{constructor(e,t){this.externalPubSub=t,this.defaults={globalItemMetadataProvider:null,groupItemMetadataProvider:null,inlineFilters:!1,useCSPSafeFilter:!1},this.idProperty="id",this.items=[],this.rows=[],this.idxById=new Map,this.rowsById=void 0,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.suspend=!1,this.isBulkSuspend=!1,this.bulkDeleteIds=new Map,this.sortAsc=!0,this.refreshHints={},this.prevRefreshHints={},this.filteredItems=[],this.filterCache=[],this.groupingInfoDefaults={getter:void 0,formatter:void 0,comparer:(e,t)=>e.value===t.value?0:e.value>t.value?1:-1,predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},this.groupingInfos=[],this.groups=[],this.toggledGroupsByLevel=[],this.groupingDelimiter=":|:",this.selectedRowIds=[],this.pagesize=0,this.pagenum=0,this.totalRows=0,this.onBeforePagingInfoChanged=new ti("onBeforePagingInfoChanged",t),this.onGroupExpanded=new ti("onGroupExpanded",t),this.onGroupCollapsed=new ti("onGroupCollapsed",t),this.onPagingInfoChanged=new ti("onPagingInfoChanged",t),this.onRowCountChanged=new ti("onRowCountChanged",t),this.onRowsChanged=new ti("onRowsChanged",t),this.onRowsOrCountChanged=new ti("onRowsOrCountChanged",t),this.onSelectedRowIdsChanged=new ti("onSelectedRowIdsChanged",t),this.onSetItemsCalled=new ti("onSetItemsCalled",t),this._options=Se(!0,{},this.defaults,e)}beginUpdate(e){this.suspend=!0,this.isBulkSuspend=!0===e}endUpdate(){const e=this.isBulkSuspend;this.isBulkSuspend=!1,this.suspend=!1,e&&(this.processBulkDelete(),this.ensureIdUniqueness()),this.refresh()}destroy(){this.items=[],this.idProperty="id",this.idxById=null,this.rowsById=null,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.sortComparer=null,this.filterCache=[],this.filteredItems=[],this.compiledFilter=null,this.compiledFilterCSPSafe=null,this.compiledFilterWithCaching=null,this.compiledFilterWithCachingCSPSafe=null,this._grid&&(this._grid.onSelectedRowsChanged?.unsubscribe(),this._grid.onCellCssStylesChanged?.unsubscribe()),this.onRowsOrCountChanged?.unsubscribe()}setRefreshHints(e){this.refreshHints=e}getFilterArgs(){return this.filterArgs}setFilterArgs(e){this.filterArgs=e}processBulkDelete(){if(!this.idxById)return;let e,t,i=0;for(let n=0,s=this.items.length;n<s;n++){if(t=this.items[n],e=t[this.idProperty],void 0===e)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.bulkDeleteIds.has(e)?this.idxById.delete(e):(this.items[i]=t,this.idxById.set(e,i),++i)}this.items.length=i,this.bulkDeleteIds=new Map}updateIdxById(e){if(this.isBulkSuspend||!this.idxById)return;let t;for(let i=e=e||0,n=this.items.length;i<n;i++){if(t=this.items[i][this.idProperty],void 0===t)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.idxById.set(t,i)}}ensureIdUniqueness(){if(this.isBulkSuspend||!this.idxById)return;let e;for(let t=0,i=this.items.length;t<i;t++)if(e=this.items[t][this.idProperty],void 0===e||this.idxById.get(e)!==t)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}getItems(){return this.items}getIdPropertyName(){return this.idProperty}setItems(e,t){void 0!==t&&(this.idProperty=t),this.items=this.filteredItems=e,this.onSetItemsCalled.notify({idProperty:this.idProperty,itemCount:this.items.length},null,this),this.idxById=new Map,this.updateIdxById(),this.ensureIdUniqueness(),this.refresh()}setPagingOptions(e){!1!==this.onBeforePagingInfoChanged.notify(this.getPagingInfo(),null,this).getReturnValue()&&(Re(e.pageSize)&&(this.pagesize=e.pageSize,this.pagenum=this.pagesize?Math.min(this.pagenum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1)):0),Re(e.pageNum)&&(this.pagenum=Math.min(e.pageNum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1))),this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),this.refresh())}getPagingInfo(){const e=this.pagesize?Math.max(1,Math.ceil(this.totalRows/this.pagesize)):1;return{pageSize:this.pagesize,pageNum:this.pagenum,totalRows:this.totalRows,totalPages:e,dataView:this}}sort(e,t){this.sortAsc=t,this.sortComparer=e,!1===t&&this.items.reverse(),this.items.sort(e),!1===t&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}reSort(){this.sortComparer&&this.sort(this.sortComparer,this.sortAsc)}getFilteredItems(){return this.filteredItems}getFilteredItemCount(){return this.filteredItems.length}getFilter(){return this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter}setFilter(e){this.filterCSPSafe=e,this.filter=e,this._options.inlineFilters&&(this.compiledFilterCSPSafe=this.compileFilterCSPSafe,this.compiledFilterWithCachingCSPSafe=this.compileFilterWithCachingCSPSafe,this.compiledFilter=this.compileFilter(this._options.useCSPSafeFilter),this.compiledFilterWithCaching=this.compileFilterWithCaching(this._options.useCSPSafeFilter)),this.refresh()}getGrouping(){return this.groupingInfos}setGrouping(e){this._options.groupItemMetadataProvider||(this._options.groupItemMetadataProvider=new di),this.groups=[],this.toggledGroupsByLevel=[],e=e||[],this.groupingInfos=e instanceof Array?e:[e];for(let t=0;t<this.groupingInfos.length;t++){const e=this.groupingInfos[t]=Se(!0,{},this.groupingInfoDefaults,this.groupingInfos[t]);e.getterIsAFn="function"===typeof e.getter,e.compiledAccumulators=[];let i=e.aggregators.length;for(;i--;)e.compiledAccumulators[i]=this.compileAccumulatorLoopCSPSafe(e.aggregators[i]);this.toggledGroupsByLevel[t]={}}this.refresh()}getItemByIdx(e){return this.items[e]}getIdxById(e){return this.idxById?.get(e)}ensureRowsByIdCache(){if(!this.rowsById){this.rowsById={};for(let e=0,t=this.rows.length;e<t;e++)this.rowsById[this.rows[e][this.idProperty]]=e}}getRowByItem(e){return this.ensureRowsByIdCache(),this.rowsById?.[e[this.idProperty]]}getRowById(e){return this.ensureRowsByIdCache(),this.rowsById?.[e]}getItemById(e){return this.items[this.idxById.get(e)]}mapItemsToRows(e){const t=[];this.ensureRowsByIdCache();for(let i=0,n=e.length;i<n;i++){const n=this.rowsById?.[e[i][this.idProperty]];Re(n)&&(t[t.length]=n)}return t}mapIdsToRows(e){const t=[];this.ensureRowsByIdCache();for(let i=0,n=e.length;i<n;i++){const n=this.rowsById?.[e[i]];Re(n)&&(t[t.length]=n)}return t}mapRowsToIds(e){const t=[];for(let i=0,n=e.length;i<n;i++)if(e[i]<this.rows.length){const n=this.rows[e[i]];t[t.length]=n[this.idProperty]}return t}updateSingleItem(e,t){if(this.idxById){if(!this.idxById.has(e))throw new Error("[SlickGrid DataView] Invalid id");if(e!==t[this.idProperty]){const i=t[this.idProperty];if(!Re(i))throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(this.idxById.has(i))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");this.idxById.set(i,this.idxById.get(e)),this.idxById.delete(e),this.updated?.[e]&&delete this.updated[e],e=i}this.items[this.idxById.get(e)]=t,this.updated||(this.updated={}),this.updated[e]=!0}}updateItem(e,t){this.updateSingleItem(e,t),this.refresh()}updateItems(e,t){if(e.length!==t.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(let i=0,n=t.length;i<n;i++)this.updateSingleItem(e[i],t[i]);this.refresh()}insertItem(e,t){this.items.splice(e,0,t),this.updateIdxById(e),this.refresh()}insertItems(e,t){Array.prototype.splice.apply(this.items,[e,0].concat(t)),this.updateIdxById(e),this.refresh()}addItem(e){this.items.push(e),this.updateIdxById(this.items.length-1),this.refresh()}addItems(e){this.items=this.items.concat(e),this.updateIdxById(this.items.length-e.length),this.refresh()}deleteItem(e){if(this.idxById)if(this.isBulkSuspend)this.bulkDeleteIds.set(e,!0);else{const t=this.idxById.get(e);if(void 0===t)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(e),this.items.splice(t,1),this.updateIdxById(t),this.refresh()}}deleteItems(e){if(0!==e.length&&this.idxById)if(this.isBulkSuspend)for(let t=0,i=e.length;t<i;t++){const i=e[t];if(void 0===this.idxById.get(i))throw new Error("[SlickGrid DataView] Invalid id");this.bulkDeleteIds.set(i,!0)}else{const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],s=this.idxById.get(n);if(void 0===s)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(n),t.push(s)}t.sort();for(let e=t.length-1;e>=0;--e)this.items.splice(t[e],1);this.updateIdxById(t[0]),this.refresh()}}sortedAddItem(e){if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");this.insertItem(this.sortedIndex(e),e)}sortedUpdateItem(e,t){if(!this.idxById)return;if(!this.idxById.has(e)||e!==t[this.idProperty])throw new Error(`[SlickGrid DataView] Invalid or non-matching id ${e}`);if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");const i=this.getItemById(e);0!==this.sortComparer(i,t)?(this.deleteItem(e),this.sortedAddItem(t)):this.updateItem(e,t)}sortedIndex(e){let t=0,i=this.items.length;for(;t<i;){const n=t+i>>>1;-1===this.sortComparer(this.items[n],e)?t=n+1:i=n}return t}getItemCount(){return this.items.length}getLength(){return this.rows.length}getItem(e){const t=this.rows[e];if(t?.__group&&t.totals&&!t.totals?.initialized){const e=this.groupingInfos[t.level];e.displayTotalsRow||(this.calculateTotals(t.totals),t.title=e.formatter?e.formatter(t):t.value)}else t?.__groupTotals&&!t.initialized&&this.calculateTotals(t);return t}getItemMetadata(e){const t=this.rows[e];return void 0===t?null:this._options.globalItemMetadataProvider?.getRowMetadata?this._options.globalItemMetadataProvider.getRowMetadata(t,e):t.__group&&this._options.groupItemMetadataProvider?.getGroupRowMetadata?this._options.groupItemMetadataProvider.getGroupRowMetadata(t,e):t.__groupTotals&&this._options.groupItemMetadataProvider?.getTotalsRowMetadata?this._options.groupItemMetadataProvider.getTotalsRowMetadata(t,e):null}expandCollapseAllGroups(e,t){if(Re(e))this.toggledGroupsByLevel[e]={},this.groupingInfos[e].collapsed=t,!0===t?this.onGroupCollapsed.notify({level:e,groupingKey:null}):this.onGroupExpanded.notify({level:e,groupingKey:null});else for(let i=0;i<this.groupingInfos.length;i++)this.toggledGroupsByLevel[i]={},this.groupingInfos[i].collapsed=t,!0===t?this.onGroupCollapsed.notify({level:i,groupingKey:null}):this.onGroupExpanded.notify({level:i,groupingKey:null});this.refresh()}collapseAllGroups(e){this.expandCollapseAllGroups(e,!0)}expandAllGroups(e){this.expandCollapseAllGroups(e,!1)}expandCollapseGroup(e,t,i){this.toggledGroupsByLevel[e]&&(this.toggledGroupsByLevel[e][t]=this.groupingInfos[e].collapsed^i),this.refresh()}collapseGroup(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=Array.prototype.slice.call(t)[0];let s,r;1===t.length&&-1!==n.indexOf(this.groupingDelimiter)?(s=n,r=n.split(this.groupingDelimiter).length-1):(s=t.join(this.groupingDelimiter),r=t.length-1),this.expandCollapseGroup(r,s,!0),this.onGroupCollapsed.notify({level:r,groupingKey:s})}expandGroup(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=Array.prototype.slice.call(t)[0];let s,r;1===t.length&&-1!==n.indexOf(this.groupingDelimiter)?(r=n.split(this.groupingDelimiter).length-1,s=n):(r=t.length-1,s=t.join(this.groupingDelimiter)),this.expandCollapseGroup(r,s,!1),this.onGroupExpanded.notify({level:r,groupingKey:s})}getGroups(){return this.groups}extractGroups(e,t){let i,n;const s=[],r={};let o;const a=t?t.level+1:0,l=this.groupingInfos[a];for(let d=0,c=l.predefinedValues?.length??0;d<c;d++)n=l.predefinedValues?.[d],i=r[n],i||(i=new ri,i.value=n,i.level=a,i.groupingKey=(t?t.groupingKey+this.groupingDelimiter:"")+n,s[s.length]=i,r[n]=i);for(let d=0,c=e.length;d<c;d++)o=e[d],n=l.getterIsAFn?l.getter(o):o[l.getter],i=r[n],i||(i=new ri,i.value=n,i.level=a,i.groupingKey=(t?t.groupingKey+this.groupingDelimiter:"")+n,s[s.length]=i,r[n]=i),i.rows[i.count++]=o;if(a<this.groupingInfos.length-1)for(let d=0;d<s.length;d++)i=s[d],i.groups=this.extractGroups(i.rows,i);return s.length&&this.addTotals(s,a),s.sort(this.groupingInfos[a].comparer),s}calculateTotals(e){const t=e.group,i=this.groupingInfos[t?.level??0],n=t.level===this.groupingInfos.length;let s,r=i.aggregators.length;if(!n&&i.aggregateChildGroups){let e=t.groups?.length??0;for(;e--;)t.groups[e].totals.initialized||this.calculateTotals(t.groups[e].totals)}for(;r--;)s=i.aggregators[r],s.init(),!n&&i.aggregateChildGroups?i.compiledAccumulators[r].call(s,t.groups):i.compiledAccumulators[r].call(s,t.rows),s.storeResult(e);e.initialized=!0}addGroupTotals(e){const t=this.groupingInfos[e.level],i=new oi;i.group=e,e.totals=i,t.lazyTotalsCalculation||this.calculateTotals(i)}addTotals(e,t){t=t||0;const i=this.groupingInfos[t],n=i.collapsed,s=this.toggledGroupsByLevel[t];let r,o=e.length;for(;o--;)r=e[o],r.collapsed&&!i.aggregateCollapsed||(r.groups&&this.addTotals(r.groups,t+1),i.aggregators?.length&&(i.aggregateEmpty||r.rows.length||r.groups?.length)&&this.addGroupTotals(r),r.collapsed=n^s[r.groupingKey],r.title=i.formatter?i.formatter(r):r.value)}flattenGroupedRows(e,t){t=t||0;const i=this.groupingInfos[t],n=[];let s,r,o=0;for(let a=0,l=e.length;a<l;a++){if(r=e[a],n[o++]=r,!r.collapsed){s=r.groups?this.flattenGroupedRows(r.groups,t+1):r.rows;for(let e=0,t=s.length;e<t;e++)n[o++]=s[e]}r.totals&&i.displayTotalsRow&&(!r.collapsed||i.aggregateCollapsed)&&(n[o++]=r.totals)}return n}compileAccumulatorLoopCSPSafe(e){return e.accumulate?function(t){let i;if(Array.isArray(t))for(let n=0;n<t.length;n++){const s=t[n];i=e.accumulate.call(e,s)}return i}:function(){}}compileFilterCSPSafe(e,t){if("function"!==typeof this.filterCSPSafe)return[];const i=[],n=e.length;for(let s=0;s<n;s++)this.filterCSPSafe(e[s],t)&&i.push(e[s]);return i}compileFilter(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return null;const e=ke(this.filter),t="{ continue _coreloop; }$1",i="{ _retval[_idx++] = $item$; continue _coreloop; }$1",n=e.body.replace(/return false\s*([;}]|\}|$)/gi,t).replace(/return!1([;}]|\}|$)/gi,t).replace(/return true\s*([;}]|\}|$)/gi,i).replace(/return!0([;}]|\}|$)/gi,i).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let s=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");s=s.replace(/\$filter\$/gi,n),s=s.replace(/\$item\$/gi,e.params[0]),s=s.replace(/\$args\$/gi,e.params[1]);const r=new Function("_items,_args",s),o="compiledFilter";return r.displayName=o,r.name=this.setFunctionName(r,o),r}compileFilterWithCaching(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return null;const e=ke(this.filter),t="{ continue _coreloop; }$1",i="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",n=e.body.replace(/return false\s*([;}]|\}|$)/gi,t).replace(/return!1([;}]|\}|$)/gi,t).replace(/return true\s*([;}]|\}|$)/gi,i).replace(/return!0([;}]|\}|$)/gi,i).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let s=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");s=s.replace(/\$filter\$/gi,n),s=s.replace(/\$item\$/gi,e.params[0]),s=s.replace(/\$args\$/gi,e.params[1]);const r=new Function("_items,_args,_cache",s),o="compiledFilterWithCaching";return r.displayName=o,r.name=this.setFunctionName(r,o),r}compileFilterWithCachingCSPSafe(e,t,i){if("function"!==typeof this.filterCSPSafe)return[];const n=[],s=e.length;for(let r=0;r<s;r++)(i[r]||this.filterCSPSafe(e[r],t))&&n.push(e[r]);return n}setFunctionName(e,t){try{Object.defineProperty(e,"name",{writable:!0,value:t})}catch($d){e.name=t}}uncompiledFilter(e,t){const i=[];let n=0;for(let s=0,r=e.length;s<r;s++)this.filter?.(e[s],t)&&(i[n++]=e[s]);return i}uncompiledFilterWithCaching(e,t,i){const n=[];let s,r=0;for(let o=0,a=e.length;o<a;o++)s=e[o],i[o]?n[r++]=s:this.filter?.(s,t)&&(n[r++]=s,i[o]=!0);return n}getFilteredAndPagedItems(e){if(this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter){let t,i;this._options.useCSPSafeFilter?(t=this._options.inlineFilters?this.compiledFilterCSPSafe:this.uncompiledFilter,i=this._options.inlineFilters?this.compiledFilterWithCachingCSPSafe:this.uncompiledFilterWithCaching):(t=this._options.inlineFilters?this.compiledFilter:this.uncompiledFilter,i=this._options.inlineFilters?this.compiledFilterWithCaching:this.uncompiledFilterWithCaching),this.refreshHints.isFilterNarrowing?this.filteredItems=t.call(this,this.filteredItems,this.filterArgs):this.refreshHints.isFilterExpanding?this.filteredItems=i.call(this,e,this.filterArgs,this.filterCache):this.refreshHints.isFilterUnchanged||(this.filteredItems=t.call(this,e,this.filterArgs))}else this.filteredItems=this.pagesize?e:e.concat();let t;return this.pagesize?(this.filteredItems.length<=this.pagenum*this.pagesize&&(0===this.filteredItems.length?this.pagenum=0:this.pagenum=Math.floor((this.filteredItems.length-1)/this.pagesize)),t=this.filteredItems.slice(this.pagesize*this.pagenum,this.pagesize*this.pagenum+this.pagesize)):t=this.filteredItems,{totalRows:this.filteredItems.length,rows:t}}getRowDiffs(e,t){let i,n,s;const r=[];let o=0,a=Math.max(t.length,e.length);this.refreshHints?.ignoreDiffsBefore&&(o=Math.max(0,Math.min(t.length,this.refreshHints.ignoreDiffsBefore))),this.refreshHints?.ignoreDiffsAfter&&(a=Math.min(t.length,Math.max(0,this.refreshHints.ignoreDiffsAfter)));for(let l=o,d=e.length;l<a;l++)l>=d?r[r.length]=l:(i=t[l],n=e[l],(!i||this.groupingInfos.length&&(s=i.__nonDataRow||n.__nonDataRow)&&i.__group!==n.__group||i.__group&&!i.equals(n)||s&&(i.__groupTotals||n.__groupTotals)||i[this.idProperty]!==n[this.idProperty]||this.updated?.[i[this.idProperty]])&&(r[r.length]=l));return r}recalc(e){this.rowsById=void 0,this.refreshHints.isFilterNarrowing===this.prevRefreshHints.isFilterNarrowing&&this.refreshHints.isFilterExpanding===this.prevRefreshHints.isFilterExpanding||(this.filterCache=[]);const t=this.getFilteredAndPagedItems(e);this.totalRows=t.totalRows;let i=t.rows;this.groups=[],this.groupingInfos.length&&(this.groups=this.extractGroups(i),this.groups.length&&(i=this.flattenGroupedRows(this.groups)));const n=this.getRowDiffs(this.rows,i);return this.rows=i,n}refresh(){if(this.suspend)return;const e=Se(!0,{},this.getPagingInfo()),t=this.rows.length,i=this.totalRows;let n=this.recalc(this.items);this.pagesize&&this.totalRows<this.pagenum*this.pagesize&&(this.pagenum=Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1),n=this.recalc(this.items)),this.updated=null,this.prevRefreshHints=this.refreshHints,this.refreshHints={},i!==this.totalRows&&!1!==this.onBeforePagingInfoChanged.notify(e,null,this).getReturnValue()&&this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),t!==this.rows.length&&this.onRowCountChanged.notify({previous:t,current:this.rows.length,itemCount:this.items.length,dataView:this,callingOnRowsChanged:n.length>0},null,this),n.length>0&&this.onRowsChanged.notify({rows:n,itemCount:this.items.length,dataView:this,calledOnRowCountChanged:t!==this.rows.length},null,this),(t!==this.rows.length||n.length>0)&&this.onRowsOrCountChanged.notify({rowsDiff:n,previousRowCount:t,currentRowCount:this.rows.length,itemCount:this.items.length,rowCountChanged:t!==this.rows.length,rowsChanged:n.length>0,dataView:this},null,this)}syncGridSelection(e,t,i){let n;this._grid=e,this.selectedRowIds=this.mapRowsToIds(e.getSelectedRows());const s=e.getOptions(),r=e=>{!1===e?this.selectedRowIds=[]:this.selectedRowIds.sort().join(",")!==e.sort().join(",")&&(this.selectedRowIds=e)};return e.onSelectedRowsChanged.subscribe(((e,t)=>{if(!n){const e=this.mapRowsToIds(t.rows),i={grid:this._grid,ids:e,rows:t.rows,added:!0,dataView:this};this.preSelectedRowIdsChangeFn(i),this.onSelectedRowIdsChanged.notify(Object.assign(i,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new ei,this)}})),this.preSelectedRowIdsChangeFn=e=>{if(!n){n=!0;if("undefined"===typeof e.added)r(e.ids);else{let t;if(e.added)if(i&&s.multiSelect){const i=this.selectedRowIds?.filter((e=>void 0===this.getRowById(e)));t=i.concat(e.ids)}else t=e.ids;else if(i&&s.multiSelect){const i=new Set(e.ids);t=this.selectedRowIds?.filter((e=>!i.has(e)))}else t=[];r(t)}n=!1}},this.onRowsOrCountChanged.subscribe((()=>{if((this.selectedRowIds||[]).length>0&&!n){n=!0;const i=this.mapIdsToRows(this.selectedRowIds||[]);if(!t){const e={grid:this._grid,ids:this.mapRowsToIds(i),rows:i,dataView:this};this.preSelectedRowIdsChangeFn(e),this.onSelectedRowIdsChanged.notify(Object.assign(e,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new ei,this)}e.setSelectedRows(i),n=!1}}).bind(this)),this.onSelectedRowIdsChanged}getAllSelectedIds(){return this.selectedRowIds}getAllSelectedFilteredIds(){return this.getAllSelectedFilteredItems().map((e=>e[this.idProperty]))}setSelectedIds(e,t){let i=t?.isRowBeingAdded;const n=t?.shouldTriggerEvent,s=t?.applyRowSelectionToGrid;!1!==i&&(i=!0);const r=this.mapIdsToRows(e),o={grid:this._grid,ids:e,rows:r,added:i,dataView:this};this.preSelectedRowIdsChangeFn?.(o),!1!==n&&this.onSelectedRowIdsChanged.notify(Object.assign(o,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new ei,this),!1!==s&&this._grid&&this._grid.setSelectedRows(r)}getAllSelectedItems(){const e=[];return this.getAllSelectedIds().forEach((t=>{e.push(this.getItemById(t))})),e}getAllSelectedFilteredItems(){if(!Array.isArray(this.selectedRowIds))return[];const e=new Set(this.selectedRowIds);return this.filteredItems.filter((t=>e.has(t[this.idProperty])))||[]}syncGridCellCssStyles(e,t){let i,n;const s=e=>{i={},"object"===typeof e&&Object.keys(e).forEach((t=>{if(e&&this.rows[t]){const n=this.rows[t][this.idProperty];i[n]=e[t]}}))};s(e.getCellCssStyles(t));const r=()=>{if("object"===typeof i){n=!0,this.ensureRowsByIdCache();const s={};Object.keys(i).forEach((e=>{const t=this.rowsById?.[e];Re(t)&&(s[t]=i[e])})),e.setCellCssStyles(t,s),n=!1}};e.onCellCssStylesChanged.subscribe(((i,o)=>{n||t!==o.key||(o.hash?s(o.hash):(e.onCellCssStylesChanged.unsubscribe(),this.onRowsOrCountChanged.unsubscribe(r)))})),this.onRowsOrCountChanged.subscribe(r.bind(this))}}function hi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ui(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?hi(Object(i),!0).forEach((function(t){mi(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function pi(e){return pi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pi(e)}function mi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function gi(){return gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},gi.apply(this,arguments)}function fi(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}function vi(e){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var bi=vi(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),yi=vi(/Edge/i),_i=vi(/firefox/i),Si=vi(/safari/i)&&!vi(/chrome/i)&&!vi(/android/i),wi=vi(/iP(ad|od|hone)/i),Ci=vi(/chrome/i)&&vi(/android/i),Ei={capture:!1,passive:!1};function Oi(e,t,i){e.addEventListener(t,i,!bi&&Ei)}function xi(e,t,i){e.removeEventListener(t,i,!bi&&Ei)}function Ti(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(Ca){return!1}return!1}}function ki(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Ii(e,t,i,n){if(e){i=i||document;do{if(null!=t&&(">"===t[0]?e.parentNode===i&&Ti(e,t):Ti(e,t))||n&&e===i)return e;if(e===i)break}while(e=ki(e))}return null}var Ri,Ai=/\s+/g;function Di(e,t,i){if(e&&t)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(Ai," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(Ai," ")}}function Pi(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||-1!==t.indexOf("webkit")||(t="-webkit-"+t),n[t]=i+("string"===typeof i?"":"px")}}function Fi(e,t){var i="";if("string"===typeof e)i=e;else do{var n=Pi(e,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!t&&(e=e.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(i)}function Mi(e,t,i){if(e){var n=e.getElementsByTagName(t),s=0,r=n.length;if(i)for(;s<r;s++)i(n[s],s);return n}return[]}function Li(){var e=document.scrollingElement;return e||document.documentElement}function Ni(e,t,i,n,s){if(e.getBoundingClientRect||e===window){var r,o,a,l,d,c,h;if(e!==window&&e.parentNode&&e!==Li()?(o=(r=e.getBoundingClientRect()).top,a=r.left,l=r.bottom,d=r.right,c=r.height,h=r.width):(o=0,a=0,l=window.innerHeight,d=window.innerWidth,c=window.innerHeight,h=window.innerWidth),(t||i)&&e!==window&&(s=s||e.parentNode,!bi))do{if(s&&s.getBoundingClientRect&&("none"!==Pi(s,"transform")||i&&"static"!==Pi(s,"position"))){var u=s.getBoundingClientRect();o-=u.top+parseInt(Pi(s,"border-top-width")),a-=u.left+parseInt(Pi(s,"border-left-width")),l=o+r.height,d=a+r.width;break}}while(s=s.parentNode);if(n&&e!==window){var p=Fi(s||e),m=p&&p.a,g=p&&p.d;p&&(l=(o/=g)+(c/=g),d=(a/=m)+(h/=m))}return{top:o,left:a,bottom:l,right:d,width:h,height:c}}}function Bi(e,t,i){for(var n=Vi(e,!0),s=Ni(e)[t];n;){var r=Ni(n)[i];if(!("top"===i||"left"===i?s>=r:s<=r))return n;if(n===Li())break;n=Vi(n,!1)}return!1}function Hi(e,t,i,n){for(var s=0,r=0,o=e.children;r<o.length;){if("none"!==o[r].style.display&&o[r]!==qn.ghost&&(n||o[r]!==qn.dragged)&&Ii(o[r],i.draggable,e,!1)){if(s===t)return o[r];s++}r++}return null}function zi(e,t){for(var i=e.lastElementChild;i&&(i===qn.ghost||"none"===Pi(i,"display")||t&&!Ti(i,t));)i=i.previousElementSibling;return i||null}function $i(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===qn.clone||t&&!Ti(e,t)||i++;return i}function Ui(e){var t=0,i=0,n=Li();if(e)do{var s=Fi(e),r=s.a,o=s.d;t+=e.scrollLeft*r,i+=e.scrollTop*o}while(e!==n&&(e=e.parentNode));return[t,i]}function Vi(e,t){if(!e||!e.getBoundingClientRect)return Li();var i=e,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var s=Pi(i);if(i.clientWidth<i.scrollWidth&&("auto"==s.overflowX||"scroll"==s.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==s.overflowY||"scroll"==s.overflowY)){if(!i.getBoundingClientRect||i===document.body)return Li();if(n||t)return i;n=!0}}}while(i=i.parentNode);return Li()}function Wi(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ji(e,t){return function(){if(!Ri){var i=arguments;1===i.length?e.call(this,i[0]):e.apply(this,i),Ri=setTimeout((function(){Ri=void 0}),t)}}}function Gi(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function Yi(e){var t=window.Polymer,i=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):i?i(e).clone(!0)[0]:e.cloneNode(!0)}function Ki(e,t,i){var n={};return Array.from(e.children).forEach((function(s){var r,o,a,l;if(Ii(s,t.draggable,e,!1)&&!s.animated&&s!==i){var d=Ni(s);n.left=Math.min(null!==(r=n.left)&&void 0!==r?r:1/0,d.left),n.top=Math.min(null!==(o=n.top)&&void 0!==o?o:1/0,d.top),n.right=Math.max(null!==(a=n.right)&&void 0!==a?a:-1/0,d.right),n.bottom=Math.max(null!==(l=n.bottom)&&void 0!==l?l:-1/0,d.bottom)}})),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var qi="Sortable"+(new Date).getTime();function Xi(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Pi(e,"display")&&e!==qn.ghost){t.push({target:e,rect:Ni(e)});var i=ui({},t[t.length-1].rect);if(e.thisAnimationDuration){var n=Fi(e,!0);n&&(i.top-=n.f,i.left-=n.e)}e.fromRect=i}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var i in e)if(e.hasOwnProperty(i))for(var n in t)if(t.hasOwnProperty(n)&&t[n]===e[i][n])return Number(i);return-1}(t,{target:e}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(e),void("function"===typeof i&&i());var s=!1,r=0;t.forEach((function(e){var t=0,i=e.target,o=i.fromRect,a=Ni(i),l=i.prevFromRect,d=i.prevToRect,c=e.rect,h=Fi(i,!0);h&&(a.top-=h.f,a.left-=h.e),i.toRect=a,i.thisAnimationDuration&&Wi(l,a)&&!Wi(o,a)&&(c.top-a.top)/(c.left-a.left)===(o.top-a.top)/(o.left-a.left)&&(t=function(e,t,i,n){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-i.top,2)+Math.pow(t.left-i.left,2))*n.animation}(c,l,d,n.options)),Wi(a,o)||(i.prevFromRect=o,i.prevToRect=a,t||(t=n.options.animation),n.animate(i,c,a,t)),t&&(s=!0,r=Math.max(r,t),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),t),i.thisAnimationDuration=t)})),clearTimeout(e),s?e=setTimeout((function(){"function"===typeof i&&i()}),r):"function"===typeof i&&i(),t=[]},animate:function(e,t,i,n){if(n){Pi(e,"transition",""),Pi(e,"transform","");var s=Fi(this.el),r=s&&s.a,o=s&&s.d,a=(t.left-i.left)/(r||1),l=(t.top-i.top)/(o||1);e.animatingX=!!a,e.animatingY=!!l,Pi(e,"transform","translate3d("+a+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Pi(e,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),Pi(e,"transform","translate3d(0,0,0)"),"number"===typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Pi(e,"transition",""),Pi(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),n)}}}}var Qi=[],Zi={initializeByDefault:!0},Ji={mount:function(e){for(var t in Zi)Zi.hasOwnProperty(t)&&!(t in e)&&(e[t]=Zi[t]);Qi.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),Qi.push(e)},pluginEvent:function(e,t,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var s=e+"Global";Qi.forEach((function(n){t[n.pluginName]&&(t[n.pluginName][s]&&t[n.pluginName][s](ui({sortable:t},i)),t.options[n.pluginName]&&t[n.pluginName][e]&&t[n.pluginName][e](ui({sortable:t},i)))}))},initializePlugins:function(e,t,i,n){for(var s in Qi.forEach((function(n){var s=n.pluginName;if(e.options[s]||n.initializeByDefault){var r=new n(e,t,e.options);r.sortable=e,r.options=e.options,e[s]=r,gi(i,r.defaults)}})),e.options)if(e.options.hasOwnProperty(s)){var r=this.modifyOption(e,s,e.options[s]);"undefined"!==typeof r&&(e.options[s]=r)}},getEventProperties:function(e,t){var i={};return Qi.forEach((function(n){"function"===typeof n.eventProperties&&gi(i,n.eventProperties.call(t[n.pluginName],e))})),i},modifyOption:function(e,t,i){var n;return Qi.forEach((function(s){e[s.pluginName]&&s.optionListeners&&"function"===typeof s.optionListeners[t]&&(n=s.optionListeners[t].call(e[s.pluginName],i))})),n}};function en(e){var t=e.sortable,i=e.rootEl,n=e.name,s=e.targetEl,r=e.cloneEl,o=e.toEl,a=e.fromEl,l=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,h=e.newDraggableIndex,u=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||i&&i[qi]){var g,f=t.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||bi||yi?(g=document.createEvent("Event")).initEvent(n,!0,!0):g=new CustomEvent(n,{bubbles:!0,cancelable:!0}),g.to=o||i,g.from=a||i,g.item=s||i,g.clone=r,g.oldIndex=l,g.newIndex=d,g.oldDraggableIndex=c,g.newDraggableIndex=h,g.originalEvent=u,g.pullMode=p?p.lastPutMode:void 0;var b=ui(ui({},m),Ji.getEventProperties(n,t));for(var y in b)g[y]=b[y];i&&i.dispatchEvent(g),f[v]&&f[v].call(t,g)}}var tn=["evt"],nn=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,s=fi(i,tn);Ji.pluginEvent.bind(qn)(e,t,ui({dragEl:rn,parentEl:on,ghostEl:an,rootEl:ln,nextEl:dn,lastDownEl:cn,cloneEl:hn,cloneHidden:un,dragStarted:On,putSortable:bn,activeSortable:qn.active,originalEvent:n,oldIndex:pn,oldDraggableIndex:gn,newIndex:mn,newDraggableIndex:fn,hideGhostForTarget:jn,unhideGhostForTarget:Gn,cloneNowHidden:function(){un=!0},cloneNowShown:function(){un=!1},dispatchSortableEvent:function(e){sn({sortable:t,name:e,originalEvent:n})}},s))};function sn(e){en(ui({putSortable:bn,cloneEl:hn,targetEl:rn,rootEl:ln,oldIndex:pn,oldDraggableIndex:gn,newIndex:mn,newDraggableIndex:fn},e))}var rn,on,an,ln,dn,cn,hn,un,pn,mn,gn,fn,vn,bn,yn,_n,Sn,wn,Cn,En,On,xn,Tn,kn,In,Rn=!1,An=!1,Dn=[],Pn=!1,Fn=!1,Mn=[],Ln=!1,Nn=[],Bn="undefined"!==typeof document,Hn=wi,zn=yi||bi?"cssFloat":"float",$n=Bn&&!Ci&&!wi&&"draggable"in document.createElement("div"),Un=function(){if(Bn){if(bi)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Vn=function(e,t){var i=Pi(e),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),s=Hi(e,0,t),r=Hi(e,1,t),o=s&&Pi(s),a=r&&Pi(r),l=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+Ni(s).width,d=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ni(r).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&o.float&&"none"!==o.float){var c="left"===o.float?"left":"right";return!r||"both"!==a.clear&&a.clear!==c?"horizontal":"vertical"}return s&&("block"===o.display||"flex"===o.display||"table"===o.display||"grid"===o.display||l>=n&&"none"===i[zn]||r&&"none"===i[zn]&&l+d>n)?"vertical":"horizontal"},Wn=function(e){function t(e,i){return function(n,s,r,o){var a=n.options.group.name&&s.options.group.name&&n.options.group.name===s.options.group.name;if(null==e&&(i||a))return!0;if(null==e||!1===e)return!1;if(i&&"clone"===e)return e;if("function"===typeof e)return t(e(n,s,r,o),i)(n,s,r,o);var l=(i?n:s).options.group.name;return!0===e||"string"===typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var i={},n=e.group;n&&"object"==pi(n)||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i},jn=function(){!Un&&an&&Pi(an,"display","none")},Gn=function(){!Un&&an&&Pi(an,"display","")};Bn&&!Ci&&document.addEventListener("click",(function(e){if(An)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),An=!1,!1}),!0);var Yn=function(e){if(rn){var t=function(e,t){var i;return Dn.some((function(n){var s=n[qi].options.emptyInsertThreshold;if(s&&!zi(n)){var r=Ni(n),o=e>=r.left-s&&e<=r.right+s,a=t>=r.top-s&&t<=r.bottom+s;return o&&a?i=n:void 0}})),i}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);i.target=i.rootEl=t,i.preventDefault=void 0,i.stopPropagation=void 0,t[qi]._onDragOver(i)}}},Kn=function(e){rn&&rn.parentNode[qi]._isOutsideThisEl(e.target)};function qn(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=gi({},t),e[qi]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Vn(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==qn.supportPointer&&"PointerEvent"in window&&(!Si||wi),emptyInsertThreshold:5};for(var n in Ji.initializePlugins(this,e,i),i)!(n in t)&&(t[n]=i[n]);for(var s in Wn(t),this)"_"===s.charAt(0)&&"function"===typeof this[s]&&(this[s]=this[s].bind(this));this.nativeDraggable=!t.forceFallback&&$n,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Oi(e,"pointerdown",this._onTapStart):(Oi(e,"mousedown",this._onTapStart),Oi(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Oi(e,"dragover",this),Oi(e,"dragenter",this)),Dn.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),gi(this,Xi())}function Xn(e,t,i,n,s,r,o,a){var l,d,c=e[qi],h=c.options.onMove;return!window.CustomEvent||bi||yi?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=s||t,l.relatedRect=r||Ni(t),l.willInsertAfter=a,l.originalEvent=o,e.dispatchEvent(l),h&&(d=h.call(c,l,o)),d}function Qn(e){e.draggable=!1}function Zn(){Ln=!1}function Jn(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function es(e){return setTimeout(e,0)}function ts(e){return clearTimeout(e)}qn.prototype={constructor:qn,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(xn=null)},_getDirection:function(e,t){return"function"===typeof this.options.direction?this.options.direction.call(this,e,t,rn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,i=this.el,n=this.options,s=n.preventOnFilter,r=e.type,o=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,a=(o||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,d=n.filter;if(function(e){Nn.length=0;var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var n=t[i];n.checked&&Nn.push(n)}}(i),!rn&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||n.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Si||!a||"SELECT"!==a.tagName.toUpperCase())&&(!(a=Ii(a,n.draggable,i,!1))||!a.animated)&&cn!==a){if(pn=$i(a),gn=$i(a,n.draggable),"function"===typeof d){if(d.call(this,e,a,this))return sn({sortable:t,rootEl:l,name:"filter",targetEl:a,toEl:i,fromEl:i}),nn("filter",t,{evt:e}),void(s&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(n){if(n=Ii(l,n.trim(),i,!1))return sn({sortable:t,rootEl:n,name:"filter",targetEl:a,fromEl:i,toEl:i}),nn("filter",t,{evt:e}),!0}))))return void(s&&e.preventDefault());n.handle&&!Ii(l,n.handle,i,!1)||this._prepareDragStart(e,o,a)}}},_prepareDragStart:function(e,t,i){var n,s=this,r=s.el,o=s.options,a=r.ownerDocument;if(i&&!rn&&i.parentNode===r){var l=Ni(i);if(ln=r,on=(rn=i).parentNode,dn=rn.nextSibling,cn=i,vn=o.group,qn.dragged=rn,yn={target:rn,clientX:(t||e).clientX,clientY:(t||e).clientY},Cn=yn.clientX-l.left,En=yn.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,rn.style["will-change"]="all",n=function(){nn("delayEnded",s,{evt:e}),qn.eventCanceled?s._onDrop():(s._disableDelayedDragEvents(),!_i&&s.nativeDraggable&&(rn.draggable=!0),s._triggerDragStart(e,t),sn({sortable:s,name:"choose",originalEvent:e}),Di(rn,o.chosenClass,!0))},o.ignore.split(",").forEach((function(e){Mi(rn,e.trim(),Qn)})),Oi(a,"dragover",Yn),Oi(a,"mousemove",Yn),Oi(a,"touchmove",Yn),o.supportPointer?(Oi(a,"pointerup",s._onDrop),!this.nativeDraggable&&Oi(a,"pointercancel",s._onDrop)):(Oi(a,"mouseup",s._onDrop),Oi(a,"touchend",s._onDrop),Oi(a,"touchcancel",s._onDrop)),_i&&this.nativeDraggable&&(this.options.touchStartThreshold=4,rn.draggable=!0),nn("delayStart",this,{evt:e}),!o.delay||o.delayOnTouchOnly&&!t||this.nativeDraggable&&(yi||bi))n();else{if(qn.eventCanceled)return void this._onDrop();o.supportPointer?(Oi(a,"pointerup",s._disableDelayedDrag),Oi(a,"pointercancel",s._disableDelayedDrag)):(Oi(a,"mouseup",s._disableDelayedDrag),Oi(a,"touchend",s._disableDelayedDrag),Oi(a,"touchcancel",s._disableDelayedDrag)),Oi(a,"mousemove",s._delayedDragTouchMoveHandler),Oi(a,"touchmove",s._delayedDragTouchMoveHandler),o.supportPointer&&Oi(a,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(n,o.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){rn&&Qn(rn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._disableDelayedDrag),xi(e,"touchend",this._disableDelayedDrag),xi(e,"touchcancel",this._disableDelayedDrag),xi(e,"pointerup",this._disableDelayedDrag),xi(e,"pointercancel",this._disableDelayedDrag),xi(e,"mousemove",this._delayedDragTouchMoveHandler),xi(e,"touchmove",this._delayedDragTouchMoveHandler),xi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Oi(document,"pointermove",this._onTouchMove):Oi(document,t?"touchmove":"mousemove",this._onTouchMove):(Oi(rn,"dragend",this),Oi(ln,"dragstart",this._onDragStart));try{document.selection?es((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch($d){}},_dragStarted:function(e,t){if(Rn=!1,ln&&rn){nn("dragStarted",this,{evt:t}),this.nativeDraggable&&Oi(document,"dragover",Kn);var i=this.options;!e&&Di(rn,i.dragClass,!1),Di(rn,i.ghostClass,!0),qn.active=this,e&&this._appendGhost(),sn({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(_n){this._lastX=_n.clientX,this._lastY=_n.clientY,jn();for(var e=document.elementFromPoint(_n.clientX,_n.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(_n.clientX,_n.clientY))!==t;)t=e;if(rn.parentNode[qi]._isOutsideThisEl(e),t)do{if(t[qi]){if(t[qi]._onDragOver({clientX:_n.clientX,clientY:_n.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=ki(t));Gn()}},_onTouchMove:function(e){if(yn){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,s=e.touches?e.touches[0]:e,r=an&&Fi(an,!0),o=an&&r&&r.a,a=an&&r&&r.d,l=Hn&&In&&Ui(In),d=(s.clientX-yn.clientX+n.x)/(o||1)+(l?l[0]-Mn[0]:0)/(o||1),c=(s.clientY-yn.clientY+n.y)/(a||1)+(l?l[1]-Mn[1]:0)/(a||1);if(!qn.active&&!Rn){if(i&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<i)return;this._onDragStart(e,!0)}if(an){r?(r.e+=d-(Sn||0),r.f+=c-(wn||0)):r={a:1,b:0,c:0,d:1,e:d,f:c};var h="matrix(".concat(r.a,",").concat(r.b,",").concat(r.c,",").concat(r.d,",").concat(r.e,",").concat(r.f,")");Pi(an,"webkitTransform",h),Pi(an,"mozTransform",h),Pi(an,"msTransform",h),Pi(an,"transform",h),Sn=d,wn=c,_n=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!an){var e=this.options.fallbackOnBody?document.body:ln,t=Ni(rn,!0,Hn,!0,e),i=this.options;if(Hn){for(In=e;"static"===Pi(In,"position")&&"none"===Pi(In,"transform")&&In!==document;)In=In.parentNode;In!==document.body&&In!==document.documentElement?(In===document&&(In=Li()),t.top+=In.scrollTop,t.left+=In.scrollLeft):In=Li(),Mn=Ui(In)}Di(an=rn.cloneNode(!0),i.ghostClass,!1),Di(an,i.fallbackClass,!0),Di(an,i.dragClass,!0),Pi(an,"transition",""),Pi(an,"transform",""),Pi(an,"box-sizing","border-box"),Pi(an,"margin",0),Pi(an,"top",t.top),Pi(an,"left",t.left),Pi(an,"width",t.width),Pi(an,"height",t.height),Pi(an,"opacity","0.8"),Pi(an,"position",Hn?"absolute":"fixed"),Pi(an,"zIndex","100000"),Pi(an,"pointerEvents","none"),qn.ghost=an,e.appendChild(an),Pi(an,"transform-origin",Cn/parseInt(an.style.width)*100+"% "+En/parseInt(an.style.height)*100+"%")}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,s=i.options;nn("dragStart",this,{evt:e}),qn.eventCanceled?this._onDrop():(nn("setupClone",this),qn.eventCanceled||((hn=Yi(rn)).removeAttribute("id"),hn.draggable=!1,hn.style["will-change"]="",this._hideClone(),Di(hn,this.options.chosenClass,!1),qn.clone=hn),i.cloneId=es((function(){nn("clone",i),qn.eventCanceled||(i.options.removeCloneOnHide||ln.insertBefore(hn,rn),i._hideClone(),sn({sortable:i,name:"clone"}))})),!t&&Di(rn,s.dragClass,!0),t?(An=!0,i._loopId=setInterval(i._emulateDragOver,50)):(xi(document,"mouseup",i._onDrop),xi(document,"touchend",i._onDrop),xi(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",s.setData&&s.setData.call(i,n,rn)),Oi(document,"drop",i),Pi(rn,"transform","translateZ(0)")),Rn=!0,i._dragStartId=es(i._dragStarted.bind(i,t,e)),Oi(document,"selectstart",i),On=!0,window.getSelection().removeAllRanges(),Si&&Pi(document.body,"user-select","none"))},_onDragOver:function(e){var t,i,n,s,r=this.el,o=e.target,a=this.options,l=a.group,d=qn.active,c=vn===l,h=a.sort,u=bn||d,p=this,m=!1;if(!Ln){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),o=Ii(o,a.draggable,r,!0),I("dragOver"),qn.eventCanceled)return m;if(rn.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||p._ignoreWhileAnimating===o)return A(!1);if(An=!1,d&&!a.disabled&&(c?h||(n=on!==ln):bn===this||(this.lastPutMode=vn.checkPull(this,d,rn,e))&&l.checkPut(this,d,rn,e))){if(s="vertical"===this._getDirection(e,o),t=Ni(rn),I("dragOverValid"),qn.eventCanceled)return m;if(n)return on=ln,R(),this._hideClone(),I("revert"),qn.eventCanceled||(dn?ln.insertBefore(rn,dn):ln.appendChild(rn)),A(!0);var g=zi(r,a.draggable);if(!g||function(e,t,i){var n=Ni(zi(i.el,i.options.draggable)),s=Ki(i.el,i.options,an),r=10;return t?e.clientX>s.right+r||e.clientY>n.bottom&&e.clientX>n.left:e.clientY>s.bottom+r||e.clientX>n.right&&e.clientY>n.top}(e,s,this)&&!g.animated){if(g===rn)return A(!1);if(g&&r===e.target&&(o=g),o&&(i=Ni(o)),!1!==Xn(ln,r,rn,t,o,i,e,!!o))return R(),g&&g.nextSibling?r.insertBefore(rn,g.nextSibling):r.appendChild(rn),on=r,D(),A(!0)}else if(g&&function(e,t,i){var n=Ni(Hi(i.el,0,i.options,!0)),s=Ki(i.el,i.options,an),r=10;return t?e.clientX<s.left-r||e.clientY<n.top&&e.clientX<n.right:e.clientY<s.top-r||e.clientY<n.bottom&&e.clientX<n.left}(e,s,this)){var f=Hi(r,0,a,!0);if(f===rn)return A(!1);if(i=Ni(o=f),!1!==Xn(ln,r,rn,t,o,i,e,!1))return R(),r.insertBefore(rn,f),on=r,D(),A(!0)}else if(o.parentNode===r){i=Ni(o);var v,b,y,_=rn.parentNode!==r,S=!function(e,t,i){var n=i?e.left:e.top,s=i?e.right:e.bottom,r=i?e.width:e.height,o=i?t.left:t.top,a=i?t.right:t.bottom,l=i?t.width:t.height;return n===o||s===a||n+r/2===o+l/2}(rn.animated&&rn.toRect||t,o.animated&&o.toRect||i,s),w=s?"top":"left",C=Bi(o,"top","top")||Bi(rn,"top","top"),E=C?C.scrollTop:void 0;if(xn!==o&&(b=i[w],Pn=!1,Fn=!S&&a.invertSwap||_),v=function(e,t,i,n,s,r,o,a){var l=n?e.clientY:e.clientX,d=n?i.height:i.width,c=n?i.top:i.left,h=n?i.bottom:i.right,u=!1;if(!o)if(a&&kn<d*s){if(!Pn&&(1===Tn?l>c+d*r/2:l<h-d*r/2)&&(Pn=!0),Pn)u=!0;else if(1===Tn?l<c+kn:l>h-kn)return-Tn}else if(l>c+d*(1-s)/2&&l<h-d*(1-s)/2)return function(e){return $i(rn)<$i(e)?1:-1}(t);if((u=u||o)&&(l<c+d*r/2||l>h-d*r/2))return l>c+d/2?1:-1;return 0}(e,o,i,s,S?1:a.swapThreshold,null==a.invertedSwapThreshold?a.swapThreshold:a.invertedSwapThreshold,Fn,xn===o),0!==v){var O=$i(rn);do{O-=v,y=on.children[O]}while(y&&("none"===Pi(y,"display")||y===an))}if(0===v||y===o)return A(!1);xn=o,Tn=v;var x=o.nextElementSibling,T=!1,k=Xn(ln,r,rn,t,o,i,e,T=1===v);if(!1!==k)return 1!==k&&-1!==k||(T=1===k),Ln=!0,setTimeout(Zn,30),R(),T&&!x?r.appendChild(rn):o.parentNode.insertBefore(rn,T?x:o),C&&Gi(C,0,E-C.scrollTop),on=rn.parentNode,void 0===b||Fn||(kn=Math.abs(b-Ni(o)[w])),D(),A(!0)}if(r.contains(rn))return A(!1)}return!1}function I(a,l){nn(a,p,ui({evt:e,isOwner:c,axis:s?"vertical":"horizontal",revert:n,dragRect:t,targetRect:i,canSort:h,fromSortable:u,target:o,completed:A,onMove:function(i,n){return Xn(ln,r,rn,t,i,Ni(i),e,n)},changed:D},l))}function R(){I("dragOverAnimationCapture"),p.captureAnimationState(),p!==u&&u.captureAnimationState()}function A(t){return I("dragOverCompleted",{insertion:t}),t&&(c?d._hideClone():d._showClone(p),p!==u&&(Di(rn,bn?bn.options.ghostClass:d.options.ghostClass,!1),Di(rn,a.ghostClass,!0)),bn!==p&&p!==qn.active?bn=p:p===qn.active&&bn&&(bn=null),u===p&&(p._ignoreWhileAnimating=o),p.animateAll((function(){I("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==u&&(u.animateAll(),u._ignoreWhileAnimating=null)),(o===rn&&!rn.animated||o===r&&!o.animated)&&(xn=null),a.dragoverBubble||e.rootEl||o===document||(rn.parentNode[qi]._isOutsideThisEl(e.target),!t&&Yn(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function D(){mn=$i(rn),fn=$i(rn,a.draggable),sn({sortable:p,name:"change",toEl:r,newIndex:mn,newDraggableIndex:fn,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){xi(document,"mousemove",this._onTouchMove),xi(document,"touchmove",this._onTouchMove),xi(document,"pointermove",this._onTouchMove),xi(document,"dragover",Yn),xi(document,"mousemove",Yn),xi(document,"touchmove",Yn)},_offUpEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._onDrop),xi(e,"touchend",this._onDrop),xi(e,"pointerup",this._onDrop),xi(e,"pointercancel",this._onDrop),xi(e,"touchcancel",this._onDrop),xi(document,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;mn=$i(rn),fn=$i(rn,i.draggable),nn("drop",this,{evt:e}),on=rn&&rn.parentNode,mn=$i(rn),fn=$i(rn,i.draggable),qn.eventCanceled||(Rn=!1,Fn=!1,Pn=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ts(this.cloneId),ts(this._dragStartId),this.nativeDraggable&&(xi(document,"drop",this),xi(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Si&&Pi(document.body,"user-select",""),Pi(rn,"transform",""),e&&(On&&(e.cancelable&&e.preventDefault(),!i.dropBubble&&e.stopPropagation()),an&&an.parentNode&&an.parentNode.removeChild(an),(ln===on||bn&&"clone"!==bn.lastPutMode)&&hn&&hn.parentNode&&hn.parentNode.removeChild(hn),rn&&(this.nativeDraggable&&xi(rn,"dragend",this),Qn(rn),rn.style["will-change"]="",On&&!Rn&&Di(rn,bn?bn.options.ghostClass:this.options.ghostClass,!1),Di(rn,this.options.chosenClass,!1),sn({sortable:this,name:"unchoose",toEl:on,newIndex:null,newDraggableIndex:null,originalEvent:e}),ln!==on?(mn>=0&&(sn({rootEl:on,name:"add",toEl:on,fromEl:ln,originalEvent:e}),sn({sortable:this,name:"remove",toEl:on,originalEvent:e}),sn({rootEl:on,name:"sort",toEl:on,fromEl:ln,originalEvent:e}),sn({sortable:this,name:"sort",toEl:on,originalEvent:e})),bn&&bn.save()):mn!==pn&&mn>=0&&(sn({sortable:this,name:"update",toEl:on,originalEvent:e}),sn({sortable:this,name:"sort",toEl:on,originalEvent:e})),qn.active&&(null!=mn&&-1!==mn||(mn=pn,fn=gn),sn({sortable:this,name:"end",toEl:on,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){nn("nulling",this),ln=rn=on=an=dn=hn=cn=un=yn=_n=On=mn=fn=pn=gn=xn=Tn=bn=vn=qn.dragged=qn.ghost=qn.clone=qn.active=null,Nn.forEach((function(e){e.checked=!0})),Nn.length=Sn=wn=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":rn&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,s=i.length,r=this.options;n<s;n++)Ii(e=i[n],r.draggable,this.el,!1)&&t.push(e.getAttribute(r.dataIdAttr)||Jn(e));return t},sort:function(e,t){var i={},n=this.el;this.toArray().forEach((function(e,t){var s=n.children[t];Ii(s,this.options.draggable,n,!1)&&(i[e]=s)}),this),t&&this.captureAnimationState(),e.forEach((function(e){i[e]&&(n.removeChild(i[e]),n.appendChild(i[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Ii(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];var n=Ji.modifyOption(this,e,t);i[e]="undefined"!==typeof n?n:t,"group"===e&&Wn(i)},destroy:function(){nn("destroy",this);var e=this.el;e[qi]=null,xi(e,"mousedown",this._onTapStart),xi(e,"touchstart",this._onTapStart),xi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xi(e,"dragover",this),xi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Dn.splice(Dn.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!un){if(nn("hideClone",this),qn.eventCanceled)return;Pi(hn,"display","none"),this.options.removeCloneOnHide&&hn.parentNode&&hn.parentNode.removeChild(hn),un=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(un){if(nn("showClone",this),qn.eventCanceled)return;rn.parentNode!=ln||this.options.group.revertClone?dn?ln.insertBefore(hn,dn):ln.appendChild(hn):ln.insertBefore(hn,rn),this.options.group.revertClone&&this.animate(rn,hn),Pi(hn,"display",""),un=!1}}else this._hideClone()}},Bn&&Oi(document,"touchmove",(function(e){(qn.active||Rn)&&e.cancelable&&e.preventDefault()})),qn.utils={on:Oi,off:xi,css:Pi,find:Mi,is:function(e,t){return!!Ii(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e},throttle:ji,closest:Ii,toggleClass:Di,clone:Yi,index:$i,nextTick:es,cancelNextTick:ts,detectDirection:Vn,getChild:Hi,expando:qi},qn.get=function(e){return e[qi]},qn.mount=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(qn.utils=ui(ui({},qn.utils),e.utils)),Ji.mount(e)}))},qn.create=function(e,t){return new qn(e,t)},qn.version="1.15.6";var is,ns,ss,rs,os,as,ls=[],ds=!1;function cs(){ls.forEach((function(e){clearInterval(e.pid)})),ls=[]}function hs(){clearInterval(as)}var us=ji((function(e,t,i,n){if(t.scroll){var s,r=(e.touches?e.touches[0]:e).clientX,o=(e.touches?e.touches[0]:e).clientY,a=t.scrollSensitivity,l=t.scrollSpeed,d=Li(),c=!1;ns!==i&&(ns=i,cs(),is=t.scroll,s=t.scrollFn,!0===is&&(is=Vi(i,!0)));var h=0,u=is;do{var p=u,m=Ni(p),g=m.top,f=m.bottom,v=m.left,b=m.right,y=m.width,_=m.height,S=void 0,w=void 0,C=p.scrollWidth,E=p.scrollHeight,O=Pi(p),x=p.scrollLeft,T=p.scrollTop;p===d?(S=y<C&&("auto"===O.overflowX||"scroll"===O.overflowX||"visible"===O.overflowX),w=_<E&&("auto"===O.overflowY||"scroll"===O.overflowY||"visible"===O.overflowY)):(S=y<C&&("auto"===O.overflowX||"scroll"===O.overflowX),w=_<E&&("auto"===O.overflowY||"scroll"===O.overflowY));var k=S&&(Math.abs(b-r)<=a&&x+y<C)-(Math.abs(v-r)<=a&&!!x),I=w&&(Math.abs(f-o)<=a&&T+_<E)-(Math.abs(g-o)<=a&&!!T);if(!ls[h])for(var R=0;R<=h;R++)ls[R]||(ls[R]={});ls[h].vx==k&&ls[h].vy==I&&ls[h].el===p||(ls[h].el=p,ls[h].vx=k,ls[h].vy=I,clearInterval(ls[h].pid),0==k&&0==I||(c=!0,ls[h].pid=setInterval(function(){n&&0===this.layer&&qn.active._onTouchMove(os);var t=ls[this.layer].vy?ls[this.layer].vy*l:0,i=ls[this.layer].vx?ls[this.layer].vx*l:0;"function"===typeof s&&"continue"!==s.call(qn.dragged.parentNode[qi],i,t,e,os,ls[this.layer].el)||Gi(ls[this.layer].el,i,t)}.bind({layer:h}),24))),h++}while(t.bubbleScroll&&u!==d&&(u=Vi(u,!1)));ds=c}}),30),ps=function(e){var t=e.originalEvent,i=e.putSortable,n=e.dragEl,s=e.activeSortable,r=e.dispatchSortableEvent,o=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(t){var l=i||s;o();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);a(),l&&!l.el.contains(c)&&(r("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function ms(){}function gs(){}ms.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,i=e.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=Hi(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(t,n):this.sortable.el.appendChild(t),this.sortable.animateAll(),i&&i.animateAll()},drop:ps},gi(ms,{pluginName:"revertOnSpill"}),gs.prototype={onSpill:function(e){var t=e.dragEl,i=e.putSortable||this.sortable;i.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),i.animateAll()},drop:ps},gi(gs,{pluginName:"removeOnSpill"});qn.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Oi(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Oi(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Oi(document,"touchmove",this._handleFallbackAutoScroll):Oi(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?xi(document,"dragover",this._handleAutoScroll):(xi(document,"pointermove",this._handleFallbackAutoScroll),xi(document,"touchmove",this._handleFallbackAutoScroll),xi(document,"mousemove",this._handleFallbackAutoScroll)),hs(),cs(),clearTimeout(Ri),Ri=void 0},nulling:function(){os=ns=is=ds=as=ss=rs=null,ls.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var i=this,n=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,r=document.elementFromPoint(n,s);if(os=e,t||this.options.forceAutoScrollFallback||yi||bi||Si){us(e,this.options,r,t);var o=Vi(r,!0);!ds||as&&n===ss&&s===rs||(as&&hs(),as=setInterval((function(){var r=Vi(document.elementFromPoint(n,s),!0);r!==o&&(o=r,cs()),us(e,i.options,r,t)}),10),ss=n,rs=s)}else{if(!this.options.bubbleScroll||Vi(r,!0)===Li())return void cs();us(e,this.options,Vi(r,!1),!1)}}},gi(e,{pluginName:"scroll",initializeByDefault:!0})}),qn.mount(gs,ms);const fs=qn;function vs(e){let{containerElement:t}=e;const{onDragInit:i,onDragStart:n,onDrag:s,onDragEnd:r,preventDragFromKeys:o}=e;let a,l,d,c,h,u;t||(t=document.body);let p={dragSource:t,dragHandle:null};function m(e,t,i){if("function"===typeof e)return e(t,i)}function g(e){let t=!1;return o&&o.forEach((i=>{e[i]&&(t=!0)})),t}function f(t){if(a=t.target,!g(t)){const n=t?.touches?.[0]??t,{target:s}=n;if(!e.allowDragFrom||e.allowDragFrom&&a.matches(e.allowDragFrom)||e.allowDragFromClosest&&a.closest(e.allowDragFromClosest)){p.dragHandle=a;const e=ue();l=e.left+n.clientX,d=e.top+n.clientY,c=n.clientX-n.clientX,h=n.clientY-n.clientY,p=Object.assign(p,{deltaX:c,deltaY:h,startX:l,startY:d,target:s});!1!==m(i,t,p)&&(document.body.addEventListener("mousemove",v),document.body.addEventListener("touchmove",v),document.body.addEventListener("mouseup",b),document.body.addEventListener("touchend",b),document.body.addEventListener("touchcancel",b))}}}function v(e){const t=e?.touches?.[0]??e;if(!g(e)){c=t.clientX-l,h=t.clientY-d;const{target:i}=t;u||(p=Object.assign(p,{deltaX:c,deltaY:h,startX:l,startY:d,target:i}),m(n,e,p),u=!0),p=Object.assign(p,{deltaX:c,deltaY:h,startX:l,startY:d,target:i}),m(s,e,p)}}function b(e){if(document.body.removeEventListener("mousemove",v),document.body.removeEventListener("touchmove",v),document.body.removeEventListener("mouseup",b),document.body.removeEventListener("touchend",b),document.body.removeEventListener("touchcancel",b),u){const{target:t}=e;p=Object.assign(p,{target:t}),m(r,e,p),u=!1}}return t&&(t.addEventListener("mousedown",f),t.addEventListener("touchstart",f)),{destroy:function(){t&&(t.removeEventListener("mousedown",f),t.removeEventListener("touchstart",f))}}}function bs(e){const{element:t,onMouseWheel:i}=e;function n(e){const t=e||window.event;let n=0,s=0,r=0;t.wheelDelta&&(n=t.wheelDelta/120),t.detail&&(n=-t.detail/3),r=n,void 0!==t.axis&&t.axis===t.HORIZONTAL_AXIS&&(r=0,s=-1*n),void 0!==t.wheelDeltaY&&(r=t.wheelDeltaY/120),void 0!==t.wheelDeltaX&&(s=-1*t.wheelDeltaX/120),"function"===typeof i&&i(e,n,s,r)}return t.addEventListener("wheel",n),t.addEventListener("mousewheel",n),{destroy:function(){t.removeEventListener("wheel",n),t.removeEventListener("mousewheel",n)}}}function ys(e){const{resizeableElement:t,resizeableHandleElement:i,onResizeStart:n,onResize:s,onResizeEnd:r}=e;if(!i||"function"!==typeof i.addEventListener)throw new Error("[SlickResizable] You did not provide a valid html element that will be used for the handle to resize.");function o(e,n){if("function"===typeof e)return e(n,{resizeableElement:t,resizeableHandleElement:i})}function a(e){e.preventDefault();const t=e.touches?e.changedTouches[0]:e;!1!==o(n,t)&&(document.body.addEventListener("mousemove",l),document.body.addEventListener("mouseup",d),document.body.addEventListener("touchmove",l),document.body.addEventListener("touchend",d))}function l(e){e.preventDefault&&"touchmove"!==e.type&&e.preventDefault();const n=e.touches?e.changedTouches[0]:e;"function"===typeof s&&s(n,{resizeableElement:t,resizeableHandleElement:i})}function d(e){const t=e.touches?e.changedTouches[0]:e;o(r,t),document.body.removeEventListener("mousemove",l),document.body.removeEventListener("mouseup",d),document.body.removeEventListener("touchmove",l),document.body.removeEventListener("touchend",d)}return i.addEventListener("mousedown",a),i.addEventListener("touchstart",a),{destroy:function(){"function"===typeof i?.removeEventListener&&(i.removeEventListener("mousedown",a),i.removeEventListener("touchstart",a))}}}class _s{constructor(e,t,i,n,s){if(this.container=e,this.data=t,this.columns=i,this.externalPubSub=s,this.canvas=null,this.canvas_context=null,this._defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableHtmlRendering:!0,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoEditNewRow:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,unorderableColumnCssClass:"unorderable",asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,columnResizingDelay:300,nonce:"",editorLock:li,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,createTopHeaderPanel:!1,showPreHeaderPanel:!1,showTopHeaderPanel:!1,preHeaderPanelHeight:25,preHeaderPanelWidth:"auto",topHeaderPanelHeight:25,topHeaderPanelWidth:"auto",showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",rowHighlightCssClass:"highlight-animate",rowHighlightDuration:400,selectedCellCssClass:"selected",multiSelect:!0,enableCellRowSpan:!1,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,throwWhenFrozenNotAllViewable:!1,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:this.defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,preventDragFromKeys:["ctrlKey","metaKey"],showCellSelection:!0,viewportClass:void 0,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,rowTopOffsetRenderType:"top",scrollRenderThrottling:10,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,maxPartialRowSpanRemap:5e3,sanitizer:void 0,mixinDefaults:!1,shadowRoot:void 0},this._columnDefaults={name:"",headerCssClass:null,defaultSortAsc:!0,focusable:!0,hidden:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,reorderable:!0,resizable:!0,sortable:!1,selectable:!0},this.page=0,this.offset=0,this.vScrollDir=1,this._bindingEventService=new Vt,this.initialized=!1,this.uid=`slickgrid_${Math.round(1e6*Math.random())}`,this._groupHeaders=[],this._headerScroller=[],this._headers=[],this._boundAncestors=[],this.viewportH=0,this.viewportW=0,this.canvasWidth=0,this.canvasWidthL=0,this.canvasWidthR=0,this.headersWidth=0,this.headersWidthL=0,this.headersWidthR=0,this.viewportHasHScroll=!1,this.viewportHasVScroll=!1,this.headerColumnWidthDiff=0,this.headerColumnHeightDiff=0,this.cellWidthDiff=0,this.cellHeightDiff=0,this.hasFrozenRows=!1,this.frozenRowsHeight=0,this.actualFrozenRow=-1,this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.topPanelH=0,this.headerRowH=0,this.footerRowH=0,this.tabbingDirection=1,this.activeCellNode=null,this.currentEditor=null,this._prevDataLength=0,this._prevInvalidatedRowsCount=0,this._rowSpanIsCached=!1,this._colsWithRowSpanCache={},this.rowsCache={},this.renderedRows=0,this.numVisibleRows=0,this.prevScrollTop=0,this.scrollHeight=0,this.scrollTop=0,this.lastRenderedScrollTop=0,this.lastRenderedScrollLeft=0,this.prevScrollLeft=0,this.scrollLeft=0,this.selectedRows=[],this.plugins=[],this.cellCssClasses={},this.columnsById={},this.sortColumns=[],this.columnPosLeft=[],this.columnPosRight=[],this.pagingActive=!1,this.pagingIsLastPage=!1,this.postProcessedRows={},this.postProcessToRow=null,this.postProcessFromRow=null,this.postProcessedCleanupQueue=[],this.postProcessgroupId=0,this.counter_rows_rendered=0,this.counter_rows_removed=0,this.cssShow={position:"absolute",visibility:"hidden",display:"block"},this._hiddenParents=[],this.oldProps=[],this.enforceFrozenRowHeightRecalc=!1,this.columnResizeDragging=!1,this.slickDraggableInstance=null,this.slickMouseWheelInstances=[],this.slickResizableInstances=[],this._container="string"===typeof this.container?document.querySelector(this.container):this.container,!this._container)throw new Error(`SlickGrid requires a valid container, ${this.container} does not exist in the DOM.`);this._pubSubService=s,this.onActiveCellChanged=new ti("onActiveCellChanged",s),this.onActiveCellPositionChanged=new ti("onActiveCellPositionChanged",s),this.onAddNewRow=new ti("onAddNewRow",s),this.onAfterSetColumns=new ti("onAfterSetColumns",s),this.onAutosizeColumns=new ti("onAutosizeColumns",s),this.onBeforeAppendCell=new ti("onBeforeAppendCell",s),this.onBeforeCellEditorDestroy=new ti("onBeforeCellEditorDestroy",s),this.onBeforeColumnsResize=new ti("onBeforeColumnsResize",s),this.onBeforeDestroy=new ti("onBeforeDestroy",s),this.onBeforeEditCell=new ti("onBeforeEditCell",s),this.onBeforeFooterRowCellDestroy=new ti("onBeforeFooterRowCellDestroy",s),this.onBeforeHeaderCellDestroy=new ti("onBeforeHeaderCellDestroy",s),this.onBeforeHeaderRowCellDestroy=new ti("onBeforeHeaderRowCellDestroy",s),this.onBeforeSetColumns=new ti("onBeforeSetColumns",s),this.onBeforeSort=new ti("onBeforeSort",s),this.onBeforeUpdateColumns=new ti("onBeforeUpdateColumns",s),this.onCellChange=new ti("onCellChange",s),this.onCellCssStylesChanged=new ti("onCellCssStylesChanged",s),this.onClick=new ti("onClick",s),this.onColumnsReordered=new ti("onColumnsReordered",s),this.onColumnsDrag=new ti("onColumnsDrag",s),this.onColumnsResized=new ti("onColumnsResized",s),this.onColumnsResizeDblClick=new ti("onColumnsResizeDblClick",s),this.onCompositeEditorChange=new ti("onCompositeEditorChange",s),this.onContextMenu=new ti("onContextMenu",s),this.onDblClick=new ti("onDblClick",s),this.onDrag=new ti("onDrag",s),this.onDragInit=new ti("onDragInit",s),this.onDragStart=new ti("onDragStart",s),this.onDragEnd=new ti("onDragEnd",s),this.onFooterClick=new ti("onFooterClick",s),this.onFooterContextMenu=new ti("onFooterContextMenu",s),this.onFooterRowCellRendered=new ti("onFooterRowCellRendered",s),this.onHeaderCellRendered=new ti("onHeaderCellRendered",s),this.onHeaderClick=new ti("onHeaderClick",s),this.onHeaderContextMenu=new ti("onHeaderContextMenu",s),this.onHeaderMouseEnter=new ti("onHeaderMouseEnter",s),this.onHeaderMouseLeave=new ti("onHeaderMouseLeave",s),this.onHeaderMouseOver=new ti("onHeaderMouseOver",s),this.onHeaderMouseOut=new ti("onHeaderMouseOut",s),this.onHeaderRowMouseOver=new ti("onHeaderRowMouseOver",s),this.onHeaderRowMouseOut=new ti("onHeaderRowMouseOut",s),this.onHeaderRowCellRendered=new ti("onHeaderRowCellRendered",s),this.onHeaderRowMouseEnter=new ti("onHeaderRowMouseEnter",s),this.onHeaderRowMouseLeave=new ti("onHeaderRowMouseLeave",s),this.onKeyDown=new ti("onKeyDown",s),this.onMouseEnter=new ti("onMouseEnter",s),this.onMouseLeave=new ti("onMouseLeave",s),this.onPreHeaderClick=new ti("onPreHeaderClick",s),this.onPreHeaderContextMenu=new ti("onPreHeaderContextMenu",s),this.onRendered=new ti("onRendered",s),this.onScroll=new ti("onScroll",s),this.onSelectedRowsChanged=new ti("onSelectedRowsChanged",s),this.onSetOptions=new ti("onSetOptions",s),this.onActivateChangedOptions=new ti("onActivateChangedOptions",s),this.onSort=new ti("onSort",s),this.onValidationError=new ti("onValidationError",s),this.onViewportChanged=new ti("onViewportChanged",s),this.initialize(n)}init(){!this._options.silenceWarnings&&document.body.style.zoom&&"100%"!==document.body.style.zoom&&console.warn("[Slickgrid] Zoom level other than 100% is not supported by the library and will give subpar experience. SlickGrid relies on the `rowHeight` grid option to do row positioning & calculation and when zoom is not 100% then calculation becomes all offset."),this.finishInitialization()}applyHtmlCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;if(e)if(t instanceof HTMLElement||t instanceof DocumentFragment){!1!==i?.emptyTarget&&ee(e),e.appendChild(t)}else{if(!1!==i?.skipEmptyReassignment&&!Re(t)&&!e.innerHTML)return;if("number"===typeof t||"boolean"===typeof t)e.textContent=String(t);else{const i=this.sanitizeHtmlString(t);this._options.enableHtmlRendering&&i?e.innerHTML=i:e.textContent=i}}}initialize(e){e?.mixinDefaults?(this._options||(this._options=e),ai.applyDefaults(this._options,this._defaults)):this._options=Se(!0,{},this._defaults,e),this.scrollThrottle=this.actionThrottle(this.render.bind(this),this._options.scrollRenderThrottling),this.maxSupportedCssHeight=this.maxSupportedCssHeight||this.getMaxSupportedCssHeight(),this.validateAndEnforceOptions(),this._columnDefaults.width=this._options.defaultColumnWidth,this._options.suppressCssChangesOnHiddenInit||this.cacheCssForHiddenInit(),this.updateColumnProps(),this.editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},ee(this._container),this._container.style.outline=String(0),this._container.classList.add(this.uid),this._container.classList.add("slick-widget"),this._container.setAttribute("role","grid");const t=window.getComputedStyle(this._container);/relative|absolute|fixed/.test(t.position)||(this._container.style.position="relative"),this._focusSink=Q("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},this._container),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller=Q("div",{className:"slick-topheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._container),this._topHeaderPanelScroller.appendChild(document.createElement("div")),this._topHeaderPanel=Q("div",null,this._topHeaderPanelScroller),this._topHeaderPanelSpacer=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._topHeaderPanelScroller),this._options.showTopHeaderPanel||ai.hide(this._topHeaderPanelScroller)),this._paneHeaderL=Q("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},this._container),this._paneHeaderR=Q("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},this._container),this._paneTopL=Q("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},this._container),this._paneTopR=Q("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},this._container),this._paneBottomL=Q("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},this._container),this._paneBottomR=Q("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},this._container),this._options.createPreHeaderPanel&&(this._preHeaderPanelScroller=Q("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderL),this._preHeaderPanelScroller.appendChild(document.createElement("div")),this._preHeaderPanel=Q("div",null,this._preHeaderPanelScroller),this._preHeaderPanelSpacer=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScroller),this._preHeaderPanelScrollerR=Q("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderR),this._preHeaderPanelR=Q("div",null,this._preHeaderPanelScrollerR),this._preHeaderPanelSpacerR=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScrollerR),this._options.showPreHeaderPanel||(ai.hide(this._preHeaderPanelScroller),ai.hide(this._preHeaderPanelScrollerR))),this._headerScrollerL=Q("div",{className:"slick-header slick-state-default slick-header-left"},this._paneHeaderL),this._headerScrollerR=Q("div",{className:"slick-header slick-state-default slick-header-right"},this._paneHeaderR),this._headerScroller.push(this._headerScrollerL),this._headerScroller.push(this._headerScrollerR),this._headerL=Q("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},this._headerScrollerL),this._headerR=Q("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},this._headerScrollerR),this._headers=[this._headerL,this._headerR],this._headerRowScrollerL=Q("div",{className:"slick-headerrow slick-state-default"},this._paneTopL),this._headerRowScrollerR=Q("div",{className:"slick-headerrow slick-state-default"},this._paneTopR),this._headerRowScroller=[this._headerRowScrollerL,this._headerRowScrollerR],this._headerRowSpacerL=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerL),this._headerRowSpacerR=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerR),this._headerRowL=Q("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},this._headerRowScrollerL),this._headerRowR=Q("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},this._headerRowScrollerR),this._headerRows=[this._headerRowL,this._headerRowR],this._topPanelScrollerL=Q("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopL),this._topPanelScrollerR=Q("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopR),this._topPanelScrollers=[this._topPanelScrollerL,this._topPanelScrollerR],this._topPanelL=Q("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerL),this._topPanelR=Q("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerR),this._topPanels=[this._topPanelL,this._topPanelR],this._options.showColumnHeader||this._headerScroller.forEach((e=>{ai.hide(e)})),this._options.showTopPanel||this._topPanelScrollers.forEach((e=>{ai.hide(e)})),this._options.showHeaderRow||this._headerRowScroller.forEach((e=>{ai.hide(e)})),this._viewportTopL=Q("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},this._paneTopL),this._viewportTopR=Q("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},this._paneTopR),this._viewportBottomL=Q("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},this._paneBottomL),this._viewportBottomR=Q("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},this._paneBottomR),this._viewport=[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR],this._options.viewportClass&&this._viewport.forEach((e=>{e.classList.add(...Z(this._options.viewportClass))})),this._activeViewportNode=this._viewportTopL,this._canvasTopL=Q("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},this._viewportTopL),this._canvasTopR=Q("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},this._viewportTopR),this._canvasBottomL=Q("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},this._viewportBottomL),this._canvasBottomR=Q("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},this._viewportBottomR),this._canvas=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR],this.scrollbarDimensions=this.scrollbarDimensions||this.measureScrollbar(),this._activeCanvasNode=this._canvasTopL,this._topHeaderPanelSpacer&&ai.width(this._topHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._preHeaderPanelSpacer&&ai.width(this._preHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._headers.forEach((e=>{ai.width(e,this.getHeadersWidth())})),ai.width(this._headerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),ai.width(this._headerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._options.createFooterRow&&(this._footerRowScrollerR=Q("div",{className:"slick-footerrow slick-state-default"},this._paneTopR),this._footerRowScrollerL=Q("div",{className:"slick-footerrow slick-state-default"},this._paneTopL),this._footerRowScroller=[this._footerRowScrollerL,this._footerRowScrollerR],this._footerRowSpacerL=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerL),ai.width(this._footerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowSpacerR=Q("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerR),ai.width(this._footerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowL=Q("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},this._footerRowScrollerL),this._footerRowR=Q("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},this._footerRowScrollerR),this._footerRow=[this._footerRowL,this._footerRowR],this._options.showFooterRow||this._footerRowScroller.forEach((e=>{ai.hide(e)}))),this._focusSink2=this._focusSink.cloneNode(!0),this._container.appendChild(this._focusSink2),this._options.explicitInitialization||this.finishInitialization()}finishInitialization(){this.initialized||(this.initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),this.disableSelection(this._headers),this._options.enableTextSelectionOnCells||this._viewport.forEach((e=>{this._bindingEventService.bind(e,"selectstart",(e=>{e.target instanceof HTMLInputElement||(e.target,HTMLTextAreaElement)}))})),this.setFrozenOptions(),this.setPaneFrozenClasses(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateColumnCaches(),this.createColumnHeaders(),this.createColumnFooter(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._bindingEventService.bind(this._container,"resize",this.resizeCanvas.bind(this)),this._viewport.forEach((e=>{this._bindingEventService.bind(e,"scroll",this.handleScroll.bind(this))})),this._options.enableMouseWheelScrollHandler&&this._viewport.forEach((e=>{this.slickMouseWheelInstances.push(bs({element:e,onMouseWheel:this.handleMouseWheel.bind(this)}))})),this._headerScroller.forEach((e=>{this._bindingEventService.bind(e,"contextmenu",this.handleHeaderContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleHeaderClick.bind(this))})),this._headerRowScroller.forEach((e=>{this._bindingEventService.bind(e,"scroll",this.handleHeaderRowScroll.bind(this))})),this._options.createFooterRow&&(this._footerRow.forEach((e=>{this._bindingEventService.bind(e,"contextmenu",this.handleFooterContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleFooterClick.bind(this))})),this._footerRowScroller.forEach((e=>{this._bindingEventService.bind(e,"scroll",this.handleFooterRowScroll.bind(this))}))),this._options.createTopHeaderPanel&&this._bindingEventService.bind(this._topHeaderPanelScroller,"scroll",this.handleTopHeaderPanelScroll.bind(this)),this._options.createPreHeaderPanel&&(this._bindingEventService.bind(this._preHeaderPanelScroller,"scroll",this.handlePreHeaderPanelScroll.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"contextmenu",this.handlePreHeaderContextMenu.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"click",this.handlePreHeaderClick.bind(this))),this._bindingEventService.bind(this._focusSink,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(this._focusSink2,"keydown",this.handleKeyDown.bind(this)),this._canvas.forEach((e=>{this._bindingEventService.bind(e,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(e,"click",this.handleClick.bind(this)),this._bindingEventService.bind(e,"dblclick",this.handleDblClick.bind(this)),this._bindingEventService.bind(e,"contextmenu",this.handleContextMenu.bind(this)),this._bindingEventService.bind(e,"mouseover",this.handleCellMouseOver.bind(this)),this._bindingEventService.bind(e,"mouseout",this.handleCellMouseOut.bind(this))})),vs&&(this.slickDraggableInstance=vs({containerElement:this._container,allowDragFrom:"div.slick-cell",allowDragFromClosest:"div.slick-cell.dnd, div.slick-cell.cell-reorder",preventDragFromKeys:this._options.preventDragFromKeys,onDragInit:this.handleDragInit.bind(this),onDragStart:this.handleDragStart.bind(this),onDrag:this.handleDrag.bind(this),onDragEnd:this.handleDragEnd.bind(this)})),this._options.suppressCssChangesOnHiddenInit||this.restoreCssFromHiddenInit())}cacheCssForHiddenInit(){this._hiddenParents=ai.parents(this._container,":hidden"),this.oldProps=[],this._hiddenParents.forEach((e=>{const t={};Object.keys(this.cssShow).forEach((i=>{this.cssShow&&(t[i]=e.style[i],e.style[i]=this.cssShow[i])})),this.oldProps.push(t)}))}restoreCssFromHiddenInit(){let e=0;this._hiddenParents&&(this._hiddenParents.forEach((t=>{const i=this.oldProps[e++];Object.keys(this.cssShow).forEach((e=>{this.cssShow&&(t.style[e]=i[e])}))})),this._hiddenParents=[])}hasFrozenColumns(){return this._options.frozenColumn>-1}registerPlugin(e){this.plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(let t=this.plugins.length;t>=0;t--)if(this.plugins[t]===e){this.plugins[t]?.destroy(),this.plugins.splice(t,1);break}}getPluginByName(e){for(let t=this.plugins.length-1;t>=0;t--)if(this.plugins[t]?.pluginName===e)return this.plugins[t]}getPubSubService(){return this._pubSubService}setSelectionModel(e){this.selectionModel&&(this.selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged.bind(this)),this.selectionModel.destroy&&this.selectionModel.destroy()),this.selectionModel=e,this.selectionModel&&(this.selectionModel.init(this),this.selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged.bind(this)))}getSelectionModel(){return this.selectionModel}getCanvasNode(e,t){return this._getContainerElement(this.getCanvases(),e,t)}getActiveCanvasNode(e){return void 0===e||(e instanceof ei&&(e=e.getNativeEvent()),this._activeCanvasNode=e?.target?.closest(".grid-canvas")),this._activeCanvasNode}getCanvases(){return this._canvas}getViewportNode(e,t){return this._getContainerElement(this.getViewports(),e,t)}getViewports(){return this._viewport}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){return e instanceof ei&&(e=e.getNativeEvent()),this._activeViewportNode=e?.target?.closest(".slick-viewport"),this._activeViewportNode}_getContainerElement(e,t,i){if(!e)return;t||(t=0),i||(i=0);const n="number"===typeof t?t:this.getColumnIndex(t);return e[(this.hasFrozenRows&&i>=this.actualFrozenRow+(this._options.frozenBottom?0:1)?2:0)+(this.hasFrozenColumns()&&n>this._options.frozenColumn?1:0)]}measureScrollbar(){let e="";this._viewport.forEach((t=>e+=t.className));const t=Q("div",{className:e,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),i=Q("div",{style:{width:"200px",height:"200px",overflow:"auto"}},t),n={width:t.offsetWidth-t.clientWidth,height:t.offsetHeight-t.clientHeight};return i.remove(),t.remove(),n}getHeadersWidth(){this.headersWidth=this.headersWidthL=this.headersWidthR=0;const e=!this._options.autoHeight;let t=0;const i=this.columns.length;for(t=0;t<i;t++){if(!this.columns[t]||this.columns[t].hidden)continue;const e=this.columns[t].width;this._options.frozenColumn>-1&&t>this._options.frozenColumn?this.headersWidthR+=e||0:this.headersWidthL+=e||0}return e&&(this._options.frozenColumn>-1&&t>this._options.frozenColumn?this.headersWidthR+=this.scrollbarDimensions?.width||0:this.headersWidthL+=this.scrollbarDimensions?.width||0),this.hasFrozenColumns()?(this.headersWidthL=this.headersWidthL+1e3,this.headersWidthR=Math.max(this.headersWidthR,this.viewportW)+this.headersWidthL,this.headersWidthR+=this.scrollbarDimensions?.width||0):(this.headersWidthL+=this.scrollbarDimensions?.width||0,this.headersWidthL=Math.max(this.headersWidthL,this.viewportW)+1e3),this.headersWidth=this.headersWidthL+this.headersWidthR,Math.max(this.headersWidth,this.viewportW)+1e3}getCanvasWidth(){const e=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;let t=this.columns.length;for(this.canvasWidthL=this.canvasWidthR=0;t--;)this.columns[t]&&!this.columns[t].hidden&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?this.canvasWidthR+=this.columns[t].width||0:this.canvasWidthL+=this.columns[t].width||0);let i=this.canvasWidthL+this.canvasWidthR;if(this._options.fullWidthRows){const t=Math.max(i,e)-i;t>0&&(i+=t,this.hasFrozenColumns()?this.canvasWidthR+=t:this.canvasWidthL+=t)}return i}updateCanvasWidth(e){const t=this.canvasWidth,i=this.canvasWidthL,n=this.canvasWidthR;this.canvasWidth=this.getCanvasWidth(),this._options.createTopHeaderPanel&&ai.width(this._topHeaderPanel,this._options.topHeaderPanelWidth??this.canvasWidth);const s=this.canvasWidth!==t||this.canvasWidthL!==i||this.canvasWidthR!==n;if(s||this.hasFrozenColumns()||this.hasFrozenRows)if(ai.width(this._canvasTopL,this.canvasWidthL),this.getHeadersWidth(),ai.width(this._headerL,this.headersWidthL),ai.width(this._headerR,this.headersWidthR),this.hasFrozenColumns()){const e=ai.width(this._container)||0;if(e>0&&this.canvasWidthL>e&&this._options.throwWhenFrozenNotAllViewable)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");ai.width(this._canvasTopR,this.canvasWidthR),ai.width(this._paneHeaderL,this.canvasWidthL),ai.setStyleSize(this._paneHeaderR,"left",this.canvasWidthL),ai.setStyleSize(this._paneHeaderR,"width",this.viewportW-this.canvasWidthL),ai.width(this._paneTopL,this.canvasWidthL),ai.setStyleSize(this._paneTopR,"left",this.canvasWidthL),ai.width(this._paneTopR,this.viewportW-this.canvasWidthL),ai.width(this._headerRowScrollerL,this.canvasWidthL),ai.width(this._headerRowScrollerR,this.viewportW-this.canvasWidthL),ai.width(this._headerRowL,this.canvasWidthL),ai.width(this._headerRowR,this.canvasWidthR),this._options.createFooterRow&&(ai.width(this._footerRowScrollerL,this.canvasWidthL),ai.width(this._footerRowScrollerR,this.viewportW-this.canvasWidthL),ai.width(this._footerRowL,this.canvasWidthL),ai.width(this._footerRowR,this.canvasWidthR)),this._options.createPreHeaderPanel&&ai.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),ai.width(this._viewportTopL,this.canvasWidthL),ai.width(this._viewportTopR,this.viewportW-this.canvasWidthL),this.hasFrozenRows&&(ai.width(this._paneBottomL,this.canvasWidthL),ai.setStyleSize(this._paneBottomR,"left",this.canvasWidthL),ai.width(this._viewportBottomL,this.canvasWidthL),ai.width(this._viewportBottomR,this.viewportW-this.canvasWidthL),ai.width(this._canvasBottomL,this.canvasWidthL),ai.width(this._canvasBottomR,this.canvasWidthR))}else ai.width(this._paneHeaderL,"100%"),ai.width(this._paneTopL,"100%"),ai.width(this._headerRowScrollerL,"100%"),ai.width(this._headerRowL,this.canvasWidth),this._options.createFooterRow&&(ai.width(this._footerRowScrollerL,"100%"),ai.width(this._footerRowL,this.canvasWidth)),this._options.createPreHeaderPanel&&ai.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),ai.width(this._viewportTopL,"100%"),this.hasFrozenRows&&(ai.width(this._viewportBottomL,"100%"),ai.width(this._canvasBottomL,this.canvasWidthL));this.viewportHasHScroll=this.canvasWidth>=this.viewportW-(this.scrollbarDimensions?.width||0),ai.width(this._headerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),ai.width(this._headerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),this._options.createFooterRow&&(ai.width(this._footerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),ai.width(this._footerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0))),(s||e)&&this.applyColumnWidths()}disableSelection(e){e.forEach((e=>{e.setAttribute("unselectable","on"),e.style.mozUserSelect="none",this._bindingEventService.bind(e,"selectstart",(()=>!1))}))}getMaxSupportedCssHeight(){let e=1e6;const t=navigator.userAgent.toLowerCase().match(/firefox/)?this._options.ffMaxSupportedCssHeight:this._options.maxSupportedCssHeight,i=Q("div",{style:{display:"hidden"}},document.body);let n=!0;for(;n;){const s=2*e;ai.height(i,s);const r=ai.height(i);if(s>t||r!==s){n=!1;break}e=s}return i.remove(),e}getUID(){return this.uid}getHeaderColumnWidthDiff(){return this.headerColumnWidthDiff}getScrollbarDimensions(){return this.scrollbarDimensions}getDisplayedScrollbarDimensions(){return{width:this.viewportHasVScroll&&this.scrollbarDimensions?.width?this.scrollbarDimensions.width:0,height:this.viewportHasHScroll&&this.scrollbarDimensions?.height?this.scrollbarDimensions.height:0}}getAbsoluteColumnMinWidth(){return this.absoluteColumnMinWidth}bindAncestorScrollEvents(){let e=this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;for(;(e=e.parentNode)!==document.body&&e;)e!==this._viewportTopL&&e.scrollWidth===e.clientWidth&&e.scrollHeight===e.clientHeight||(this._boundAncestors.push(e),this._bindingEventService.bind(e,"scroll",this.handleActiveCellPositionChange.bind(this)))}unbindAncestorScrollEvents(){this._boundAncestors.forEach((e=>{this._bindingEventService.unbindByEventName(e,"scroll")})),this._boundAncestors=[]}updateColumnHeader(e,t,i){if(this.initialized){const n=this.getColumnIndex(e);if(!Re(n))return;const s=this.columns[n],r=this.getColumnByIndex(n);return r&&(void 0!==t&&(this.columns[n].name=t),void 0!==i&&(this.columns[n].toolTip=i),this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:r,column:s,grid:this}),r.setAttribute("title",i||""),void 0!==t&&this.applyHtmlCode(r.children[0],t),this.triggerEvent(this.onHeaderCellRendered,{node:r,column:s,grid:this})),r}}getHeader(e){if(!e)return this.hasFrozenColumns()?this._headers:this._headerL;const t=this.getColumnIndex(e.id);return this.hasFrozenColumns()?t<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL}getHeaderColumn(e){const t="number"===typeof e?e:this.getColumnIndex(e),i=this.hasFrozenColumns()?t<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,n=this.hasFrozenColumns()?t<=this._options.frozenColumn?t:t-this._options.frozenColumn-1:t;return i.children[n]}getHeaderRow(){return this.hasFrozenColumns()?this._headerRows:this._headerRows?.[0]}getFooterRow(){return this.hasFrozenColumns()?this._footerRow:this._footerRow?.[0]}getPreHeaderPanel(){return this._preHeaderPanel}getPreHeaderPanelLeft(){return this._preHeaderPanel}getPreHeaderPanelRight(){return this._preHeaderPanelR}getTopHeaderPanel(){return this._topHeaderPanel}getHeaderRowColumn(e){let t,i="number"===typeof e?e:this.getColumnIndex(e);return this.hasFrozenColumns()?i<=this._options.frozenColumn?t=this._headerRowL:(t=this._headerRowR,i-=this._options.frozenColumn+1):t=this._headerRowL,t.children[i]}getFooterRowColumn(e){let t,i="number"===typeof e?e:this.getColumnIndex(e);return this.hasFrozenColumns()?i<=this._options.frozenColumn?t=this._footerRowL:(t=this._footerRowR,i-=this._options.frozenColumn+1):t=this._footerRowL,t?.children[i]}createColumnFooter(){if(this._options.createFooterRow){this._footerRow.forEach((e=>{e.querySelectorAll(".slick-footerrow-column").forEach((e=>{const t=ai.storage.get(e,"column");this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:e,column:t,grid:this})}))})),ee(this._footerRowL),ee(this._footerRowR);for(let e=0;e<this.columns.length;e++){const t=this.columns[e];if(!t||t.hidden)continue;const i=Q("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},this.hasFrozenColumns()&&e>this._options.frozenColumn?this._footerRowR:this._footerRowL),n=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;n&&i.classList.add(n),ai.storage.put(i,"column",t),this.triggerEvent(this.onFooterRowCellRendered,{node:i,column:t,grid:this})}}}handleHeaderMouseHoverOn(e){e?.target.classList.add("slick-state-hover")}handleHeaderMouseHoverOff(e){e?.target.classList.remove("slick-state-hover")}createColumnHeaders(){if(this._headers.forEach((e=>{e.querySelectorAll(".slick-header-column").forEach((e=>{const t=ai.storage.get(e,"column");t&&this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:e,column:t,grid:this})}))})),ee(this._headerL),ee(this._headerR),this.getHeadersWidth(),ai.width(this._headerL,this.headersWidthL),ai.width(this._headerR,this.headersWidthR),this._headerRows.forEach((e=>{e.querySelectorAll(".slick-headerrow-column").forEach((e=>{const t=ai.storage.get(e,"column");t&&this.triggerEvent(this.onBeforeHeaderRowCellDestroy,{node:this,column:t,grid:this})}))})),ee(this._headerRowL),ee(this._headerRowR),this._options.createFooterRow){if(this._footerRowL.querySelectorAll(".slick-footerrow-column").forEach((e=>{const t=ai.storage.get(e,"column");t&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:t,grid:this})})),ee(this._footerRowL),this.hasFrozenColumns()){this._footerRowR.querySelectorAll(".slick-footerrow-column").forEach((e=>{const t=ai.storage.get(e,"column");t&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:t,grid:this})})),ee(this._footerRowR)}}for(let e=0;e<this.columns.length;e++){const t=this.columns[e];if(!t||t.hidden)continue;const i=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,n=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerRowL:this._headerRowR:this._headerRowL,s=Q("div",{id:`${this.uid+t.id}`,dataset:{id:String(t.id)},role:"columnheader",className:"slick-state-default slick-header-column"},i);t.toolTip&&(s.title=t.toolTip),t.reorderable||s.classList.add(this._options.unorderableColumnCssClass);const r=Q("span",{className:"slick-column-name"},s);this.applyHtmlCode(r,t.name),ai.width(s,t.width-this.headerColumnWidthDiff);let o=t.headerCssClass||null;if(o&&s.classList.add(...Z(o)),o=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null,o&&s.classList.add(o),this._bindingEventService.bind(s,"mouseenter",this.handleHeaderMouseEnter.bind(this)),this._bindingEventService.bind(s,"mouseleave",this.handleHeaderMouseLeave.bind(this)),this._bindingEventService.bind(s,"mouseover",this.handleHeaderMouseOver.bind(this)),this._bindingEventService.bind(s,"mouseout",this.handleHeaderMouseOut.bind(this)),ai.storage.put(s,"column",t),(this._options.enableColumnReorder||t.sortable)&&(this._bindingEventService.bind(s,"mouseenter",this.handleHeaderMouseHoverOn.bind(this)),this._bindingEventService.bind(s,"mouseleave",this.handleHeaderMouseHoverOff.bind(this))),t.hasOwnProperty("headerCellAttrs")&&t.headerCellAttrs instanceof Object&&Object.keys(t.headerCellAttrs).forEach((e=>{t.headerCellAttrs.hasOwnProperty(e)&&s.setAttribute(e,t.headerCellAttrs[e])})),t.sortable&&(s.classList.add("slick-header-sortable"),Q("div",{className:"slick-sort-indicator "+(this._options.numberedMultiColumnSort&&!this._options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")},s),this._options.numberedMultiColumnSort&&this._options.sortColNumberInSeparateSpan&&Q("div",{className:"slick-sort-indicator-numbered"},s)),this.triggerEvent(this.onHeaderCellRendered,{node:s,column:t,grid:this}),this._options.showHeaderRow){const i=Q("div",{className:`slick-state-default slick-headerrow-column l${e} r${e}`},n),s=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;s&&i.classList.add(s),this._bindingEventService.bind(i,"mouseenter",this.handleHeaderRowMouseEnter.bind(this)),this._bindingEventService.bind(i,"mouseleave",this.handleHeaderRowMouseLeave.bind(this)),this._bindingEventService.bind(i,"mouseover",this.handleHeaderRowMouseOver.bind(this)),this._bindingEventService.bind(i,"mouseout",this.handleHeaderRowMouseOut.bind(this)),ai.storage.put(i,"column",t),this.triggerEvent(this.onHeaderRowCellRendered,{node:i,column:t,grid:this})}if(this._options.createFooterRow&&this._options.showFooterRow){const i=Q("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},this.hasFrozenColumns()?e<=this._options.frozenColumn?this._footerRow[0]:this._footerRow[1]:this._footerRow[0]);ai.storage.put(i,"column",t),this.triggerEvent(this.onFooterRowCellRendered,{node:i,column:t,grid:this})}}this.setSortColumns(this.sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&("function"===typeof this._options.enableColumnReorder?this._options.enableColumnReorder(this,this._headers,this.headerColumnWidthDiff,this.setColumns,this.setupColumnResize,this.columns,this.getColumnIndex,this.uid,this.triggerEvent):this.setupColumnReorder())}setupColumnSort(){this._headers.forEach((e=>{this._bindingEventService.bind(e,"click",(e=>{if(this.columnResizeDragging||e.target.classList.contains("slick-resizable-handle"))return;const t=e.target.closest(".slick-header-column");if(!t)return;const i=ai.storage.get(t,"column");if(i?.sortable){if(!this.getEditorLock()?.commitCurrentEdit())return;const t=this.sortColumns.slice();let n=null,s=0;for(;s<this.sortColumns.length;s++)if(this.sortColumns[s].columnId===i.id){n=this.sortColumns[s],n.sortAsc=!n.sortAsc;break}const r=!!n;let o;this._options.tristateMultiColumnSort?(n||(n={columnId:i.id,sortAsc:i.defaultSortAsc,sortCol:i}),r&&n.sortAsc&&(this.sortColumns.splice(s,1),n=null),this._options.multiColumnSort||(this.sortColumns=[]),!n||r&&this._options.multiColumnSort||this.sortColumns.push(n)):e.metaKey&&this._options.multiColumnSort?n&&this.sortColumns.splice(s,1):((e.shiftKey||e.metaKey)&&this._options.multiColumnSort||(this.sortColumns=[]),n?0===this.sortColumns.length&&this.sortColumns.push(n):(n={columnId:i.id,sortAsc:i.defaultSortAsc,sortCol:i},this.sortColumns.push(n))),o=this._options.multiColumnSort?{multiColumnSort:!0,previousSortColumns:t,sortCols:this.sortColumns.map((e=>{const t=this.columns[this.getColumnIndex(e.columnId)];return t&&!t.hidden?{columnId:t.id,sortCol:t,sortAsc:e.sortAsc}:null})).filter((e=>e))}:{multiColumnSort:!1,previousSortColumns:t,columnId:this.sortColumns.length>0?i.id:null,sortCol:this.sortColumns.length>0?i:null,sortAsc:!(this.sortColumns.length>0)||this.sortColumns[0].sortAsc},!1!==this.triggerEvent(this.onBeforeSort,o,e).getReturnValue()&&(this.setSortColumns(this.sortColumns),this.triggerEvent(this.onSort,o,e))}}))}))}setupColumnReorder(){let e;this.sortableSideLeftInstance?.destroy(),this.sortableSideRightInstance?.destroy();const t=()=>this._viewportScrollContainerX.scrollLeft+=10,i=()=>this._viewportScrollContainerX.scrollLeft-=10;let n=!1;const s={animation:50,direction:"horizontal",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!this.hasFrozenColumns(),filter:`.${this._options.unorderableColumnCssClass}`,onMove:e=>!e.related.classList.contains(this._options.unorderableColumnCssClass),onStart:s=>{s.item.classList.add("slick-header-column-active"),n=!this.hasFrozenColumns()||ne(s.item).left>ne(this._viewportScrollContainerX).left,n&&s.originalEvent.pageX>this._container.clientWidth?e||(e=window.setInterval(t,100)):n&&s.originalEvent.pageX<ne(this._viewportScrollContainerX).left?e||(e=window.setInterval(i,100)):window.clearInterval(e)},onEnd:t=>{if(t.item.classList.remove("slick-header-column-active"),window.clearInterval(e),!this.getEditorLock()?.commitCurrentEdit())return;let i=this.sortableSideLeftInstance?.toArray()??[];i=i.concat(this.sortableSideRightInstance?.toArray()??[]);const n=[];for(let e=0;e<i.length;e++)n.push(this.columns[this.getColumnIndex(i[e])]);this.setColumns(n),this.triggerEvent(this.onColumnsReordered,{impactedColumns:this.columns}),t.stopPropagation(),this.setupColumnResize(),this.activeCellNode&&this.setFocus()}};this.sortableSideLeftInstance=fs.create(this._headerL,s),this.sortableSideRightInstance=fs.create(this._headerR,s)}getHeaderChildren(){const e=Array.from(this._headers[0].children),t=Array.from(this._headers[1].children);return e.concat(t)}handleResizeableDoubleClick(e){const t=e.target.parentElement.id.replace(this.uid,"");this.triggerEvent(this.onColumnsResizeDblClick,{triggeredByColumn:t})}setupColumnResize(){let e,t,i,n,s,r,o,a=-1,l=0;const d=this.getHeaderChildren(),c=this.getVisibleColumns();for(let h=0;h<d.length;h++){d[h].querySelectorAll(".slick-resizable-handle").forEach((e=>e.remove())),h<c.length&&c[h]?.resizable&&(void 0===o&&(o=h),a=h)}if(void 0!==o)for(let h=0;h<d.length;h++){const u=d[h];if(h>=c.length||!c[h])continue;if(h<o||this._options.forceFitColumns&&h>=a)continue;const p=Q("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},u);this._bindingEventService.bind(p,"dblclick",this.handleResizeableDoubleClick.bind(this)),this.slickResizableInstances.push(ys({resizeableElement:u,resizeableHandleElement:p,onResizeStart:(t,o)=>{const a=t.touches?t.changedTouches[0]:t;if(!this.getEditorLock()?.commitCurrentEdit())return!1;n=a.pageX,l=0,o.resizeableElement.classList.add("slick-header-column-active");let u=null,p=null;for(let e=0;e<d.length;e++)e<c.length&&c[e]&&(c[e].previousWidth=d[e].offsetWidth);if(this._options.forceFitColumns)for(u=0,p=0,e=h+1;e<c.length;e++)i=c[e],i?.resizable&&(null!==p&&(i.maxWidth?p+=i.maxWidth-(i.previousWidth||0):p=null),u+=(i.previousWidth||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth));let m=0,g=0;for(e=0;e<=h;e++)i=c[e],i?.resizable&&(null!==g&&(i.maxWidth?g+=i.maxWidth-(i.previousWidth||0):g=null),m+=(i.previousWidth||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth));r=n+Math.min(u??1e5,g??1e5),s=n-Math.min(m??1e5,p??1e5)},onResize:(o,a)=>{const d=o.touches?o.changedTouches[0]:o;let u;this.columnResizeDragging=!0;const p=d.pageX,m=Math.min(r,Math.max(s,p))-n;let g,f=0,v=0;const b=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;if(m<0){for(g=m,e=h;e>=0;e--)i=c[e],i&&i.resizable&&!i.hidden&&(u=Math.max(i.minWidth||0,this.absoluteColumnMinWidth),g&&(i.previousWidth||0)+g<u?(g+=(i.previousWidth||0)-u,i.width=u):(i.width=(i.previousWidth||0)+g,g=0));for(t=0;t<=h;t++)i=c[t],i&&!i.hidden&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?v+=i.width||0:f+=i.width||0);if(this._options.forceFitColumns)for(g=-m,e=h+1;e<c.length;e++)i=c[e],i&&!i.hidden&&i.resizable&&(g&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<g?(g-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth):(i.width=(i.previousWidth||0)+g,g=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?v+=i.width||0:f+=i.width||0);else for(e=h+1;e<c.length;e++)i=c[e],i&&!i.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?v+=i.width||0:f+=i.width||0);if(this._options.forceFitColumns)for(g=-m,e=h+1;e<c.length;e++)i=c[e],i&&!i.hidden&&i.resizable&&(g&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<g?(g-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth):(i.width=(i.previousWidth||0)+g,g=0))}else{for(g=m,f=0,v=0,e=h;e>=0;e--)if(i=c[e],i&&!i.hidden&&i.resizable)if(g&&i.maxWidth&&i.maxWidth-(i.previousWidth||0)<g)g-=i.maxWidth-(i.previousWidth||0),i.width=i.maxWidth;else{const t=(i.previousWidth||0)+g,n=this.canvasWidthL+g;this.hasFrozenColumns()&&e<=this._options.frozenColumn?(t>l&&n<b-this._options.frozenRightViewportMinWidth&&(l=t),i.width=n+this._options.frozenRightViewportMinWidth>b?l:t):i.width=t,g=0}for(t=0;t<=h;t++)i=c[t],i&&!i.hidden&&(this.hasFrozenColumns()&&t>this._options.frozenColumn?v+=i.width||0:f+=i.width||0);if(this._options.forceFitColumns)for(g=-m,e=h+1;e<c.length;e++)i=c[e],i&&!i.hidden&&i.resizable&&(u=Math.max(i.minWidth||0,this.absoluteColumnMinWidth),g&&(i.previousWidth||0)+g<u?(g+=(i.previousWidth||0)-u,i.width=u):(i.width=(i.previousWidth||0)+g,g=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?v+=i.width||0:f+=i.width||0);else for(e=h+1;e<c.length;e++)i=c[e],i&&!i.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?v+=i.width||0:f+=i.width||0)}this.hasFrozenColumns()&&f!==this.canvasWidthL&&(ai.width(this._headerL,f+1e3),ai.setStyleSize(this._paneHeaderR,"left",f)),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths(),this.triggerEvent(this.onColumnsDrag,{triggeredByColumn:a.resizeableElement,resizeHandle:a.resizeableHandleElement})},onResizeEnd:(t,n)=>{n.resizeableElement.classList.remove("slick-header-column-active");const s=n.resizeableElement.id.replace(this.uid,"");let r;for(!0===this.triggerEvent(this.onBeforeColumnsResize,{triggeredByColumn:s}).getReturnValue()&&this.applyColumnHeaderWidths(),e=0;e<c.length;e++)i=c[e],i&&!i.hidden&&d[e]&&(r=d[e].offsetWidth,i.previousWidth!==r&&i.rerenderOnResize&&this.invalidateAllRows());this.updateCanvasWidth(!0),this.render(),this.triggerEvent(this.onColumnsResized,{triggeredByColumn:s}),window.clearTimeout(this._columnResizeTimer),this._columnResizeTimer=window.setTimeout((()=>this.columnResizeDragging=!1),this._options.columnResizingDelay)}}))}}getVBoxDelta(e){const t=getComputedStyle(e);let i=0;return["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].forEach((e=>i+=ai.toFloat(t[e]))),i}setFrozenOptions(){if(this._options.frozenColumn=this._options.frozenColumn>=0&&this._options.frozenColumn<this.columns.length?parseInt(this._options.frozenColumn,10):-1,this._options.frozenRow>-1){this.hasFrozenRows=!0,this.frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;const e=this.getDataLength();this.actualFrozenRow=this._options.frozenBottom?e-this._options.frozenRow:this._options.frozenRow}else this.hasFrozenRows=!1}setPaneFrozenClasses(){const e=this.hasFrozenColumns()?"add":"remove";for(const t of[this._paneHeaderL,this._paneTopL,this._paneBottomL])t.classList[e]("frozen")}setPaneVisibility(){this.hasFrozenColumns()?(ai.show(this._paneHeaderR),ai.show(this._paneTopR),this.hasFrozenRows?(ai.show(this._paneBottomL),ai.show(this._paneBottomR)):(ai.hide(this._paneBottomR),ai.hide(this._paneBottomL))):(ai.hide(this._paneHeaderR),ai.hide(this._paneTopR),ai.hide(this._paneBottomR),this.hasFrozenRows?ai.show(this._paneBottomL):(ai.hide(this._paneBottomR),ai.hide(this._paneBottomL)))}setOverflow(){if(this._viewportTopL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"hidden"):this.hasFrozenRows?"scroll":"auto",this._viewportTopR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":(this.hasFrozenColumns(),this.hasFrozenRows?"scroll":"auto"),this._viewportBottomL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto":(this.hasFrozenRows&&this._options.alwaysAllowHorizontalScroll,"auto"),this._viewportBottomL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?(this.hasFrozenRows,"hidden"):this.hasFrozenRows?"scroll":"auto",this._viewportBottomR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto":(this.hasFrozenRows&&this._options.alwaysAllowHorizontalScroll,"auto"),this._viewportBottomR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":(this.hasFrozenColumns(),this.hasFrozenRows,"auto"),this._options.viewportClass){const e=Z(this._options.viewportClass);this._viewportTopL.classList.add(...e),this._viewportTopR.classList.add(...e),this._viewportBottomL.classList.add(...e),this._viewportBottomR.classList.add(...e)}}setScroller(){this.hasFrozenColumns()?(this._headerScrollContainer=this._headerScrollerR,this._headerRowScrollContainer=this._headerRowScrollerR,this._footerRowScrollContainer=this._footerRowScrollerR,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomR,this._viewportScrollContainerY=this._viewportTopR):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomR:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopR):(this._headerScrollContainer=this._headerScrollerL,this._headerRowScrollContainer=this._headerRowScrollerL,this._footerRowScrollContainer=this._footerRowScrollerL,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomL,this._viewportScrollContainerY=this._viewportTopL):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomL:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopL)}measureCellPaddingAndBorder(){const e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=this._headers[0];this.headerColumnWidthDiff=this.headerColumnHeightDiff=0,this.cellWidthDiff=this.cellHeightDiff=0;let n=Q("div",{className:"slick-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},i),s=getComputedStyle(n);"border-box"!==s.boxSizing&&(e.forEach((e=>this.headerColumnWidthDiff+=ai.toFloat(s[e]))),t.forEach((e=>this.headerColumnHeightDiff+=ai.toFloat(s[e])))),n.remove();const r=Q("div",{className:"slick-row"},this._canvas[0]);n=Q("div",{className:"slick-cell",id:"",style:{visibility:"hidden"},textContent:"-"},r),s=getComputedStyle(n),"border-box"!==s.boxSizing&&(e.forEach((e=>this.cellWidthDiff+=ai.toFloat(s[e]))),t.forEach((e=>this.cellHeightDiff+=ai.toFloat(s[e])))),r.remove(),this.absoluteColumnMinWidth=Math.max(this.headerColumnWidthDiff,this.cellWidthDiff)}createCssRules(){this._style=document.createElement("style"),this._style.nonce=this._options.nonce||"",(this._options.shadowRoot||document.head).appendChild(this._style);const e=this._options.rowHeight-this.cellHeightDiff,t=[`.${this.uid} .slick-group-header-column { left: 1000px; }`,`.${this.uid} .slick-header-column { left: 1000px; }`,`.${this.uid} .slick-top-panel { height: ${this._options.topPanelHeight}px; }`,`.${this.uid} .slick-preheader-panel { height: ${this._options.preHeaderPanelHeight}px; }`,`.${this.uid} .slick-topheader-panel { height: ${this._options.topHeaderPanelHeight}px; }`,`.${this.uid} .slick-headerrow-columns { height: ${this._options.headerRowHeight}px; }`,`.${this.uid} .slick-footerrow-columns { height: ${this._options.footerRowHeight}px; }`,`.${this.uid} .slick-cell { height: ${e}px; }`,`.${this.uid} .slick-row { height: ${this._options.rowHeight}px; }`],i=this._style.sheet;if(i){t.forEach((e=>i.insertRule(e)));for(let e=0;e<this.columns.length;e++)this.columns[e]&&!this.columns[e].hidden&&(i.insertRule(`.${this.uid} .l${e} { }`),i.insertRule(`.${this.uid} .r${e} { }`))}else this.createCssRulesAlternative(t)}createCssRulesAlternative(e){const t=document.createElement("template");t.innerHTML='<style type="text/css" rel="stylesheet" />',this._style=t.content.firstChild,(this._options.shadowRoot||document.head).appendChild(this._style);for(let i=0;i<this.columns.length;i++)this.columns[i]&&!this.columns[i].hidden&&(e.push(`.${this.uid} .l${i} { }`),e.push(`.${this.uid} .r${i} { }`));this._style.styleSheet?this._style.styleSheet.cssText=e.join(" "):this._style.appendChild(document.createTextNode(e.join(" ")))}getColumnCssRules(e){let t;if(!this.stylesheet){const e=(this._options.shadowRoot||document).styleSheets;for(this._options.devMode&&"number"===typeof this._options.devMode.ownerNodeIndex&&this._options.devMode.ownerNodeIndex>=0&&(e[this._options.devMode.ownerNodeIndex].ownerNode=this._style),t=0;t<e.length;t++){const i=e[t];if((i.ownerNode||i.owningElement)===this._style){this.stylesheet=i;break}}if(!this.stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");this.columnCssRulesL=[],this.columnCssRulesR=[];const i=this.stylesheet.cssRules||this.stylesheet.rules;let n,s;for(t=0;t<i.length;t++){const e=i[t].selectorText;(n=/\.l\d+/.exec(e))?(s=parseInt(n[0].substr(2,n[0].length-2),10),this.columnCssRulesL[s]=i[t]):(n=/\.r\d+/.exec(e))&&(s=parseInt(n[0].substr(2,n[0].length-2),10),this.columnCssRulesR[s]=i[t])}}return{left:this.columnCssRulesL[e],right:this.columnCssRulesR[e]}}removeCssRules(){this._style?.remove(),this.stylesheet=null}clearAllTimers(){window.clearTimeout(this._columnResizeTimer),window.clearTimeout(this._executionBlockTimer),window.clearTimeout(this._flashCellTimer),window.clearTimeout(this._highlightRowTimer),window.clearTimeout(this.h_editorLoader)}destroy(e){this._bindingEventService.unbindAll(),this.slickDraggableInstance=this.destroyAllInstances(this.slickDraggableInstance),this.slickMouseWheelInstances=this.destroyAllInstances(this.slickMouseWheelInstances),this.slickResizableInstances=this.destroyAllInstances(this.slickResizableInstances),this.getEditorLock()?.cancelCurrentEdit(),this.triggerEvent(this.onBeforeDestroy,{});let t=this.plugins.length;for(;t--;)this.unregisterPlugin(this.plugins[t]);this._options.enableColumnReorder&&"function"===typeof this.sortableSideLeftInstance?.destroy&&"function"===typeof this.sortableSideRightInstance?.destroy&&(this.sortableSideLeftInstance.destroy(),this.sortableSideRightInstance.destroy()),this.unbindAncestorScrollEvents(),this._bindingEventService.unbindByEventName(this._container,"resize"),this.removeCssRules(),this._canvas.forEach((e=>{this._bindingEventService.unbindByEventName(e,"keydown"),this._bindingEventService.unbindByEventName(e,"click"),this._bindingEventService.unbindByEventName(e,"dblclick"),this._bindingEventService.unbindByEventName(e,"contextmenu"),this._bindingEventService.unbindByEventName(e,"mouseover"),this._bindingEventService.unbindByEventName(e,"mouseout")})),this._viewport.forEach((e=>{this._bindingEventService.unbindByEventName(e,"scroll")})),this._headerScroller.forEach((e=>{this._bindingEventService.unbindByEventName(e,"contextmenu"),this._bindingEventService.unbindByEventName(e,"click")})),this._headerRowScroller.forEach((e=>{this._bindingEventService.unbindByEventName(e,"scroll")})),this._footerRow&&this._footerRow.forEach((e=>{this._bindingEventService.unbindByEventName(e,"contextmenu"),this._bindingEventService.unbindByEventName(e,"click")})),this._footerRowScroller&&this._footerRowScroller.forEach((e=>{this._bindingEventService.unbindByEventName(e,"scroll")})),this._preHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._preHeaderPanelScroller,"scroll"),this._topHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._topHeaderPanelScroller,"scroll"),this._bindingEventService.unbindByEventName(this._focusSink,"keydown"),this._bindingEventService.unbindByEventName(this._focusSink2,"keydown");const i=this._container.querySelectorAll(".slick-resizable-handle");[].forEach.call(i,(e=>{this._bindingEventService.unbindByEventName(e,"dblclick")}));const n=this._container.querySelectorAll(".slick-header-column");[].forEach.call(n,(e=>{this._bindingEventService.unbindByEventName(e,"mouseenter"),this._bindingEventService.unbindByEventName(e,"mouseleave"),this._bindingEventService.unbindByEventName(e,"mouseover"),this._bindingEventService.unbindByEventName(e,"mouseout")})),ee(this._container),this._container.classList.remove(this.uid),this.clearAllTimers(),e&&J(this)}destroyAllInstances(e){if(e){const t=Array.isArray(e)?e:[e];let i;for(;Re(i=t.pop());)i&&"function"===typeof i.destroy&&i.destroy()}return e=Array.isArray(e)?[]:null}autosizeColumns(){this.legacyAutosizeColumns()}legacyAutosizeColumns(){let e,t,i=0,n=0,s=0;const r=[],o=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;for(e=0;e<this.columns.length;e++)t=this.columns[e],t&&!t.hidden?(r.push(t.width||0),n+=t.width||0,t.resizable&&(i+=(t.width||0)-Math.max(t.minWidth||0,this.absoluteColumnMinWidth))):r.push(0);for(s=n;n>o&&i;){const a=(n-o)/i;for(e=0;e<this.columns.length&&n>o;e++)if(t=this.columns[e],t&&!t.hidden){const s=r[e];if(!t.resizable||s<=t.minWidth||s<=this.absoluteColumnMinWidth)continue;const o=Math.max(t.minWidth,this.absoluteColumnMinWidth);let l=Math.floor(a*(s-o))||1;l=Math.min(l,s-o),n-=l,i-=l,r[e]-=l}if(s<=n)break;s=n}for(s=n;n<o;){const i=o/n;for(e=0;e<this.columns.length&&n<o;e++)if(t=this.columns[e],t&&!t.hidden){const s=r[e];let a;a=!t.resizable||t.maxWidth<=s?0:Math.min(Math.floor(i*s)-s,t.maxWidth-s||1e6)||1,n+=a,r[e]+=n<=o?a:0}if(s>=n)break;s=n}let a=!1;for(e=0;e<this.columns.length;e++)t&&!t.hidden&&(this.columns[e].rerenderOnResize&&this.columns[e].width!==r[e]&&(a=!0),this.columns[e].width=r[e]);this.reRenderColumns(a)}reRenderColumns(e){this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),this.triggerEvent(this.onAutosizeColumns,{columns:this.columns}),e&&(this.invalidateAllRows(),this.render())}getVisibleColumns(){return this.columns.filter((e=>!e.hidden))}triggerEvent(e,t,i){const n=i||new ei(i,t),s=t||{};return s.grid=this,e.notify(s,n,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this.editController}getColumnIndex(e){return this.columnsById[e]}applyColumnHeaderWidths(){if(this.initialized){let e=0;const t=this.getVisibleColumns();this._headers.forEach((i=>{for(let n=0;n<i.children.length;n++,e++){const s=i.children[n],r=((t[e]||{}).width||0)-this.headerColumnWidthDiff;ai.width(s)!==r&&ai.width(s,r)}})),this.updateColumnCaches()}}applyColumnWidths(){let e,t=0,i=0;for(let n=0;n<this.columns.length;n++)this.columns[n]?.hidden||(i=this.columns[n].width||0,e=this.getColumnCssRules(n),e.left&&(e.left.style.left=`${t}px`),e.right&&(e.right.style.right=(-1!==this._options.frozenColumn&&n>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-t-i+"px"),this._options.frozenColumn!==n&&(t+=this.columns[n].width)),this._options.frozenColumn===n&&(t=0)}setSortColumn(e,t){this.setSortColumns([{columnId:e,sortAsc:t}])}getColumnByIndex(e){let t;return this._headers.every((i=>{const n=i.children.length;return e<n?(t=i.children[e],!1):(e-=n,!0)})),t}setSortColumns(e){this.sortColumns=e;const t=this._options.numberedMultiColumnSort&&this.sortColumns.length>1;this._headers.forEach((e=>{let t=e.querySelectorAll(".slick-header-column-sorted");t.forEach((e=>e.classList.remove("slick-header-column-sorted"))),t=e.querySelectorAll(".slick-sort-indicator"),t.forEach((e=>e.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc"))),t=e.querySelectorAll(".slick-sort-indicator-numbered"),t.forEach((e=>e.textContent=""))}));let i=1;this.sortColumns.forEach((e=>{Re(e.sortAsc)||(e.sortAsc=!0);const n=this.getColumnIndex(e.columnId);if(Re(n)){const s=this.getColumnByIndex(n);if(s){s.classList.add("slick-header-column-sorted");let n=s.querySelector(".slick-sort-indicator");n?.classList.add(e.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),t&&(n=s.querySelector(".slick-sort-indicator-numbered"),n&&(n.textContent=String(i)))}}i++}))}getSortColumns(){return this.sortColumns}handleSelectedRangesChanged(e,t){const i=e.getNativeEvent(),n=this.selectedRows.slice(0);this.selectedRows=[];const s={};for(let r=0;r<t.length;r++)for(let e=t[r].fromRow;e<=t[r].toRow;e++){s[e]||(this.selectedRows.push(e),s[e]={});for(let i=t[r].fromCell;i<=t[r].toCell;i++)this.canCellBeSelected(e,i)&&(s[e][this.columns[i].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass||"",s),this.simpleArrayEquals(n,this.selectedRows)){const t=i?.detail?.caller??"click",s=new Set(this.getSelectedRows()),r=new Set(n),o=Array.from(s).filter((e=>!r.has(e))),a=Array.from(r).filter((e=>!s.has(e)));this.triggerEvent(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:n,caller:t,changedSelectedRows:o,changedUnselectedRows:a},e)}}simpleArrayEquals(e,t){return Array.isArray(e)&&Array.isArray(t)&&t.sort().toString()!==e.sort().toString()}getColumns(){return this.columns}updateColumnCaches(){this.columnPosLeft=[],this.columnPosRight=[];let e=0;for(let t=0,i=this.columns.length;t<i;t++)this.columns[t]&&!this.columns[t].hidden&&(this.columnPosLeft[t]=e,this.columnPosRight[t]=e+(this.columns[t].width||0),this._options.frozenColumn===t?e=0:e+=this.columns[t].width||0)}updateColumnProps(){this.columnsById={};for(let e=0;e<this.columns.length;e++){let t=this.columns[e]||{};t.width&&(t.widthRequest=t.width),this._options.mixinDefaults?ai.applyDefaults(t,this._columnDefaults):t=this.columns[e]=Se({},this._columnDefaults,t),this.columnsById[t.id]=e,t.minWidth&&(t.width||0)<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&(t.width||0)>t.maxWidth&&(t.width=t.maxWidth)}}setColumns(e){this.triggerEvent(this.onBeforeSetColumns,{previousColumns:this.columns,newColumns:e,grid:this}),this.columns=e,this.updateColumnsInternal(),this.triggerEvent(this.onAfterSetColumns,{newColumns:e,grid:this})}updateColumns(){this.triggerEvent(this.onBeforeUpdateColumns,{columns:this.columns,grid:this}),this.updateColumnsInternal()}updateColumnsInternal(){this.updateColumnProps(),this.updateColumnCaches(),this.initialized&&(this.setPaneFrozenClasses(),this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooter(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnWidths(),this.handleScroll(),this.getSelectionModel()?.refreshSelections())}getOptions(){return this._options}setOptions(e,t,i,n){this.prepareForOptionsChange(),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),void 0!==e.frozenColumn&&e.frozenColumn>=0&&(this.getViewports().forEach((e=>e.scrollLeft=0)),this.handleScroll());const s=Se(!0,{},this._options);this._options=Se(!0,this._options,e),this.triggerEvent(this.onSetOptions,{optionsBefore:s,optionsAfter:this._options}),this.internal_setOptions(t,i,n)}activateChangedOptions(e,t,i){this.prepareForOptionsChange(),this.invalidateRow(this.getDataLength()),this.triggerEvent(this.onActivateChangedOptions,{options:this._options}),this.internal_setOptions(e,t,i)}prepareForOptionsChange(){this.getEditorLock()?.commitCurrentEdit()&&this.makeActiveCellNormal()}internal_setOptions(e,t,i){void 0!==this._options.showColumnHeader&&this.setColumnHeaderVisibility(this._options.showColumnHeader),this.validateAndEnforceOptions(),this.setFrozenOptions(),void 0!==this._options.frozenBottom&&(this.enforceFrozenRowHeightRecalc=!0),this._viewport.forEach((e=>{e.style.overflowY=this._options.autoHeight?"hidden":"auto"})),e||this.render(),this.setScroller(),i||this.setOverflow(),t||this.setColumns(this.columns),!this._options.enableMouseWheelScrollHandler||!this._viewport||this.slickMouseWheelInstances&&0!==this.slickMouseWheelInstances.length?!1===this._options.enableMouseWheelScrollHandler&&this.destroyAllInstances(this.slickMouseWheelInstances):this._viewport.forEach((e=>{this.slickMouseWheelInstances.push(bs({element:e,onMouseWheel:this.handleMouseWheel.bind(this)}))}))}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}setData(e,t){this.data=e,this.invalidateAllRows(),this.updateRowCount(),t&&this.scrollTo(0)}getData(){return this.data}getDataLength(){return this.data.getLength?this.data.getLength():this.data?.length||0}getDataLengthIncludingAddNew(){return this.getDataLength()+(this._options.enableAddRow&&(!this.pagingActive||this.pagingIsLastPage)?1:0)}getDataItem(e){return this.data.getItem?this.data.getItem(e):this.data[e]}getItemMetadaWhenExists(e){return"getItemMetadata"in this.data?this.data.getItemMetadata(e):null}getTopPanel(){return this._topPanels[0]}getTopPanels(){return this._topPanels}hasDataView(){return!Array.isArray(this.data)}togglePanelVisibility(e,t,i){this._options[e]!==i&&(this._options[e]=i,i?ai.show(t):ai.hide(t),this.resizeCanvas())}setTopPanelVisibility(e){this.togglePanelVisibility("showTopPanel",this._topPanelScrollers,e)}setHeaderRowVisibility(e){this.togglePanelVisibility("showHeaderRow",this._headerRowScroller,e)}setColumnHeaderVisibility(e){this.togglePanelVisibility("showColumnHeader",this._headerScroller,e)}setFooterRowVisibility(e){this.togglePanelVisibility("showFooterRow",this._footerRowScroller,e)}setPreHeaderPanelVisibility(e){this.togglePanelVisibility("showPreHeaderPanel",[this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],e)}setTopHeaderPanelVisibility(e){this.togglePanelVisibility("showTopHeaderPanel",this._topHeaderPanelScroller,e)}getContainerNode(){return this._container}getRowHeight(){return this._options.rowHeight}getRowTop(e){return Math.round(this._options.rowHeight*e-this.offset)}getRowBottom(e){return this.getRowTop(e)+this._options.rowHeight}getRowFromPosition(e){return Math.floor((e+this.offset)/this._options.rowHeight)}scrollTo(e){e=Math.max(e,0),e=Math.min(e,(this.th||0)-ai.height(this._viewportScrollContainerY)+((this.viewportHasHScroll||this.hasFrozenColumns())&&this.scrollbarDimensions?.height||0));const t=this.offset;this.offset=Math.round(this.page*(this.cj||0)),this.page=Math.min((this.n||0)-1,Math.floor(e/(this.ph||0)));const i=e-this.offset;if(this.offset!==t){const e=this.getVisibleRange(i);this.cleanupRows(e),this.updateRowPositions()}this.prevScrollTop!==i&&(this.vScrollDir=this.prevScrollTop+t<i+this.offset?1:-1,this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=i,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=i),this.hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=i),this._viewportScrollContainerY&&(this._viewportScrollContainerY.scrollTop=i),this.triggerEvent(this.onViewportChanged,{}))}defaultFormatter(e,t,i){return Re(i)?(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}getFormatter(e,t){const i=this.data?.getItemMetadata?.(e),n=i?.columns&&(i.columns[t.id]||i.columns[this.getColumnIndex(t.id)]);return n?.formatter||i?.formatter||t.formatter||this._options.formatterFactory?.getFormatter(t)||this._options.defaultFormatter}getEditor(e,t){const i=this.columns[t],n=this.getItemMetadaWhenExists(e),s=n?.columns;return void 0!==s?.[i.id]?.editorClass?s[i.id].editorClass:void 0!==s?.[t]?.editorClass?s[t].editorClass:i.editorClass||this._options?.editorFactory?.getEditor(i)}getDataItemValueForColumn(e,t){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,t):e[t.field]}appendRowHtml(e,t,i,n,s){const r=this.getDataItem(i),o=i<s&&!r;let a="slick-row"+(this.hasFrozenRows&&i<=this._options.frozenRow?" frozen":"")+(o?" loading":"")+(i===this.activeRow&&this._options.showCellSelection?" active":"")+(i%2===1?" odd":" even");r||(a+=` ${this._options.addNewRowCssClass}`);const l=this.getItemMetadaWhenExists(i);l?.cssClasses&&(a+=` ${l.cssClasses}`);const d=Q("div",{className:`ui-widget-content ${a}`,role:"row",dataset:{row:`${i}`}}),c=this.getFrozenRowOffset(i),h=this.getRowTop(i)-c;let u;"transform"===this._options.rowTopOffsetRenderType?d.style.transform=`translateY(${h}px)`:d.style.top=`${h}px`,e.push(d),this.hasFrozenColumns()&&(u=d.cloneNode(!0),t.push(u));let p,m,g,f,v=!0;for(let b=0,y=this.columns.length;b<y;b++)if(v=!0,f=this.columns[b],f&&!f.hidden){m=1,g=1,p=null,l?.columns&&(p=l.columns[f.id]||l.columns[b],m=p?.colspan||1,g=p?.rowspan||1,"*"===m&&(m=y-b),g>s-i&&(g=s-i)),!this._options.enableCellRowSpan&&g>1&&console.warn('[SlickGrid] Cell "rowspan" is an opt-in grid option because of its small perf hit, you must enable it via the "enableCellRowSpan" grid option.');const e=m;if(this.getParentRowSpanByCell(i,b))continue;if(this.columnPosRight[Math.min(y-1,b+e-1)]>n.leftPx){if(!f.alwaysRenderColumn&&this.columnPosLeft[b]>n.rightPx&&(v=!1),v){const t=this.hasFrozenColumns()&&b>this._options.frozenColumn?u:d;this.appendCellHtml(t,i,b,e,g,p,r)}}else(f.alwaysRenderColumn||this.hasFrozenColumns()&&b<=this._options.frozenColumn)&&this.appendCellHtml(d,i,b,e,g,p,r);e>1&&(b+=e-1)}}appendCellHtml(e,t,i,n,s,r,o){const a=this.columns[i];let l=`slick-cell l${i} r${Math.min(this.columns.length-1,i+n-1)}`+(a.cssClass?` ${a.cssClass}`:"")+(s>1?" rowspan":"")+(r?.cssClass?` ${r.cssClass}`:"");this.hasFrozenColumns()&&i<=this._options.frozenColumn&&(l+=" frozen"),t===this.activeRow&&i===this.activeCell&&this._options.showCellSelection&&(l+=" active"),Object.keys(this.cellCssClasses).forEach((e=>{this.cellCssClasses[e][t]?.[a.id]&&(l+=` ${this.cellCssClasses[e][t][a.id]}`)}));let d=null,c="";o&&(d=this.getDataItemValueForColumn(o,a),c=this.getFormatter(t,a)(t,i,d,a,o,this),null!==c&&void 0!==c||(c=""));const h=this.triggerEvent(this.onBeforeAppendCell,{row:t,cell:i,value:d,dataContext:o}).getReturnValue();let u="string"===typeof h?h:"";c?.addClasses&&(u+=Z((u?" ":"")+c.addClasses).join(" "));const p=c?.toolTip?`${c.toolTip}`:"",m=Q("div",{className:Z(`${l} ${u||""}`).join(" "),role:"gridcell",tabIndex:-1});m.setAttribute("aria-describedby",this.uid+a.id),p&&m.setAttribute("title",p);const g=this.getCellHeight(t,s);if(s>1&&g!==this._options.rowHeight-this.cellHeightDiff&&(m.style.height=`${g||0}px`),a.hasOwnProperty("cellAttrs")&&a.cellAttrs instanceof Object&&Object.keys(a.cellAttrs).forEach((e=>{a.cellAttrs.hasOwnProperty(e)&&m.setAttribute(e,a.cellAttrs[e])})),o){const e=Fe(c)?c:c.html||c.text;this.applyHtmlCode(m,e)}e.appendChild(m),c.insertElementAfterTarget&&he(m,c.insertElementAfterTarget),this.rowsCache[t].cellRenderQueue.push(i),this.rowsCache[t].cellColSpans[i]=n}cleanupRows(e){const t=new Set;if(this._options.enableCellRowSpan)for(let i=e.top,n=e.bottom;i<=n;i++){const e=this.getRowSpanIntersect(i);null!==e&&t.add(e)}Object.keys(this.rowsCache).forEach((i=>{if(this.rowsCache){let n=+i,s=!0;this.hasFrozenRows&&(this._options.frozenBottom&&n>=this.actualFrozenRow||!this._options.frozenBottom&&n<=this.actualFrozenRow)&&(s=!1),(n=parseInt(i,10))!==this.activeRow&&(n<e.top||n>e.bottom)&&s&&!t.has(n)&&this.removeRowFromCache(n)}})),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}getRowSpanColumnIntersects(e){return this.getRowSpanIntersection(e,"columns")}getRowSpanIntersect(e){return this.getRowSpanIntersection(e)}getRowSpanIntersection(e,t){const i=[];let n=null;for(let s=0,r=this.columns.length;s<r;s++){const r=this._colsWithRowSpanCache[s];if(r)for(const o of Array.from(r)){const[r,a]=o.split(":").map(Number);if(e>=r&&e<=a){if("columns"!==t){n=r;break}i.push(s)}}}return"columns"===t?i:n}getParentRowSpanByCell(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;const s=this._colsWithRowSpanCache[t]||new Set;for(const r of Array.from(s)){const[t,s]=r.split(":").map(Number);if((i?e>t:e>=t)&&e<=s){n={start:t,end:s,range:r};break}}return n}remapAllColumnsRowSpan(){const e=this.getDataLength();if(e>0){this._colsWithRowSpanCache={};for(let t=0;t<e;t++)this.remapRowSpanMetadataByRow(t);this._rowSpanIsCached=!0}}remapRowSpanMetadataByRow(e){const t=this.getItemMetadaWhenExists(e);t?.columns&&Object.keys(t.columns).forEach((i=>{const n=+i,s=t.columns[n],r=+(s?.colspan||1),o=+(s?.rowspan||1);this.remapRowSpanMetadata(e,n,r,o)}))}remapRowSpanMetadata(e,t,i,n){if(n>1){const s=`${e}:${e+n-1}`;if(this._colsWithRowSpanCache[t]??=new Set,this._colsWithRowSpanCache[t].add(s),i>1)for(let e=1;e<i;e++)this._colsWithRowSpanCache[t+e]??=new Set,this._colsWithRowSpanCache[t+e].add(s)}}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render()}invalidateAllRows(){this.currentEditor&&this.makeActiveCellNormal(),"object"===typeof this.rowsCache&&Object.keys(this.rowsCache).forEach((e=>{this.rowsCache&&this.removeRowFromCache(+e)})),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRows(e){if(!e||!e.length)return;let t;this.vScrollDir=0;const i=e.length,n=new Set,s=new Set,r=e.length>this._options.maxPartialRowSpanRemap||e.length===this.getDataLength()||this._prevInvalidatedRowsCount+e.length===this.getDataLength();for(let o=0;o<i;o++)if(t=e[o],this.currentEditor&&this.activeRow===t&&this.makeActiveCellNormal(),this.rowsCache[t]&&this.removeRowFromCache(t),this._options.enableCellRowSpan&&!r){n.add(t);const e=this.getRowSpanIntersect(t);null!==e&&n.add(e)}if(this._options.enableCellRowSpan&&!r){for(const e of Array.from(n)){const t=this.getRowSpanColumnIntersects(e);for(const i of t){const t=this.getParentRowSpanByCell(e,i);t&&this._colsWithRowSpanCache[i]&&(this._colsWithRowSpanCache[i].delete(t.range),s.add(t.range.split(":").map(Number)[0]))}}for(const e of Array.from(s))this.remapRowSpanMetadataByRow(e)}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this._prevInvalidatedRowsCount=e.length}invalidateRow(e){if(e>=0){const t=[e];if(this._options.enableCellRowSpan){const i=this.getRowSpanIntersect(e);null!==i&&t.push(i)}this.invalidateRows(t)}}queuePostProcessedRowForCleanup(e,t,i){this.postProcessgroupId++,"object"===typeof t&&Object.keys(t).forEach((n=>{t.hasOwnProperty(n)&&this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e.cellNodesByColumnIdx[+n],columnIdx:+n,rowIdx:i})})),e.rowNode||(e.rowNode=[]),this.postProcessedCleanupQueue.push({actionType:"R",groupId:this.postProcessgroupId,node:e.rowNode}),e.rowNode?.forEach((e=>e.remove()))}queuePostProcessedCellForCleanup(e,t,i){this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e,columnIdx:t,rowIdx:i}),e.remove()}removeRowFromCache(e){const t=this.rowsCache[e];t?.rowNode&&(this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[e]?this.queuePostProcessedRowForCleanup(t,this.postProcessedRows[e],e):t.rowNode?.forEach((e=>e.parentElement?.removeChild(e))),delete this.rowsCache[e],delete this.postProcessedRows[e],this.renderedRows--,this.counter_rows_removed++)}applyFormatResultToCellNode(e,t,i){if(null!==e&&void 0!==e||(e=""),Fe(e))return void this.applyHtmlCode(t,e);const n=e.html||e.text;this.applyHtmlCode(t,n),e.removeClasses&&!i&&t.classList.remove(...Z(e.removeClasses)),e.addClasses&&t.classList.add(...Z(e.addClasses)),e.toolTip&&t.setAttribute("title",e.toolTip)}updateCell(e,t){const i=this.getCellNode(e,t);if(i){const n=this.columns[t],s=this.getDataItem(e);if(this.currentEditor&&this.activeRow===e&&this.activeCell===t)this.currentEditor.loadValue(s);else{const r=s?this.getFormatter(e,n)(e,t,this.getDataItemValueForColumn(s,n),n,s,this):"";this.applyFormatResultToCellNode(r,i),this.invalidatePostProcessingResults(e)}}}updateRow(e){const t=this.rowsCache[e];if(!t)return;let i;this.ensureCellNodesInRowsCache(e);const n=this.getDataItem(e);Object.keys(t.cellNodesByColumnIdx).forEach((s=>{if(t.cellNodesByColumnIdx.hasOwnProperty(s)){const r=+s,o=this.columns[r],a=t.cellNodesByColumnIdx[r];this.currentEditor&&e===this.activeRow&&r===this.activeCell?this.currentEditor.loadValue(n):n?(i=this.getFormatter(e,o)(e,r,this.getDataItemValueForColumn(n,o),o,n,this),this.applyFormatResultToCellNode(i,a)):ee(a)}})),this.invalidatePostProcessingResults(e)}getCellHeight(e,t){let i=this._options.rowHeight||0;if(t>1){const n=e+t-1;i=this.getRowBottom(n)-this.getRowTop(e)}else{const e=this.getRowHeight();e!==i-this.cellHeightDiff&&(i=e)}return i-=this.cellHeightDiff,Math.ceil(i)}getViewportRowCount(){const e=this.getViewportHeight(),t=this.getScrollbarDimensions()?.height||0;return Math.floor((e-t)/this._options.rowHeight)}getViewportHeight(){if(this._options.autoHeight&&-1===this._options.frozenColumn||(this.topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelScrollers[0]):0,this.headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,this.footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0),this._options.autoHeight){let e=this._paneHeaderL.offsetHeight;e+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,e+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0,e+=this.getCanvasWidth()>this.viewportW&&this.scrollbarDimensions?.height||0,this.viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew()+(-1===this._options.frozenColumn?e:0)}else{const e=this._options.showColumnHeader?ai.toFloat(ai.height(this._headerScroller[0]))+this.getVBoxDelta(this._headerScroller[0]):0,t=this._options.createPreHeaderPanel&&this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight+this.getVBoxDelta(this._preHeaderPanelScroller):0,i=this._options.createTopHeaderPanel&&this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight+this.getVBoxDelta(this._topHeaderPanelScroller):0,n=getComputedStyle(this._container);this.viewportH=ai.toFloat(n.height)-ai.toFloat(n.paddingTop)-ai.toFloat(n.paddingBottom)-e-this.topPanelH-this.headerRowH-this.footerRowH-t-i}return this.numVisibleRows=Math.ceil(this.viewportH/this._options.rowHeight),this.viewportH}getViewportWidth(){return this.viewportW=parseFloat(se(this._container,"width"))||this._options.devMode&&this._options.devMode.containerClientWidth||0,this.viewportW}resizeCanvas(){if(this.initialized){if(this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.getViewportWidth(),this.getViewportHeight(),this.hasFrozenRows?this._options.frozenBottom?(this.paneTopH=this.viewportH-this.frozenRowsHeight-(this.scrollbarDimensions?.height||0),this.paneBottomH=this.frozenRowsHeight+(this.scrollbarDimensions?.height||0)):(this.paneTopH=this.frozenRowsHeight,this.paneBottomH=this.viewportH-this.frozenRowsHeight):this.paneTopH=this.viewportH,this.paneTopH+=this.topPanelH+this.headerRowH+this.footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this.paneTopH+=this.scrollbarDimensions?.height||0),this.viewportTopH=this.paneTopH-this.topPanelH-this.headerRowH-this.footerRowH,this._options.autoHeight){if(this.hasFrozenColumns()){const e=getComputedStyle(this._headerScrollerL);ai.height(this._container,this.paneTopH+ai.toFloat(e.height))}this._paneTopL.style.position="relative"}let e=ai.height(this._paneHeaderL);e?e+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0:e=(this._options.showHeaderRow?this._options.headerRowHeight:0)+(this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight:0),ai.setStyleSize(this._paneTopL,"top",e||e),ai.height(this._paneTopL,this.paneTopH);const t=this._paneTopL.offsetTop+this.paneTopH;if(this._options.autoHeight||ai.height(this._viewportTopL,this.viewportTopH),this.hasFrozenColumns()){let e=ai.height(this._paneHeaderL);e&&(e+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0),ai.setStyleSize(this._paneTopR,"top",e),ai.height(this._paneTopR,this.paneTopH),ai.height(this._viewportTopR,this.viewportTopH),this.hasFrozenRows&&(ai.setStyleSize(this._paneBottomL,"top",t),ai.height(this._paneBottomL,this.paneBottomH),ai.setStyleSize(this._paneBottomR,"top",t),ai.height(this._paneBottomR,this.paneBottomH),ai.height(this._viewportBottomR,this.paneBottomH))}else this.hasFrozenRows&&(ai.width(this._paneBottomL,"100%"),ai.height(this._paneBottomL,this.paneBottomH),ai.setStyleSize(this._paneBottomL,"top",t));this.hasFrozenRows?(ai.height(this._viewportBottomL,this.paneBottomH),this._options.frozenBottom?(ai.height(this._canvasBottomL,this.frozenRowsHeight),this.hasFrozenColumns()&&ai.height(this._canvasBottomR,this.frozenRowsHeight)):(ai.height(this._canvasTopL,this.frozenRowsHeight),this.hasFrozenColumns()&&ai.height(this._canvasTopR,this.frozenRowsHeight))):ai.height(this._viewportTopR,this.viewportTopH),this.scrollbarDimensions&&this.scrollbarDimensions.width||(this.scrollbarDimensions=this.measureScrollbar()),this._options.forceFitColumns&&this.legacyAutosizeColumns(),this.updateRowCount(),this.handleScroll(),this.lastRenderedScrollLeft=-1,this.render()}}updatePagingStatusFromView(e){this.pagingActive=0!==e.pageSize,this.pagingIsLastPage=e.pageNum===e.totalPages-1}updateRowCount(){if(this.initialized){const e=this.getDataLength();e>0&&e!==this._prevDataLength&&(this._rowSpanIsCached=!1),this._options.enableCellRowSpan&&!this._rowSpanIsCached&&this.remapAllColumnsRowSpan(),this._prevDataLength=e;const t=this.getDataLengthIncludingAddNew();let i=0,n=this.hasFrozenRows&&!this._options.frozenBottom?ai.height(this._canvasBottomL):ai.height(this._canvasTopL);i=this.hasFrozenRows?this.getDataLength()-this._options.frozenRow:t+(this._options.leaveSpaceForNewRows?this.numVisibleRows-1:0);const s=ai.height(this._viewportScrollContainerY),r=this.viewportHasVScroll;this.viewportHasVScroll=this._options.alwaysShowVerticalScroll||!this._options.autoHeight&&i*this._options.rowHeight>s,this.makeActiveCellNormal();const o=e-1;"object"===typeof this.rowsCache&&Object.keys(this.rowsCache).forEach((e=>{const t=+e;t>o&&this.removeRowFromCache(t)})),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this.activeCellNode&&this.activeRow>o&&this.resetActiveCell(),n=this.h,this._options.autoHeight?this.h=this._options.rowHeight*i:(this.th=Math.max(this._options.rowHeight*i,s-(this.scrollbarDimensions?.height||0)),this.th<this.maxSupportedCssHeight?(this.h=this.ph=this.th,this.n=1,this.cj=0):(this.h=this.maxSupportedCssHeight,this.ph=this.h/100,this.n=Math.floor(this.th/this.ph),this.cj=(this.th-this.h)/(this.n-1))),(this.h!==n||this.enforceFrozenRowHeightRecalc)&&(this.hasFrozenRows&&!this._options.frozenBottom?(ai.height(this._canvasBottomL,this.h),this.hasFrozenColumns()&&ai.height(this._canvasBottomR,this.h)):(ai.height(this._canvasTopL,this.h),ai.height(this._canvasTopR,this.h)),this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollHeight=this._viewportScrollContainerY.scrollHeight,this.enforceFrozenRowHeightRecalc=!1);const a=this.scrollTop+this.offset<=this.th-s;0===this.th||0===this.scrollTop?this.page=this.offset=0:a?this.scrollTo(this.scrollTop+this.offset):this.scrollTo(this.th-s+(this.scrollbarDimensions?.height||0)),this.h!==n&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&r!==this.viewportHasVScroll&&this.legacyAutosizeColumns(),this.updateCanvasWidth(!1)}}getViewport(e,t){return this.getVisibleRange(e,t)}getVisibleRange(e,t){return e??=this.scrollTop,t??=this.scrollLeft,{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this.viewportH)+1,leftPx:t,rightPx:t+this.viewportW}}getRenderedRange(e,t){const i=this.getVisibleRange(e,t),n=Math.round(this.viewportH/this._options.rowHeight),s=this._options.minRowBuffer;return-1===this.vScrollDir?(i.top-=n,i.bottom+=s):1===this.vScrollDir?(i.top-=s,i.bottom+=n):(i.top-=s,i.bottom+=s),i.top=Math.max(0,i.top),i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom),i.leftPx-=this.viewportW,i.rightPx+=this.viewportW,i.leftPx=Math.max(0,i.leftPx),i.rightPx=Math.min(this.canvasWidth,i.rightPx),i}ensureCellNodesInRowsCache(e){const t=this.rowsCache[e];if(t?.cellRenderQueue.length&&t.rowNode?.length){const e=t.rowNode;let i=Array.from(e[0].children);e.length>1&&(i=i.concat(Array.from(e[1].children)));let n=i.length-1;for(;t.cellRenderQueue.length;){const e=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[e]=i[n--]}}}cleanUpCells(e,t){if(this.hasFrozenRows&&(this._options.frozenBottom&&t>this.actualFrozenRow||t<=this.actualFrozenRow))return;const i=this.rowsCache[t],n=[];let s,r;for(Object.keys(i.cellNodesByColumnIdx).forEach((s=>{if(!i.cellNodesByColumnIdx.hasOwnProperty(s))return;const r=+s;if(r<=this._options.frozenColumn)return;if(Array.isArray(this.columns)&&this.columns[r]?.alwaysRenderColumn)return;const o=i.cellColSpans[r];(this.columnPosLeft[r]>e.rightPx||this.columnPosRight[Math.min(this.columns.length-1,(r||0)+o-1)]<e.leftPx)&&(t===this.activeRow&&Number(r)===this.activeCell||n.push(r))}));Re(s=n.pop());)r=i.cellNodesByColumnIdx[s],this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[t]?.[s]?this.queuePostProcessedCellForCleanup(r,s,t):r.parentElement?.removeChild(r),delete i.cellColSpans[s],delete i.cellNodesByColumnIdx[s],this.postProcessedRows[t]&&delete this.postProcessedRows[t][s]}cleanUpAndRenderCells(e){let t;const i=document.createElement("div"),n=[];let s,r,o,a=0;const l=this.columns.length;for(let h=e.top,u=e.bottom;h<=u;h++)if(t=this.rowsCache[h],t){this.ensureCellNodesInRowsCache(h),this._options.enableCellRowSpan&&null!==this.getRowSpanIntersect(h)||this.cleanUpCells(e,h),s=0;let d=this.getItemMetadaWhenExists(h);d=d?.columns;const c=this.getDataItem(h);for(let n=0,a=l;n<a;n++)if(this.columns[n]&&!this.columns[n].hidden){if(this.columnPosLeft[n]>e.rightPx)break;if(Re(r=t.cellColSpans[n])){n+=r>1?r-1:0;continue}r=1,o=null,d&&(o=d[this.columns[n].id]||d[n],r=o?.colspan??1,"*"===r&&(r=a-n));const l=r;if(this.getParentRowSpanByCell(h,n))continue;if(this.columnPosRight[Math.min(a-1,n+l-1)]>e.leftPx){const e=this.getRowspan(h,n);this.appendCellHtml(i,h,n,l,e,o,c),s++}n+=l>1?l-1:0}s&&(a+=s,n.push(h))}if(!i.children.length)return;let d,c;for(;Re(d=n.pop());){let e;for(t=this.rowsCache[d];Re(e=t.cellRenderQueue.pop());)c=i.lastChild,c&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?t.rowNode[1].appendChild(c):t.rowNode[0].appendChild(c),t.cellNodesByColumnIdx[e]=c)}}createEmptyCachingRow(){return{rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]}}renderRows(e){const t=[],i=[],n=[];let s=!1;const r=this.getDataLength(),o=new Set,a=new Set;for(let d=e.top,c=e.bottom;d<=c;d++)if(!(this.rowsCache[d]||this.hasFrozenRows&&this._options.frozenBottom&&d===this.getDataLength())){if(this.renderedRows++,n.push(d),a.add(d),this.rowsCache[d]=this.createEmptyCachingRow(),this._options.enableCellRowSpan){const e=this.getRowSpanIntersect(d);null!==e&&a.add(e)}this.appendRowHtml(t,i,d,e,r),o.add(d),this.activeCellNode&&this.activeRow===d&&(s=!0),this.counter_rows_rendered++}const l=this.setDifference(a,o);if(l.size>0&&l.forEach((s=>{this.removeRowFromCache(s),n.push(s),this.rowsCache[s]=this.createEmptyCachingRow(),this.appendRowHtml(t,i,s,e,r)})),n.length){const e=document.createElement("div"),r=document.createElement("div");t.forEach((t=>e.appendChild(t))),i.forEach((e=>r.appendChild(e)));for(let t=0,i=n.length;t<i;t++)this.hasFrozenRows&&n[t]>=this.actualFrozenRow?this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(n[t])&&e.firstChild&&r.firstChild&&(this.rowsCache[n[t]].rowNode=[e.firstChild,r.firstChild],this._canvasBottomL.appendChild(e.firstChild),this._canvasBottomR.appendChild(r.firstChild)):this.rowsCache?.hasOwnProperty(n[t])&&e.firstChild&&(this.rowsCache[n[t]].rowNode=[e.firstChild],this._canvasBottomL.appendChild(e.firstChild)):this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(n[t])&&e.firstChild&&r.firstChild&&(this.rowsCache[n[t]].rowNode=[e.firstChild,r.firstChild],this._canvasTopL.appendChild(e.firstChild),this._canvasTopR.appendChild(r.firstChild)):this.rowsCache?.hasOwnProperty(n[t])&&e.firstChild&&(this.rowsCache[n[t]].rowNode=[e.firstChild],this._canvasTopL.appendChild(e.firstChild));s&&(this.activeCellNode=this.getCellNode(this.activeRow,this.activeCell))}}setDifference(e,t){return new Set(Array.from(e).filter((e=>!t.has(e))))}startPostProcessing(){this._options.enableAsyncPostRender&&(window.clearTimeout(this.h_postrender),this.h_postrender=window.setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(window.clearTimeout(this.h_postrenderCleanup),this.h_postrenderCleanup=window.setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay))}invalidatePostProcessingResults(e){"object"===typeof this.postProcessedRows[e]&&Object.keys(this.postProcessedRows[e]).forEach((t=>{this.postProcessedRows[e].hasOwnProperty(t)&&(this.postProcessedRows[e][t]="C")})),this.postProcessFromRow=Math.min(this.postProcessFromRow,e),this.postProcessToRow=Math.max(this.postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){this.rowsCache&&"object"===typeof this.rowsCache&&Object.keys(this.rowsCache).forEach((e=>{const t=e?parseInt(e,10):0,i=this.rowsCache[t].rowNode[0];"transform"===this._options.rowTopOffsetRenderType?i.style.transform=`translateY(${this.getRowTop(t)}px)`:i.style.top=`${this.getRowTop(t)}px`}))}render(){if(this.initialized){this.scrollThrottle.dequeue();const e=this.getVisibleRange(),t=this.getRenderedRange();if(this.cleanupRows(t),this.lastRenderedScrollLeft!==this.scrollLeft){if(this.hasFrozenRows){const e=Se(!0,{},t);this._options.frozenBottom?(e.top=this.actualFrozenRow,e.bottom=this.getDataLength()):(e.top=0,e.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(e)}this.cleanUpAndRenderCells(t)}this.renderRows(t),this.hasFrozenRows&&(this._options.frozenBottom?this.renderRows({top:this.actualFrozenRow,bottom:this.getDataLength()-1,leftPx:t.leftPx,rightPx:t.rightPx}):this.renderRows({top:0,bottom:this._options.frozenRow-1,leftPx:t.leftPx,rightPx:t.rightPx})),this.postProcessFromRow=e.top,this.postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this.lastRenderedScrollTop=this.scrollTop,this.lastRenderedScrollLeft=this.scrollLeft,this.triggerEvent(this.onRendered,{startRow:e.top,endRow:e.bottom,grid:this})}}handleHeaderRowScroll(){const e=this._headerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handleFooterRowScroll(){const e=this._footerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handlePreHeaderPanelScroll(){this.handleElementScroll(this._preHeaderPanelScroller)}handleTopHeaderPanelScroll(){this.handleElementScroll(this._topHeaderPanelScroller)}handleElementScroll(e){const t=e.scrollLeft;t!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=t)}handleScroll(e){return this.scrollHeight=this._viewportScrollContainerY.scrollHeight,this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollLeft=this._viewportScrollContainerX.scrollLeft,this._handleScroll(e?"scroll":"system")}_handleScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"system",t=this._viewportScrollContainerY.scrollHeight-this._viewportScrollContainerY.clientHeight,i=this._viewportScrollContainerY.scrollWidth-this._viewportScrollContainerY.clientWidth;t=Math.max(0,t),i=Math.max(0,i),this.scrollTop>t&&(this.scrollTop=t,this.scrollHeight=t),this.scrollLeft>i&&(this.scrollLeft=i);const n=Math.abs(this.scrollTop-this.prevScrollTop),s=Math.abs(this.scrollLeft-this.prevScrollLeft);if(s&&(this.prevScrollLeft=this.scrollLeft,this._viewportScrollContainerX.scrollLeft=this.scrollLeft,this._headerScrollContainer.scrollLeft=this.scrollLeft,this._topPanelScrollers[0].scrollLeft=this.scrollLeft,this._options.createFooterRow&&(this._footerRowScrollContainer.scrollLeft=this.scrollLeft),this._options.createPreHeaderPanel&&(this.hasFrozenColumns()?this._preHeaderPanelScrollerR.scrollLeft=this.scrollLeft:this._preHeaderPanelScroller.scrollLeft=this.scrollLeft),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller.scrollLeft=this.scrollLeft),this.hasFrozenColumns()?(this.hasFrozenRows&&(this._viewportTopR.scrollLeft=this.scrollLeft),this._headerRowScrollerR.scrollLeft=this.scrollLeft):(this.hasFrozenRows&&(this._viewportTopL.scrollLeft=this.scrollLeft),this._headerRowScrollerL.scrollLeft=this.scrollLeft)),n&&!this._options.autoHeight&&(this.vScrollDir=this.prevScrollTop<this.scrollTop?1:-1,this.prevScrollTop=this.scrollTop,"mousewheel"===e&&(this._viewportScrollContainerY.scrollTop=this.scrollTop),this.hasFrozenColumns()&&(this.hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this.scrollTop:this._viewportTopL.scrollTop=this.scrollTop),n<this.viewportH?this.scrollTo(this.scrollTop+this.offset):(this.h===this.viewportH?this.page=0:this.page=Math.min(this.n-1,Math.floor(this.scrollTop*((this.th-this.viewportH)/(this.h-this.viewportH))*(1/this.ph))),this.offset=Math.round(this.page*this.cj))),s||n){const e=Math.abs(this.lastRenderedScrollLeft-this.scrollLeft),t=Math.abs(this.lastRenderedScrollTop-this.scrollTop);(e>20||t>20)&&(this._options.forceSyncScrolling||t<this.viewportH&&e<this.viewportW?this.render():this.scrollThrottle.enqueue(),this.triggerEvent(this.onViewportChanged,{}))}return this.triggerEvent(this.onScroll,{triggeredBy:e,scrollHeight:this.scrollHeight,scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}),!(!s&&!n)}actionThrottle(e,t){let i=!1,n=!1;const s=()=>{n=!1},r=()=>{i=!0,window.clearTimeout(this._executionBlockTimer),this._executionBlockTimer=window.setTimeout(o,t),e.call(this)},o=()=>{n?(s(),r()):i=!1};return{enqueue:(()=>{i?n=!0:r()}).bind(this),dequeue:s.bind(this)}}asyncPostProcessRows(){const e=this.getDataLength();for(;this.postProcessFromRow<=this.postProcessToRow;){const t=this.vScrollDir>=0?this.postProcessFromRow++:this.postProcessToRow--,i=this.rowsCache[t];if(i&&!(t>=e))return this.postProcessedRows[t]||(this.postProcessedRows[t]={}),this.ensureCellNodesInRowsCache(t),Object.keys(i.cellNodesByColumnIdx).forEach((e=>{if(i.cellNodesByColumnIdx.hasOwnProperty(e)){const n=+e,s=this.columns[n],r=this.postProcessedRows[t][n];if(s.asyncPostRender&&"R"!==r){const e=i.cellNodesByColumnIdx[n];e&&s.asyncPostRender(e,t,this.getDataItem(t),s,"C"===r),this.postProcessedRows[t][n]="R"}}})),void(this.h_postrender=window.setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}}asyncPostProcessCleanupRows(){if(this.postProcessedCleanupQueue.length>0){const e=this.postProcessedCleanupQueue[0].groupId;for(;this.postProcessedCleanupQueue.length>0&&this.postProcessedCleanupQueue[0].groupId===e;){const e=this.postProcessedCleanupQueue.shift();if("R"===e?.actionType&&e.node.forEach((e=>{e.remove()})),"C"===e?.actionType){const t=this.columns[e.columnIdx];t.asyncPostRenderCleanup&&e.node&&t.asyncPostRenderCleanup(e.node,e.rowIdx,t)}}this.h_postrenderCleanup=window.setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay)}}updateCellCssStylesOnRenderedRows(e,t){let i,n,s;"object"===typeof this.rowsCache&&Object.keys(this.rowsCache).forEach((r=>{this.rowsCache&&(s=t?.[r],n=e?.[r],s&&Object.keys(s).forEach((e=>{n&&s[e]===n[e]||(i=this.getCellNode(+r,this.getColumnIndex(e)),i&&i.classList.remove(s[e]))})),n&&Object.keys(n).forEach((e=>{s&&s[e]===n[e]||(i=this.getCellNode(+r,this.getColumnIndex(e)),i&&i.classList.add(n[e]))})))}))}addCellCssStyles(e,t){if(this.cellCssClasses[e])throw new Error(`SlickGrid addCellCssStyles: cell CSS hash with key "${e}" already exists.`);this.cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,null),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:t,grid:this})}removeCellCssStyles(e){this.cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this.cellCssClasses[e]),delete this.cellCssClasses[e],this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:null,grid:this}))}setCellCssStyles(e,t){const i=this.cellCssClasses[e];this.cellCssClasses[e]=t,this.updateCellCssStylesOnRenderedRows(t,i),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:t,grid:this})}getCellCssStyles(e){return this.cellCssClasses[e]}flashCell(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250;const n=(e,t)=>{t>0&&(window.clearTimeout(this._flashCellTimer),this._flashCellTimer=window.setTimeout((()=>{t%2===0?e.classList.add(this._options.cellFlashingCssClass||""):e.classList.remove(this._options.cellFlashingCssClass||""),n(e,t-1)}),i))};if(this.rowsCache[e]){const i=this.getCellNode(e,t);i&&n(i,5)}}highlightRow(e,t){const i=this.rowsCache[e];t||=this._options.rowHighlightDuration,Array.isArray(i?.rowNode)&&this._options.rowHighlightCssClass&&(i.rowNode.forEach((e=>e.classList.add(...Z(this._options.rowHighlightCssClass)))),window.clearTimeout(this._highlightRowTimer),this._highlightRowTimer=window.setTimeout((()=>{i.rowNode?.forEach((e=>e.classList.remove(...Z(this._options.rowHighlightCssClass))))}),t))}handleMouseWheel(e,t,i,n){this.scrollHeight=this._viewportScrollContainerY.scrollHeight,e.shiftKey||(this.scrollTop=Math.max(0,this._viewportScrollContainerY.scrollTop-n*this._options.rowHeight)),this.scrollLeft=this._viewportScrollContainerX.scrollLeft+10*i;this._handleScroll("mousewheel")&&e.preventDefault()}handleDragInit(e,t){const i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;const n=this.triggerEvent(this.onDragInit,t,e);return!!n.isImmediatePropagationStopped()&&n.getReturnValue()}handleDragStart(e,t){const i=this.getCellFromEvent(e);if(!i||!this.cellExists(i.row,i.cell))return!1;const n=this.triggerEvent(this.onDragStart,t,e);return!!n.isImmediatePropagationStopped()&&n.getReturnValue()}handleDrag(e,t){return this.triggerEvent(this.onDrag,t,e).getReturnValue()}handleDragEnd(e,t){this.triggerEvent(this.onDragEnd,t,e)}handleKeyDown(e){let t=this.triggerEvent(this.onKeyDown,{row:this.activeRow,cell:this.activeCell},e).isImmediatePropagationStopped();if(!t&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this.currentEditor?.keyCaptureList&&this.currentEditor.keyCaptureList.indexOf(e.which)>-1)return;e.ctrlKey&&"Home"===e.key?this.navigateTopStart():e.ctrlKey&&"End"===e.key?this.navigateBottomEnd():e.ctrlKey&&"ArrowUp"===e.key?this.navigateTop():e.ctrlKey&&"ArrowDown"===e.key?this.navigateBottom():e.ctrlKey&&"ArrowLeft"===e.key||!e.ctrlKey&&"Home"===e.key?this.navigateRowStart():(e.ctrlKey&&"ArrowRight"===e.key||!e.ctrlKey&&"End"===e.key)&&this.navigateRowEnd()}if(!t)if(e.shiftKey||e.altKey||e.ctrlKey)"Tab"!==e.key||!e.shiftKey||e.ctrlKey||e.altKey||(t=this.navigatePrev());else if("Escape"===e.key){if(!this.getEditorLock()?.isActive())return;this.cancelEditAndSetFocus()}else"PageDown"===e.key?(this.navigatePageDown(),t=!0):"PageUp"===e.key?(this.navigatePageUp(),t=!0):"ArrowLeft"===e.key?t=this.navigateLeft():"ArrowRight"===e.key?t=this.navigateRight():"ArrowUp"===e.key?t=this.navigateUp():"ArrowDown"===e.key?t=this.navigateDown():"Tab"===e.key?t=this.navigateNext():"Enter"===e.key&&(this._options.editable&&(this.currentEditor?this.activeRow===this.getDataLength()?this.navigateDown():this.commitEditAndSetFocus():this.getEditorLock()?.commitCurrentEdit()&&this.makeActiveCellEditable(void 0,void 0,e)),t=!0);t&&(e.stopPropagation(),e.preventDefault())}handleClick(e){const t=e instanceof ei?e.getNativeEvent():e;if(!this.currentEditor&&(t.target!==document.activeElement||t.target.classList.contains("slick-cell"))){const e=this.getTextSelection();this.setFocus(),this.setTextSelection(e)}const i=this.getCellFromEvent(t);if(i&&(null===this.currentEditor||this.activeRow!==i.row||this.activeCell!==i.cell)&&!(e=this.triggerEvent(this.onClick,{row:i.row,cell:i.cell},e||t)).isImmediatePropagationStopped()&&!t.defaultPrevented&&this.canCellBeActive(i.row,i.cell)&&(!this.getEditorLock()?.isActive()||this.getEditorLock()?.commitCurrentEdit())){this.scrollRowIntoView(i.row,!1);const e="slick-edit-preclick"===t.target?.className,n=this.columns[i.cell],s=!!(this._options.editable&&n?.editorClass&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(i.row,i.cell),null,e,s,t)}}handleContextMenu(e){const t=e.target.closest(".slick-cell");t&&(this.activeCellNode===t&&null!==this.currentEditor||this.triggerEvent(this.onContextMenu,{},e))}handleDblClick(e){const t=this.getCellFromEvent(e);!t||null!==this.currentEditor&&this.activeRow===t.row&&this.activeCell===t.cell||(this.triggerEvent(this.onDblClick,{row:t.row,cell:t.cell},e),e.defaultPrevented||this._options.editable&&this.gotoCell(t.row,t.cell,!0,e))}handleHeaderMouseEnter(e){const t=ai.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseEnter,{column:t,grid:this},e)}handleHeaderMouseOver(e){const t=ai.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseOver,{column:t,grid:this},e)}handleHeaderMouseLeave(e){const t=ai.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseLeave,{column:t,grid:this},e)}handleHeaderMouseOut(e){const t=ai.storage.get(e.target.closest(".slick-header-column"),"column");t&&this.triggerEvent(this.onHeaderMouseOut,{column:t,grid:this},e)}handleHeaderRowMouseEnter(e){const t=ai.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseEnter,{column:t,grid:this},e)}handleHeaderRowMouseOver(e){const t=ai.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseOver,{column:t,grid:this},e)}handleHeaderRowMouseLeave(e){const t=ai.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseLeave,{column:t,grid:this},e)}handleHeaderRowMouseOut(e){const t=ai.storage.get(e.target.closest(".slick-headerrow-column"),"column");t&&this.triggerEvent(this.onHeaderRowMouseOut,{column:t,grid:this},e)}handleHeaderContextMenu(e){const t=e.target.closest(".slick-header-column"),i=t&&ai.storage.get(t,"column");this.triggerEvent(this.onHeaderContextMenu,{column:i},e)}handleHeaderClick(e){if(!this.columnResizeDragging){const t=e.target.closest(".slick-header-column"),i=t&&ai.storage.get(t,"column");i&&this.triggerEvent(this.onHeaderClick,{column:i},e)}}handlePreHeaderContextMenu(e){this.triggerEvent(this.onPreHeaderContextMenu,{node:e.target},e)}handlePreHeaderClick(e){this.columnResizeDragging||this.triggerEvent(this.onPreHeaderClick,{node:e.target},e)}handleFooterContextMenu(e){const t=e.target.closest(".slick-footerrow-column"),i=t&&ai.storage.get(t,"column");this.triggerEvent(this.onFooterContextMenu,{column:i},e)}handleFooterClick(e){const t=e.target.closest(".slick-footerrow-column"),i=t&&ai.storage.get(t,"column");this.triggerEvent(this.onFooterClick,{column:i},e)}handleCellMouseOver(e){this.triggerEvent(this.onMouseEnter,{},e)}handleCellMouseOut(e){this.triggerEvent(this.onMouseLeave,{},e)}cellExists(e,t){return!(e<0||e>=this.getDataLength()||t<0||t>=this.columns.length)}getCellFromPoint(e,t){let i=this.getRowFromPosition(t),n=0,s=0;for(let r=0;r<this.columns.length&&s<=e;r++)this.columns[r]&&(s+=this.columns[r].width,n++);return n-=1,i<-1&&(i=-1),{row:i,cell:n}}getCellFromNode(e){const t=/l\d+/.exec(e.className);if(!t)throw new Error(`SlickGrid getCellFromNode: cannot get cell - ${e.className}`);return parseInt(t[0].substr(1,t[0].length-1),10)}getRowFromNode(e){for(const t in this.rowsCache)if(this.rowsCache)for(const i in this.rowsCache[t].rowNode)if(this.rowsCache[t].rowNode?.[+i]===e)return t?parseInt(t,10):0;return null}getFrozenRowOffset(e){let t=0;return t=this.hasFrozenRows?this._options.frozenBottom?e>=this.actualFrozenRow?this.h<this.viewportTopH?this.actualFrozenRow*this._options.rowHeight:this.h:0:e>=this.actualFrozenRow?this.frozenRowsHeight:0:0,t}getCellFromEvent(e){const t=e instanceof ei?e.getNativeEvent():e;if(!t)return null;const i=t.touches?t.touches[0]:t,n=t.target.closest(".slick-cell");if(!n)return null;let s=this.getRowFromNode(n.parentNode);if(this.hasFrozenRows){let e=0;const t=ne(ai.parents(n,".grid-canvas")[0]);ai.parents(n,".grid-canvas-bottom").length&&(e=this._options.frozenBottom?ai.height(this._canvasTopL):this.frozenRowsHeight);const r=i.clientX-t.left,o=i.clientY-t.top+e+document.documentElement.scrollTop;s=this.getCellFromPoint(r,o).row}const r=this.getCellFromNode(n);return Ae(s)&&Ae(r)?{row:s,cell:r}:null}getCellNodeBox(e,t){if(!this.cellExists(e,t))return null;const i=this.getFrozenRowOffset(e),n=this.getRowTop(e)-i,s=n+this._options.rowHeight-1;let r=0;for(let o=0;o<t;o++)this.columns[o]&&!this.columns[o].hidden&&(r+=this.columns[o].width||0,this._options.frozenColumn===o&&(r=0));return{top:n,left:r,bottom:s,right:r+(this.columns[t]?.width||0)}}resetActiveCell(){this.setActiveCellInternal(null,!1)}unsetActiveCell(){Re(this.activeCellNode)&&(this.makeActiveCellNormal(),this.activeCellNode.classList.remove("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach((e=>e.classList.remove("active"))))}focus(){this.setFocus()}setFocus(){-1===this.tabbingDirection?this._focusSink.focus():this._focusSink2.focus()}scrollCellIntoView(e,t,i){if(this.scrollRowIntoView(e,i),t>this._options.frozenColumn){const i=this.getColspan(e,t);this.internalScrollColumnIntoView(this.columnPosLeft[t],this.columnPosRight[t+(i>1?i-1:0)])}}internalScrollColumnIntoView(e,t){const i=this.scrollLeft+ai.width(this._viewportScrollContainerX)-(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0);e<this.scrollLeft?(this._viewportScrollContainerX.scrollLeft=e,this.handleScroll(),this.render()):t>i&&(this._viewportScrollContainerX.scrollLeft=Math.min(e,t-this._viewportScrollContainerX.clientWidth),this.handleScroll(),this.render())}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this.columnPosLeft[e],this.columnPosRight[e])}setActiveCellInternal(e,t,i,n,s){if(this.unsetActiveCell(),this.activeCellNode=e,Re(this.activeCellNode)){const e=ne(this.activeCellNode);let n=Math.floor(ne(ai.parents(this.activeCellNode,".grid-canvas")[0]).top);const r=ai.parents(this.activeCellNode,".grid-canvas-bottom").length;this.hasFrozenRows&&r&&(n-=this._options.frozenBottom?ai.height(this._canvasTopL):this.frozenRowsHeight);const o=this.getCellFromPoint(e.left,Math.ceil(e.top)-n);this.activeRow=this.activePosY=o.row,this.activeCell=this.activePosX=this.getCellFromNode(this.activeCellNode),!Re(t)&&this._options.autoEditNewRow&&(t=this.activeRow===this.getDataLength()||this._options.autoEdit),this._options.showCellSelection&&(document.querySelectorAll(".slick-cell.active").forEach((e=>e.classList.remove("active"))),this.activeCellNode.classList.add("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach((e=>e.classList.add("active")))),this._options.editable&&t&&this.isCellPotentiallyEditable(this.activeRow,this.activeCell)&&(this._options.asyncEditorLoading?(window.clearTimeout(this.h_editorLoader),this.h_editorLoader=window.setTimeout((()=>{this.makeActiveCellEditable(void 0,i,s)}),this._options.asyncEditorLoadDelay)):this.makeActiveCellEditable(void 0,i,s))}else this.activeRow=this.activeCell=null;n||this.triggerEvent(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection?.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){const e=window.getSelection();e?.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,t){const i=this.getDataLength();return!(e<i&&!this.getDataItem(e))&&(!(this.columns[t].cannotTriggerInsert&&e>=i)&&!(!this.columns[t]||this.columns[t].hidden||!this.getEditor(e,t)))}makeActiveCellNormal(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.currentEditor){if(this.triggerEvent(this.onBeforeCellEditorDestroy,{editor:this.currentEditor}),this.currentEditor.destroy(),this.currentEditor=null,this.activeCellNode){const t=this.getDataItem(this.activeRow);if(this.activeCellNode.classList.remove("editable"),this.activeCellNode.classList.remove("invalid"),t){const e=this.columns[this.activeCell],i=this.getFormatter(this.activeRow,e)(this.activeRow,this.activeCell,this.getDataItemValueForColumn(t,e),e,t,this);this.applyFormatResultToCellNode(i,this.activeCellNode),this.invalidatePostProcessingResults(this.activeRow)}e&&this.setFocus()}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock()?.deactivate(this.editController)}}editActiveCell(e,t,i){this.makeActiveCellEditable(e,t,i)}makeActiveCellEditable(e,t,i){if(!this.activeCellNode)return;if(!this._options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when grid options.editable is false");if(window.clearTimeout(this.h_editorLoader),!this.isCellPotentiallyEditable(this.activeRow,this.activeCell))return;const n=this.columns[this.activeCell],s=this.getDataItem(this.activeRow);if(!1===this.triggerEvent(this.onBeforeEditCell,{row:this.activeRow,cell:this.activeCell,item:s,column:n,target:"grid"}).getReturnValue())return void this.setFocus();this.getEditorLock()?.activate(this.editController),this.activeCellNode.classList.add("editable");const r=e||this.getEditor(this.activeRow,this.activeCell);if("function"===typeof r){e||r.suppressClearOnEdit||ee(this.activeCellNode);let o=this.getItemMetadaWhenExists(this.activeRow);o=o?.columns;const a=o&&(o[n.id]||o[this.activeCell]),l={grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this.activeCellNode),container:this.activeCellNode,column:n,columnMetaData:a,item:s||{},event:i,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)};this.currentEditor=new r(l),s&&this.currentEditor&&(this.currentEditor.loadValue(s),t&&"function"===typeof this.currentEditor?.preClick&&this.currentEditor.preClick()),this.serializedEditorValue=this.currentEditor?.serializeValue(),this.currentEditor?.position&&this.handleActiveCellPositionChange()}}commitEditAndSetFocus(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.getEditorLock()?.commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&!this._options.autoCommitEdit&&e&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock()?.cancelCurrentEdit()&&this.setFocus()}absBox(e){const t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:e.offsetWidth,height:e.offsetWidth,visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;let i=e.offsetParent;for(;(e=e.parentNode)!==document.body&&e&&e.parentNode;){const n=getComputedStyle(e);t.visible&&e.scrollHeight!==e.offsetHeight&&"visible"!==n.overflowY&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!==e.offsetWidth&&"visible"!==n.overflowX&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===i&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,i=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width}return t}getActiveCellPosition(){return this.absBox(this.activeCellNode)}getGridPosition(){return this.absBox(this._container)}handleActiveCellPositionChange(){if(this.activeCellNode&&(this.triggerEvent(this.onActiveCellPositionChanged,{}),this.currentEditor)){const e=this.getActiveCellPosition();this.currentEditor.show&&this.currentEditor.hide&&(e.visible?this.currentEditor.show():this.currentEditor.hide()),this.currentEditor.position&&this.currentEditor.position(e)}}getCellEditor(){return this.currentEditor}getActiveCell(){return this.activeCellNode?{row:this.activeRow,cell:this.activeCell}:null}getActiveCellNode(){return this.activeCellNode}getTextSelection(){let e=null;if(window.getSelection){const t=window.getSelection();(t?.rangeCount||0)>0&&(e=t.getRangeAt(0))}return e}setTextSelection(e){if(window.getSelection&&e){const t=window.getSelection();t&&(t.removeAllRanges(),t.addRange(e))}}scrollRowIntoView(e,t){if(!this.hasFrozenRows||!this._options.frozenBottom&&e>this.actualFrozenRow-1||this._options.frozenBottom&&e<this.actualFrozenRow-1){const i=ai.height(this._viewportScrollContainerY),n=this.hasFrozenRows&&!this._options.frozenBottom?e-this._options.frozenRow:e,s=n*this._options.rowHeight,r=(n+1)*this._options.rowHeight-i+(this.viewportHasHScroll&&this.scrollbarDimensions?.height||0);(n+1)*this._options.rowHeight>this.scrollTop+i+this.offset?(this.scrollTo(t?s:r),this.render()):n*this._options.rowHeight<this.scrollTop+this.offset&&(this.scrollTo(t?r:s),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){const t=e*this.numVisibleRows,i=this.scrollTop+this._options.rowHeight-1;if(this.scrollTo((this.getRowFromPosition(i)+t)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&Re(this.activeRow)){let i=this.activeRow+t;const n=this.getDataLengthIncludingAddNew();i>=n&&(i=n-1),i<0&&(i=0);const s=1===e?this.gotoDown(i-1||0,this.activeCell,this.activePosY,this.activePosX):this.gotoUp(i+1,this.activeCell,this.activePosY,this.activePosX);this.navigateToPos(s)}}navigatePageDown(){this.unsetActiveCell(),this.scrollPage(1)}navigatePageUp(){this.unsetActiveCell(),this.scrollPage(-1)}navigateTop(){this.unsetActiveCell(),this.navigateToRow(0)}navigateBottom(){const e=this.getDataLength()-1;let t=this.getParentRowSpanByCell(e,this.activeCell)?.start??e;do{this._options.enableCellRowSpan&&this.setActiveRow(t);if(this.navigateToRow(t)&&this.activeCell===this.activePosX||!Re(this.activeCell))break}while(--t>0)}navigateToRow(e){const t=this.getDataLength();if(!t)return!1;e<0?e=0:e>=t&&(e=t-1),this.scrollCellIntoView(e,0,!0);let i=!Re(this.activeCell)||!Re(this.activeRow);if(this._options.enableCellNavigation&&Re(this.activeRow)){let t=0,n=null;const s=this.activePosX;for(;t<=this.activePosX;)this.canCellBeActive(e,t)&&(n=t,Re(this.activeCell)&&t!==this.activeCell||(i=!0)),t+=this.getColspan(e,t);null!==n?(this.setActiveCellInternal(this.getCellNode(e,n)),this.activePosX=s):this.resetActiveCell()}return i}getColspan(e,t){const i=this.getItemMetadaWhenExists(e);if(!i||!i.columns)return 1;t>=this.columns.length&&(t=this.columns.length-1);const n=i.columns[this.columns[t].id]||i.columns[t];let s=n?.colspan;return s="*"===s?this.columns.length-t:s||1,s}getRowspan(e,t){let i=1;const n=this.getItemMetadaWhenExists(e);return n?.columns&&Object.keys(n.columns).forEach((e=>{const s=Number(e);if(s===t){const e=n.columns[s];i=Number(e?.rowspan||1)}})),i}findFocusableRow(e,t,i){let n=e;const s=this._colsWithRowSpanCache[t]||new Set;let r=!1;return Array.from(s).forEach((s=>{const[o,a]=s.split(":").map(Number);!r&&e>=o&&e<=a&&(n="up"===i?o:a,this.canCellBeActive(n,t)&&(r=!0))})),n}findFirstFocusableCell(e){let t=0,i=e,n=-1;for(;t<this.columns.length;){const s=this.getParentRowSpanByCell(e,t);if(i=null!==s&&s.start!==e?s.start:e,this.canCellBeActive(i,t)){n=t;break}t+=this.getColspan(i,t)}return{cell:n,row:i}}findLastFocusableCell(e){let t=0,i=e,n=-1;for(;t<this.columns.length;){const s=this.getParentRowSpanByCell(e,t);i=null!==s&&s.start!==e?s.start:e,this.canCellBeActive(i,t)&&(n=t),t+=this.getColspan(i,t)}return{cell:n,row:i}}findSpanStartingCell(e,t){const i=this.getParentRowSpanByCell(e,t),n=null!==i&&i.start!==e?i.start:e;let s=0,r=0;for(;s<this.columns.length;){if(s+=this.getColspan(n,s),s>t)return s=r,{cell:s,row:n};r=s}return{cell:s,row:n}}gotoRight(e,t,i,n){if(t<this.columns.length){let e=t+1,n=i;do{const s=this.findSpanStartingCell(i,e);if(n=s.row,e=s.cell,this.canCellBeActive(n,e)&&e>t)break;e+=this.getColspan(n,s.cell)}while(e<this.columns.length);if(e<this.columns.length)return{row:n,cell:e,posX:e,posY:i}}return null}gotoLeft(e,t,i,n){const s=this.findFirstFocusableCell(e);if(t<=0||s.cell>=t)return null;let r,o={row:e,cell:s.cell,posX:s.cell,posY:i};for(;;){if(r=this.gotoRight(o.row,o.cell,o.posY,o.posX),!r)return null;if(r.cell>=t){const e=this.findFocusableRow(i,o.cell,"up");return e!==o.row&&(o.row=e),o}o=r}}gotoDown(e,t,i,n){let s;const r=this.getDataLengthIncludingAddNew();do{for(e+=this.getRowspan(e,n),s=t=0;t<=n;)s=t,t+=this.getColspan(e,t)}while(e<=r&&!this.canCellBeActive(e,s));return e<=r?{row:e,cell:s,posX:n,posY:e}:null}gotoUp(e,t,i,n){let s;if(e>0){do{for(e=this.findFocusableRow(e-1,n,"up"),s=t=0;t<=n;)s=t,t+=this.getColspan(e,t)}while(e>=0&&!this.canCellBeActive(e,s));if(t<=this.columns.length)return{row:e,cell:s,posX:n,posY:e}}return null}gotoNext(e,t,i,n){if(!Ae(e)&&!Ae(t)&&(e=t=i=n=0,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t,posY:i};let s=this.gotoRight(e,t,i,n);if(!s){let t;for(;!s&&++i<this.getDataLength()+(this._options.enableAddRow?1:0);)t=this.findFirstFocusableCell(i),s={row:e=this.getParentRowSpanByCell(i,t.cell)?.start??i,cell:t.cell,posX:t.cell,posY:i}}return s}gotoPrev(e,t,i,n){if(!Ae(e)&&!Ae(t)&&(e=i=this.getDataLengthIncludingAddNew()-1,t=n=this.columns.length-1,this.canCellBeActive(e,t)))return{row:e,cell:t,posX:t,posY:i};let s=this.gotoLeft(e,t,i,n);if(!s){let t;for(;!s&&--i>=0;)t=this.findLastFocusableCell(i),t.cell>-1&&(s={row:e=this.getParentRowSpanByCell(i,t.cell)?.start??i,cell:t.cell,posX:t.cell,posY:i})}return s}gotoRowStart(e,t,i,n){const s=this.findFirstFocusableCell(e);return{row:s.row,cell:s.cell,posX:s.cell,posY:e}}gotoRowEnd(e,t,i,n){const s=this.findLastFocusableCell(e);return-1===s.cell?null:{row:s.row,cell:s.cell,posX:s.cell,posY:e}}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigateTopStart(){return this.unsetActiveCell(),this.navigateToRow(0),this.navigate("home")}navigateBottomEnd(){return this.navigateBottom(),this.navigate("end")}navigate(e){if(!this._options.enableCellNavigation)return!1;if(!this.activeCellNode&&"prev"!==e&&"next"!==e)return!1;if(!this.getEditorLock()?.commitCurrentEdit())return!0;this.setFocus(),this.unsetActiveCell();this.tabbingDirection={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1}[e];const t={up:this.gotoUp,down:this.gotoDown,left:this.gotoLeft,right:this.gotoRight,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd}[e].call(this,this.activeRow,this.activeCell,this.activePosY,this.activePosX);return this.navigateToPos(t)}navigateToPos(e){if(e){if(this.hasFrozenRows&&this._options.frozenBottom&&e.row===this.getDataLength())return;const t=e.row===this.getDataLength();return(!this._options.frozenBottom&&e.row>=this.actualFrozenRow||this._options.frozenBottom&&e.row<this.actualFrozenRow)&&this.scrollCellIntoView(e.row,e.cell,!t&&this._options.emulatePagingWhenScrolling),this.setActiveCellInternal(this.getCellNode(e.row,e.cell)),this.activePosX=e.posX,this.activePosY=e.posY,!0}return this.setActiveCellInternal(this.getCellNode(this.activeRow,this.activeCell)),!1}getCellNode(e,t){if(this.rowsCache[e]){this.ensureCellNodesInRowsCache(e);try{return this.rowsCache[e].cellNodesByColumnIdx.length>t?this.rowsCache[e].cellNodesByColumnIdx[t]:null}catch(i){return this.rowsCache[e].cellNodesByColumnIdx[t]}}return null}setActiveCell(e,t,i,n,s){!this.initialized||!this._options.enableCellNavigation||e>this.getDataLength()||e<0||t>=this.columns.length||t<0||(this.scrollCellIntoView(e,t,!1),this.setActiveCellInternal(this.getCellNode(e,t),i,n,s))}setActiveRow(e,t,i){t??=0,!this.initialized||e>this.getDataLength()||e<0||t>=this.columns.length||t<0||(this.activeRow=e,i||this.scrollCellIntoView(e,t,!1))}canCellBeActive(e,t){if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||t>=this.columns.length||t<0)return!1;if(!this.columns[t]||this.columns[t].hidden)return!1;if((this.getParentRowSpanByCell(e,t)?.start??e)!==e)return!1;const i=this.getItemMetadaWhenExists(e);if(void 0!==i?.focusable)return!!i.focusable;const n=i?.columns;return void 0!==n?.[this.columns[t].id]?.focusable?!!n[this.columns[t].id].focusable:void 0!==n?.[t]?.focusable?!!n[t].focusable:!!this.columns[t].focusable}canCellBeSelected(e,t){if(e>=this.getDataLength()||e<0||t>=this.columns.length||t<0)return!1;if(!this.columns[t]||this.columns[t].hidden)return!1;const i=this.getItemMetadaWhenExists(e);if(void 0!==i?.selectable)return!!i.selectable;const n=i?.columns&&(i.columns[this.columns[t].id]||i.columns[t]);return void 0!==n?.selectable?!!n.selectable:!!this.columns[t].selectable}gotoCell(e,t,i,n){if(this.initialized&&this.canCellBeActive(e,t)&&this.getEditorLock()?.commitCurrentEdit()){this.scrollCellIntoView(e,t,!1);const s=this.getCellNode(e,t),r=this.columns[t],o=!!(this._options.editable&&r?.editorClass&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(s,i||e===this.getDataLength()||this._options.autoEdit,null,o,n),this.currentEditor||this.setFocus()}}commitCurrentEdit(){const e=this,t=e.getDataItem(e.activeRow),i=e.columns[e.activeCell];if(e.currentEditor){if(e.currentEditor.isValueChanged()){const n=e.currentEditor.validate();if(n.valid){const n=e.activeRow,s=e.activeCell,r=e.currentEditor,o=e.currentEditor.serializeValue(),a=e.serializedEditorValue;if(e.activeRow<e.getDataLength()){const l={row:n,cell:s,editor:r,serializedValue:o,prevSerializedValue:a,execute:()=>{r.applyValue(t,o),e.updateRow(n),e.triggerEvent(e.onCellChange,{command:"execute",row:n,cell:s,item:t,column:i})},undo:()=>{r.applyValue(t,a),e.updateRow(n),e.triggerEvent(e.onCellChange,{command:"undo",row:n,cell:s,item:t,column:i})}};e._options.editCommandHandler?(e.makeActiveCellNormal(!0),e._options.editCommandHandler(t,i,l)):(l.execute(),e.makeActiveCellNormal(!0))}else{const t={};e.currentEditor.applyValue(t,e.currentEditor.serializeValue()),e.makeActiveCellNormal(!0),e.triggerEvent(e.onAddNewRow,{item:t,column:i})}return!e.getEditorLock()?.isActive()}return e.activeCellNode&&(e.activeCellNode.classList.remove("invalid"),ai.width(e.activeCellNode),e.activeCellNode.classList.add("invalid")),e.triggerEvent(e.onValidationError,{editor:e.currentEditor,cellNode:e.activeCellNode,validationResults:n,row:e.activeRow,cell:e.activeCell,column:i}),e.currentEditor.focus(),!1}e.makeActiveCellNormal(!0)}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){const t=[],i=this.columns.length-1;for(let n=0;n<e.length;n++)t.push(new ni(e[n],0,e[n],i));return t}getSelectedRows(){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");return this.selectedRows.slice(0)}setSelectedRows(e,t){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");const i=this.getEditorLock();"function"!==typeof i?.isActive||i.isActive()||this.selectionModel.setSelectedRanges(this.rowsToRanges(e),t||"SlickGrid.setSelectedRows")}sanitizeHtmlString(e){return"function"===typeof this._options?.sanitizer&&e&&"string"===typeof e?this._options.sanitizer(e):e}}var Ss=Object.defineProperty,ws=Object.getOwnPropertySymbols,Cs=Object.prototype.hasOwnProperty,Es=Object.prototype.propertyIsEnumerable,Os=(e,t,i)=>t in e?Ss(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,xs=(e,t)=>{for(var i in t||(t={}))Cs.call(t,i)&&Os(e,i,t[i]);if(ws)for(var i of ws(t))Es.call(t,i)&&Os(e,i,t[i]);return e},Ts=(e,t,i)=>(Os(e,"symbol"!=typeof t?t+"":t,i),i);const ks={calendar:"vanilla-calendar",calendarDefault:"vanilla-calendar_default",calendarMultiple:"vanilla-calendar_multiple",calendarMonth:"vanilla-calendar_month",calendarYear:"vanilla-calendar_year",calendarHidden:"vanilla-calendar_hidden",calendarToInput:"vanilla-calendar_to-input",calendarToInputTop:"vanilla-calendar_to-input_top",calendarToInputBottom:"vanilla-calendar_to-input_bottom",controls:"vanilla-calendar-controls",grid:"vanilla-calendar-grid",gridDisabled:"vanilla-calendar-grid_disabled",column:"vanilla-calendar-column",columnMonth:"vanilla-calendar-column_month",columnYear:"vanilla-calendar-column_year",header:"vanilla-calendar-header",headerContent:"vanilla-calendar-header__content",month:"vanilla-calendar-month",monthDisabled:"vanilla-calendar-month_disabled",year:"vanilla-calendar-year",yearDisabled:"vanilla-calendar-year_disabled",arrow:"vanilla-calendar-arrow",arrowPrev:"vanilla-calendar-arrow_prev",arrowNext:"vanilla-calendar-arrow_next",wrapper:"vanilla-calendar-wrapper",content:"vanilla-calendar-content",week:"vanilla-calendar-week",weekDay:"vanilla-calendar-week__day",weekDayWeekend:"vanilla-calendar-week__day_weekend",days:"vanilla-calendar-days",daysSelecting:"vanilla-calendar-days_selecting",months:"vanilla-calendar-months",monthsSelecting:"vanilla-calendar-months_selecting",monthsMonth:"vanilla-calendar-months__month",monthsMonthSelected:"vanilla-calendar-months__month_selected",monthsMonthDisabled:"vanilla-calendar-months__month_disabled",years:"vanilla-calendar-years",yearsSelecting:"vanilla-calendar-years_selecting",yearsYear:"vanilla-calendar-years__year",yearsYearSelected:"vanilla-calendar-years__year_selected",yearsYearDisabled:"vanilla-calendar-years__year_disabled",time:"vanilla-calendar-time",timeContent:"vanilla-calendar-time__content",timeHours:"vanilla-calendar-time__hours",timeMinutes:"vanilla-calendar-time__minutes",timeKeeping:"vanilla-calendar-time__keeping",timeRanges:"vanilla-calendar-time__ranges",timeRange:"vanilla-calendar-time__range",day:"vanilla-calendar-day",dayHoverFirst:"vanilla-calendar-day_hover-first",dayHoverLast:"vanilla-calendar-day_hover-last",dayHoverIntermediate:"vanilla-calendar-day_hover-intermediate",daySelectedFirst:"vanilla-calendar-day_selected-first",daySelectedLast:"vanilla-calendar-day_selected-last",daySelectedIntermediate:"vanilla-calendar-day_selected-intermediate",dayPopup:"vanilla-calendar-day__popup",dayBtn:"vanilla-calendar-day__btn",dayBtnPrev:"vanilla-calendar-day__btn_prev",dayBtnNext:"vanilla-calendar-day__btn_next",dayBtnToday:"vanilla-calendar-day__btn_today",dayBtnSelected:"vanilla-calendar-day__btn_selected",dayBtnHover:"vanilla-calendar-day__btn_hover",dayBtnDisabled:"vanilla-calendar-day__btn_disabled",dayBtnWeekend:"vanilla-calendar-day__btn_weekend",dayBtnHoliday:"vanilla-calendar-day__btn_holiday",weekNumbers:"vanilla-calendar-week-numbers",weekNumbersTitle:"vanilla-calendar-week-numbers__title",weekNumbersContent:"vanilla-calendar-week-numbers__content",weekNumber:"vanilla-calendar-week-number",isFocus:"vanilla-calendar-is-focus"},Is=e=>`<div class="${e.controls}"><#ArrowPrev /><#ArrowNext /></div><div class="${e.grid}"><#Multiple><div class="${e.column}"><div class="${e.header}"><div class="${e.headerContent}"><#Month /><#Year /></div></div><div class="${e.wrapper}"><#WeekNumbers /><div class="${e.content}"><#Week /><#Days /></div></div></div><#/Multiple></div><#ControlTime />`,Rs=e=>`<div class="${e.header}"><div class="${e.headerContent}"><#Month /><#Year /></div></div><div class="${e.wrapper}"><div class="${e.content}"><#Months /></div></div>`,As=e=>`<div class="${e.header}"><#ArrowPrev /><div class="${e.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${e.wrapper}"><div class="${e.content}"><#Years /></div></div>`;class Ds{constructor(){var e;Ts(this,"isInit",!1),Ts(this,"isInputInit",!1),Ts(this,"input",!1),Ts(this,"type","default"),Ts(this,"months",2),Ts(this,"jumpMonths",1),Ts(this,"jumpToSelectedDate",!1),Ts(this,"toggleSelected",!0),Ts(this,"date",{min:"1970-01-01",max:"2470-12-31",today:new Date}),Ts(this,"settings",{lang:"en",iso8601:!0,range:{min:void 0,max:void 0,disablePast:!1,disableGaps:!1,edgesOnly:!1,disableAllDays:!1,disableWeekday:void 0,disabled:void 0,enabled:void 0},selection:{day:"single",month:!0,year:!0,time:!1,controlTime:"all",stepHours:1,stepMinutes:1,cancelableDay:!0},selected:{dates:void 0,month:void 0,year:void 0,holidays:void 0,time:void 0},visibility:{theme:"system",themeDetect:"html[data-theme]",monthShort:!0,weekNumbers:!1,weekend:!0,today:!0,disabled:!1,daysOutside:!0,positionToInput:"left"}}),Ts(this,"locale",{months:[],weekday:[]}),Ts(this,"sanitizer",(e=>e)),Ts(this,"actions",{clickDay:null,clickWeekNumber:null,clickMonth:null,clickYear:null,clickArrow:null,changeTime:null,changeToInput:null,getDays:null,getMonths:null,getYears:null,initCalendar:null,updateCalendar:null,destroyCalendar:null,showCalendar:null,hideCalendar:null}),Ts(this,"popups",{}),Ts(this,"CSSClasses",xs({},ks)),Ts(this,"DOMTemplates",{default:(e=this.CSSClasses,`<div class="${e.header}"><#ArrowPrev /><div class="${e.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${e.wrapper}"><#WeekNumbers /><div class="${e.content}"><#Week /><#Days /></div></div><#ControlTime />`),multiple:Is(this.CSSClasses),month:Rs(this.CSSClasses),year:As(this.CSSClasses)}),Ts(this,"HTMLElement"),Ts(this,"HTMLOriginalElement"),Ts(this,"HTMLInputElement"),Ts(this,"rangeMin"),Ts(this,"rangeMax"),Ts(this,"rangeDisabled"),Ts(this,"rangeEnabled"),Ts(this,"selectedDates"),Ts(this,"selectedHolidays"),Ts(this,"selectedMonth"),Ts(this,"selectedYear"),Ts(this,"selectedHours"),Ts(this,"selectedMinutes"),Ts(this,"selectedKeeping"),Ts(this,"selectedTime"),Ts(this,"currentType"),Ts(this,"correctMonths"),Ts(this,"viewYear"),Ts(this,"dateMin"),Ts(this,"dateMax")}}const Ps=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,Fs=e=>new Date(`${e}T00:00:00`),Ms=e=>e.reduce(((e,t)=>{if(t instanceof Date||"number"==typeof t){const i=t instanceof Date?t:new Date(t);e.push(i.toISOString().substring(0,10))}else t.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(t):t.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,((t,i,n)=>{const s=Fs(i),r=Fs(n),o=new Date(s.getTime());for(;o<=r;o.setDate(o.getDate()+1))e.push(Ps(o));return t}));return e}),[]),Ls=()=>{const e=new Date;return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().substring(0,10)},Ns=e=>e?{0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(e)]||String(e):"",Bs=e=>`${e} is not found, check the first argument passed to new VanillaCalendar.`,Hs='The calendar has not been initialized, please initialize it using the "init()" method first.',zs='You specified "define" for "settings.lang" but did not provide the required values for "locale.weekday" or "locale.months".',$s='Incorrect name of theme in "settings.visibility.theme".',Us="The value of the time property can be: false, true, 12 or 24.",Vs=e=>{e.currentType=e.type,(e=>{var t;if(e.jumpToSelectedDate&&(null==(t=e.settings.selected.dates)?void 0:t.length)&&void 0===e.settings.selected.month&&void 0===e.settings.selected.year){const t=Fs(Ms(e.settings.selected.dates)[0]);e.settings.selected.month=t.getMonth(),e.settings.selected.year=t.getFullYear()}const i=void 0!==e.settings.selected.month&&Number(e.settings.selected.month)>=0&&Number(e.settings.selected.month)<12,n=void 0!==e.settings.selected.year&&Number(e.settings.selected.year)>=0&&Number(e.settings.selected.year)<=9999;e.selectedMonth=i?Number(e.settings.selected.month):e.date.today.getMonth(),e.selectedYear=n?Number(e.settings.selected.year):e.date.today.getFullYear(),e.viewYear=e.selectedYear})(e),(e=>{var t,i,n;"today"===e.date.min&&(e.date.min=Ls()),"today"===e.date.max&&(e.date.max=Ls()),"today"===e.settings.range.min&&(e.settings.range.min=Ls()),"today"===e.settings.range.max&&(e.settings.range.max=Ls()),e.settings.range.min=e.settings.range.min?Fs(e.date.min)>=Fs(e.settings.range.min)?e.date.min:e.settings.range.min:e.date.min,e.settings.range.max=e.settings.range.max?Fs(e.date.max)<=Fs(e.settings.range.max)?e.date.max:e.settings.range.max:e.date.max;const s=e.settings.range.disablePast&&!e.settings.range.disableAllDays&&Fs(e.settings.range.min)<e.date.today;e.rangeMin=s||e.settings.range.disableAllDays?Ps(e.date.today):e.settings.range.min,e.rangeMax=e.settings.range.disableAllDays?Ps(e.date.today):e.settings.range.max,e.rangeDisabled=e.settings.range.disabled&&!e.settings.range.disableAllDays?Ms(e.settings.range.disabled):e.settings.range.disableAllDays?[e.rangeMin]:[],e.rangeDisabled.length>1&&e.rangeDisabled.sort(((e,t)=>+new Date(e)-+new Date(t))),e.rangeEnabled=e.settings.range.enabled?Ms(e.settings.range.enabled):[],(null==(t=e.rangeEnabled)?void 0:t[0])&&(null==(i=e.rangeDisabled)?void 0:i[0])&&(e.rangeDisabled=e.rangeDisabled.filter((t=>!e.rangeEnabled.includes(t)))),e.rangeEnabled.length>1&&e.rangeEnabled.sort(((e,t)=>+new Date(e)-+new Date(t))),(null==(n=e.rangeEnabled)?void 0:n[0])&&e.settings.range.disableAllDays&&(e.rangeMin=e.rangeEnabled[0],e.rangeMax=e.rangeEnabled[e.rangeEnabled.length-1])})(e),(e=>{var t,i;e.selectedDates=(null==(t=e.settings.selected.dates)?void 0:t[0])?Ms(e.settings.selected.dates):[],e.selectedHolidays=(null==(i=e.settings.selected.holidays)?void 0:i[0])?Ms(e.settings.selected.holidays):[]})(e),(e=>{e.dateMin=e.settings.visibility.disabled?Fs(e.date.min):Fs(e.rangeMin),e.dateMax=e.settings.visibility.disabled?Fs(e.date.max):Fs(e.rangeMax)})(e),(e=>{const t=!0===e.settings.selection.time||12===e.settings.selection.time;if(t||24===e.settings.selection.time){let i=!1;if("string"==typeof e.settings.selected.time){const n=t?/^([0-9]|0[1-9]|1[0-2]):([0-5][0-9])|(AM|PM)/g:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])/g;e.settings.selected.time.replace(n,((n,s,r,o)=>(s&&r&&(i=!0,e.selectedHours=s,e.selectedMinutes=r),o&&t?e.selectedKeeping=o:t&&(e.selectedKeeping="AM"),"")))}!i&&t?(e.selectedHours=Ns(String(e.date.today.getHours())),e.selectedMinutes=String(e.date.today.getMinutes()),e.selectedKeeping=Number(e.date.today.getHours())>=12?"PM":"AM"):i||(e.selectedHours=String(e.date.today.getHours()),e.selectedMinutes=String(e.date.today.getMinutes())),e.selectedHours=Number(e.selectedHours)<10?`0${Number(e.selectedHours)}`:`${e.selectedHours}`,e.selectedMinutes=Number(e.selectedMinutes)<10?`0${Number(e.selectedMinutes)}`:`${e.selectedMinutes}`,e.selectedTime=`${e.selectedHours}:${e.selectedMinutes}${e.selectedKeeping?` ${e.selectedKeeping}`:""}`}else if(e.settings.selection.time)throw new Error(Us)})(e),(e=>{e.correctMonths="multiple"===e.type?1===e.months?2:e.months>12?12:e.months:1})(e)},Ws=e=>{let{arrowPrev:t,arrowNext:i,isPrevHidden:n,isNextHidden:s}=e;t.style.visibility=n?"hidden":"",i.style.visibility=s?"hidden":""},js=e=>{var t,i;if("month"===e.currentType)return;const n=null==(t=e.HTMLElement)?void 0:t.querySelector(`.${e.CSSClasses.arrowPrev}`),s=null==(i=e.HTMLElement)?void 0:i.querySelector(`.${e.CSSClasses.arrowNext}`);n&&s&&{default:()=>{const t=Fs(Ps(new Date(e.selectedYear,e.selectedMonth,1))),i=new Date(t.getTime()),r=new Date(t.getTime());i.setMonth(i.getMonth()-e.jumpMonths),r.setMonth(r.getMonth()+e.jumpMonths),e.settings.selection.year||(e.dateMin.setFullYear(t.getFullYear()),e.dateMax.setFullYear(t.getFullYear()));const o=!e.settings.selection.month||i.getFullYear()<e.dateMin.getFullYear()||i.getFullYear()===e.dateMin.getFullYear()&&i.getMonth()<e.dateMin.getMonth(),a=!e.settings.selection.month||r.getFullYear()>e.dateMax.getFullYear()||r.getFullYear()===e.dateMax.getFullYear()&&r.getMonth()>e.dateMax.getMonth();Ws({arrowPrev:n,arrowNext:s,isPrevHidden:o,isNextHidden:a})},year:()=>{Ws({arrowPrev:n,arrowNext:s,isPrevHidden:e.dateMin.getFullYear()&&e.viewYear-7<=e.dateMin.getFullYear(),isNextHidden:e.dateMax.getFullYear()&&e.viewYear+7>=e.dateMax.getFullYear()})}}["multiple"===e.currentType?"default":e.currentType]()},Gs=(e,t)=>{if(!e)return null;const i=Fs(e),n=t?i.getDay()||7:i.getDay();i.setDate(i.getDate()+4-n);const s=new Date(i.getFullYear(),0,1),r=Math.ceil(((+i-+s)/864e5+1)/7);return{year:i.getFullYear(),week:r}};function Ys(e){if(!e||!e.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const t=e.getBoundingClientRect(),i=document.documentElement;return{bottom:t.bottom,right:t.right,top:t.top+window.scrollY-i.clientTop,left:t.left+window.scrollX-i.clientLeft}}function Ks(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function qs(e){const{top:t,left:i}={left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0},{top:n,left:s}=Ys(e),{vh:r,vw:o}=Ks(),a=n-t,l=s-i;return{top:a,bottom:r-(a+e.clientHeight),left:l,right:o-(l+e.clientWidth)}}function Xs(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;const n={top:!0,bottom:!0,left:!0,right:!0},s=[];if(!t||!e)return{canShow:n,parentPositions:s};const{bottom:r,top:o}=qs(e),{top:a,left:l}=Ys(e),{height:d,width:c}=t.getBoundingClientRect(),{vh:h,vw:u}=Ks(),p=u/2,m=h/2;return[{condition:a<m,position:"top"},{condition:a>m,position:"bottom"},{condition:l<p,position:"left"},{condition:l>p,position:"right"}].forEach((e=>{let{condition:t,position:i}=e;t&&s.push(i)})),Object.assign(n,{top:d<=o-i,bottom:d<=r-i,left:c<=l,right:c<=u-l}),{canShow:n,parentPositions:s}}const Qs=(e,t,i,n)=>{if(e){const s="auto"===i?function(e,t){const i="left";if(!t||!e)return i;const{canShow:n,parentPositions:s}=Xs(e,t),r=n.left&&n.right;return(r&&n.bottom?"center":r&&n.top?["top","center"]:Array.isArray(s)?["bottom"===s[0]?"top":"bottom",...s.slice(1)]:s)||i}(e,t):i,r={top:-t.offsetHeight,bottom:e.offsetHeight,left:0,center:e.offsetWidth/2-t.offsetWidth/2,right:e.offsetWidth-t.offsetWidth},o=Array.isArray(s)?s[0]:"bottom",a=Array.isArray(s)?s[1]:s;"bottom"===o?(t.classList.remove(n.calendarToInputTop),t.classList.add(n.calendarToInputBottom)):(t.classList.remove(n.calendarToInputBottom),t.classList.add(n.calendarToInputTop));const{top:l,left:d}=Ys(e),c=l+r[o];let h=d+r[a];const{vw:u}=Ks();if(h+t.clientWidth>u){const e=window.innerWidth-document.body.clientWidth;h=u-t.clientWidth-e}else h<0&&(h=0);Object.assign(t.style,{left:`${h}px`,top:`${c}px`})}},Zs=(e,t)=>{var i;e.popups&&(null==(i=Object.entries(e.popups))||i.forEach((i=>{let[n,s]=i;return((e,t,i,n)=>{const s=e.CSSClasses.dayPopup,r=n.querySelector(`[data-calendar-day="${t}"]`);if(r&&((null==i?void 0:i.modifier)&&r.classList.add(...i.modifier.trim().split(" ")),null==i?void 0:i.html)){const t=r.parentElement,n=document.createElement("div");n.className=s,n.innerHTML=e.sanitizer(i.html),t.appendChild(n),setTimeout((()=>{if(n){const{canShow:e}=Xs(t,n),i=5;let s=t.offsetHeight,r=0;e.bottom||(s=-n.offsetHeight-i),e.left&&!e.right&&(r=t.offsetWidth-n.offsetWidth/2),!e.left&&e.right&&(r=n.offsetWidth/2),Object.assign(n.style,{left:`${r}px`,top:`${s}px`})}}))}})(e,n,s,t)})))},Js=(e,t,i,n,s)=>{const r=t[i].querySelector(`.${e.CSSClasses.dayBtn}`),o=Gs(null==r?void 0:r.dataset.calendarDay,e.settings.iso8601);if(!o)return;const a=n.cloneNode(!0);a.innerText=String(o.week),a.dataset.calendarYearWeek=String(o.year),s.appendChild(a)},er=(e,t,i,n,s,r,o,a)=>{const l=document.createElement("div");l.className=e.CSSClasses.day;const d=document.createElement("button");d.className=`${e.CSSClasses.dayBtn}${a?` ${a}`:""}`,d.type="button",d.innerText=String(n),d.dataset.calendarDay=r,e.settings.visibility.weekNumbers&&(()=>{const t=Gs(r,e.settings.iso8601);t&&(d.dataset.calendarWeekNumber=String(t.week))})(),o?e.settings.visibility.daysOutside&&l.appendChild(d):l.appendChild(d),((e,t,i)=>{var n,s,r,o,a;const l=null==(n=e.settings.range.disableWeekday)?void 0:n.includes(i),d=e.settings.range.disableAllDays&&!!(null==(s=e.rangeEnabled)?void 0:s[0]);!l&&!d||(null==(r=e.rangeEnabled)?void 0:r.includes(t))||(null==(o=e.rangeDisabled)?void 0:o.includes(t))||(e.rangeDisabled.push(t),null==(a=e.rangeDisabled)||a.sort(((e,t)=>+new Date(e)-+new Date(t))))})(e,r,s),((e,t,i,n,s,r,o)=>{var a,l,d;if((Fs(e.rangeMin)>Fs(r)||Fs(e.rangeMax)<Fs(r)||(null==(a=e.rangeDisabled)?void 0:a.includes(r))||!e.settings.selection.month&&o||!e.settings.selection.year&&Fs(r).getFullYear()!==t)&&(n.classList.add(e.CSSClasses.dayBtnDisabled),n.tabIndex=-1),e.settings.visibility.today&&Ps(e.date.today)===r&&n.classList.add(e.CSSClasses.dayBtnToday),!e.settings.visibility.weekend||0!==s&&6!==s||n.classList.add(e.CSSClasses.dayBtnWeekend),(null==(l=e.selectedHolidays)?void 0:l.includes(r))&&n.classList.add(e.CSSClasses.dayBtnHoliday),(null==(d=e.selectedDates)?void 0:d.includes(r))&&(n.classList.add(e.CSSClasses.dayBtnSelected),e.selectedDates.length>1&&"multiple-ranged"===e.settings.selection.day&&(e.selectedDates[0]===r&&i.classList.add(e.CSSClasses.daySelectedFirst),e.selectedDates[e.selectedDates.length-1]===r&&i.classList.add(e.CSSClasses.daySelectedLast),e.selectedDates[0]!==r&&e.selectedDates[e.selectedDates.length-1]!==r&&i.classList.add(e.CSSClasses.daySelectedIntermediate))),e.settings.range.edgesOnly&&e.selectedDates.length>1&&"multiple-ranged"===e.settings.selection.day){const t=+new Date(e.selectedDates[0]),s=+new Date(e.selectedDates[e.selectedDates.length-1]),o=+new Date(r);o>t&&o<s&&(n.classList.add(e.CSSClasses.dayBtnSelected),i.classList.add(e.CSSClasses.daySelectedIntermediate))}})(e,t,l,d,s,r,o),i.appendChild(l),e.actions.getDays&&e.actions.getDays(n,r,l,d,e)},tr=e=>{const t=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.days}`),i=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.weekNumbers}`),n=new Date(e.selectedYear,e.selectedMonth,1);t.forEach(((t,s)=>{const r=new Date(n);r.setMonth(r.getMonth()+s);const o=r.getMonth(),a=r.getFullYear(),l=new Date(a,o,1),d=new Date(a,o+1,0).getDate(),c=e.settings.iso8601?(0!==l.getDay()?l.getDay():7)-1:l.getDay();e.settings.selection.day&&t.classList.add(e.CSSClasses.daysSelecting),t.textContent="",((e,t,i,n,s)=>{let r=new Date(i,n,0).getDate()-(s-1);const o=0===n?i-1:i,a=0===n?12:n<10?`0${n}`:n;for(let l=s;l>0;l--,r++){const n=`${o}-${a}-${r}`,s=Fs(n).getDay();er(e,i,t,r,s,n,!0,e.CSSClasses.dayBtnPrev)}})(e,t,a,o,c),((e,t,i,n,s)=>{for(let r=1;r<=i;r++){const i=new Date(n,s,r),o=Ps(i),a=i.getDay();er(e,n,t,r,a,o,!1,null)}})(e,t,d,a,o),((e,t,i,n,s,r)=>{const o=r+i,a=7*Math.ceil(o/7)-o,l=s+1===12?n+1:n,d=s+1===12?"01":s+2<10?`0${s+2}`:s+2;for(let c=1;c<=a;c++){const i=`${l}-${d}-${c<10?`0${c}`:String(c)}`,s=Fs(i).getDay();er(e,n,t,c,s,i,!0,e.CSSClasses.dayBtnNext)}})(e,t,d,a,o,c),((e,t,i,n,s)=>{if(!e.settings.visibility.weekNumbers)return;n.textContent="";const r=document.createElement("b");r.className=e.CSSClasses.weekNumbersTitle,r.innerText="#",n.appendChild(r);const o=document.createElement("div");o.className=e.CSSClasses.weekNumbersContent,n.appendChild(o);const a=document.createElement("button");a.type="button",a.className=e.CSSClasses.weekNumber;const l=s.querySelectorAll(`.${e.CSSClasses.day}`),d=Math.ceil((t+i)/7);for(let c=0;c<d;c++)Js(e,l,0===c?6:7*c,a,o)})(e,c,d,i[s],t),Zs(e,t)}))},ir=e=>{var t,i;const n=null==(t=e.HTMLElement)?void 0:t.querySelectorAll("[data-calendar-selected-month]"),s=null==(i=e.HTMLElement)?void 0:i.querySelectorAll("[data-calendar-selected-year]");if(!(null==n?void 0:n[0])&&(null==s?void 0:s[0]))return;const r=new Date(e.selectedYear,e.selectedMonth,1);null==n||n.forEach(((t,i)=>((e,t,i,n)=>{const s=new Date(n.setMonth(e.selectedMonth+i)).getMonth(),r=!1===e.settings.selection.month||"only-arrows"===e.settings.selection.month;t.tabIndex=r?-1:0,t.classList.toggle(e.CSSClasses.monthDisabled,r),t.setAttribute("data-calendar-selected-month",String(s)),t.innerText=e.locale.months[s]})(e,t,i,r))),null==s||s.forEach(((t,i)=>((e,t,i,n)=>{const s=new Date(n.setFullYear(e.selectedYear,e.selectedMonth+i)).getFullYear(),r=!1===e.settings.selection.year||"only-arrows"===e.settings.selection.year;t.tabIndex=r?-1:0,t.classList.toggle(e.CSSClasses.yearDisabled,r),t.setAttribute("data-calendar-selected-year",String(s)),t.innerText=String(s)})(e,t,i,r)))},nr=(e,t)=>{const i=Fs(Ps(new Date(e.selectedYear,e.selectedMonth,1)));({prev:()=>i.setMonth(i.getMonth()-e.jumpMonths),next:()=>i.setMonth(i.getMonth()+e.jumpMonths)})[t](),[e.selectedMonth,e.selectedYear]=[i.getMonth(),i.getFullYear()],ir(e),js(e),tr(e)},sr=Object.freeze(Object.defineProperty({__proto__:null,ArrowNext:e=>`<button type="button"class="${e.CSSClasses.arrow} ${e.CSSClasses.arrowNext}"data-calendar-arrow="next"></button>`,ArrowPrev:e=>`<button type="button"class="${e.CSSClasses.arrow} ${e.CSSClasses.arrowPrev}"data-calendar-arrow="prev"></button>`,ControlTime:e=>e.settings.selection.time?`<div class="${e.CSSClasses.time}"></div>`:"",Days:e=>`<div class="${e.CSSClasses.days}"></div>`,Month:e=>`<button type="button"class="${e.CSSClasses.month}"data-calendar-selected-month></button>`,Months:e=>`<div class="${e.CSSClasses.months}"></div>`,Week:e=>`<div class="${e.CSSClasses.week}"></div>`,WeekNumbers:e=>e.settings.visibility.weekNumbers?`<div class="${e.CSSClasses.weekNumbers}"></div>`:"",Year:e=>`<button type="button"class="${e.CSSClasses.year}"data-calendar-selected-year></button>`,Years:e=>`<div class="${e.CSSClasses.years}"></div>`},Symbol.toStringTag,{value:"Module"})),rr=(e,t)=>t.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,((t,i)=>{const n=(s=i.replace(/[/\s\n\t]/g,""),sr[s]);var s;const r=n?n(e):"";return e.sanitizer(r)})).replace(/[\n\t]/g,""),or=(e,t)=>{const{HTMLElement:i,CSSClasses:n,DOMTemplates:s,type:r,currentType:o,correctMonths:a}=e,l=(s,r)=>{if(!t)return;const o=i.querySelector(`.${n.controls}`);o&&i.removeChild(o),i.querySelector(`.${n.grid}`).classList.add(n.gridDisabled);const a=t.closest(`.${n.column}`);a.classList.add(s),a.innerHTML=rr(e,r)},d={default:()=>{i.classList.add(n.calendarDefault),i.classList.remove(n.calendarMonth,n.calendarYear),i.innerHTML=rr(e,s.default)},multiple:()=>{a&&(i.classList.add(n.calendarMultiple),i.classList.remove(n.calendarMonth,n.calendarYear),i.innerHTML=((e,t)=>t.replace(/<#Multiple>(.*?)<#\/Multiple>/g,((t,i)=>{let n="";for(let s=0;s<e.correctMonths;s++)n+=i;return e.sanitizer(n)})).replace(/[\n\t]/g,""))(e,rr(e,s.multiple)))},month:()=>{"multiple"!==r?(i.classList.add(n.calendarMonth),i.classList.remove(n.calendarDefault,n.calendarYear),i.innerHTML=rr(e,s.month)):l(n.columnMonth,s.month)},year:()=>{"multiple"!==r?(i.classList.add(n.calendarYear),i.classList.remove(n.calendarDefault,n.calendarMonth),i.innerHTML=rr(e,s.year)):l(n.columnYear,s.year)}};i.classList.add(n.calendar),d[o]()},ar=(e,t,i,n,s)=>{const r=t.cloneNode(!1);return r.className=`${e.CSSClasses.yearsYear}${i===s?` ${e.CSSClasses.yearsYearSelected}`:n?` ${e.CSSClasses.yearsYearDisabled}`:""}`,r.dataset.calendarYear=String(s),r.title=String(s),r.innerText=String(s),n&&(r.tabIndex=-1),r},lr=(e,t)=>{const i=(null==t?void 0:t.dataset.calendarSelectedYear)?Number(null==t?void 0:t.dataset.calendarSelectedYear):e.selectedYear;e.currentType="year",or(e,t),ir(e),js(e);const n=e.HTMLElement.querySelector(`.${e.CSSClasses.years}`);if(!e.settings.selection.year||!n)return;n.classList.add(e.CSSClasses.yearsSelecting);const s="multiple"!==e.type||e.selectedYear===i?0:1,r=document.createElement("button");r.type="button";for(let o=e.viewYear-7;o<e.viewYear+8;o++){const t=o<e.dateMin.getFullYear()+s||o>e.dateMax.getFullYear(),a=ar(e,r,i,t,o);n.appendChild(a),e.actions.getYears&&e.actions.getYears(o,a,e)}},dr=e=>`${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`.replace(/\./,""),cr=(e,t)=>{const i=new Date(`1978-01-0${t+1}T00:00:00.000Z`).toLocaleString(e.settings.lang,{weekday:"short",timeZone:"UTC"});e.locale.weekday.push(dr(i))},hr=(e,t)=>{const i=new Date(`1978-${t+1<=9?`0${t+1}`:t+1}-01T00:00:00.000Z`).toLocaleString(e.settings.lang,{month:"long",timeZone:"UTC"});e.locale.months.push(dr(i))},ur=e=>{if("multiple"!==e.type)return 0;const t=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.column}`),i=Array.from(t).findIndex((t=>t.classList.contains(`${e.CSSClasses.columnMonth}`)));return i>0?i:0},pr=(e,t,i,n,s,r)=>{const o=t.cloneNode(!1);return o.className=`${e.CSSClasses.monthsMonth}${i===r?` ${e.CSSClasses.monthsMonthSelected}`:s?` ${e.CSSClasses.monthsMonthDisabled}`:""}`,o.title=n,o.innerText=`${e.settings.visibility.monthShort?n.substring(0,3):n}`,o.dataset.calendarMonth=String(r),s&&(o.tabIndex=-1),o},mr=(e,t)=>{var i,n;const s=(null==t?void 0:t.dataset.calendarSelectedMonth)?Number(t.dataset.calendarSelectedMonth):e.selectedMonth,r=null==(i=null==t?void 0:t.closest(`.${e.CSSClasses.column}`))?void 0:i.querySelector(`.${e.CSSClasses.year}`),o=r?Number(r.dataset.calendarSelectedYear):e.selectedYear;e.currentType="month",or(e,t),ir(e);const a=null==(n=e.HTMLElement)?void 0:n.querySelector(`.${e.CSSClasses.months}`);if(!e.settings.selection.month||!a)return;a.classList.add(e.CSSClasses.monthsSelecting);const l=e.jumpMonths>1?e.locale.months.map(((t,i)=>s-e.jumpMonths*i)).concat(e.locale.months.map(((t,i)=>s+e.jumpMonths*i))).filter((e=>e>=0&&e<=12)):Array.from(Array(12).keys()),d=document.createElement("button");d.type="button";for(let c=0;c<12;c++){const t=e.locale.months[c],i=c<e.dateMin.getMonth()+ur(e)&&o<=e.dateMin.getFullYear()||c>e.dateMax.getMonth()+ur(e)&&o>=e.dateMax.getFullYear()||c!==s&&!l.includes(c),n=pr(e,d,s,t,i,c);a.appendChild(n),e.actions.getMonths&&e.actions.getMonths(c,n,e)}},gr=(e,t)=>e&&t?{0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"12",PM:"12"}}[Number(e)][t]:"",fr=(e,t,i)=>e.querySelector(`.${t}${i?` input[name="${i}"]`:""}`),vr=(e,t,i)=>{e.addEventListener("mouseover",(()=>t.classList.add(i))),e.addEventListener("mouseout",(()=>t.classList.remove(i)))},br=(e,t,i,n)=>{({hours:()=>{e.selectedHours=i},minutes:()=>{e.selectedMinutes=i}})[n](),e.selectedTime=`${e.selectedHours}:${e.selectedMinutes}${e.selectedKeeping?` ${e.selectedKeeping}`:""}`,e.actions.changeTime&&e.actions.changeTime(t,e),e.input&&e.HTMLInputElement&&e.actions.changeToInput&&e.actions.changeToInput(t,e)},yr=(e,t,i,n,s,r)=>{t.addEventListener("input",(t=>{const o=t.target,a=Number(o.value),l=a<10?`0${a}`:`${a}`;if("hours"!==s||12!==r)return i.value=l,void br(e,t,l,s);a<r&&a>0?(i.value=l,e.selectedKeeping="AM",n.innerText=e.selectedKeeping,br(e,t,l,s)):(0===a?(e.selectedKeeping="AM",n.innerText="AM"):(e.selectedKeeping="PM",n.innerText="PM"),i.value=Ns(o.value),br(e,t,Ns(o.value),s))}))},_r=(e,t,i,n,s,r)=>{i.addEventListener("change",(i=>{const o=i.target,a=Number(o.value),l=a<10?`0${a}`:`${a}`;"hours"===s&&12===r?o.value&&a<=r&&a>0?(o.value=l,t.value=gr(l,e.selectedKeeping),br(e,i,l,s)):o.value&&a<24&&(a>r||0===a)?(0===a?(e.selectedKeeping="AM",n.innerText="AM"):(e.selectedKeeping="PM",n.innerText="PM"),o.value=Ns(o.value),t.value=l,br(e,i,Ns(o.value),s)):o.value=e.selectedHours:o.value&&a<=r&&a>=0?(o.value=l,t.value=l,br(e,i,l,s)):"hours"===s?o.value=e.selectedHours:"minutes"===s&&(o.value=e.selectedMinutes)}))},Sr=(e,t,i)=>{const n=24===i?23:i||12,s=fr(t,e.CSSClasses.timeRange,"hours"),r=fr(t,e.CSSClasses.timeRange,"minutes"),o=fr(t,e.CSSClasses.timeHours,"hours"),a=fr(t,e.CSSClasses.timeMinutes,"minutes"),l=t.querySelector(`.${e.CSSClasses.timeKeeping}`);vr(s,o,e.CSSClasses.isFocus),vr(r,a,e.CSSClasses.isFocus),yr(e,s,o,l,"hours",n),yr(e,r,a,l,"minutes",0),_r(e,s,o,l,"hours",n),_r(e,r,a,l,"minutes",59),l&&((e,t,i)=>{t.addEventListener("click",(n=>{e.selectedKeeping=t.innerText.includes("AM")?"PM":"AM",t.innerText=e.selectedKeeping,i.value=gr(e.selectedHours,e.selectedKeeping),br(e,n,e.selectedHours,"hours")}))})(e,l,s)},wr=(e,t,i,n)=>`<label class="${t}"><input type="text"name="${e}"maxlength="2"value="${i}"${n?"disabled":""}></label>`,Cr=(e,t,i,n,s,r)=>`<label class="${t}"><input type="range"name="${e}"min="${i}"max="${n}"step="${s}"value="${r}"></label>`,Er=e=>{const t=[...e.locale.weekday];t[0]&&(e.settings.iso8601&&t.push(t.shift()),e.HTMLElement.querySelectorAll(`.${e.CSSClasses.week}`).forEach((i=>((e,t,i)=>{const n=document.createElement("b");t.textContent="";for(let s=0;s<i.length;s++){const r=i[s],o=n.cloneNode(!0);o.className=`${e.CSSClasses.weekDay}`,o.className=`${e.CSSClasses.weekDay}${e.settings.visibility.weekend&&e.settings.iso8601?5===s||6===s?` ${e.CSSClasses.weekDayWeekend}`:"":!e.settings.visibility.weekend||e.settings.iso8601||0!==s&&6!==s?"":` ${e.CSSClasses.weekDayWeekend}`}`,o.innerText=`${r}`,t.appendChild(o)}})(e,i,t))))},Or=["light","dark","system"],xr={value:!1,set:()=>{xr.value=!0},check:()=>xr.value},Tr=(e,t)=>Or.find((i=>{var n;return"system"!==i&&(null==(n=e.getAttribute(t))?void 0:n.includes(i))})),kr=(e,t)=>{e.dataset.calendarTheme=t},Ir=(e,t)=>{var i;if(i=t,kr(e.HTMLElement,i.matches?"dark":"light"),"system"!==e.settings.visibility.theme||xr.check())return;const n=t=>{const i=document.querySelectorAll(`.${e.CSSClasses.calendar}`);null==i||i.forEach((e=>kr(e,t.matches?"dark":"light")))};t.addEventListener?t.addEventListener("change",n):t.addListener(n),xr.set()},Rr=(e,t)=>{const i=e.settings.visibility.themeDetect?document.querySelector(e.settings.visibility.themeDetect):null;if(!i)return void Ir(e,t);const n=e.settings.visibility.themeDetect.replace(/^.*\[(.+)\]/g,((e,t)=>t)),s=Tr(i,n);s?(kr(e.HTMLElement,s),((e,t,i)=>{new MutationObserver((n=>{for(let s=0;s<n.length;s++)if(n[s].attributeName===i){const n=Tr(t,i);n&&kr(e.HTMLElement,n);break}})).observe(t,{attributes:!0})})(e,i,n)):Ir(e,t)},Ar=e=>{const t={default:()=>{Er(e),tr(e)},multiple:()=>{Er(e),tr(e)},month:()=>mr(e),year:()=>lr(e)};(e=>{if(!Or.includes(e.settings.visibility.theme))throw new Error($s);"not all"!==window.matchMedia("(prefers-color-scheme)").media?{light:()=>kr(e.HTMLElement,"light"),dark:()=>kr(e.HTMLElement,"dark"),system:()=>Rr(e,window.matchMedia("(prefers-color-scheme: dark)"))}[e.settings.visibility.theme]():kr(e.HTMLElement,"light")})(e),(e=>{if("define"!==e.settings.lang||!e.locale.weekday[6]||!e.locale.months[11]){if("define"===e.settings.lang)throw new Error(zs);e.locale.weekday=[],e.locale.months=[];for(let t=0;t<7;t++)cr(e,t);for(let t=0;t<12;t++)hr(e,t)}})(e),or(e),ir(e),js(e),(e=>{const t=e.HTMLElement.querySelector(`.${e.CSSClasses.time}`);if(!t)return;const i=!0===e.settings.selection.time?12:e.settings.selection.time,n="range"===e.settings.selection.controlTime,[s,r]=[0,23],[o,a]=[0,59];t.innerHTML=e.sanitizer(`<div class="${e.CSSClasses.timeContent}">${wr("hours",e.CSSClasses.timeHours,e.selectedHours,n)}${wr("minutes",e.CSSClasses.timeMinutes,e.selectedMinutes,n)}${12===i?`<button type="button" class="${e.CSSClasses.timeKeeping}"${n?"disabled":""}>${e.selectedKeeping}</button>`:""}</div><div class="${e.CSSClasses.timeRanges}">${Cr("hours",e.CSSClasses.timeRange,s,r,e.settings.selection.stepHours,e.selectedKeeping?gr(e.selectedHours,e.selectedKeeping):e.selectedHours)}${Cr("minutes",e.CSSClasses.timeRange,o,a,e.settings.selection.stepMinutes,e.selectedMinutes)}</div>`),Sr(e,t,i)})(e),t[e.currentType]()},Dr={self:null,rangeMin:void 0,rangeMax:void 0},Pr=()=>{var e;if(!(null==(e=Dr.self)?void 0:e.HTMLElement))return;const{CSSClasses:t}=Dr.self;Dr.self.HTMLElement.querySelectorAll(`.${Dr.self.CSSClasses.dayBtnHover}`).forEach((e=>{var i;e.classList.remove(Dr.self.CSSClasses.dayBtnHover),null==(i=e.parentElement)||i.classList.remove(t.dayHoverIntermediate,t.dayHoverFirst,t.dayHoverLast)}))},Fr=(e,t,i)=>{var n,s,r;if(!(null==(n=Dr.self)?void 0:n.selectedDates))return;const o=Ps(e),{CSSClasses:a}=Dr.self;if(null==(s=Dr.self.rangeDisabled)?void 0:s.includes(o))return;const l=null==(r=Dr.self.HTMLElement)?void 0:r.querySelectorAll(`[data-calendar-day="${o}"]`);null==l||l.forEach((e=>{var t;e.classList.add(a.dayBtnHover),null==(t=e.parentElement)||t.classList.add(a.dayHoverIntermediate)})),null==t||t.forEach((e=>{var t;return null==(t=e.parentElement)?void 0:t.classList.add(a.dayHoverFirst)})),null==i||i.forEach((e=>{var t;return null==(t=e.parentElement)?void 0:t.classList.add(a.dayHoverLast)}))},Mr=e=>{var t;if(!e.target||!(null==(t=Dr.self)?void 0:t.selectedDates))return;if(!e.target.closest(`.${Dr.self.CSSClasses.days}`))return void Pr();const i=e.target.closest("[data-calendar-day]");if(!i)return;const n=i.dataset.calendarDay,s=Fs(Dr.self.selectedDates[0]),r=Fs(n),o=Dr.self.HTMLElement.querySelectorAll(`[data-calendar-day="${Dr.self.selectedDates[0]}"]`),a=Dr.self.HTMLElement.querySelectorAll(`[data-calendar-day="${n}"]`),[l,d]=s<r?[o,a]:[a,o],[c,h]=s<r?[s,r]:[r,s];Pr();for(let u=new Date(c);u<=h;u.setDate(u.getDate()+1))Fr(u,l,d)},Lr=e=>{Dr.self&&"Escape"===e.key&&(Dr.self.selectedDates=[],Dr.self.HTMLElement.removeEventListener("mousemove",Mr),document.removeEventListener("keydown",Lr),Ar(Dr.self))},Nr=(e,t)=>{var i;if(t){const n=1===e.selectedDates.length&&e.selectedDates[0].includes(t);e.selectedDates=n&&!e.settings.selection.cancelableDay?[t,t]:n&&e.settings.selection.cancelableDay?[]:e.selectedDates.length>1?[t]:[...e.selectedDates,t],null==(i=e.selectedDates)||i.sort(((e,t)=>+new Date(e)-+new Date(t)))}e.settings.range.disableGaps&&(Dr.rangeMin=Dr.rangeMin?Dr.rangeMin:e.rangeMin,Dr.rangeMax=Dr.rangeMax?Dr.rangeMax:e.rangeMax),Dr.self=e,{set:()=>{e.HTMLElement.addEventListener("mousemove",Mr),document.addEventListener("keydown",Lr),e.settings.range.disableGaps&&(()=>{var e,t,i;if(!(null==(t=null==(e=Dr.self)?void 0:e.selectedDates)?void 0:t[0])||!(null==(i=Dr.self.rangeDisabled)?void 0:i[0]))return;const n=Fs(Dr.self.selectedDates[0]),[s,r]=Dr.self.rangeDisabled.map((e=>Fs(e))).reduce(((e,t)=>{let[i,s]=e;return[n>=t?t:i,n<t&&null===s?t:s]}),[null,null]);s&&(Dr.self.rangeMin=Ps(new Date(s.setDate(s.getDate()+1)))),r&&(Dr.self.rangeMax=Ps(new Date(r.setDate(r.getDate()-1))))})()},reset:()=>{const[t,i]=[e.selectedDates[0],e.selectedDates[e.selectedDates.length-1]];e.selectedDates=e.selectedDates[0]!==e.selectedDates[e.selectedDates.length-1]?e.settings.range.edgesOnly?[t,i]:Ms([`${t}:${i}`]):[e.selectedDates[0],e.selectedDates[0]],e.HTMLElement.removeEventListener("mousemove",Mr),document.removeEventListener("keydown",Lr),e.settings.range.disableGaps&&Dr.self&&(Dr.self.rangeMin=Dr.rangeMin,Dr.self.rangeMax=Dr.rangeMax)}}[1===e.selectedDates.length?"set":"reset"]()},Br=(e,t,i)=>{if(!t.dataset.calendarDay)return;const n=t.dataset.calendarDay,s=t.classList.contains(e.CSSClasses.dayBtnSelected);if(s&&!e.settings.selection.cancelableDay)return;let r=!0;void 0!==e.toggleSelected&&(r="function"==typeof e.toggleSelected?e.toggleSelected(e):e.toggleSelected),s&&!r||(e.selectedDates=s?e.selectedDates.filter((e=>e!==n)):i?[...e.selectedDates,n]:[n])},Hr=(e,t,i,n,s)=>{const r=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.column}`),o=Array.from(r).findIndex((e=>e.classList.contains(t))),a=Number(r[o].querySelector(`.${i}`).getAttribute(s));return"month"===e.currentType&&o>=0?n-o:"year"===e.currentType&&e.selectedYear!==a?n-1:n},zr=(e,t,i,n)=>{if(!e.settings.selection[i])return;const s=t.target,r=e=>s.closest(`.${e}`),o=r(n.header),a=r(n.item),l=r(e.CSSClasses.grid),d=r(e.CSSClasses.column);e.currentType!==i&&o?{year:()=>lr(e,s),month:()=>mr(e,s)}[i]():a?((e,t,i,n,s)=>{const r={year:()=>{var i,n;return null==(n=(i=e.actions).clickYear)?void 0:n.call(i,t,e)},month:()=>{var i,n;return null==(n=(i=e.actions).clickMonth)?void 0:n.call(i,t,e)}};({year:()=>{if("multiple"===e.type){const t=Hr(e,e.CSSClasses.columnYear,e.CSSClasses.year,Number(s.dataset.calendarYear),"data-calendar-selected-year"),i=e.selectedMonth<e.dateMin.getMonth()&&t<=e.dateMin.getFullYear(),n=e.selectedMonth>e.dateMax.getMonth()&&t>=e.dateMax.getFullYear(),r=t<e.dateMin.getFullYear(),o=t>e.dateMax.getFullYear();i||r?(e.selectedYear=e.dateMin.getFullYear(),e.selectedMonth=e.dateMin.getMonth()):n||o?(e.selectedYear=e.dateMax.getFullYear(),e.selectedMonth=e.dateMax.getMonth()):e.selectedYear=t}else e.selectedYear=Number(s.dataset.calendarYear)},month:()=>{if("multiple"===e.type){const t=Hr(e,e.CSSClasses.columnMonth,e.CSSClasses.month,Number(s.dataset.calendarMonth),"data-calendar-selected-month"),i=s.closest(`.${n.column}`).querySelector(`.${e.CSSClasses.year}`);e.selectedYear=Number(i.dataset.calendarSelectedYear);const r=t<e.dateMin.getMonth()&&e.selectedYear<=e.dateMin.getFullYear(),o=t>e.dateMax.getMonth()&&e.selectedYear>=e.dateMax.getFullYear();e.selectedMonth=r?e.dateMin.getMonth():o?e.dateMax.getMonth():t}else e.selectedMonth=Number(s.dataset.calendarMonth)}})[i](),r[i](),e.currentType=e.type,Ar(e)})(e,t,i,n,a):(e.currentType===i&&o||"multiple"===e.type&&e.currentType===i&&l&&!d)&&(e.currentType=e.type,Ar(e))},$r=e=>{const t=t=>{((e,t)=>{const i=t.target.closest(`.${e.CSSClasses.arrow}`);i&&(["default","multiple"].includes(e.currentType)?nr(e,i.dataset.calendarArrow):"year"===e.currentType&&void 0!==e.viewYear&&(e.viewYear+={prev:-15,next:15}[i.dataset.calendarArrow],lr(e,t.target)),e.actions.clickArrow&&e.actions.clickArrow(t,e))})(e,t),((e,t)=>{var i;if(!e.settings.visibility.weekNumbers||!e.actions.clickWeekNumber)return;const n=t.target.closest(`.${e.CSSClasses.weekNumber}`),s=null==(i=e.HTMLElement)?void 0:i.querySelectorAll("[data-calendar-week-number]");if(!n||!s)return;const r=Number(n.innerText),o=Number(n.dataset.calendarYearWeek),a=Array.from(s).filter((e=>Number(e.dataset.calendarWeekNumber)===r));e.actions.clickWeekNumber(t,r,a,o,e)})(e,t),((e,t)=>{var i;const n=t.target,s=e=>n.closest(`.${e}`),r=s(e.CSSClasses.dayBtn);if(!e.settings.selection.day||!["single","multiple","multiple-ranged"].includes(e.settings.selection.day)||!r)return;({single:()=>Br(e,r,!1),multiple:()=>Br(e,r,!0),"multiple-ranged":()=>Nr(e,r.dataset.calendarDay)})[e.settings.selection.day](),null==(i=e.selectedDates)||i.sort(((e,t)=>+new Date(e)-+new Date(t))),e.actions.clickDay&&e.actions.clickDay(t,e),e.input&&e.HTMLInputElement&&e.HTMLElement&&e.actions.changeToInput&&e.actions.changeToInput(t,e);const o=s(e.CSSClasses.dayBtnPrev),a=s(e.CSSClasses.dayBtnNext);({prev:()=>nr(e,"prev"),next:()=>nr(e,"next"),default:()=>tr(e)})[o?"prev":a?"next":"default"]()})(e,t),zr(e,t,"month",{header:e.CSSClasses.month,item:e.CSSClasses.monthsMonth,column:e.CSSClasses.columnMonth}),zr(e,t,"year",{header:e.CSSClasses.year,item:e.CSSClasses.yearsYear,column:e.CSSClasses.columnYear})};return e.HTMLElement.addEventListener("click",t),()=>e.HTMLElement.removeEventListener("click",t)},Ur=function(e){let{year:t,month:i,dates:n,holidays:s,time:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o;const a=xs({},e.settings.selected);e.settings.selected.year=t?a.year:e.selectedYear,e.settings.selected.month=i?a.month:e.selectedMonth,e.settings.selected.holidays=s?a.holidays:e.selectedHolidays,e.settings.selected.time=r?a.time:e.selectedTime,e.settings.selected.dates="only-first"===n&&(null==(o=e.selectedDates)?void 0:o[0])?[e.selectedDates[0]]:!0===n?a.dates:e.selectedDates,Vs(e),Ar(e),e.settings.selected=a,"multiple-ranged"===e.settings.selection.day&&n&&Nr(e)},Vr=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.isInputInit=!0;const i=document.createElement("div");return i.className=`${e.CSSClasses.calendar} ${e.CSSClasses.calendarToInput} ${e.CSSClasses.calendarHidden}`,e.HTMLElement=i,document.body.appendChild(e.HTMLElement),e.HTMLElement.style.visibility="hidden",t&&queueMicrotask((()=>{Qs(e.HTMLInputElement,i,e.settings.visibility.positionToInput,e.CSSClasses),e.HTMLElement.style.visibility="visible",e.show()})),Ur(e,{year:!0,month:!0,dates:!0,holidays:!0,time:!0}),e.actions.initCalendar&&e.actions.initCalendar(e),$r(e)},Wr=e=>{const t=[];e.HTMLInputElement=e.HTMLElement;const i=()=>Qs(e.HTMLInputElement,e.HTMLElement,e.settings.visibility.positionToInput,e.CSSClasses),n=t=>{"Escape"===t.key&&((null==e?void 0:e.HTMLInputElement)&&(null==e?void 0:e.HTMLElement)&&e.hide(),document.removeEventListener("keydown",n))},s=t=>{var n;e&&t.target!==e.HTMLInputElement&&!(null==(n=e.HTMLElement)?void 0:n.contains(t.target))&&(e.HTMLInputElement&&e.HTMLElement&&e.hide(),window.removeEventListener("resize",i),document.removeEventListener("click",s,{capture:!0}))},r=()=>{e.isInputInit?(Qs(e.HTMLInputElement,e.HTMLElement,e.settings.visibility.positionToInput,e.CSSClasses),e.HTMLElement.style.visibility="visible",e.show()):t.push(Vr(e)),window.addEventListener("resize",i),document.addEventListener("click",s,{capture:!0}),document.addEventListener("keydown",n)};return e.HTMLInputElement.addEventListener("click",r),e.HTMLInputElement.addEventListener("focus",r),()=>{t.forEach((e=>e()))}};class jr extends Ds{constructor(e,t){if(super(),Ts(this,"init",(()=>{return(e=this).HTMLOriginalElement=e.HTMLElement.cloneNode(!0),e.isInit=!0,e.input?Wr(e):(Vs(e),Ar(e),e.actions.initCalendar&&e.actions.initCalendar(e),$r(e));var e})),Ts(this,"update",(e=>function(e){let{year:t,month:i,dates:n,holidays:s,time:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.isInit)throw new Error(Hs);e.input&&!e.isInputInit&&Vr(e,!1),Ur(e,{year:t,month:i,dates:n,holidays:s,time:r}),e.actions.updateCalendar&&e.actions.updateCalendar(e)}(this,e))),Ts(this,"destroy",(()=>(e=>{var t,i,n,s,r,o;if(!e.isInit)throw new Error(Hs);e.input?(null==(i=null==(t=e.HTMLElement)?void 0:t.parentElement)||i.removeChild(e.HTMLElement),null==(s=null==(n=e.HTMLInputElement)?void 0:n.replaceWith)||s.call(n,e.HTMLOriginalElement),e.HTMLInputElement=void 0):null==(o=null==(r=e.HTMLElement)?void 0:r.replaceWith)||o.call(r,e.HTMLOriginalElement),e.HTMLElement=e.HTMLOriginalElement,e.actions.destroyCalendar&&e.actions.destroyCalendar(e)})(this))),Ts(this,"show",(()=>{var e;(e=this).currentType?(e.HTMLElement.classList.remove(e.CSSClasses.calendarHidden),e.actions.showCalendar&&e.actions.showCalendar(e)):e.HTMLElement.click()})),Ts(this,"hide",(()=>{var e;(e=this).currentType&&(e.HTMLElement.classList.add(e.CSSClasses.calendarHidden),e.actions.hideCalendar&&e.actions.hideCalendar(e))})),this.HTMLElement="string"==typeof e?document.querySelector(e):e,!this.HTMLElement)throw new Error(Bs(e));if(!t)return;const i=(e,t)=>{Object.keys(t).forEach((n=>{"object"!=typeof e[n]||"object"!=typeof t[n]||t[n]instanceof Date?e[n]=t[n]:i(e[n],t[n])}))};i(this,t)}}class Gr{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._lastClickIsDate=!1,this._shouldTriggerQuery=!0,this.hasTimePicker=!1,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new Vt}get gridOptions(){return this.grid?.getOptions()??{}}get columnFilter(){return this.columnDef?.filter||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return"compound"===this.inputFilterType?C.empty:this.gridOptions.defaultFilterRangeOperator||C.rangeInclusive}get pickerOptions(){return this._pickerOptions||{}}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.date,...this.columnFilter?.filterOptions}}get operator(){return"compound"===this.inputFilterType?this._operator||this.columnFilter.operator||this.defaultOperator:this.columnFilter?.operator??this.defaultOperator}set operator(e){"compound"===this.inputFilterType?this._operator=e:this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,"compound"===this.inputFilterType&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this.filterContainerElm=e.filterContainerElm;const t="compound"===this.inputFilterType?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(t),this.updateFilterStyle(this.searchTerms.length>0),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this)),this._bindEventService.bind(document.body,"keydown",(e=>{"Escape"!==e.key&&"Tab"!==e.key||this.hide()})),this._bindEventService.bind(this._dateInputElm,"keydown",(e=>{"Backspace"===e.key&&this.clear(!0,!1)}))}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.calendarInstance&&(this._clearFilterTriggered=t,this._shouldTriggerQuery=e,this._currentValue="",this.searchTerms=[],this._currentDateStrings=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.calendarInstance&&Yt(this.calendarInstance)),this.onTriggerEvent(new Event("keyup")),this.updateFilterStyle(!1)}destroy(){this._bindEventService.unbindAll(),this.calendarInstance?.destroy(),ee(this.filterContainerElm),this.filterContainerElm?.remove(),this._selectOperatorElm?.remove(),this._filterElm?.remove()}hide(){"function"===typeof this.calendarInstance?.hide&&this.calendarInstance.hide()}show(){"function"===typeof this.calendarInstance?.show&&this.calendarInstance.show()}getValues(){return this._currentDateOrDates}setValues(e,t){let i,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];"compound"===this.inputFilterType?i=Array.isArray(e)?e[0]:e:"string"===typeof e||Array.isArray(e)&&"string"===typeof e[0]&&e[0].indexOf("..")>0?i="string"===typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(i=e),this.calendarInstance&&void 0!==i&&(Kt(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:i,updatePickerUI:!0}),this._currentDateOrDates=e&&i?i:void 0);const s=this.getValues()||[],r=Array.isArray(s)?s:[s];if(this.updateFilterStyle(r.length>0),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){const e=W(this.operator);this._selectOperatorElm.value=e}n&&this.callback(void 0,{columnDef:this.columnDef,searchTerms:r,operator:this.operator,shouldTriggerQuery:!0})}buildDatePickerInput(e){const t=this.columnDef?.id??"",i=this.columnFilter.type||this.columnDef.type||y.dateIso,n=this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||y.dateUtc,s=Pt(n),r=this.columnFilter.type||this.columnDef.type||y.dateIso;s&&"range"!==this.inputFilterType&&("ISO8601"===s||s.toLowerCase().includes("h"))&&(this.hasTimePicker=!0);const o=Pt(this.hasTimePicker?y.dateTimeIsoAM_PM:y.dateIso),a=(this.filterOptions?.locale??this.translaterService?.getCurrentLanguage?.())||this.gridOptions.locale||"en";let l;"compound"===this.inputFilterType?e&&(l=e,this._currentDateOrDates=e):("string"===typeof e||Array.isArray(e)&&"string"===typeof e[0]&&e[0].indexOf("..")>0?l="string"===typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(l=e),Array.isArray(l)&&(this._currentDateOrDates=l,this._currentDateStrings=l.map((e=>Ft(e,void 0,r)))));const d={input:!0,jumpToSelectedDate:!0,type:"range"===this.inputFilterType?"multiple":"default",sanitizer:e=>this.grid.sanitizeHtmlString(e),toggleSelected:!1,actions:{clickDay:e=>{this._lastClickIsDate=!0},changeToInput:(e,t)=>{if(t.HTMLInputElement){let e=[],r="",a="";if(t.selectedDates[1]){t.selectedDates.sort(((e,t)=>+new Date(e)-+new Date(t))),r=t.selectedDates[0],a=t.selectedDates[t.selectedDates.length-1];const i=kt(t.selectedDates[0],s,"en-US"),n=kt(a,s,"en-US");t.HTMLInputElement.value=`${i} \u2014 ${n}`,e=[r,a]}else t.selectedDates[0]?(r=t.selectedDates[0],t.HTMLInputElement.value=Ft(r,y.dateIso,n),e=t.selectedDates):t.HTMLInputElement.value="";if(this.hasTimePicker&&r){const i=Dt(r,o);i.setHours(+(t.selectedHours||0)),i.setMinutes(+(t.selectedMinutes||0)),t.HTMLInputElement.value=Ft(i,void 0,n),e=[i]}if("compound"===this.inputFilterType?this._currentValue=Ft(e[0],void 0,i):Array.isArray(e)&&(this._currentDateStrings=e.map((e=>Ft(e,void 0,i))),this._currentValue=this._currentDateStrings.join("..")),this._currentDateOrDates=e.map((e=>e instanceof Date?e:Dt(e,o))),this._currentValue){const e=this.hasTimePicker?new Event("keyup"):void 0;this.onTriggerEvent(e)}"range"===this.inputFilterType&&t.selectedDates.length<2&&(this._lastClickIsDate=!1),this._lastClickIsDate&&(t.hide(),this._lastClickIsDate=!1)}}},settings:{lang:a,iso8601:!1,visibility:{theme:this.gridOptions?.darkMode?"dark":"light",positionToInput:"auto",weekend:!1}}};"range"===this.inputFilterType&&(d.type="multiple",d.months=2,d.jumpMonths=2,d.settings={...d.settings,range:{edgesOnly:!0},selection:{day:"multiple-ranged"},visibility:{...d.settings?.visibility,daysOutside:!1}}),this.hasTimePicker&&(d.settings.selection??={},d.settings.selection.time=24),this._pickerOptions=Se(!0,{},d,{settings:this.filterOptions});let c=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(c=this.columnFilter.placeholder),this._dateInputElm=Q("input",{type:"text",className:"form-control date-picker",placeholder:c,readOnly:!0,dataset:{input:"",columnid:`${t}`}}),this.calendarInstance=new jr(this._dateInputElm,this._pickerOptions),this.calendarInstance.init(),this._pickerOptions.settings?.selected?.dates&&(l=this._pickerOptions.settings.selected.dates),l&&Kt(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,oldVal:void 0,newVal:l,updatePickerUI:!1})}getOperatorOptionValues(){let e;return e=this.columnFilter?.compoundOperatorList?this.columnFilter.compoundOperatorList:Zt(this.gridOptions,this.translaterService),Jt(this.gridOptions,e,"numeric"),e}createDomFilterElement(e){const t=this.columnDef?.id??"";if(ee(this.filterContainerElm),this.buildDatePickerInput(e),"range"===this.inputFilterType){const i=Q("div",{className:`date-picker form-group search-filter slick-filter filter-${t}`});return Array.isArray(e)&&e.length>0&&""!==e[0]&&(this._currentDateOrDates=e,this._currentValue=e[0]),i.appendChild(this._dateInputElm),i&&this.filterContainerElm.appendChild(i),i}{this._selectOperatorElm=qt(this.getOperatorOptionValues(),this.grid);const i=Q("div",{className:`date-picker form-group search-filter slick-filter filter-${t}`}),n=Q("div",{className:"input-group date-picker"},i);if(Q("div",{className:"input-group-addon input-group-prepend operator"},n).appendChild(this._selectOperatorElm),n.appendChild(this._dateInputElm),this.operator){const e=W(this.operator);this._selectOperatorElm.value=e}return this._currentDateOrDates=e,this._currentValue=e,i&&this.filterContainerElm.appendChild(i),i}}onTriggerEvent(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else if("range"===this.inputFilterType){const t=this._currentDateStrings?this._currentDateStrings:[this._currentValue];this.updateFilterStyle(t.length>0),this.callback(e,{columnDef:this.columnDef,searchTerms:t,operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery})}else if("compound"===this.inputFilterType&&this._selectOperatorElm){const t=this._selectOperatorElm.value;this.updateFilterStyle(!!this._currentValue);const i=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput??void 0===this.gridOptions.skipCompoundOperatorFilterWithNullInput,n=i&&Re(this._currentDateOrDates)||""===this._currentDateOrDates&&Re(this._lastSearchValue);i&&i&&!n||this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:t||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._lastSearchValue=this._currentValue}updateFilterStyle(e){e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}}class Yr{constructor(e){this.translaterService=e}filterCollection(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S.chain,n=[];return Array.isArray(t)?(n=i===S.merge?[]:[...e],t.forEach((t=>{if(i===S.merge){const i=this.singleFilterCollection(e,t);n=je([...n,...i])}else n=this.singleFilterCollection(n,t)}))):n=this.singleFilterCollection(e,t),n}preParseByMutationDateItems(e,t,i){const n=[];t.getColumns().forEach((e=>{const t=this.getParseDateInfo(e,i);t&&n.push(t)})),e.forEach((e=>{n.forEach((t=>{let{columnId:i,dateFormat:n,queryFieldName:s}=t;this.reassignDateWhenValid(e,i,n,s)}))}))}parseSingleDateItem(e,t,i){i&&t.getColumns().forEach((t=>{const n=this.getParseDateInfo(t,i);n&&this.reassignDateWhenValid(e,t.id,n.dateFormat,n.queryFieldName)}))}singleFilterCollection(e,t){let i=[];if(t){const n=t.property,s=t.operator||C.equal,r="undefined"===typeof t.value?"":t.value;switch(s){case C.equal:i=n?e.filter((e=>e[n]===r)):e.filter((e=>e===r));break;case C.contains:i=n?e.filter((e=>-1!==e[n]?.toString().indexOf(r.toString()))):e.filter((e=>null!==e&&void 0!==e&&-1!==e.toString().indexOf(r.toString())));break;case C.notContains:i=n?e.filter((e=>-1===e[n]?.toString().indexOf(r.toString()))):e.filter((e=>null!==e&&void 0!==e&&-1===e.toString().indexOf(r.toString())));break;case C.notEqual:default:i=n?e.filter((e=>e[n]!==r)):e.filter((e=>e!==r))}}return i}sortCollection(e,t,i,n){if(n&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let s=[];if(i)if(Array.isArray(i))s=t.sort(((t,s)=>{for(let r=0,o=i.length;r<o;r++){const o=i[r];if(o?.property){const i=o.sortDesc?O.desc:O.asc,r=o.property,a=Ht(o?.fieldType??e?.type??y.string,n?this.translaterService?.translate?.(t[r]||" "):t[r],n?this.translaterService?.translate?.(s[r]||" "):s[r],i,e);if(a!==O.neutral)return a}}return O.neutral}));else if(i?.property){const r=i.property,o=i.sortDesc?O.desc:O.asc,a=i?.fieldType??e?.type??y.string;s=t.sort(((t,i)=>{const s=n?this.translaterService?.translate&&this.translaterService.translate(t[r]||" "):t[r],l=n?this.translaterService?.translate&&this.translaterService.translate(i[r]||" "):i[r],d=Ht(a,s,l,o,e);return d!==O.neutral?d:O.neutral}))}else if(i&&!i.property){const r=i.sortDesc?O.desc:O.asc,o=i?.fieldType??e?.type??y.string;s=t.sort(((t,i)=>{const s=n?this.translaterService?.translate&&this.translaterService.translate(t||" "):t,a=n?this.translaterService?.translate&&this.translaterService.translate(i||" "):i,l=Ht(o,s,a,r,e);return l!==O.neutral?l:O.neutral}))}return s}getParseDateInfo(e,t){const i=e.type||y.string,n=Pt(i);if(U(i)&&t){const i="string"===typeof t?`${t}${e.id}`:`${e.id}`;return{columnId:e.id,dateFormat:n,queryFieldName:i}}}reassignDateWhenValid(e,t,i,n){const s=Mt(e[t],i,!1);s&&(e[n]=s)}}function Kr(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;const a=i?.id??"",l=n.getOptions(),d=("editor"===e?i?.editor:i?.filter)??{},c=d?.collectionOptions??{},h=c?.separatorBetweenTextLabels??"",u=d?.enableTranslateLabel??!1,p=l?.enableTranslate??!1,m=d?.enableRenderHtml??!1,g=d?.customStructure?.label??"label",f=d?.customStructure?.labelPrefix??"labelPrefix",v=d?.customStructure?.labelSuffix??"labelSuffix",b=d?.customStructure?.optionLabel??"value",y=d?.customStructure?.value??"value",_=Q("select",{className:"ms-filter search-filter"}),S="filter"===e?["search-filter",`filter-${a}`]:["select-editor",`editor-${a}`];_.classList.add(...S),_.multiple=s;const w=[];let C=!1;return Array.isArray(t)&&(t.every((e=>"number"===typeof e||"string"===typeof e))?t.forEach((t=>{const i={text:String(t),value:t};"filter"===e&&Array.isArray(o)&&(i.selected=o.findIndex((e=>e===t))>=0),w.push(i),(i.selected&&s||i.selected&&!s&&""!==t)&&(C=!0)})):t.forEach((t=>{if(void 0===t||"object"===typeof t&&void 0===t[g]&&void 0===t.labelKey)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");const i=t.labelKey||t[g],a=(t.labelKey||u&&r)&&i&&p?r?.translate(i||" "):i;let l=t[f]||"",d=t[v]||"",c=t.hasOwnProperty(b)?t[b]:"";c?.toString&&(c=c.toString().replace(/"/g,"'")),l=u&&r&&l&&"string"===typeof l?r.translate(l||" "):l,d=u&&r&&d&&"string"===typeof d?r.translate(d||" "):d,c=u&&r&&c&&"string"===typeof c?r.translate(c||" "):c;let _=[l,"string"===typeof a||"number"===typeof a?a.toString():a,d].filter((e=>e)).join(h);const S={text:"",value:""};m&&(_=n.sanitizeHtmlString(_)),S.text=_;let E=t[y];void 0!==E&&null!==E||(E=""),"filter"===e&&Array.isArray(o)&&(S.selected=o.findIndex((e=>`${e}`===`${t[y]}`))>=0),S.value=`${E??""}`,w.push(S),(S.selected&&s||S.selected&&!s&&""!==t[y])&&(C=!0)}))),{selectElement:_,dataCollection:w,hasFoundSearchTerm:C}}class qr{constructor(e,t,i){this.sharedService=e,this.backendUtilities=t,this.translaterService=i}getPickerTitleOutputString(e,t){if(this.sharedService.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let i="";const n=this.sharedService.gridOptions?.[t]??{},s=this.sharedService.gridOptions?.enableTranslate??!1,r=this.sharedService.gridOptions?.locales??g.locales,o=n?.[e],a=n?.[`${e}Key`],l=z(this.sharedService.gridOptions);if(a&&this.translaterService?.translate)i=this.translaterService.translate(a||" ");else switch(e){case"commandTitle":i=o||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${l}COMMANDS`)||r?.TEXT_COMMANDS;break;case"columnTitle":i=o||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${l}COLUMNS`)||r?.TEXT_COLUMNS;break;case"forceFitTitle":i=o||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${l}FORCE_FIT_COLUMNS`)||r?.TEXT_FORCE_FIT_COLUMNS;break;case"syncResizeTitle":i=o||s&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${l}SYNCHRONOUS_RESIZE`)||r?.TEXT_SYNCHRONOUS_RESIZE;break;default:i=o}return i}readjustFrozenColumnIndexWhenNeeded(e,t,i){if(e>=0){const n=i.findIndex((e=>e.id===this.sharedService.frozenVisibleColumnId));n>=0&&n!==e&&(this.sharedService.gridOptions.frozenColumn=n,this.sharedService.slickGrid.setOptions({frozenColumn:n})),Array.isArray(i)&&Array.isArray(t)&&i.length!==t.length&&this.sharedService.slickGrid.setColumns(i)}}refreshBackendDataset(e){let t=this.sharedService.gridOptions;e&&(t={...this.sharedService.gridOptions,...e},this.sharedService.gridOptions=t),this.backendUtilities?.refreshBackendDataset(t)}runOverrideFunctionWhenExists(e,t){return"function"!==typeof e||!!e.call(this,t)}sortItems(e,t){Array.isArray(e)&&e.sort(((e,i)=>e&&i&&e.hasOwnProperty(t)&&i.hasOwnProperty(t)?e[t]-i[t]:0))}translateItems(e,t,i){if(Array.isArray(e))for(const n of e)n.hasOwnProperty(t)&&(n[i]=this.translaterService?.translate?.(n[t]))}translateMenuItemsFromTitleKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"commandItems";for(const i of e)"object"===typeof i&&(i.titleKey&&(i.title=this.translateWhenEnabledAndServiceExist(`${i.titleKey}`,`TEXT_${i.titleKey}`)),i.subMenuTitleKey&&(i.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${i.subMenuTitleKey}`,`TEXT_${i.subMenuTitleKey}`))),Array.isArray(i?.[t])&&this.translateMenuItemsFromTitleKey(i?.[t])}translateWhenEnabledAndServiceExist(e,t,i){let n="";const s=this.sharedService?.gridOptions,r=s?.locales??g.locales;return n=i||(s.enableTranslate&&this.translaterService?.translate?this.translaterService.translate(e||" "):t in r?r[t]:t),n}}class Xr{constructor(e){this.pluginName="AutoTooltips",this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this._eventHandler=new ii,this._addonOptions=e}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e){this._addonOptions={...this._defaults,...this.addonOptions},this._grid=e,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}handleMouseEnter(e){const t=this._grid.getCellFromEvent(e);if(t){let e,i=this._grid.getCellNode(t.row,t.cell);this._addonOptions&&i&&(!i.title||this._addonOptions?.replaceExisting)&&(i.clientWidth<i.scrollWidth?(e=i.textContent?.trim()??"",this._addonOptions?.maxToolTipLength&&e.length>this._addonOptions?.maxToolTipLength&&(e=e.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):e="",i.title=e),i=null}}handleHeaderMouseEnter(e,t){const i=t.column;let n;const s=e.target;if(s&&(n=s.closest(".slick-header-column"),n&&!i?.toolTip)){const e=s.clientWidth<n.clientWidth?i?.name??"":"";n.title=Ze(te(e,"innerHTML"))}n=null}}class Qr{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new ii,this._bindingEventService=new Vt}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){return this._grid?.getOptions()??{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(e,t){this._grid=e,this.createUndoRedoBuffer(),this._cellSelectionModel=new oo,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions={...this.getDefaultOptions(),...t},this._cellExternalCopyManagerPlugin=new eo,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,((e,t)=>{this._addonOptions&&"function"===typeof this._addonOptions.onCopyCells&&this._addonOptions.onCopyCells(e,t)})),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,((e,t)=>{this._addonOptions&&"function"===typeof this._addonOptions.onCopyCancelled&&this._addonOptions.onCopyCancelled(e,t)})),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,((e,t)=>{this._addonOptions&&"function"===typeof this._addonOptions.onPasteCells&&this._addonOptions.onPasteCells(e,t)}))}dispose(){this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),this._cellSelectionModel?.dispose(),this._cellExternalCopyManagerPlugin?.dispose()}createUndoRedoBuffer(){let e=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:t=>{this._commandQueue[e]=t,e++,t.execute()},undo:()=>{if(0===e)return;e--;const t=this._commandQueue[e];t&&li.cancelCurrentEdit()&&t.undo()},redo:()=>{if(e>=this._commandQueue.length)return;const t=this._commandQueue[e];e++,t&&li.cancelCurrentEdit()&&t.execute()}}}getDefaultOptions(){var e=this;let t=0;return{clipboardCommandHandler:e=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,e)},dataItemColumnValueExtractor:function(t,i){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e._grid.getActiveCell(),o=e._grid.getCellEditor()&&r?.row===n&&r?.cell===s,a=e.addonOptions?.copyActiveEditorCell||!1;if(!e.gridOptions.editable||!i.editor||!o||a){const r=void 0!==i.exportWithFormatter?i.exportWithFormatter:e.gridOptions.textExportOptions?.exportWithFormatter;if(i.formatter&&r){const r=i.formatter(n,s,t[i.field],i,t,e._grid),o=Fe(r)?r:r.html||r.text;if(i.sanitizeDataExport||e.gridOptions.textExportOptions?.sanitizeDataExport){return Ze((o instanceof HTMLElement?o.innerHTML:o)??"")}return r}}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:e=>{for(let i=0;i<e;i++)this._grid.getData().addItem({[this.gridOptions.datasetIdPropertyName||"id"]:"newRow_"+t++})},replaceNewlinesWith:!1,removeDoubleQuotesOnPaste:!1}}handleBodyKeyDown(e){"Z"===e.key&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}}class Zr{init(e){this._grid=e,e.hasDataView()&&(this._dataView=e.getData())}getDataItem(e){return this._dataView?this._dataView.getItem(e):this._grid.getDataItem(e)}getDataItems(){return this._dataView?this._dataView.getItems():this._grid.getData()}getDataLength(){return this._dataView?this._dataView.getItemCount():this._grid.getDataLength()}setDataItems(e){this._dataView?this._dataView.setItems(e):this._grid.setData(e)}}const Jr=()=>{};class eo{constructor(){this.pluginName="CellExternalCopyManager",this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this._dataWrapper=new Zr,this.onCopyCells=new ti("onCopyCells"),this.onCopyCancelled=new ti("onCopyCancelled"),this.onPasteCells=new ti("onPasteCells"),this.onBeforePasteCell=new ti("onBeforePasteCell"),this._eventHandler=new ii}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e,t){this._grid=e,this._dataWrapper.init(e),this._addonOptions={...this._addonOptions,...t},this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0;const i=e.getPubSubService();i&&ai.addSlickEventPubSubWhenDefined(i,this),this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));const n=e.getSelectionModel();if(!n)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new SlickCellSelectionModel())");this._eventHandler.subscribe(n.onSelectedRangesChanged,(()=>{this._grid.getEditorLock().isActive()||document.activeElement?.classList.contains("slick-filter")||this._grid.focus()})),e&&"function"===typeof this._addonOptions?.onBeforePasteCell&&this._eventHandler.subscribe(this.onBeforePasteCell,((t,i)=>{const n=e.getColumns()[i.cell],s={row:i.row,cell:i.cell,dataView:e.getData(),grid:e,columnDef:n,dataContext:e.getDataItem(i.row)};return this._addonOptions.onBeforePasteCell?.(t,s)}))}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(e){if("function"===typeof this._addonOptions.headerColumnValueExtractor){const t=te(this._addonOptions.headerColumnValueExtractor(e),"innerHTML");if(t)return Ze(t)}return te(e.name||"","innerHTML")}getDataItemValueForColumn(e,t,i,n,s){if("function"===typeof this._addonOptions.dataItemColumnValueExtractor){const s=this._addonOptions.dataItemColumnValueExtractor(e,t,i,n);if(s)return s instanceof HTMLElement?Ze(s.innerHTML):s}let r="";if(t)if(t.editorClass){const i=document.createElement("p"),n=new t.editorClass({container:i,column:t,event:s,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:Jr,commitChanges:Jr});n.loadValue(e),r=n.serializeValue(),n.destroy(),i.remove()}else r=e[t.field||""];return r}setDataItemValueForColumn(e,t,i){if(!t?.denyPaste){if(this._addonOptions.dataItemColumnValueSetter){const n=this._addonOptions.dataItemColumnValueSetter(e,t,i);if(!0!==n)return n}if(t.editorClass){const n=document.createElement("div"),s=new t.editorClass({container:n,column:t,event:null,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:Jr,commitChanges:Jr});s.loadValue(e);const r=s.validate(void 0,i);if(!r.valid){const e=this._grid.getActiveCell();this._grid.onValidationError.notify({editor:s,cellNode:this._grid.getActiveCellNode(),validationResults:r,row:e?.row,cell:e?.cell,column:t,grid:this._grid})}s.applyValue(e,i),s.destroy(),n.remove()}else e[t.field]=i}}setIncludeHeaderWhenCopying(e){this._addonOptions.includeHeaderWhenCopying=e}createTextBox(e){const t=Q("textarea",{value:e,style:{position:"absolute",opacity:"0",top:`${document.documentElement.scrollTop||document.body.scrollTop}px`}},this._bodyElement);return t.select(),t}decodeTabularData(e,t){const i=e.getColumns(),n=t.value.split(/[\n\f\r](?=(?:[^"]*"[^"]*")*[^"]*$)/);""===n[n.length-1]&&n.pop();let s=0;const r=[];this._bodyElement.removeChild(t);for(const f of n)f.startsWith('"')&&f.endsWith('"')?r[s++]=[f.replaceAll("\n",this._addonOptions.replaceNewlinesWith||"\n").replaceAll("\r","").replaceAll('"',this._addonOptions.removeDoubleQuotesOnPaste?"":'"')]:r[s++]=f.split("\t");const o=this._grid.getActiveCell(),a=this._grid.getSelectionModel()?.getSelectedRanges(),l=a?.length?a[0]:null;let d,c;if(l)d=l.fromRow,c=l.fromCell;else{if(!o)return;d=o.row,c=o.cell}let h=!1,u=r.length,p=r.length?r[0].length:0;1===r.length&&1===r[0].length&&l&&(h=!0,u=l.toRow-l.fromRow+1,p=l.toCell-l.fromCell+1);const m=this._dataWrapper.getDataLength()-d;if(m<u&&"function"===typeof this._addonOptions.newRowCreator){const e=u-m,t=this._dataWrapper.getDataLength();this._addonOptions.newRowCreator(e);const i=this._dataWrapper.getDataLength();i!==t+e&&console.warn(`[Slickgrid-Universal] The "newRowCreator" did not add the correct amount of rows, it should add "${e}" rows but it added "${i-t}" rows`),this._grid.render()}if(d+u>this._dataWrapper.getDataLength()&&"function"===typeof this._addonOptions.newRowCreator){const e=d+u-this._dataWrapper.getDataLength();this._addonOptions.newRowCreator(e)}const g={isClipboardCommand:!0,clippedRange:r,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:h,activeRow:d,activeCell:c,destH:u,destW:p,maxDestY:this._dataWrapper.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{g.h=0;for(let t=0;t<g.destH;t++){g.oldValues[t]=[],g.w=0,g.h++;let e=0;for(let n=0;n<g.destW;n++){const s=d+t,o=c+n,a=i[o];if(a.hidden)g.destW++,e++;else if(g.w++,s<g.maxDestY&&o<g.maxDestX){const i=this._dataWrapper.getDataItem(s);if(!1===this._grid.triggerEvent(this.onBeforePasteCell,{row:s,cell:o,dt:i,column:a,target:"grid"}).getReturnValue())continue;g.oldValues[t][n-e]=i[a.field],h?this.setDataItemValueForColumn(i,a,r[0][0]):this.setDataItemValueForColumn(i,a,r[t]?r[t][n-e]:""),this._grid.updateCell(s,o),this._grid.onCellChange.notify({row:s,cell:o,item:i,grid:this._grid,column:{}})}}}const e=new ni(d,c,d+g.h-1,c+g.w-1);this.markCopySelection([e]),this._grid.getSelectionModel()?.setSelectedRanges([e]),this.onPasteCells.notify({ranges:[e]})},undo:()=>{for(let t=0;t<g.destH;t++)for(let e=0;e<g.destW;e++){const n=d+t,s=c+e;if(n<g.maxDestY&&s<g.maxDestX){const r=this._dataWrapper.getDataItem(n);h?this.setDataItemValueForColumn(r,i[s],g.oldValues[0][0]):this.setDataItemValueForColumn(r,i[s],g.oldValues[t][e]),this._grid.updateCell(n,s),this._grid.onCellChange.notify({row:n,cell:s,item:r,grid:this._grid,column:{}})}}const e=new ni(d,c,d+g.h-1,c+g.w-1);this.markCopySelection([e]),this._grid.getSelectionModel()?.setSelectedRanges([e]),this.onPasteCells.notify({ranges:[e]}),"function"===typeof this._addonOptions.onPasteCells&&this._addonOptions.onPasteCells(new ei,{ranges:[e]})}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(g):g.execute()}handleKeyDown(e){let t;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if("Escape"===e.key&&this._copiedRanges&&(e.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),"function"===typeof this._addonOptions.onCopyCancelled&&this._addonOptions.onCopyCancelled(e,{ranges:this._copiedRanges}),this._copiedRanges=null),("c"===e.key||"Insert"===e.key)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey&&("function"===typeof this._onCopyInit&&this._onCopyInit.call(this),t=this._grid.getSelectionModel()?.getSelectedRanges()??[],0!==t.length)){this._copiedRanges=t,this.markCopySelection(t),this.onCopyCells.notify({ranges:t}),"function"===typeof this._addonOptions.onCopyCells&&this._addonOptions.onCopyCells(e,{ranges:t});const i=this._grid.getColumns();let n="";for(let s=0;s<t.length;s++){const r=t[s],o=[];for(let t=r.fromRow;t<r.toRow+1;t++){const n=[],s=this._dataWrapper.getDataItem(t);if(0===o.length&&this._addonOptions.includeHeaderWhenCopying){const e=[];for(let t=r.fromCell;t<r.toCell+1;t++)if(i[t]){(i[t].name instanceof HTMLElement?Ze(i[t].name.innerHTML):i[t].name).length>0&&!i[t].hidden&&e.push(this.getHeaderValueForColumn(i[t]))}o.push(e.join("\t"))}for(let o=r.fromCell;o<r.toCell+1;o++)if(i[o]){(i[o].name instanceof HTMLElement?Ze(i[o].name.innerHTML):i[o].name).length>0&&!i[o].hidden&&n.push(this.getDataItemValueForColumn(s,i[o],t,o,e))}o.push(n.join("\t"))}n+=o.join("\r\n")+"\r\n"}if(window.clipboardData)return window.clipboardData.setData("Text",n),!0;{const e=document.activeElement,i=this.createTextBox(n);if(i.focus(),window.setTimeout((()=>{this._bodyElement.removeChild(i),e?e.focus():console.log("No element to restore focus to after copy?")}),this.addonOptions?.clipboardPasteDelay??100),"function"===typeof this._onCopySuccess){const e=1===t.length?t[0].toRow+1-t[0].fromRow:t.length;this._onCopySuccess(e)}return!1}}if(!this._addonOptions.readOnlyMode&&("v"===e.key&&(e.ctrlKey||e.metaKey)&&!e.shiftKey||"Insert"===e.key&&e.shiftKey&&!e.ctrlKey)){const e=this.createTextBox("");return window.setTimeout((()=>this.decodeTabularData(this._grid,e)),this.addonOptions?.clipboardPasteDelay??100),!1}}}markCopySelection(e){this.clearCopySelection();const t=this._grid.getColumns(),i={};for(const n of e)for(let e=n.fromRow;e<=n.toRow;e++){i[e]={};for(let s=n.fromCell;s<=n.toCell&&s<t.length;s++)i[e][t[s].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,i),window.clearTimeout(this._clearCopyTI),this._clearCopyTI=window.setTimeout((()=>this.clearCopySelection()),this.addonOptions?.clearCopySelectionDelay||2e3)}}class to{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new Vt,this._eventHandler=new ii}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){this._eventHandler?.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),this._commandTitleElm?.remove(),this._optionTitleElm?.remove(),this.disposeAllMenus(),ee(this._menuElm),this.menuElement?.remove(),this._menuElm?.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach((e=>e.remove()))}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach((e=>e.remove()))}setOptions(e){this._addonOptions={...this._addonOptions,...e}}addSubMenuTitleWhenExists(e,t){if("divider"!==e&&e?.subMenuTitle){const i=document.createElement("div");i.className="slick-menu-title",i.textContent=e.subMenuTitle;const n=e.subMenuTitleCssClass;n&&i.classList.add(...Z(n)),t.appendChild(i)}}populateCommandOrOptionItems(e,t,i,n,s,r,o){if(s&&n&&t)for(const a of n)this.populateSingleCommandOrOptionItem(e,t,i,a,s,r,o)}populateCommandOrOptionTitle(e,t,i,n){if(t){const s=n>0,r=this._menuElm?.querySelector(`.slick-${e}-header`)??Q("div",{className:`slick-${e}-header`}),o=`${e}Title`;s||(t?.[o]?(ee(r),this[`_${e}TitleElm`]=Q("span",{className:"slick-menu-title",textContent:t[o]}),r.appendChild(this[`_${e}TitleElm`]),r.classList.add("with-title")):r.classList.add("no-title"),i.appendChild(r))}}populateSingleCommandOrOptionItem(e,t,i,n,s,r,o){let a=null;if(s&&n&&t){const t=s?.level||0,l="headerButtons"===this._camelPluginName?"":"-item",d=`${this._menuCssPrefix}${l}`;let c=!0,h=!0;if("object"===typeof n&&(c=this.extensionUtility.runOverrideFunctionWhenExists(n.itemVisibilityOverride,s),h=this.extensionUtility.runOverrideFunctionWhenExists(n.itemUsabilityOverride,s)),!c)return null;if("object"===typeof n&&n.itemUsabilityOverride&&(n.disabled=!h),a=Q("li",{className:d,role:"menuitem"}),"object"===typeof n&&Re(n[e])&&(a.dataset[e]=n?.[e]),i&&i.appendChild(a),"object"===typeof n&&n.divider||"divider"===n)return a.classList.add(`${d}-divider`),a;if(n.disabled&&a.classList.add(`${d}-disabled`),(n.hidden||n.showOnHover)&&a.classList.add(`${d}-hidden`),n.cssClass&&a.classList.add(...Z(n.cssClass)),n.tooltip&&(a.title=n.tooltip),"headerButtons"!==this._camelPluginName){const e=Q("div",{className:`${this._menuCssPrefix}-icon`});a.appendChild(e),n.iconCssClass?e.classList.add(...Z(n.iconCssClass)):n.commandItems||n.optionItems||(e.textContent="\u25e6");const t=Q("span",{className:`${this._menuCssPrefix}-content`,textContent:"object"===typeof n&&n.title||""},a);n.textCssClass&&t.classList.add(...Z(n.textCssClass))}const u=t>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(a,"click",(i=>r.call(this,i,e,n,t,s?.column)),void 0,u),"mouseover"===this._addonOptions?.subMenuOpenByEvent&&"function"===typeof o&&this._bindEventService.bind(a,"mouseover",(i=>o.call(this,i,e,n,t,s?.column)),void 0,u),n.commandItems||n.optionItems){const e=document.createElement("span");e.className="sub-item-chevron",this._addonOptions.subItemChevronClass?e.classList.add(...Z(this._addonOptions.subItemChevronClass)):e.textContent="\u2b9e",a.classList.add("slick-submenu-item"),a.appendChild(e)}}return a}}class io extends to{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(e){this.menuElement?.remove(),this._menuElm=void 0;const t=this.grid.getCellFromEvent(e);if(t){this._currentCell=t.cell??0,this._currentRow=t.row??0;const i=this._addonOptions?.commandItems||[],n=this._addonOptions?.optionItems||[],s={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(e,s),"function"===typeof e.stopPropagation&&(this.pubSubService.publish(`on${ze(this._camelPluginName)}BeforeMenuShow`,s),"function"===typeof this.addonOptions?.onBeforeMenuShow&&!1===this.addonOptions.onBeforeMenuShow(e,s)))return;if(this._menuElm=this.createMenu(i,n),this._menuElm&&(this._menuElm.style.top=`${(e.pageY||0)+5}px`,this._menuElm.style.left=`${e.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${ze(this._camelPluginName)}AfterMenuShow`,s),"function"===typeof this.addonOptions?.onAfterMenuShow&&!1===this.addonOptions.onAfterMenuShow(e,s))return}return this._menuElm}createMenu(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const s=this.grid.getColumns()[this._currentCell],r=this.grid.getDataItem(this._currentRow),o=n?.command||n?.option;let a=1===i&&o?String(o).replace(/\s/g,""):"";a&&(this._subMenuParentId=a),i>1&&(a=this._subMenuParentId);let l=!0,d=!0;if("contextMenu"===this._camelPluginName){if(l=this.checkIsColumnAllowed(this._addonOptions?.optionShownOverColumnIds??[],s.id),d=this.checkIsColumnAllowed(this._addonOptions?.commandShownOverColumnIds??[],s.id),!s||(!d||!e.length)&&(!l||!t.length))return void this.hideMenu()}else if(!s||!s.cellMenu||!e.length&&!t.length)return;const c=`${this.menuCssClass} slick-menu-level-${i} ${this.gridUid}`,h=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(h){if(h.dataset.subMenuParent===a)return h;this.disposeSubMenus()}const u=document.createElement("div");u.className=c,i>0&&(u.classList.add("slick-submenu"),this.gridOptions?.darkMode&&u.classList.add("slick-dark-mode"),a&&(u.dataset.subMenuParent=a));const p=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${this.addonOptions.maxHeight??0}px`,m=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${this.addonOptions.maxWidth??0}px`;p&&(u.style.maxHeight=p),m&&(u.style.maxWidth=m),this.addonOptions?.width&&(u.style.width=ae(this.addonOptions?.width));const g=Q("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"\xd7",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&l&&t.length>0){const e=Q("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},u);this.populateCommandOrOptionTitle("option",this.addonOptions,e,i),!this.addonOptions.hideCloseButton&&i<1&&this.populateCommandOrOptionCloseBtn("option",g,e),n&&i>0&&this.addSubMenuTitleWhenExists(n,e),this.populateCommandOrOptionItems("option",this.addonOptions,e,t,{cell:this._currentCell,row:this._currentRow,column:s,dataContext:r,grid:this.grid,level:i},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&d&&e.length>0){const o=Q("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},u);this.populateCommandOrOptionTitle("command",this.addonOptions,o,i),!this.addonOptions.hideCloseButton&&i<1&&(!l||0===t.length||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",g,o),n&&i>0&&this.addSubMenuTitleWhenExists(n,o),this.populateCommandOrOptionItems("command",this.addonOptions,o,e,{cell:this._currentCell,row:this._currentRow,column:s,dataContext:r,grid:this.grid,level:i},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return i++,u}closeMenu(e,t){if(this.menuElement){if("function"===typeof this.addonOptions?.onBeforeMenuClose&&!1===this.addonOptions.onBeforeMenuClose(e,t))return;this.hideMenu()}}hideMenu(){this.menuElement?.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(e,t){return!(e?.length>0)||e.findIndex((e=>e===t))>=0}handleBodyMouseDown(e){if(this.menuElement){let t=!1;const i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this.menuElement!==e.target&&!t&&!e.defaultPrevented||"close"===e.target.className&&i)&&this.closeMenu(e,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(e){e.defaultPrevented||this.closeMenu(e,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;void 0===i?.[t]||"divider"===i||i.disabled||i.divider||(i.commandItems||i.optionItems?(this.repositionSubMenu(i,t,n,e),this._lastMenuTypeClicked=t):0===n&&this.disposeSubMenus())}handleMenuItemCommandClick(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(void 0!==i?.[t]&&"divider"!==i&&!i.disabled&&!i.divider&&void 0!==this._currentCell&&void 0!==this._currentRow){if("option"===t&&!this.grid.getEditorLock().commitCurrentEdit())return;const s=this._currentCell,r=this._currentRow,o=this.grid.getColumns()[this._currentCell],a=this.grid.getDataItem(this._currentRow),l=void 0!==i[t]?i[t]:"";if(void 0===l||i[`${t}Items`])(i.commandItems||i.optionItems)&&this.repositionSubMenu(i,t,n,e);else{const n={cell:this._currentCell,row:this._currentRow,grid:this.grid,[t]:l,item:i,column:o,dataContext:a},d="command"===t?"onCommand":"onOptionSelected",c=`${this._camelPluginName}:${d}`;this.pubSubService.publish(c,n),"function"===typeof this._addonOptions?.[d]&&this._addonOptions[d](e,n),"function"===typeof i.action&&i.action.call(this,e,n),e.defaultPrevented||this.closeMenu(e,{cell:s,row:r,grid:this.grid})}this._lastMenuTypeClicked=t}}populateCommandOrOptionCloseBtn(e,t,i){this._bindEventService.bind(t,"click",(e=>this.handleCloseButtonClicked(e)),void 0,"parent-menu");const n=i.querySelector(`.slick-${e}-header`)??Q("div",{className:`slick-${e}-header`});n?.appendChild(t),i.appendChild(n),n.classList.add("with-close")}repositionSubMenu(e,t,i,n){(n.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==t)&&this.disposeSubMenus();const s=this.createMenu(e?.commandItems||[],e?.optionItems||[],i+1,e);s&&(s.style.display="block",document.body.appendChild(s),this.repositionMenu(n,s))}repositionMenu(e,t){const i=t?.classList.contains("slick-submenu"),n=i?e.target.closest(`.${this._menuCssPrefix}-item`):e.target.closest(".slick-cell");if(t&&n){t.style.top="0px",t.style.left="0px";const s=e?.touches?.[0]??e,r=ne(n);let o=n&&"cellMenu"===this._camelPluginName?r.left:s.pageX,a=n&&"cellMenu"===this._camelPluginName?r.top:s.pageY;i&&"contextMenu"===this._camelPluginName&&(o=r.left,a=r.top);const l=n.offsetWidth||0,d=t?.offsetHeight||0,c=t?.offsetWidth||this._addonOptions.width||0,h=this.gridOptions.rowHeight||0,u=Number(this._addonOptions.autoAdjustDropOffset||0),p=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){const{bottom:e,top:s}=X(n),r=e+u-h;"top"===(r<d&&s-u+h>r?"top":"bottom")||"top"===this._addonOptions.dropDirection?(t.classList.remove("dropdown"),t.classList.add("dropup"),a-=i?d-u-n.clientHeight:d-u):(t.classList.remove("dropup"),t.classList.add("dropdown"),a+=u,"cellMenu"===this._camelPluginName&&(a+=i?u:h+u))}if(this._addonOptions.autoAlignSide||"left"===this._addonOptions.dropSide){const e=this.grid.getGridPosition();let s=o+Number(c);i&&(s+=n.clientWidth);const r=document.documentElement.clientWidth;"left"===(s>=e.width||s>=r?"left":"right")||!i&&"left"===this._addonOptions.dropSide?(t.classList.remove("dropright"),t.classList.add("dropleft"),"cellMenu"!==this._camelPluginName||i?o-=Number(c)-p:o-=Number(c)-l-p):(t.classList.remove("dropleft"),t.classList.add("dropright"),o+=i?p+n.offsetWidth:p)}t.style.top=`${a}px`,t.style.left=`${o}px`}}}class no extends io{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.pluginName="CellMenu",this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(i.gridOptions.cellMenu)}init(e){this._addonOptions={...this._defaults,...e},this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){const e=this.sharedService?.gridOptions,t=this.sharedService.allColumns;e?.enableTranslate&&Array.isArray(t)&&t.forEach((e=>{if(e?.cellMenu&&(Array.isArray(e.cellMenu.commandItems)||Array.isArray(e.cellMenu.optionItems))){const t=e.cellMenu.commandItems||[],i=e.cellMenu.optionItems||[];e.cellMenu.commandTitleKey&&(e.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(e.cellMenu.commandTitleKey,"TEXT_COMMANDS")||e.cellMenu.commandTitle),e.cellMenu.optionTitleKey&&(e.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(e.cellMenu.optionTitleKey,"TEXT_COMMANDS")||e.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(t,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(i,"optionItems")}}))}handleCellClick(e,t){this.disposeAllMenus();const i=this.grid.getCellFromEvent(e);if(i){const n=this.grid.getDataItem(i.row),s=this.grid.getColumns()[i.cell];s?.cellMenu&&!this.gridOptions.cellMenu?.activateCellOnMenuClick&&e.preventDefault(),this._addonOptions={...this._addonOptions,...s.cellMenu};const r=t||{};if(r.column=s,r.dataContext=n,r.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,r))return;this._menuElm=this.createParentMenu(e),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block",this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode")),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(e){e.forEach((e=>{e?.cellMenu?.commandItems&&this.extensionUtility.sortItems(e.cellMenu.commandItems||[],"positionOrder"),e?.cellMenu?.optionItems&&this.extensionUtility.sortItems(e.cellMenu.optionItems||[],"positionOrder")}))}}class so{constructor(e,t){this.grid=e,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._options=xe(this._defaults,t)}get addonOptions(){return this._options}get addonElement(){return this._elem}destroy(){this.hide()}init(){}hide(){this._elem?.remove(),this._elem=null}show(e){this._elem||(this._elem=Q("div",{className:this._options.selectionCssClass}),Object.keys(this._options.selectionCss).forEach((e=>{this._elem.style[e]=this._options.selectionCss[e]})),this._elem.style.position="absolute",this.grid.getActiveCanvasNode()?.appendChild(this._elem));const t=this.grid.getCellNodeBox(e.fromRow,e.fromCell),i=this.grid.getCellNodeBox(e.toRow,e.toCell);return t&&i&&this._options?.offset&&(this._elem.style.top=`${t.top+this._options.offset.top}px`,this._elem.style.left=`${t.left+this._options.offset.left}px`,this._elem.style.height=`${i.bottom-t.top+this._options.offset.height}px`,this._elem.style.width=`${i.right-t.left+this._options.offset.width}px`),this._elem}}class ro{constructor(e){this.pluginName="CellRangeSelector",this._currentlySelectedRange=null,this._canvas=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.onBeforeCellRangeSelected=new ti("onBeforeCellRangeSelected"),this.onCellRangeSelecting=new ti("onCellRangeSelecting"),this.onCellRangeSelected=new ti("onCellRangeSelected"),this._eventHandler=new ii,this._options=xe(this._defaults,e)}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridUid(){return this._gridUid||(this._grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(e){this._grid=e,this._decorator=this._options.cellDecorator||new so(e,this._options),this._canvas=e.getCanvasNode(),this._gridOptions=e.getOptions(),this._gridUid=e.getUID();const t=e.getPubSubService();t&&ai.addSlickEventPubSubWhenDefined(t,this),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),ee(this._activeCanvas),ee(this._canvas),this._decorator?.destroy(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(e,t){const i=e?.touches?.[0]??e,n=this._activeViewport.scrollLeft,s=this._activeViewport.scrollTop,r=n+this._viewportWidth,o=s+this._viewportHeight,a=ne(this._activeViewport),l=a.left,d=a.top,c=l+this._viewportWidth,h=d+this._viewportHeight,u={e:e,dd:t,viewport:{left:n,top:s,right:r,bottom:o,offset:{left:l,top:d,right:c,bottom:h}},offset:{x:0,y:0},isOutsideViewport:!1};return i.pageX<l?u.offset.x=i.pageX-l:i.pageX>c&&(u.offset.x=i.pageX-c),i.pageY<d?u.offset.y=d-i.pageY:i.pageY>h&&(u.offset.y=h-i.pageY),u.isOutsideViewport=!!u.offset.x||!!u.offset.y,u}stopIntervalTimer(){this._autoScrollTimerId&&(window.clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(e,t){if(!this._dragging&&!this._gridOptions.enableRowMoveManager)return;this._gridOptions.enableRowMoveManager||e.stopImmediatePropagation();const i=e.getNativeEvent();if(this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(i,t),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(i,t)}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let e=0,t=0;this._autoScrollTimerId=window.setInterval((()=>{let i=!1,n=!1;this._draggingMouseOffset.offset.x?(e+=this.addonOptions.minIntervalToShowNextCell,i=e>=this._xDelayForNextCell):e=0,this._draggingMouseOffset.offset.y?(t+=this.addonOptions.minIntervalToShowNextCell,n=t>=this._yDelayForNextCell):t=0,(i||n)&&(i&&(e=0),n&&(t=0),this.handleDragToNewPosition(i,n))}),this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(e,t){let i=this._draggingMouseOffset.e.pageX,n=this._draggingMouseOffset.e.pageY;const s=this._draggingMouseOffset.offset.x,r=this._draggingMouseOffset.offset.y,o=this._draggingMouseOffset.viewport.offset;e&&s&&(i=s>0?o.right+this._moveDistanceForOneCell.x:o.left-this._moveDistanceForOneCell.x),t&&r&&(n=r>0?o.top-this._moveDistanceForOneCell.y:o.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:i,pageY:n},this._draggingMouseOffset.dd)}handleDragTo(e,t){const i=e?.touches?.[0]??e,n=this._grid.getCellFromPoint(i.pageX-ne(this._activeCanvas).left+this._columnOffset,i.pageY-ne(this._activeCanvas).top+this._rowOffset);if(void 0!==n){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&n.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&n.cell<=this._gridOptions.frozenColumn))return;if(this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&n.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&n.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){const e=this._grid.getCellNodeBox(n.row,n.cell);if(e){const t=this._draggingMouseOffset.viewport;(e.left<t.left||e.right>t.right||e.top<t.top||e.bottom>t.bottom)&&this._grid.scrollCellIntoView(n.row,n.cell)}}if(!this._grid.canCellBeSelected(n.row,n.cell))return;if(t?.range){t.range.end=n;const e=new ni(t.range.start.row??0,t.range.start.cell??0,n.row,n.cell);this._decorator.show(e),this.onCellRangeSelecting.notify({range:e})}}}handleDragEnd(e,t){this._decorator.hide(),this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),this.stopIntervalTimer(),this.onCellRangeSelected.notify({range:new ni(t.range.start.row??0,t.range.start.cell??0,t.range.end.row,t.range.end.cell)}))}handleDragInit(e){this._activeCanvas=this._grid.getActiveCanvasNode(e),this._activeViewport=this._grid.getActiveViewportNode(e);const t=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-t.width,this._viewportHeight=this._activeViewport.offsetHeight-t.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){const e=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=document.querySelector(e)?.clientHeight??0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`)?.clientWidth??0);const i=this._grid.getCellFromEvent(e),n=this._grid.getActiveCell();this._grid.getEditorLock().isActive()&&n&&i&&n.row===i.row&&n.cell===i.cell||(e.stopImmediatePropagation(),e.preventDefault())}handleDragStart(e,t){const i=this._grid.getCellFromEvent(e);if(i&&!1!==this.onBeforeCellRangeSelected.notify(i).getReturnValue()&&this._grid.canCellBeSelected(i.row,i.cell)&&(this._dragging=!0,e.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();const n=ne(this._canvas);let s=t.startX-n.left;this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(s+=this._scrollLeft);let r=t.startY-n.top;this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(r+=this._scrollTop);const o=this._grid.getCellFromPoint(s,r);return t.range={start:o,end:{}},this._currentlySelectedRange=t.range,this._decorator.show(new ni(o.row,o.cell))}handleScroll(e,t){this._scrollTop=t.scrollTop,this._scrollLeft=t.scrollLeft}}class oo{constructor(e){this.pluginName="CellSelectionModel",this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new ti("onSelectedRangesChanged"),this._eventHandler=new ii,this._selector=void 0===e||void 0===e.cellRangeSelector?new ro({selectionCss:{border:"2px solid black"}}):e.cellRangeSelector,this._addonOptions=e}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(e){this._grid=e,void 0!==this._addonOptions&&void 0!==this._addonOptions.cellRangeSelector||(this._selector=new ro({selectionCss:{border:"2px solid "+(this._grid.getOptions().darkMode?"white":"black")}})),e.hasDataView()&&(this._dataView=e.getData()),this._addonOptions={...this._defaults,...this._addonOptions};const t=e.getPubSubService();t&&this.onSelectedRangesChanged.setPubSubService(t),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),e.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),this._grid?.unregisterPlugin(this._selector),this._selector?.dispose()}getSelectedRanges(){return this._ranges}rangesAreEqual(e,t){let i=e.length!==t.length;if(!i)for(let n=0;n<e.length;n++)if(e[n].fromCell!==t[n].fromCell||e[n].fromRow!==t[n].fromRow||e[n].toCell!==t[n].toCell||e[n].toRow!==t[n].toRow){i=!0;break}return!i}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(e){const t=[];for(let i=0;i<e.length;i++){const n=e[i];this._grid.canCellBeSelected(n.fromRow,n.fromCell)&&this._grid.canCellBeSelected(n.toRow,n.toCell)&&t.push(n)}return t}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SlickCellSelectionModel.setSelectedRanges";if((!this._ranges||0===this._ranges.length)&&(!e||0===e.length))return;const i=!this.rangesAreEqual(this._ranges,e);if(this._ranges=this.removeInvalidRanges(e),i){const e=new ei(new CustomEvent("click",{detail:{caller:t}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,e)}}handleActiveCellChange(e,t){this._prevSelectedRow=void 0;const i=Re(t.cell),n=Re(t.row);this._addonOptions?.selectActiveCell&&n&&i?this.setSelectedRanges([new ni(t.row,t.cell)]):this._addonOptions?.selectActiveCell&&(n||i)||this.setSelectedRanges([])}handleBeforeCellRangeSelected(e){const t=this._grid.getCellFromEvent(e),i=this._grid.getActiveCell();if(this._grid.getEditorLock().isActive()&&i&&t&&i.row===t.row&&i.cell===t.cell)return e.stopPropagation(),!1}handleCellRangeSelected(e,t){this._grid.setActiveCell(t.range.fromRow,t.range.fromCell,!1,!1,!0),this.setSelectedRanges([t.range])}isKeyAllowed(e){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End","a","A"].some((t=>t===e))}handleKeyDown(e){let t,i;const n=this._grid.getColumns().length,s=this._grid.getActiveCell();let r=0;if(r=this._dataView&&"getPagingInfo"in this._dataView?this._dataView?.getPagingInfo().pageSize||this._dataView.getLength():this._grid.getDataLength(),s&&(e.shiftKey||e.ctrlKey)&&!e.altKey&&this.isKeyAllowed(e.key)&&(t=this.getSelectedRanges().slice(),t.length||t.push(new ni(s.row,s.cell)),i=t.pop(),"function"===typeof i?.contains)){i.contains(s.row,s.cell)||(i=new ni(s.row,s.cell));let o,a=i.toRow-i.fromRow,l=i.toCell-i.fromCell,d=0;e.ctrlKey&&"a"===e.key?.toLowerCase()&&(this._grid.setActiveCell(0,0,!1,!1,!0),s.row=0,s.cell=0,o=n-1,d=r-1);const c=s.row===i.fromRow?1:-1,h=s.cell===i.fromCell?1:-1,u=e.key.startsWith("Arrow");u&&!e.ctrlKey?("ArrowLeft"===e.key?l-=h:"ArrowRight"===e.key?l+=h:"ArrowUp"===e.key?a-=c:"ArrowDown"===e.key&&(a+=c),d=s.row+c*a):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this._grid.getViewportRowCount()),void 0===this._prevSelectedRow&&(this._prevSelectedRow=s.row),!e.ctrlKey&&e.shiftKey&&"Home"===e.key||e.ctrlKey&&e.shiftKey&&"ArrowLeft"===e.key?(o=0,d=s.row):!e.ctrlKey&&e.shiftKey&&"End"===e.key||e.ctrlKey&&e.shiftKey&&"ArrowRight"===e.key?(o=n-1,d=s.row):e.ctrlKey&&e.shiftKey&&"ArrowUp"===e.key?d=0:e.ctrlKey&&e.shiftKey&&"ArrowDown"===e.key?d=r-1:e.ctrlKey&&e.shiftKey&&"Home"===e.key?(o=0,d=0):e.ctrlKey&&e.shiftKey&&"End"===e.key?(o=n-1,d=r-1):"PageUp"===e.key?(this._prevSelectedRow>=0&&(d=this._prevSelectedRow-this._cachedPageRowCount),d<0&&(d=0)):"PageDown"===e.key&&(this._prevSelectedRow<=r-1&&(d=this._prevSelectedRow+this._cachedPageRowCount),d>r-1&&(d=r-1)),this._prevSelectedRow=d),o??=s.cell+h*l;const p=new ni(s.row,s.cell,d,o);if(this.removeInvalidRanges([p]).length){t.push(p);const e=c>0?p.toRow:p.fromRow,i=h>0?p.toCell:p.fromCell;u?(this._grid.scrollRowIntoView(e),this._grid.scrollCellIntoView(e,i,!1)):(this._grid.scrollRowIntoView(d),this._grid.scrollCellIntoView(d,i,!1))}else t.push(i);this.setSelectedRanges(t),e.preventDefault(),e.stopPropagation(),this._prevKeyDown=e.key}}}class ao{constructor(e){this.pluginName="RowSelectionModel",this._inHandler=!1,this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.onSelectedRangesChanged=new ti("onSelectedRangesChanged"),this._eventHandler=new ii,this._options={...this._defaults,...e}}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()}init(e){this._grid=e,this._options={...this._defaults,...this._options},this._selector=this.addonOptions.cellRangeSelector;const t=e.getPubSubService();t&&this.onSelectedRangesChanged.setPubSubService(t),!this._selector&&this._options.dragToSelect&&(this._selector=new ro({selectionCss:{border:"none"},autoScroll:this._options.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),this._selector?.destroy(),this._selector?.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SlickRowSelectionModel.setSelectedRanges";if((!this._ranges||0===this._ranges.length)&&(!e||0===e.length))return;this._ranges=e;const i=new ei(new CustomEvent("click",{detail:{caller:t}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,i)}getRowsRange(e,t){let i;const n=[];for(i=e;i<=t;i++)n.push(i);for(i=t;i<e;i++)n.push(i);return n}handleBeforeCellRangeSelected(e,t){let i=!1;if(this.gridOptions.enableRowMoveManager&&(i=this.isHandlerColumn(t.cell)??!1),this._grid.getEditorLock().isActive()||i)return e.stopPropagation(),!1;this._grid.setActiveCell(t.row,t.cell)}handleCellRangeSelected(e,t){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new ni(t.range.fromRow,0,t.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(e,t){this._options.selectActiveRow&&null!==t.row&&this.setSelectedRanges([new ni(t.row,0,t.row,this._grid.getColumns().length-1)])}handleClick(e){const t=this._grid.getCellFromEvent(e);if(!t||!this._grid.canCellBeActive(t.row,t.cell))return!1;if(!this.gridOptions.multiSelect||!e.ctrlKey&&!e.shiftKey&&!e.metaKey)return!1;let i=this.rangesToRows(this._ranges);const n=i.indexOf(t.row);if(-1===n&&(e.ctrlKey||e.metaKey))i.push(t.row),this._grid.setActiveCell(t.row,t.cell);else if(-1!==n&&(e.ctrlKey||e.metaKey))i=i.filter((e=>e!==t.row)),this._grid.setActiveCell(t.row,t.cell);else if(i.length&&e.shiftKey){const e=i.pop(),n=Math.min(t.row,e),s=Math.max(t.row,e);i=[];for(let t=n;t<=s;t++)t!==e&&i.push(t);i.push(e),this._grid.setActiveCell(t.row,t.cell)}const s=this.rowsToRanges(i);return this.setSelectedRanges(s),e.stopImmediatePropagation(),!0}handleKeyDown(e){const t=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&("ArrowUp"===e.key||"ArrowDown"===e.key)){let i,n=this.getSelectedRows();n.sort(((e,t)=>e-t)),n.length||(n=[t.row]);let s=n[0],r=n[n.length-1];if(i="ArrowDown"===e.key?t.row<r||s===r?++r:++s:t.row<r?--r:--s,i>=0&&i<this._grid.getDataLength()){this._grid.scrollRowIntoView(i);const e=this.rowsToRanges(this.getRowsRange(s,r));this.setSelectedRanges(e)}e.preventDefault(),e.stopPropagation()}}isHandlerColumn(e){const t=this._grid.getColumns()[e].behavior||"";return/move|selectAndMove/.test(t)}rangesToRows(e){const t=[];for(let i=0;i<e.length;i++)for(let n=e[i].fromRow;n<=e[i].toRow;n++)t.push(n);return t}rowsToRanges(e){const t=[],i=this._grid.getColumns().length-1;return e.forEach((e=>t.push(new ni(e,0,e,i)))),t}}const lo="mdi-icon-check",co="mdi-icon-uncheck";class ho{constructor(e,t){this.pubSubService=e,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,name:"",toolTip:"Select/Deselect All",width:30,reorderable:!1,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new Vt,this._eventHandler=new ii,this._addonOptions={...this._defaults,...t}}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){return this._grid?.getOptions()??{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(e){this._selectedRowsLookup=e}init(e){this._grid=e,this._isUsingDataView=!Array.isArray(e.getData()),this._isUsingDataView&&(this._dataView=e.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(e.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(e.onClick,this.handleClick.bind(this)).subscribe(e.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&(this._eventHandler.subscribe(e.onAfterSetColumns,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this))),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(e),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),this._rowSelectionModel&&this._grid.getSelectionModel()||(this._rowSelectionModel=new ao(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&window.setTimeout((()=>this.selectRows(this.gridOptions.preselectedRows||[]))),"function"===typeof this._addonOptions.selectableOverride&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(e,t){if(this._addonOptions={...this._defaults,...t.checkboxSelector},Array.isArray(e)&&t){const i=this.getColumnDefinition();if(!e.some((e=>e.id===i.id))){const n=t?.checkboxSelector?.columnIndexPosition??0;n>0?e.splice(n,0,i):e.unshift(i),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){if(this._addonOptions={...this._addonOptions,...e},this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?(this.hideSelectAllFromColumnHeaderTitleRow(),this._addonOptions.name&&this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name,"")):(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{const e=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");if(e){e.style.display="flex",e.ariaChecked=String(this._isSelectAllChecked);const t=e.querySelector('input[type="checkbox"]');t&&(t.ariaChecked=String(this._isSelectAllChecked),t.checked=this._isSelectAllChecked)}}}deSelectRows(e){const t=[];for(const i of e)this._selectedRowsLookup[i]&&(t[t.length]=i);this._grid.setSelectedRows(this._grid.getSelectedRows().filter((e=>t.indexOf(e)<0)),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(e){const t=[];for(const n of e)this._selectedRowsLookup[n]&&(t[t.length]=n);const i=this._grid.getSelectedRows()?.concat(t);this._grid.setSelectedRows(i)}createCheckboxElement(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment,n=Q("label",{className:"checkbox-selector-label",htmlFor:e}),s=Q("div",{className:"icon-checkbox-container"});return s.appendChild(Q("input",{id:e,type:"checkbox",checked:t,ariaChecked:String(t)})),s.appendChild(Q("div",{className:`mdi ${t?lo:co}`})),n.appendChild(s),i.appendChild(n),i}getColumnDefinition(){const e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?this._addonOptions.name||"":this.createCheckboxElement(`header-selector${this._selectAll_UID}`),toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:e,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,reorderable:this._addonOptions.reorderable,sortable:!1,width:this._addonOptions.width||30,maxWidth:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name||"","")}hideSelectAllFromColumnHeaderFilterRow(){const e=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(e){this.toggleRowSelectionWithEvent(null,e)}toggleRowSelectionWithEvent(e,t){const i=this._grid.getDataItem(t);if(!this.checkSelectableOverride(t,i,this._grid))return;const n=this._grid.getSelectedRows();"function"===typeof this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(e,{row:t,previousSelectedRows:n});const s=this._selectedRowsLookup[t]?this._grid.getSelectedRows().filter((e=>e!==t)):this._grid.getSelectedRows().concat(t);this._grid.setSelectedRows(s,"click.toggle"),this._grid.setActiveCell(t,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(e,{row:t,previousSelectedRows:n})}selectableOverride(e){this._selectableOverride=e}addCheckboxToFilterHeaderRow(e){this._eventHandler.subscribe(e.onHeaderRowCellRendered,((e,t)=>{if(t.column.field===(this._addonOptions.field||"_checkbox_selector")){ee(t.node);const e=`header-filter-selector${this._selectAll_UID}`,i=Q("label",{id:"filter-checkbox-selectall-container",htmlFor:e}),n=Q("div",{className:"icon-checkbox-container"});n.appendChild(Q("input",{id:e,type:"checkbox",ariaChecked:"false"})),n.appendChild(Q("div",{className:"mdi mdi-icon-uncheck"})),i.appendChild(n),t.node.appendChild(i),this._headerRowNode=t.node,this._headerRowNode.classList.add("checkbox-header"),this._bindEventService.bind(i,"click",(e=>this.handleHeaderClick(e,t)))}}))}checkboxSelectionFormatter(e,t,i,n,s,r){if(s&&this.checkSelectableOverride(e,s,r)){const t=this.createUID()+e;return this.createCheckboxElement(`selector${t}`,!!this._selectedRowsLookup[e])}return null}checkSelectableOverride(e,t,i){return"function"!==typeof this._selectableOverride||this._selectableOverride(e,t,i)}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(null===this._checkboxColumnCellIndex){this._checkboxColumnCellIndex=0;const e=this._grid.getColumns();for(let t=0;t<e.length;t++)e[t].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=t)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){const e=this._dataView.getAllSelectedFilteredIds(),t=this._dataView.getFilteredItems();let i=0;if("function"===typeof this._selectableOverride&&e.length>0)for(let n=0;n<this._dataView.getItemCount();n++){const e=this._dataView.getItemByIdx(n),s=this._dataView.getIdPropertyName(),r=e[s];t.findIndex((e=>e[s]===r))>=0&&!this.checkSelectableOverride(n,e,this._grid)&&i++}if(this._isSelectAllChecked=e.length+i>=t.length,this._addonOptions.hideInColumnTitleRow||this._addonOptions.hideSelectAllCheckbox||this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){const e=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`),t=this.headerRowNode?.querySelector(".icon-checkbox-container .mdi");e&&(e.ariaChecked=String(this._isSelectAllChecked),e.checked=this._isSelectAllChecked),t&&(t.className=`mdi ${this._isSelectAllChecked?lo:co}`)}}handleClick(e,t){if(this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&"checkbox"===e.target.type){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();this.toggleRowSelectionWithEvent(e,t.row),e.stopPropagation(),e.stopImmediatePropagation()}}handleHeaderClick(e,t){if(t.column.id===this._addonOptions.columnId&&"checkbox"===e.target.type){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();let t=e.target.checked;const i=t?"click.selectAll":"click.unselectAll",n=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(e,{previousSelectedRows:n,caller:i});let s=[];if(t){const e=[];for(let t=0;t<this._grid.getDataLength();t++){const i=this._grid.getDataItem(t);i.__group||i.__groupTotals||!this.checkSelectableOverride(t,i,this._grid)||e.push(t)}s=e,t=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){const e=[],i=this._dataView.getFilteredItems();for(let t=0;t<i.length;t++){const n=i[t];this.checkSelectableOverride(t,n,this._grid)&&e.push(n[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(e,{isRowBeingAdded:t})}this._grid.setSelectedRows(s,i),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(e,{rows:s,previousSelectedRows:n,caller:i}),e.stopPropagation(),e.stopImmediatePropagation()}}handleKeyDown(e,t){" "===e.key&&this._grid.getColumns()[t.cell].id===this._addonOptions.columnId&&(this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit()||this.toggleRowSelectionWithEvent(e,t.row),e.preventDefault(),e.stopImmediatePropagation())}handleSelectedRowsChanged(){const e=this._grid.getSelectedRows(),t={};let i=0,n=0,s=0,r=0;if("function"===typeof this._selectableOverride)for(s=0;s<this._grid.getDataLength();s++){const e=this._grid.getDataItem(s);this.checkSelectableOverride(n,e,this._grid)||r++}const o=[];for(n=0;n<e.length;n++){i=e[n];const s=this._grid.getDataItem(i);this.checkSelectableOverride(n,s,this._grid)?(t[i]=!0,t[i]!==this._selectedRowsLookup[i]&&(this._grid.invalidateRow(i),delete this._selectedRowsLookup[i])):o.push(i)}if("object"===typeof this._selectedRowsLookup&&Object.keys(this._selectedRowsLookup).forEach((e=>{void 0!==e&&this._grid.invalidateRow(+e)})),this._selectedRowsLookup=t,this._grid.render(),this._isSelectAllChecked=(e?.length??0)+r>=this._grid.getDataLength(),(!this._isUsingDataView||!this._addonOptions.applySelectOnAllPages)&&(this._addonOptions.hideInColumnTitleRow||this._addonOptions.hideSelectAllCheckbox||this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow)){const e=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`);e&&(e.ariaChecked=String(this._isSelectAllChecked),e.checked=this._isSelectAllChecked)}if(o.length>0){for(const t of o){const i=e.indexOf(t);e.splice(i,1)}this._grid.setSelectedRows(e,"click.toggle")}}renderSelectAllCheckbox(e){const t=this._grid.updateColumnHeader(this._addonOptions.columnId||"",this.createCheckboxElement(`header-selector${this._selectAll_UID}`,!!e),this._addonOptions.toolTip);t?.classList.add("header-checkbox-selectall")}}class uo extends to{constructor(e,t,i,n,s){super(e,i,n),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=n,this.sortService=s,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:150,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:e=>te(e.columnPickerLabel||e.name||"","innerHTML")},this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID()??"",this.onAfterMenuShow=new ti("onAfterMenuShow"),this.onBeforeMenuShow=new ti("onBeforeMenuShow"),this.onMenuClose=new ti("onMenuClose"),this.onCommand=new ti("onCommand"),this.onColumnsChanged=new ti("onColumnsChanged"),this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.grid?.getOptions()||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,So.bind(this)),this._eventHandler.subscribe(this.grid.onClick,(e=>this.hideMenu(e))),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,((e,t)=>{if(t&&t.optionsBefore&&t.optionsAfter){const e=t.optionsBefore.frozenColumn>=0&&-1===t.optionsAfter.frozenColumn,i=-1===t.optionsBefore.frozenColumn&&t.optionsAfter.frozenColumn>=0;(e||i)&&this.recreateGridMenu()}}))}init(){this._gridUid=this.grid.getUID()??"",ai.addSlickEventPubSubWhenDefined(this.pubSubService,this),this._userOriginalGridMenu={...this.sharedService.gridOptions.gridMenu},this._addonOptions={...this._defaults,...this.getDefaultGridMenuOptions(),...this.sharedService.gridOptions.gridMenu},this.sharedService.gridOptions.gridMenu=this._addonOptions;const e=this._userOriginalGridMenu.commandItems,t=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...t,...this.addGridMenuCustomCommands(t)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){this._bindEventService.unbindAll(),this._menuElm?.remove(),this._menuElm=null,this._gridMenuButtonElm?.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(fo.call(this,this._menuElm),this._listElm=Q("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",vo.bind(this),void 0,"parent-menu"))}createGridMenu(){const e=this._gridUid?`.${this._gridUid}`:"",t=this._addonOptions?.menuWidth||this._defaults.menuWidth,i=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left",n=this.grid.getContainerNode();if(this._headerElm=n.querySelector(`.slick-header-${i}`),this._headerElm&&this._addonOptions){this._headerElm.style.width=`calc(100% - ${t}px)`;if((this._addonOptions.resizeOnShowHeaderRow??this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){const i=n.querySelector(`${e} .slick-headerrow`);i&&(i.style.width=`calc(100% - ${t}px)`)}if(this._addonOptions.showButton??this._defaults.showButton){this._gridMenuButtonElm=Q("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),this._addonOptions?.iconCssClass&&this._gridMenuButtonElm.classList.add(...Z(this._addonOptions.iconCssClass));const e="preheader"===this._addonOptions.iconButtonContainer?"firstChild":"lastChild";this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement[e]),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))}this.sharedService.gridOptions.gridMenu={...this._defaults,...this._addonOptions},this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const n=i?.command;let s=1===t&&n?n.replace(/\s/g,""):"";s&&(this._subMenuParentId=s),t>1&&(s=this._subMenuParentId);const r=`${this.menuCssClass} slick-menu-level-${t} ${this._gridUid}`,o=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${t}${this.gridUidSelector}`);if(o){if(o.dataset.subMenuParent===s)return o;this.disposeSubMenus()}const a=Q("div",{role:"menu",className:r,ariaLabel:t>1?"SubMenu":"Grid Menu"});t>0&&(a.classList.add("slick-submenu"),s&&(a.dataset.subMenuParent=s));const l={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:t};return this._commandMenuElm=this.recreateCommandList(e,a,l,i),t++,a}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(e){const t={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",t),("function"!==typeof this._addonOptions?.onMenuClose||!1!==this._addonOptions.onMenuClose(e,t))&&!1!==this.onMenuClose.notify(t,null,this).getReturnValue()){if(this._isMenuOpen=!1,"function"===typeof this.grid?.autosizeColumns){const e=this.grid.getUID()||"";this._areVisibleColumnDifferent&&e&&null!==document.querySelector(`.${e}`)&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(e,t,i,n){const s=e?.touches?.[0]??e,r=t.classList.contains("slick-submenu"),o=r?e.target.closest(".slick-menu-item"):s.target;if(o){const e=i||this._gridMenuButtonElm,s=ne(i),a=ne(o),l=n??this._addonOptions,d=getComputedStyle(e),c=parseInt(d?.width??this._defaults?.menuWidth,10),h=t?.offsetWidth??0,u=l?.contentMinWidth??this._defaults.contentMinWidth??0,p=(u>h?u:h)||0,m=s.top,g=s.right;let f,v;if(r?(v=a.top,f=a.left):(v=m+e.offsetHeight,f="right"===l?.dropSide?g-c:g-p),r){const e=t?.clientHeight||0,{bottom:i,top:n}=X(o);"top"===(i<e&&n>i?"top":"bottom")?(t.classList.remove("dropdown"),t.classList.add("dropup"),v-=e-o.clientHeight):(t.classList.remove("dropup"),t.classList.add("dropdown"))}const b=this.grid.getGridPosition();let y=f+Number(h);r&&(y+=o.clientWidth);const _=document.documentElement.clientWidth;"left"===(y>=b.width||y>=_?"left":"right")||!r&&"left"===l?.dropSide?(t.classList.remove("dropright"),t.classList.add("dropleft"),r&&(f-=Number(h))):(t.classList.remove("dropleft"),t.classList.add("dropright"),r&&(f+=o.offsetWidth)),t.style.top=`${v}px`,t.style.left=`${f}px`,u>0&&(t.style.minWidth=`${u}px`),t.style.opacity="1",t.style.display="block"}}openGridMenu(){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(e,"target",{writable:!0,configurable:!0,value:Q("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(e)}showGridMenu(e,t){const i=e?.touches?.[0]??e;if(e.preventDefault(),ee(this._menuElm),this._menuElm?.remove(),this._addonOptions){const n={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},s={...this._addonOptions,...t};if(s&&!this.extensionUtility.runOverrideFunctionWhenExists(s.menuUsabilityOverride,n))return;if("function"===typeof e.stopPropagation&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",n),"function"===typeof s?.onBeforeMenuShow&&!1===s.onBeforeMenuShow(e,n)||!1===this.onBeforeMenuShow.notify(n,null,this).getReturnValue()))return;this._menuElm=this.createCommandMenu(this._addonOptions?.commandItems??[]),this.createColumnPickerContainer(),So.call(this),this._columnCheckboxes=[],_o.call(this,s),document.body.appendChild(this._menuElm),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm.style.opacity="0";const r=(void 0!==s?.marginBottom?s.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=ae(s?.minHeight,""),void 0!==s?.height?this._menuElm.style.height=ae(s.height,""):this._menuElm.style.maxHeight=ae(s?.maxHeight,window.innerHeight-i.clientY-r+"px");let o="BUTTON"===e.target.nodeName?e.target:e.target.querySelector("button");o||(o=e.target.parentElement),this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm),this.repositionMenu(e,this._menuElm,o,s),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",n),"function"===typeof s?.onAfterMenuShow&&s.onAfterMenuShow(e,n),this.onAfterMenuShow.notify(n,null,this)}}translateGridMenu(){if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";const e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...e,...this.addGridMenuCustomCommands(e)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions?.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(e){e&&(e.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),e.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),e.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(e){const t=this.gridOptions.backendServiceApi||null,i=[],n=z(this.gridOptions),s=this._addonOptions?.commandLabels;if(this._addonOptions&&this.gridOptions){if(!this._addonOptions.hideClearFrozenColumnsCommand){const t="clear-pinning";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"mdi mdi-pin-off-outline",titleKey:`${n}${s?.clearFrozenColumnsCommandKey??"CLEAR_PINNING"}`,disabled:!1,command:t,positionOrder:52})}if(this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(!this._addonOptions.hideClearAllFiltersCommand){const t="clear-filter";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"mdi mdi-filter-remove-outline",titleKey:`${n}${s?.clearAllFiltersCommandKey??"CLEAR_ALL_FILTERS"}`,disabled:!1,command:t,positionOrder:50})}if(!this._addonOptions.hideToggleFilterCommand){const t="toggle-filter";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"mdi mdi-flip-vertical",titleKey:`${n}${s?.toggleFilterCommandKey??"TOGGLE_FILTER_ROW"}`,disabled:!1,command:t,positionOrder:53})}if(t&&!this._addonOptions.hideRefreshDatasetCommand){const t="refresh-dataset";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"mdi mdi-sync",titleKey:`${n}${s?.refreshDatasetCommandKey??"REFRESH_DATASET"}`,disabled:!1,command:t,positionOrder:58})}}if(!this._addonOptions.hideToggleDarkModeCommand){const t="toggle-dark-mode";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconToggleDarkModeCommand||"mdi mdi-brightness-4",titleKey:`${n}${s?.toggleDarkModeCommandKey??"TOGGLE_DARK_MODE"}`,disabled:!1,command:t,positionOrder:54})}if(this.gridOptions.showPreHeaderPanel&&!this._addonOptions.hideTogglePreHeaderCommand){const t="toggle-preheader";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"mdi mdi-flip-vertical",titleKey:`${n}${s?.togglePreHeaderCommandKey??"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:t,positionOrder:53})}if(this.gridOptions.enableSorting&&!this._addonOptions.hideClearAllSortingCommand){const t="clear-sorting";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"mdi mdi-sort-variant-off",titleKey:`${n}${s?.clearAllSortingCommandKey??"CLEAR_ALL_SORTING"}`,disabled:!1,command:t,positionOrder:51})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportCsvCommand){const t="export-csv";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"mdi mdi-download",titleKey:`${n}${s?.exportCsvCommandKey??"EXPORT_TO_CSV"}`,disabled:!1,command:t,positionOrder:55})}if(this.gridOptions.enableExcelExport&&!this._addonOptions.hideExportExcelCommand){const t="export-excel";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${n}${s?.exportExcelCommandKey??"EXPORT_TO_EXCEL"}`,disabled:!1,command:t,positionOrder:56})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportTextDelimitedCommand){const t="export-text-delimited";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===t))||i.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${n}${s?.exportTextDelimitedCommandKey??"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:t,positionOrder:57})}const r=this._addonOptions?.commandItems||[];(Array.isArray(i)&&i.length>0||Array.isArray(r)&&r.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"))}return i}executeGridMenuInternalCustomCommands(e,t){const i=this.sharedService?.externalRegisteredResources||[];if(t?.command)switch(t.command){case"clear-pinning":const e=[...this.sharedService.visibleColumns],t={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(t),this.sharedService.gridOptions.frozenColumn=t.frozenColumn,this.sharedService.gridOptions.frozenRow=t.frozenRow,this.sharedService.gridOptions.frozenBottom=t.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=t.enableMouseWheelScrollHandler,Array.isArray(e)&&this.grid.setColumns(e);this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":const n=i.find((e=>"TextExportService"===e.className));n?.exportToFile?n.exportToFile({delimiter:v.comma,format:_.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"export-excel":const s=i.find((e=>"ExcelExportService"===e.className));s?.exportToExcel?s.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");break;case"export-text-delimited":const r=i.find((e=>"TextExportService"===e.className));r?.exportToFile?r.exportToFile({delimiter:v.tab,format:_.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"toggle-dark-mode":const o=this.sharedService.gridOptions.darkMode;this.grid.setOptions({darkMode:!o}),this.sharedService.gridOptions.darkMode=!o;break;case"toggle-filter":let a=this.gridOptions?.showHeaderRow??!1;a=!a,this.grid.setHeaderRowVisibility(a),!0===a&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":const l=this.gridOptions?.showPreHeaderPanel??!1;this.grid.setPreHeaderPanelVisibility(!l);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset()}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"mdi mdi-menu",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(e){if(this.menuElement){let t=!1;const i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this._isMenuOpen&&this.menuElement!==e.target&&!t&&!e.defaultPrevented||"close"===e.target.className&&i)&&this.hideMenu(e)}}handleMenuItemCommandClick(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if("divider"!==i&&!i.disabled&&!i.divider){if((i.command||"")&&!i.commandItems){const t={grid:this.grid,command:i.command,item:i,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(e,t),this.pubSubService.publish("onGridMenuCommand",t),"function"===typeof this._addonOptions?.onCommand&&this._addonOptions.onCommand(e,t),this.onCommand.notify(t,null,this),"function"===typeof i.action&&i.action.call(this,e,t),this._addonOptions?.leaveOpen||e.defaultPrevented||this.hideMenu(e),e.preventDefault(),e.stopPropagation()}else i.commandItems&&this.repositionSubMenu(e,i,n)}}handleMenuItemMouseOver(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;"divider"===i||i.disabled||i.divider||(i.commandItems?this.repositionSubMenu(e,i,n):0===n&&this.disposeSubMenus())}recreateCommandList(e,t,i,n){const s=i.level||0;if(e.length>0){const r=Q("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},t);if(0===s){this.populateCommandOrOptionTitle("command",this.addonOptions,r,s);const e=t.querySelector(".slick-command-header")??Q("div",{className:"slick-command-header"});e.classList.add("with-close"),go.call(this,e),r.appendChild(e)}return n&&s>0&&this.addSubMenuTitleWhenExists(n,r),this.populateCommandOrOptionItems("command",this._addonOptions,r,e,i,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),r}return null}repositionSubMenu(e,t,i){const n=t?.commandItems||[],s=this.createCommandMenu(n,i+1,t);s.style.display="block",document.body.appendChild(s),this.repositionMenu(e,s)}}const po="mdi-icon-picker-check",mo="mdi-icon-picker-uncheck";function go(e){const t=Q("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"\xd7",dataset:{dismiss:this instanceof wo?"slick-column-picker":"slick-grid-menu"}});e.appendChild(t)}function fo(e){const t=this;t.addonOptions?.columnTitle&&(t._columnTitleElm=Q("div",{className:"slick-menu-title",textContent:t.addonOptions?.columnTitle??t._defaults.columnTitle},e))}function vo(e){const t=this,i=t instanceof wo?"columnPicker":"gridMenu",n=e.target?.closest(".icon-checkbox-container"),s=n?.querySelector(".mdi"),r=!!e.target.checked;if(e.target.ariaChecked=String(r),bo(s,r),"autoresize"===e.target.dataset.option){const e=t.getVisibleColumns();return t.grid.setOptions({forceFitColumns:r}),void t.grid.setColumns(e)}if("syncresize"!==e.target.dataset.option){if("checkbox"===e.target.type){t._areVisibleColumnDifferent=!0;const n=e.target.dataset.columnid||"",o=[];if(t._columnCheckboxes.forEach(((e,i)=>{e.checked&&o.push(t.columns[i])})),!o.length)return e.target.checked=!0,void bo(s,!0);if(t.grid.setColumns(o),(!t.sharedService.visibleColumns||Array.isArray(o)&&o.length!==t.sharedService.visibleColumns.length)&&(t.sharedService.visibleColumns=o),t.gridOptions.enableRowSelection&&r){const e=t.grid.getSelectedRows();t.grid.setSelectedRows(e)}const a=t.gridOptions.frozenColumn??-1;a>=0&&t.extensionUtility.readjustFrozenColumnIndexWhenNeeded(a,t.columns,o);const l={columnId:n,showing:r,allColumns:t.columns,visibleColumns:o,columns:o,grid:t.grid};t.pubSubService.publish(`on${ze(i)}ColumnsChanged`,l),"function"===typeof t.addonOptions?.onColumnsChanged&&t.addonOptions.onColumnsChanged(e,l),t.onColumnsChanged.notify(l,null,t)}}else t.grid.setOptions({syncColumnCellResize:r})}function bo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&(e.className=`mdi ${t?po:mo}`)}function yo(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=Q("label",{className:"checkbox-picker-label",htmlFor:t}),r=Q("div",{className:"icon-checkbox-container"}),o=Q("input",{id:t,type:"checkbox",dataset:i}),a=Q("div",{className:`mdi ${n?po:mo}`}),l=Q("span",{className:"checkbox-label"});return r.appendChild(o),r.appendChild(a),s.appendChild(r),s.appendChild(l),e.appendChild(s),n&&(o.ariaChecked="true",o.checked=!0),{inputElm:o,labelElm:s,labelSpanElm:l}}function _o(e){const t=this,i=t instanceof uo,n=i?"gridmenu-":"";for(const s of t.columns){const r=s.id,o=document.createElement("li");(s.excludeFromColumnPicker&&!i||s.excludeFromGridMenu&&i)&&(o.className="hidden");const a=`${t._gridUid}-${n}colpicker-${r}`,l=t.grid.getColumnIndex(r)>=0,{inputElm:d,labelElm:c,labelSpanElm:h}=yo(o,a,{columnid:`${r}`},l);t._columnCheckboxes.push(d);const u=("function"===typeof e?.headerColumnValueExtractor?e.headerColumnValueExtractor:t._defaults.headerColumnValueExtractor)(s,t.gridOptions);this.grid.applyHtmlCode(h,u),o.appendChild(c),t._listElm.appendChild(o)}if(e.hideForceFitButton&&e.hideSyncResizeButton||t._listElm.appendChild(document.createElement("hr")),!e?.hideForceFitButton){const i=document.createElement("li"),s=`${t._gridUid}-${n}colpicker-forcefit`,{labelSpanElm:r}=yo(i,s,{option:"autoresize"},t.gridOptions.forceFitColumns);r.textContent=e?.forceFitTitle??"",t._listElm.appendChild(i)}if(!e?.hideSyncResizeButton){const i=document.createElement("li"),s=`${t._gridUid}-${n}colpicker-syncresize`,{labelSpanElm:r}=yo(i,s,{option:"syncresize"},t.gridOptions.forceFitColumns);r.textContent=e?.syncResizeTitle??"",t._listElm.appendChild(i)}}function So(){const e=this,t=e.grid.getColumns().slice(0),i=new Array(e.columns.length);for(let n=0;n<i.length;n++){const s=e.grid.getColumnIndex(e.columns[n].id);i[n]=void 0===s?e.columns[n]:t.shift()}e._columns=i}class wo{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:150,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:e=>te(e.columnPickerLabel||e.name||"","innerHTML")},this._bindEventService=new Vt,this.onColumnsChanged=new ti("onColumnsChanged"),this._eventHandler=new ii,this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID?.()??"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.sharedService.gridOptions??{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){this._gridUid=this.grid.getUID()??"",this.gridOptions.columnPicker={...this._defaults,...this.gridOptions.columnPicker},this.onColumnsChanged.setPubSubService(this.pubSubService),this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onPreHeaderContextMenu,(e=>{["slick-column-name","slick-header-column"].some((t=>e.target?.classList.contains(t)))&&this.handleHeaderContextMenu(e)})),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,So.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.disposeMenu.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){this._bindEventService.unbindAll("parent-menu"),this._listElm?.remove(),this._menuElm?.remove(),this._menuElm=null}createPickerMenu(){const e=Q("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return So.call(this),fo.call(this,e),go.call(this,e),this._listElm=Q("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(e,"click",vo.bind(this),void 0,"parent-menu"),document.body.appendChild(e),e}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(e){(this._menuElm!==e.target&&!this._menuElm?.contains(e.target)||"close"===e.target.className&&e.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(e){e.preventDefault(),ee(this._menuElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),_o.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(e)}repositionMenu(e){const t=e?.touches?.[0]??e;if(this._menuElm){const e=this.grid.getGridPosition(),i=this._menuElm.clientWidth||0;let n=t.pageX||0;e?.width&&n+i>=e.width&&(n-=i),this._menuElm.style.top=t.pageY-10+"px",this._menuElm.style.left=`${n}px`,this._menuElm.style.minHeight=ae(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=ae(this.addonOptions.maxHeight,window.innerHeight-t.clientY+"px"),this._menuElm.style.display="block",this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm)}}translateTitleLabels(e){e&&(e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}}const Co=(e,t,i,n,s,r)=>{const o=n.params||{};if(!o.formatters||!Array.isArray(o.formatters))throw new Error('[Slickgrid-Universal] The multiple formatter requires the "formatters" to be provided as a column params.\n    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }');const a=o.formatters;let l=i;return a.forEach(((i,o)=>{if("function"!==typeof i)throw new Error(`[Slickgrid-Universal] the "params.formatters" at index(${o}) to be used by "Formatters.multiple" is invalid, please verify all formatter functions.`);l=i.call(void 0,e,t,l,n,s,r)})),l};function Eo(e,t){if(Array.isArray(e))for(const i of e)if(i.editor)if(i.formatter&&i.formatter!==Co&&i.formatter!==t){const e=i.formatter;i.formatter=Co,i.params={...i.params,formatters:[e,t]}}else i.formatter&&i.formatter===Co&&i.params?-1===i.params.formatters.findIndex((e=>e===t))&&(i.params.formatters=[...i.params.formatters,t]):i.formatter=t}function Oo(e,t,i,n){let s,r,o="",a="";switch(i){case"currency":s=g.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,r=g.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":s=g.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,r=g.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":s=g.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,r=g.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL}const l=t&&"function"===typeof t.getOptions?t.getOptions():{},d=xo("minDecimal",e,l,s),c=xo("maxDecimal",e,l,r),h=xo("decimalSeparator",e,l,g.DEFAULT_NUMBER_DECIMAL_SEPARATOR),u=xo("thousandSeparator",e,l,g.DEFAULT_NUMBER_THOUSAND_SEPARATOR),p=xo("displayNegativeNumberWithParentheses",e,l,g.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),m=xo("currencyPrefix",e,l,""),f=xo("currencySuffix",e,l,"");return"cell"===n&&(o=xo("numberPrefix",e,l,""),a=xo("numberSuffix",e,l,"")),{minDecimal:d,maxDecimal:c,decimalSeparator:h,thousandSeparator:u,wrapNegativeNumber:p,currencyPrefix:m,currencySuffix:f,numberPrefix:o,numberSuffix:a}}function xo(e,t,i,n){const s=t&&t.params;return s&&s.hasOwnProperty(e)?s[e]:i?.formatterOptions?.hasOwnProperty(e)?i.formatterOptions[e]:n}function To(e,t){const i=Pt(e,{withZeroPadding:!0});return(e,n,s,r,o,a)=>{const l=a&&"function"===typeof a.getOptions?a.getOptions():{},d=l?.formatterOptions?.dateSeparator??t,c=Pt(r?.type??y.date,{withDefaultIso8601:!0}),h=r?.params?.parseDateAsUtc??!1,u=Mt(s,c);let p=s;if(u){let e=u;h&&(e=Tt(m=u,Ct(m,"utc"))),p=kt(e,i,"en-US")}var m;if(p&&d!==t){const e=new RegExp(t,"ig");p=p.replace(e,d)}return p}}function ko(e,t,i,n,s,r){let o,a=!1;i?.hasOwnProperty("exportWithFormatter")?a=!!i.exportWithFormatter:r?.hasOwnProperty("exportWithFormatter")&&(a=!!r.exportWithFormatter),n&&i.exportCustomFormatter?o=i.exportCustomFormatter:a&&i.formatter&&(o=i.formatter);const l=Io(o,e,t,i,n,s);return r?.sanitizeDataExport&&"string"===typeof l?Ze(l):l}function Io(e,t,i,n,s,r){let o="";let a=n.field||n.id||"";if("string"===typeof n.field&&n.field.indexOf(".")>0){const e=n.field.split(".");a=e.length>0?e[0]:n.field}const l=s?.hasOwnProperty(a)?s[a]:null;if("function"===typeof e){const a=e(t,i,l,n,s,r);o=te(Fe(a)?a:a.html||a.text)}else o=s?.hasOwnProperty(a)?l:"";return null!==o&&void 0!==o||(o=""),"object"!==typeof o||o instanceof Date||0!==Object.entries(o).length||(o=""),o}class Ro extends io{constructor(e,t,i,n){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.treeDataService=n,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(i.gridOptions.contextMenu)}init(e){this._addonOptions={...this._defaults,...e};const t=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...t,...this.addMenuCustomCommands(t)],this._addonOptions={...this._addonOptions},this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){const e=this.sharedService?.gridOptions??{},t=this.sharedService.gridOptions.contextMenu;if(t&&e?.enableTranslate){const e=t.commandItems||[],i=t.optionItems||[];t.commandTitleKey&&(t.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(t.commandTitleKey,"TEXT_COMMANDS")||t.commandTitle),t.optionTitleKey&&(t.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(t.optionTitleKey,"TEXT_COMMANDS")||t.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(e,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(i,"optionItems")}}handleOnContextMenu(e,t){this.disposeAllMenus();const i=this.grid.getCellFromEvent(e);if(i){const n=this.grid.getDataItem(i.row),s=this.grid.getColumns()[i.cell],r=t||{};if(r.cell=i.cell,r.row=i.row,r.column=s,r.dataContext=n,r.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,r))return;this._menuElm=this.createParentMenu(e),this._menuElm&&e.preventDefault(),this._menuElm&&this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(e){const t=[],i=this.sharedService&&this.sharedService.gridOptions||{},n=i?.contextMenu,s=this.sharedService?.dataView,r=z(i);if(n&&!n.hideCopyCellValueCommand){const i="copy";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===i))||t.push({iconCssClass:n.iconCopyCellValueCommand||"mdi mdi-content-copy",titleKey:`${r}COPY`,disabled:!1,command:i,positionOrder:50,action:(e,t)=>{this.copyToClipboard(t)},itemUsabilityOverride:e=>{const t=e?.column,i=e?.dataContext;if("function"===typeof t.queryFieldNameGetterFn){const e=B(t,i,"");if(""!==e&&void 0!==e)return!0}else if(t&&i.hasOwnProperty(t.field))return""!==i[t.field]&&null!==i[t.field]&&void 0!==i[t.field];return!1}})}if(i?.enableTextExport&&n&&!n.hideExportCsvCommand){const i="export-csv";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===i))||t.push({iconCssClass:n.iconExportCsvCommand||"mdi mdi-download",titleKey:`${r}EXPORT_TO_CSV`,disabled:!1,command:i,positionOrder:51,action:()=>{const e=(this.sharedService?.externalRegisteredResources||[]).find((e=>"TextExportService"===e.className));if(!e?.exportToFile)throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");e.exportToFile({delimiter:v.comma,format:_.csv})}})}if(i&&i.enableExcelExport&&n&&!n.hideExportExcelCommand){const i="export-excel";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===i))||t.push({iconCssClass:n.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${r}EXPORT_TO_EXCEL`,disabled:!1,command:i,positionOrder:52,action:()=>{const e=(this.sharedService?.externalRegisteredResources||[]).find((e=>"ExcelExportService"===e.className));if(!e?.exportToExcel)throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");e.exportToExcel()}})}if(i?.enableTextExport&&n&&!n.hideExportTextDelimitedCommand){const i="export-text-delimited";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===i))||t.push({iconCssClass:n.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${r}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:i,positionOrder:53,action:()=>{const e=(this.sharedService?.externalRegisteredResources||[]).find((e=>"TextExportService"===e.className));if(!e?.exportToFile)throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");e.exportToFile({delimiter:v.tab,format:_.txt})}})}if(i&&(i.enableGrouping||i.enableDraggableGrouping||i.enableTreeData)){if(n&&!n.hideCopyCellValueCommand&&t.push({divider:!0,command:"",positionOrder:54}),i&&!i.enableTreeData&&n&&!n.hideClearAllGrouping){const i="clear-grouping";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===i))||t.push({iconCssClass:n.iconClearGroupingCommand||"mdi mdi-close",titleKey:`${r}CLEAR_ALL_GROUPING`,disabled:!1,command:i,positionOrder:55,action:()=>{s.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{const e=s&&s.getGrouping&&s.getGrouping();return Array.isArray(e)&&e.length>0}})}if(i&&n&&!n.hideCollapseAllGroups){const o="collapse-all-groups";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===o))||t.push({iconCssClass:n.iconCollapseAllGroupsCommand||"mdi mdi-arrow-collapse",titleKey:`${r}COLLAPSE_ALL_GROUPS`,disabled:!1,command:o,positionOrder:56,action:()=>{i.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):s.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(i.enableTreeData)return!0;const e=s&&s.getGrouping&&s.getGrouping();return Array.isArray(e)&&e.length>0}})}if(i&&n&&!n.hideExpandAllGroups){const o="expand-all-groups";e.some((e=>"divider"!==e&&e.hasOwnProperty("command")&&e.command===o))||t.push({iconCssClass:n.iconExpandAllGroupsCommand||"mdi mdi-arrow-expand",titleKey:`${r}EXPAND_ALL_GROUPS`,disabled:!1,command:o,positionOrder:57,action:()=>{i.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):s.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(i.enableTreeData)return!0;const e=s&&s.getGrouping&&s.getGrouping();return Array.isArray(e)&&e.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(t),t}copyToClipboard(e){try{if(e&&e.grid&&e.command){const t=this.sharedService?.gridOptions??{},i=e?.cell??0,n=e?.row??0,s=e?.column,r=e?.dataContext,o=this.sharedService?.slickGrid;let a=ko(n,i,s,r,o,t&&(t.excelExportOptions||t.textExportOptions));"function"===typeof s.queryFieldNameGetterFn&&(a=B(s,r,""));let l=a;"string"===typeof a&&(l=a.replace(/^([\xb7|\u2b9e|\u2b9f]\s*)|([\xb7|\u2b9e|\u2b9f])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());const d=document.createElement("textarea");d&&document.body&&(d.style.position="absolute",d.style.opacity="0",d.value=l,document.body.appendChild(d),d.select(),document.execCommand("copy",!1,l)&&d.remove())}}catch(t){}}sortMenuItems(){const e=this.sharedService?.gridOptions?.contextMenu;e&&(this.extensionUtility.sortItems(e.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(e.optionItems||[],"positionOrder"))}}class Ao{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._gridColumns=[],this._gridUid="",this._isInitialized=!1,this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this._bindingEventService=new Vt,this.onGroupChanged=new ti("onGroupChanged"),this._eventHandler=new ii}get addonOptions(){return this._addonOptions}get dataView(){return this.grid?.getData()??{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){return this._grid??this.sharedService.slickGrid??{}}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridContainer(){return this.grid.getContainerNode()}set isInitialized(e){this._isInitialized=e}init(e,t){if(this._addonOptions={...this._defaults,...t},this._grid=e,e){if(this._gridUid=e.getUID(),this._gridColumns=e.getColumns(),this._dropzoneElm=e.getTopHeaderPanel()||e.getPreHeaderPanel(),!this._dropzoneElm)throw new Error("[Slickgrid-Universal] Draggable Grouping requires the pre-header to be created and shown for the plugin to work correctly (use `createPreHeaderPanel` and `showPreHeaderPanel`).");if(this._dropzoneElm.classList.add("slick-dropzone"),this.onGroupChanged.setPubSubService(this.pubSubService),!this._addonOptions.hideToggleAllButton){this._groupToggler=Q("div",{className:"slick-group-toggle-all",title:this._addonOptions.toggleAllPlaceholderText??"",style:{display:"none"}});const e=Q("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=this._addonOptions.toggleAllPlaceholderText??"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild(Q("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",(()=>this.toggleGroupToggler(e,!0,!1))),this.pubSubService.subscribe("onContextMenuExpandAllGroups",(()=>this.toggleGroupToggler(e,!1,!1))))}this._dropzonePlaceholderElm=Q("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&this._addonOptions?.dropPlaceHolderTextKey&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=this._addonOptions?.dropPlaceHolderText??this._defaults.dropPlaceHolderText??"",this.setupColumnDropbox(),this._eventHandler.subscribe(e.onHeaderCellRendered,((e,t)=>{const i=t.node;if(!Ie(t.column?.grouping)&&i&&(i.style.cursor="pointer",this._addonOptions.groupIconCssClass)){const e=Q("span",{className:"slick-column-groupable"},i);this._addonOptions.groupIconCssClass&&e.classList.add(...Z(this._addonOptions.groupIconCssClass))}})),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",(()=>this.clearDroppedGroups())));for(const t of this._gridColumns){const i=t.field;e.updateColumnHeader(i)}}return this}dispose(){this.destroySortableInstances(),this._droppableInstance?.el&&this._droppableInstance?.destroy(),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),ee(this.gridContainer.querySelector(`.${this.gridUid} .slick-preheader-panel,.${this.gridUid} .slick-topheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");const e=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(const t of Array.from(e)){const e=this._dropzoneElm.querySelector(".slick-groupby-remove");e?.remove(),t?.remove()}this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){this._sortableLeftInstance?.el&&this._sortableLeftInstance?.destroy(),this._sortableRightInstance?.el&&this._sortableRightInstance?.destroy()}setAddonOptions(e){this._addonOptions={...this._addonOptions,...e}}setColumns(e){this._gridColumns=e}setDroppedGroups(e){this._dropzonePlaceholderElm.style.display="none";const t=Array.isArray(e)?e:[e];for(const i of t){const e=this.grid.getHeaderColumn(i);this.handleGroupByDrop(this._dropzoneElm,e)}}setupColumnReorder(e,t,i,n,s,r,o,a,l){this.destroySortableInstances();const d=e.getTopHeaderPanel()||e.getPreHeaderPanel(),c=d.querySelector(".slick-draggable-dropzone-placeholder"),h=d.querySelector(".slick-group-toggle-all"),u={animation:50,ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:e=>{e.item.classList.add("slick-header-column-active"),c&&(c.style.display="inline-block");d.querySelectorAll(".slick-dropped-grouping").forEach((e=>e.style.display="none")),h&&(h.style.display="none")},onEnd:i=>{i.item.classList.remove("slick-header-column-active"),d?.classList.remove("slick-dropzone-hover"),c?.parentElement?.classList.remove("slick-dropzone-placeholder-hover");const r=d.querySelectorAll(".slick-dropped-grouping");if(r.forEach((e=>e.style.display="flex")),r.length&&(c&&(c.style.display="none"),h&&(h.style.display="inline-flex")),!e.getEditorLock().commitCurrentEdit())return;const a=this.sortableLeftInstance?.toArray()??[];if(t.length>1){const e=this._sortableRightInstance?.toArray()??[];for(const t of e)a.push(t)}const u=[],p=e.getColumns();for(const t of a)u.push(p[o.call(e,t)]);n.call(e,u),l.call(e,e.onColumnsReordered,{grid:e,impactedColumns:u}),i.stopPropagation(),s.call(e)}};return this._sortableLeftInstance=fs.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-left`),u),this._sortableRightInstance=fs.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-right`),u),this._addonOptions.initialGroupBy&&!this._isInitialized&&this.setDroppedGroups(this._addonOptions.initialGroupBy),this._isInitialized=!0,{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(e){this.columnsGroupBy.push(e),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(e,t,i,n){this._bindingEventService.bind(t,"click",(()=>{const s=this._bindingEventService.boundedEvents.filter((e=>e.element===t));for(const e of s)this._bindingEventService.unbind(e.element,"click",e.listener);this.removeGroupBy(e,i,n)}))}addGroupSortClickHandler(e,t){const{grouping:i,type:n}=e;this._bindingEventService.bind(t,"click",(()=>{if(this.toggleGroupAll(e,!1),i){const s=i.sortAsc?O.desc:O.asc;i.comparer=(t,i)=>Ht(n||"text",t.value,i.value,s,e,this.gridOptions),this.getGroupBySortIcon(t,!i.sortAsc),this.updateGroupBy("sort-group"),i.sortAsc=!i.sortAsc,this.grid.invalidate()}}))}getGroupBySortIcon(e){!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?this._addonOptions.sortAscIconCssClass?(e.classList.remove(...Z(this._addonOptions.sortDescIconCssClass)),e.classList.add(...Z(this._addonOptions.sortAscIconCssClass))):(e.classList.add("slick-groupby-sort-asc-icon"),e.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(e.classList.remove(...Z(this._addonOptions.sortAscIconCssClass)),e.classList.add(...Z(this._addonOptions.sortDescIconCssClass))):this._addonOptions.sortDescIconCssClass||(e.classList.add("slick-groupby-sort-desc-icon"),e.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(e,t){const i=t.getAttribute("data-id")?.replace(this._gridUid,"");let n=!0;for(const s of this.columnsGroupBy)s.id===i&&(n=!1);if(n){for(const n of this._gridColumns)if(n.id===i&&n.grouping&&!Ie(n.grouping)){const i=t.querySelector(".slick-column-name"),s=Q("div",{id:`${this._gridUid}_${n.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${n.id}`}});Q("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:i?i.textContent:t.textContent},s);const r=Q("div",{className:"slick-groupby-remove"});let o;this._addonOptions.deleteIconCssClass&&r.classList.add(...Z(this._addonOptions.deleteIconCssClass)),this._addonOptions.deleteIconCssClass||r.classList.add("slick-groupby-remove-icon"),!0!==this._addonOptions?.hideGroupSortIcons&&n.sortable&&(void 0===n.grouping?.sortAsc&&(n.grouping.sortAsc=!0),o=Q("div",{className:"slick-groupby-sort"},s),this.getGroupBySortIcon(o,n.grouping.sortAsc)),s.appendChild(r),s.appendChild(document.createElement("div")),e.appendChild(s),this._groupToggler&&0===this.columnsGroupBy.length&&this.toggleGroupAll(n),this.addColumnGroupBy(n),this.addGroupByRemoveClickHandler(n.id,r,t,s),o&&this.addGroupSortClickHandler(n,o)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-flex")}}toggleGroupAll(e,t){let{grouping:i}=e;const n=this._groupToggler?.querySelector(".slick-group-toggle-all-icon");!0===t||i?.collapsed?(n?.classList.add("collapsed"),n?.classList.remove("expanded")):(n?.classList.add("expanded"),n?.classList.remove("collapsed"))}removeFromArray(e,t){if(Array.isArray(e)){const i=e.findIndex((e=>e.id===t.id));i>=0&&e.splice(i,1)}return e}removeGroupBy(e,t,i){i.remove();const n=[];this._gridColumns.forEach((e=>n[e.id]=e)),this.removeFromArray(this.columnsGroupBy,n[e]),0===this.columnsGroupBy.length&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){const e=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");e&&this._dropzoneElm&&(this._bindingEventService.bind(e,"dragover",(e=>e.preventDefault())),this._bindingEventService.bind(e,"dragenter",(()=>this._dropzoneElm.classList.add("slick-dropzone-hover"))),this._bindingEventService.bind(e,"dragleave",(()=>this._dropzoneElm.classList.remove("slick-dropzone-hover"))))}setupColumnDropbox(){const e=this._dropzoneElm;this._droppableInstance=fs.create(e,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:t=>{const i=t.item;i.getAttribute("id")?.replace(this._gridUid,"")&&this.handleGroupByDrop(e,fs.utils.clone(t.item)),i.parentNode?.removeChild(i)},onUpdate:()=>{const e=this._droppableInstance?.toArray()??[],t=[];for(const i of e)for(const e of this.columnsGroupBy)if(e.id===i){t.push(e);break}this.columnsGroupBy=t,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",(e=>{const t=e.target.classList.contains("slick-group-toggle-all-icon")?e.target:e.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(t,t?.classList.contains("expanded"))}))}toggleGroupToggler(e){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e&&(!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?(e.classList.add("collapsed"),e.classList.remove("expanded"),t&&this.dataView.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),t&&this.dataView.expandAllGroups()))}updateGroupBy(e){if(0===this.columnsGroupBy.length)return this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",void this.triggerOnGroupChangedEvent({caller:e,groupColumns:[]});const t=[];this.columnsGroupBy.forEach((e=>t.push(e.grouping))),this.dataView.setGrouping(t),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:e,groupColumns:t})}triggerOnGroupChangedEvent(e){this._addonOptions&&"function"===typeof this._addonOptions.onGroupChanged&&this._addonOptions.onGroupChanged(new ei,e),this.onGroupChanged.notify(e)}}class Do extends to{constructor(e,t,i){super(e,t,i),this.extensionUtility=e,this.pubSubService=t,this.sharedService=i,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new Vt,this._eventHandler=new ii,this.init(i.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach((e=>e.remove()))}handleHeaderCellRendered(e,t){const i=t.column;if(i.header?.buttons&&Array.isArray(i.header.buttons)){let e=i.header.buttons.length;for(;e--;){const n=i.header.buttons[e],s=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,n,t,this.handleButtonClick.bind(this));s&&n.handler&&!n.disabled&&this._bindEventService.bind(s,"click",(e=>n.handler.call(this,e))),s&&(this._buttonElms.push(s),t.node.appendChild(s))}}}handleBeforeHeaderCellDestroy(e,t){const i=t.column;if(i.header?.buttons&&this._addonOptions?.buttonCssClass){const e=(this._addonOptions?.buttonCssClass||"").replace(/(\s+)/g,".");e&&t.node.querySelectorAll(`.${e}`).forEach((e=>e.remove()))}}handleButtonClick(e,t,i,n,s){if(i.command&&!i.disabled){const t=i.command||"",n={grid:this.grid,column:s,button:i};t&&(n.command=t),"function"!==typeof i.action||i.disabled||i.action.call(this,e,n),null!==t&&!i.disabled&&this._addonOptions?.onCommand&&(this.pubSubService.publish("onHeaderButtonCommand",n),this._addonOptions.onCommand(e,n),s?.id&&this.grid.updateColumnHeader(s.id))}e.preventDefault(),e.stopPropagation()}}class Po extends to{constructor(e,t,i,n,s){super(e,i,n),this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=n,this.sortService=s,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(n.gridOptions.headerMenu)}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onBeforeSetColumns,((e,t)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(t.newColumns)})),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),this._menuElm?.remove(),this._activeHeaderColumnElm=void 0}hideColumn(e){if(this.sharedService?.slickGrid?.getColumnIndex){const t=this.sharedService.slickGrid.getColumnIndex(e.id),i=this.sharedService.slickGrid.getColumns(),n=this.sharedService.gridOptions.frozenColumn??-1;n>=0&&n>=t&&(this.sharedService.gridOptions.frozenColumn=n-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));const s=Ee(i,t);this.sharedService.visibleColumns=s,this.sharedService.slickGrid.setColumns(s),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:s,hiddenColumn:e})}}hideMenu(){this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=void 0}repositionSubMenu(e,t,i,n){const s=this.createCommandMenu(t.commandItems||[],n,i+1,t);document.body.appendChild(s),this.repositionMenu(e,s)}repositionMenu(e,t){const i=e.target,n=t.classList.contains("slick-submenu"),s=n?e.target.closest(".slick-menu-item"):i,r=ie(this.sharedService.gridContainerElement.querySelector(".slickgrid-container")??this.sharedService.gridContainerElement,i),o=this.grid.getGridPosition(),a=t.offsetWidth,l=ne(s);let d=n?l.left:r?.left??0,c=n?l.top:(r?.top??0)+(this.addonOptions?.menuOffsetTop??0)+i.clientHeight;if(n){const e=t?.clientHeight||0,{bottom:i,top:n}=X(s);"top"===(i<e&&n>i?"top":"bottom")?(t.classList.remove("dropdown"),t.classList.add("dropup"),c-=e-s.clientHeight):(t.classList.remove("dropup"),t.classList.add("dropdown"))}if(n&&s){const e=d+Number(a)+s.clientWidth,i=document.documentElement.clientWidth;"left"===(e>=o.width||e>=i?"left":"right")?(t.classList.remove("dropright"),t.classList.add("dropleft"),d-=a):(t.classList.remove("dropleft"),t.classList.add("dropright"),d+=s.offsetWidth)}else d=r?.left??0,this.addonOptions.autoAlign&&o?.width&&d+(t.clientWidth??0)>=o.width&&(d=d+i.clientWidth-t.clientWidth+(this.addonOptions?.autoAlignOffset||0));t.style.top=`${c}px`,t.style.left=`${d}px`}translateHeaderMenu(){this.sharedService.gridOptions?.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(e,t){const i=t.column,n=i.header?.menu;if(n&&t.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,t))return;const e=Q("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},t.node);this.addonOptions.buttonCssClass&&e.classList.add(...Z(this.addonOptions.buttonCssClass)),this.addonOptions.tooltip&&(e.title=this.addonOptions.tooltip),this._bindEventService.bind(e,"click",(e=>{this.disposeAllMenus(),this.createParentMenu(e,t.column,n)}))}}handleBeforeHeaderCellDestroy(e,t){const i=t.column;i.header?.menu&&t.node.querySelectorAll(".slick-header-menu-button").forEach((e=>e.remove()))}handleBodyMouseDown(e){if(this.menuElement){let t=!1;const i=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||i)&&(t=!0),(this._menuElm!==e.target&&!t&&!e.defaultPrevented||"close"===e.target.className&&i)&&this.hideMenu()}}handleMenuItemCommandClick(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0;if("divider"!==i&&!i.disabled&&!i.divider){if((i.command||"")&&!i.commandItems){const t={grid:this.grid,command:i.command,column:s,item:i};this.executeHeaderMenuInternalCommands(e,t),this.pubSubService.publish("onHeaderMenuCommand",t),"function"===typeof this.addonOptions?.onCommand&&this.addonOptions.onCommand(e,t),"function"===typeof i.action&&i.action.call(this,e,t),e.defaultPrevented||this.hideMenu(),e.preventDefault(),e.stopPropagation()}else i.commandItems&&this.repositionSubMenu(e,i,n,s)}}handleMenuItemMouseOver(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0;"divider"===i||i.disabled||i.divider||(i.commandItems?this.repositionSubMenu(e,i,n,s):0===n&&this.disposeSubMenus())}addHeaderMenuCustomCommands(e){const t=this.sharedService.gridOptions,i=t.headerMenu||{},n=z(t);return Array.isArray(e)&&t.enableHeaderMenu&&e.forEach((e=>{if(e&&!e.excludeFromHeaderMenu){e.header?e.header.menu||(e.header.menu={commandItems:[]}):e.header={menu:{commandItems:[]}};const s=e?.header?.menu?.commandItems??[];let r=!1;if(i&&!i.hideFreezeColumnsCommand&&(r=!0,s.some((e=>"divider"!==e&&"freeze-columns"===e?.command))||s.push({iconCssClass:i.iconFreezeColumns||"mdi mdi-pin-outline",titleKey:`${n}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:45})),i&&!i.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(r=!0,s.some((e=>"divider"!==e&&"column-resize-by-content"===e?.command))||s.push({iconCssClass:i.iconColumnResizeByContentCommand||"mdi mdi-arrow-expand-horizontal",titleKey:`${n}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:47})),r&&!s.some((e=>"divider"!==e&&48===e.positionOrder))&&s.push({divider:!0,command:"",positionOrder:48}),t.enableSorting&&e.sortable&&i&&!i.hideSortCommands&&(s.some((e=>"divider"!==e&&"sort-asc"===e?.command))||s.push({iconCssClass:i.iconSortAscCommand||"mdi mdi-sort-ascending",titleKey:`${n}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),s.some((e=>"divider"!==e&&"sort-desc"===e?.command))||s.push({iconCssClass:i.iconSortDescCommand||"mdi mdi-sort-descending",titleKey:`${n}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),s.some((e=>"divider"!==e&&52===e.positionOrder))||s.push({divider:!0,command:"",positionOrder:52}),i.hideClearSortCommand||s.some((e=>"divider"!==e&&"clear-sort"===e?.command))||s.push({iconCssClass:i.iconClearSortCommand||"mdi mdi-sort-variant-off",titleKey:`${n}REMOVE_SORT`,command:"clear-sort",positionOrder:58})),e.filter?.filterShortcuts&&!s.some((e=>"divider"!==e&&"filter-shortcuts-root-menu"===e?.command))){const t=[];e.filter.filterShortcuts.forEach((e=>{const i=e.title?Ue(e.title):(e.titleKey||"").toLowerCase().replaceAll("_","-");t.push({...e,command:i,action:(t,i)=>{const n=this.filterService.getFiltersMetadata().find((e=>e.columnDef.id===i.column.id));n?.setValues(e.searchTerms,e.operator,!0)}})}));const o=i.filterShortcutsPositionOrder??55;s.push({iconCssClass:i.iconFilterShortcutSubMenu||"mdi mdi-filter-outline",titleKey:`${n}FILTER_SHORTCUTS`,command:"filter-shortcuts-root-menu",positionOrder:o,commandItems:t}),r&&!s.some((e=>"divider"!==e&&e.positionOrder===o+1))&&s.push({divider:!0,command:"",positionOrder:o+1})}t.enableFiltering&&e.filterable&&i&&!i.hideFilterCommand&&(i.hideClearFilterCommand||s.some((e=>"divider"!==e&&"clear-filter"===e?.command))||s.push({iconCssClass:i.iconClearFilterCommand||"mdi mdi-filter-remove-outline",titleKey:`${n}REMOVE_FILTER`,command:"clear-filter",positionOrder:57})),!i||i.hideColumnHideCommand||s.some((e=>"divider"!==e&&"hide-column"===e?.command))||s.push({iconCssClass:i.iconColumnHideCommand||"mdi mdi-close",titleKey:`${n}HIDE_COLUMN`,command:"hide-column",positionOrder:59}),this.extensionUtility.translateMenuItemsFromTitleKey(s),this.extensionUtility.sortItems(s,"positionOrder")}})),i}clearColumnFilter(e,t){t?.column&&this.filterService.clearFilterByColumnId(e,t.column.id)}clearColumnSort(e,t){t?.column&&this.sharedService&&this.sortService.clearSortByColumnId(e,t.column.id)}executeHeaderMenuInternalCommands(e,t){if(t?.command)switch(t.command){case"hide-column":this.hideColumn(t.column),this.sharedService.gridOptions?.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,t);break;case"clear-sort":this.clearColumnSort(e,t);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:t.column.id});break;case"freeze-columns":const i=[...this.sharedService.visibleColumns],n={frozenColumn:i.findIndex((e=>e.id===t.column.id)),enableMouseWheelScrollHandler:!0},s=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(n,!1,!0),this.sharedService.gridOptions.frozenColumn=n.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=n.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=t.column.id,this.sharedService.hasColumnsReordered||Array.isArray(i)&&Array.isArray(this.sharedService.allColumns)&&i.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(i):this.sharedService.slickGrid.setColumns(s);this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":const r="sort-asc"===t.command;this.sortColumn(e,t,r)}}createParentMenu(e,t,i){const n={grid:this.grid,column:t,menu:i};"function"===typeof e.stopPropagation&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",n),"function"===typeof this.addonOptions?.onBeforeMenuShow&&!1===this.addonOptions?.onBeforeMenuShow(e,n))||(this._menuElm=this.createCommandMenu(i.commandItems,t),this.grid.getContainerNode()?.appendChild(this._menuElm),this.repositionMenu(e,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",n),"function"===typeof this.addonOptions?.onAfterMenuShow&&!1===this.addonOptions?.onAfterMenuShow(e,n)||(e.preventDefault(),e.stopPropagation()))}createCommandMenu(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;const s=n?.command;let r=1===i&&s?s.replace(/\s/g,""):"";r&&(this._subMenuParentId=r),i>1&&(r=this._subMenuParentId);const o=`${this.menuCssClass} slick-menu-level-${i} ${this.gridUid}`,a=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(a){if(a.dataset.subMenuParent===r)return a;this.disposeSubMenus()}const l=Q("div",{ariaExpanded:"true",ariaLabel:i>1?"SubMenu":"Header Menu",role:"menu",className:o,style:{minWidth:`${this.addonOptions.minWidth}px`}});i>0&&(l.classList.add("slick-submenu"),r&&(l.dataset.subMenuParent=r),this.gridOptions?.darkMode&&l.classList.add("slick-dark-mode"));const d=Q("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},l),c={grid:this.grid,column:t,level:i,menu:{commandItems:e}};return n&&i>0&&this.addSubMenuTitleWhenExists(n,d),this.populateCommandOrOptionItems("command",this.addonOptions,d,e,c,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),i++,l}resetHeaderMenuTranslations(e){e.forEach((e=>{if(e?.header?.menu?.commandItems&&!e.excludeFromHeaderMenu){const t=e.header.menu.commandItems||[];this.extensionUtility.translateMenuItemsFromTitleKey(t)}}))}sortColumn(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t?.column){const n=t.column,s=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(n.id+""):[];let r=l.local;s.push({columnId:n.id,sortCol:n,sortAsc:i}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:s,grid:this.sharedService.slickGrid}),r=l.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,s),r=l.local):t.grid.onSort.notify(s);const o=s.map((e=>({columnId:e?.sortCol?.id??"",sortAsc:e?.sortAsc??!0})));if(this.sharedService.slickGrid.setSortColumns(o),r){const e=[];o.forEach((t=>{e.push({columnId:`${t.columnId}`,direction:t.sortAsc?"ASC":"DESC"})})),this.sortService.emitSortChanged(r,e)}}}}const Fo="slick-rbe-editmode",Mo="slick-rbe-unsaved-highlight",Lo="action-btns--delete",No="action-btns--edit",Bo="action-btns--update",Ho="action-btns--cancel";class zo{constructor(e,t,i){this.extensionUtility=e,this.pubSubService=t,this.pluginName="RowBasedEdit",this._defaults={actionsColumnLabel:"Actions",allowMultipleRows:!1,columnId:"_slick_rowbasededit_action",columnIndexPosition:-1,reorderable:!1},this._editedRows=new Map,this._currentLang="en",this._translations={},this.onBeforeEditCellHandler=(e,t)=>this._editedRows.has(t.item?.[this.gridOptions.datasetIdPropertyName??"id"]),this._eventHandler=new ii,this._addonOptions=i}get addonOptions(){return this._addonOptions}get gridOptions(){return this._grid.getOptions()||{}}get eventHandler(){return this._eventHandler}init(e,t){this._grid=e,this._gridService=t,this._addonOptions={...this._defaults,...this.addonOptions};const i=this._grid.getData();if(this._eventHandler.subscribe(this._grid.onBeforeEditCell,this.onBeforeEditCellHandler),this.checkOptionsRequirements(this.gridOptions),this.gridOptions.autoEdit||(this._grid.setOptions({autoEdit:!0}),console.warn('[Slickgrid-Universal] The Row Based Edit Plugin works best with the gridOption "autoEdit" enabled, the option has now been set automatically for you.')),this._existingEditCommandHandler=this.gridOptions.editCommandHandler,this._grid.setOptions({editCommandHandler:this.rowBasedEditCommandHandler.bind(this)}),!0===this.gridOptions.enableExcelCopyBuffer){const e=this.gridOptions.excelCopyBufferOptions?.onBeforePasteCell;this._grid.setOptions({excelCopyBufferOptions:{...this.gridOptions.excelCopyBufferOptions,onBeforePasteCell:(t,n)=>{let s=!0;if(e&&(s=e(t,n),!1===s))return!1;const r=i.getItem(n.row),o=this.gridOptions.datasetIdPropertyName??"id";return!(!this._editedRows.has(r[o])||!0!==s)}}})}const n=i.getItemMetadata;i.getItemMetadata=this.updateItemMetadata(n?.bind?.(i)),this._eventHandler.subscribe(this._grid.onSetOptions,this.optionsUpdatedHandler.bind(this)),this._eventHandler.subscribe(i.onRowsOrCountChanged,this.handleAllRowRerender.bind(this)),this.translate()}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService?.unsubscribeAll()}create(e,t){if(this._addonOptions={...this._defaults,...t.rowBasedEditOptions},Array.isArray(e)&&t){const i=this.getColumnDefinition();if(!e.some((e=>e.id===i.id))){const n=t?.rowBasedEditOptions?.columnIndexPosition??-1;-1===n?e.push(i):n>0&&n<e.length?e.splice(n,0,i):e.unshift(i),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){return{id:String(this._addonOptions?.columnId??this._defaults.columnId),name:this._addonOptions?.actionsColumnLabel,field:"action",minWidth:70,width:75,maxWidth:75,excludeFromExport:!0,reorderable:this._addonOptions?.reorderable,formatter:this.actionColumnFormatter.bind(this),onCellClick:this.onCellClickHandler.bind(this),...this._addonOptions?.actionColumnConfig??{}}}rowBasedEditCommandHandler(e,t,i){this._existingEditCommandHandler&&this._existingEditCommandHandler(e,t,i);const n=Array.isArray(i.prevSerializedValue)?i.prevSerializedValue:[i.prevSerializedValue],s=Array.isArray(i.serializedValue)?i.serializedValue:[i.serializedValue],r=this._gridService?.getAllColumnDefinitions().filter((e=>void 0!==e.editor)),o=[],a=this.gridOptions.datasetIdPropertyName??"id";n.forEach(((l,d)=>{const c=n[d],h=s[d];if(c!==h||""===h){const n=Array.isArray(i.prevSerializedValue)?r?.[d]:t;if(!n)return;this._grid.invalidate(),i.execute(),this.renderUnsavedCellStyling(e[a],n),o.push(n)}}));const l=this._editedRows.get(e[a]),d=[...l?.editCommands||[]];o.length>0&&d.push(i),this._editedRows.set(e[a],{columns:[...l?.columns||[],...o],editCommands:d,cssStyleKeys:l?.cssStyleKeys||[]})}translate(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._currentLang=this.extensionUtility.translaterService?.getCurrentLanguage()??"en",this._translations[this._currentLang]&&!e||(this._translations[this._currentLang]={btnUpdateTitle:this.getTitleOrDefault("updateButtonTitle","Update the row"),btnEditTitle:this.getTitleOrDefault("editButtonTitle","Edit the Row"),btnDeleteTitle:this.getTitleOrDefault("deleteButtonTitle","Delete the Row"),btnCancelTitle:this.getTitleOrDefault("cancelButtonTitle","Cancel changes of the Row")}),this._translations[this._currentLang]}checkOptionsRequirements(e){if(!e?.enableCellNavigation)throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption cell navigation (enableCellNavigation = true)");if(!e?.editable)throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption editable (editable = true)")}undoRowEdit(e){const t=this.gridOptions.datasetIdPropertyName??"id",i=this._editedRows.get(e[t]),n=this._grid.getData().getRowByItem(e);if(void 0!==n&&i?.editCommands&&i.editCommands.length||li.cancelCurrentEdit()){for(;i.editCommands.length>0;){const e=i.editCommands.pop();e&&e.undo()}i.columns.forEach((e=>{this.removeUnsavedStylingFromCell(e,n)})),i.columns=[],this._grid.invalidate()}}renderUnsavedCellStyling(e,t){if(t){const i=this._grid.getData()?.getRowById(e);if(void 0!==i&&i>=0){const n={[i]:{[t.id]:"slick-rbe-unsaved-cell"}},s=`${Mo}_${[t.id]}${i}`;this._grid.setCellCssStyles(s,n),this._editedRows.get(e)?.cssStyleKeys.push(s)}}}handleAllRowRerender(e,t){this._editedRows.forEach(((e,t)=>{e.cssStyleKeys.forEach((e=>{this._grid.removeCellCssStyles(e)})),e.cssStyleKeys=[],e.columns.forEach((e=>{this.renderUnsavedCellStyling(t,e)}))}))}removeUnsavedStylingFromCell(e,t){const i=`${Mo}_${[e.id]}${t}`;this._grid.removeCellCssStyles(i)}removeUnsavedStylingFromRow(e){this._grid.getColumns().forEach((t=>{this.removeUnsavedStylingFromCell(t,e)}))}optionsUpdatedHandler(e,t){this._addonOptions={...this._defaults,...t.optionsAfter.rowBasedEditOptions}}async onCellClickHandler(e,t){const i=t.dataContext,n=e.target,s=this.gridOptions.datasetIdPropertyName??"id",r=this._editedRows.get(i[s]);if((n.classList.contains(Lo)||n.parentElement?.classList.contains(Lo))&&this._gridService){if(this._addonOptions?.actionButtons?.deleteButtonPrompt&&!window.confirm(this._addonOptions.actionButtons.deleteButtonPrompt))return;this.toggleEditmode(i,!1),this._gridService.deleteItem(i)}else if(n.classList.contains(No)||n.parentElement?.classList.contains(No)){if(!this._addonOptions?.allowMultipleRows&&this._editedRows.size>0)return;"function"===typeof this._addonOptions?.onBeforeEditMode&&this._addonOptions.onBeforeEditMode(t),this.toggleEditmode(i,!0)}else if(n.classList.contains(Bo)||n.parentElement?.classList.contains(Bo)){if(this._addonOptions?.actionButtons?.updateButtonPrompt&&(r?.editCommands.length||0)>0&&!window.confirm(this._addonOptions.actionButtons.updateButtonPrompt))return;if(this._grid.getCellEditor()&&this._grid.getActiveCell()?.row===t.row&&this._grid.getEditController()?.commitCurrentEdit(),this._addonOptions?.onBeforeRowUpdated){if(!0!==await this._addonOptions.onBeforeRowUpdated(t))return}this.removeUnsavedStylingFromRow(t.row),this.toggleEditmode(i,!1)}else if(n.classList.contains(Ho)||n.parentElement?.classList.contains(Ho)){if(this._addonOptions?.actionButtons?.cancelButtonPrompt&&(r?.editCommands.length||0)>0&&!window.confirm(this._addonOptions.actionButtons.cancelButtonPrompt))return;this.undoRowEdit(i),this.toggleEditmode(i,!1)}}actionColumnFormatter(e,t,i,n,s){const r=this.gridOptions,o=this._editedRows.has(s?.[r.datasetIdPropertyName??"id"]),a=this._translations[this._currentLang]??this.translate(),l=document.createDocumentFragment();return l.appendChild(Q("span",{className:`${r.rowBasedEditOptions?.actionButtons?.editButtonClassName||"button-style padding-1px mr-2"} action-btns `+No,title:a.btnEditTitle,style:{display:o?"none":""}})).appendChild(Q("span",{className:r.rowBasedEditOptions?.actionButtons?.iconEditButtonClassName||"mdi mdi-table-edit text-color-primary"})),l.appendChild(Q("span",{className:`${r.rowBasedEditOptions?.actionButtons?.deleteButtonClassName||"button-style padding-1px"} action-btns `+Lo,title:a.btnDeleteTitle,style:{display:o?"none":""}})).appendChild(Q("span",{className:r.rowBasedEditOptions?.actionButtons?.iconDeleteButtonClassName||"mdi mdi-close text-color-danger"})),l.appendChild(Q("span",{className:`${r.rowBasedEditOptions?.actionButtons?.updateButtonClassName||"button-style padding-1px mr-2"} action-btns `+Bo,title:a.btnUpdateTitle,style:{display:o?"":"none"}})).appendChild(Q("span",{className:r.rowBasedEditOptions?.actionButtons?.iconUpdateButtonClassName||"mdi mdi-check-bold text-color-success"})),l.appendChild(Q("span",{className:`${r.rowBasedEditOptions?.actionButtons?.cancelButtonClassName||"button-style padding-1px"} action-btns `+Ho,title:a.btnCancelTitle,style:{display:o?"":"none"}})).appendChild(Q("span",{className:r.rowBasedEditOptions?.actionButtons?.iconCancelButtonClassName||"mdi mdi-cancel text-color-danger"})),l}toggleEditmode(e,t){const i=this.gridOptions.datasetIdPropertyName??"id";t?this._editedRows.set(e[i],{columns:[],editCommands:[],cssStyleKeys:[]}):this._editedRows.delete(e[i]),this._grid.invalidate()}updateItemMetadata(e){return t=>{const i=this._grid.getData().getItem(t);let n={cssClasses:""};if("function"===typeof e){const i=e(t);i&&(n=i)}if(n&&i){const e=this.gridOptions.datasetIdPropertyName??"id";this._editedRows.has(i[e])&&!n.cssClasses.includes(Fo)?n.cssClasses=(n.cssClasses||"")+" "+Fo:!this._editedRows.has(i[e])&&n.cssClasses.includes(Fo)&&(n.cssClasses=n.cssClasses.replace(Fo,""))}return n}}getTitleOrDefault(e,t){const i=this.gridOptions.rowBasedEditOptions?.actionButtons;return i?.[e+"Key"]&&this.extensionUtility.translaterService?.translate?.(i?.[e+"Key"]||"")||i?.[e]||t}}class $o{constructor(e){this.pubSubService=e,this.pluginName="RowMoveManager",this._dragging=!1,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,reorderable:!1,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new ti("onBeforeMoveRows"),this.onMoveRows=new ti("onMoveRows"),this._eventHandler=new ii}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}init(e,t){this._addonOptions={...this._defaults,...t},this._grid=e,this._canvas=this._grid.getCanvasNode(),ai.addSlickEventPubSubWhenDefined(this.pubSubService,this),"function"===typeof this._addonOptions?.usabilityOverride&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){this._eventHandler?.unsubscribeAll()}create(e,t){if(this._addonOptions={...this._defaults,...t.rowMoveManager},Array.isArray(e)&&t){const i=this.getColumnDefinition();if(!e.some((e=>e.id===i.id))){const n=Array.isArray(e)&&e.find((e=>"selectAndMove"===e?.behavior)),s=n||i,r=t?.rowMoveManager?.columnIndexPosition??0;r>0?e.splice(r,0,s):e.unshift(s),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){const e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:e,reorderable:this._addonOptions.reorderable,resizable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(e){this._usabilityOverride=e}setOptions(e){this._addonOptions={...this._addonOptions,...e}}handleDragInit(e){e.stopImmediatePropagation()}handleDragEnd(e,t){if(this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),t.guide?.remove(),t.selectionProxy?.remove(),t.clonedSlickRow?.remove(),t.canMove)){const i={grid:this._grid,rows:t.selectedRows,insertBefore:t.insertBefore};"function"===typeof this._addonOptions.onMoveRows&&this._addonOptions.onMoveRows(e instanceof ei?e.getNativeEvent():e,i),this.onMoveRows.notify(i)}}handleDrag(e,t){if(this._dragging){e.stopImmediatePropagation();const i=e.getNativeEvent(),n=(i?.touches?.[0]??i).pageY-ne(this._canvas).top;t.selectionProxy.style.top=n-5+"px",t.selectionProxy.style.display="block",t.clonedSlickRow&&(t.clonedSlickRow.style.top=n-6+"px",t.clonedSlickRow.style.display="block");const s=Math.max(0,Math.min(Math.round(n/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(s!==t.insertBefore){const e={grid:this._grid,rows:t.selectedRows,insertBefore:s};if(!1===this._addonOptions?.onBeforeMoveRows?.(i,e)||!1===this.onBeforeMoveRows.notify(e).getReturnValue()?t.canMove=!1:t.canMove=!0,this._usabilityOverride&&t.canMove){const e=this._grid.getDataItem(s);t.canMove=this.checkUsabilityOverride(s,e,this._grid)}t.canMove?t.guide.style.top=s*(this.gridOptions.rowHeight||0)+"px":t.guide.style.top="-1000px",t.insertBefore=s}}}handleDragStart(e,t){const i=this._grid.getCellFromEvent(e)||{cell:-1,row:-1},n=i.row,s=this._grid.getDataItem(n);if(this.checkUsabilityOverride(n,s,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[i.cell].behavior||""))return!1;if(this._dragging=!0,e.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){const e=this._grid.getCellNode(i.row,i.cell)?.closest(".slick-row");e&&(t.clonedSlickRow=e.cloneNode(!0),t.clonedSlickRow.classList.add("slick-reorder-shadow-row"),t.clonedSlickRow.style.display="none",t.clonedSlickRow.style.marginLeft=ae(this._addonOptions?.rowMoveShadowMarginLeft,"0px"),t.clonedSlickRow.style.marginTop=ae(this._addonOptions?.rowMoveShadowMarginTop,"0px"),t.clonedSlickRow.style.opacity=`${this._addonOptions?.rowMoveShadowOpacity??.95}`,t.clonedSlickRow.style.transform=`scale(${this.addonOptions?.rowMoveShadowScale??.75})`,this._canvas.appendChild(t.clonedSlickRow))}let n=this._addonOptions.singleRowMove?[i.row]:this._grid.getSelectedRows();0!==n.length&&n.some((e=>e===i.row))||(n=[i.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(n));const s=this.gridOptions.rowHeight;t.selectedRows=n,t.selectionProxy=Q("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:s*n.length+"px"}},this._canvas),t.guide=Q("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),t.insertBefore=-1}}checkUsabilityOverride(e,t,i){return"function"!==typeof this._usabilityOverride||this._usabilityOverride(e,t,i)}moveIconFormatter(e,t,i,n,s,r){return this.checkUsabilityOverride(e,s,r)?{addClasses:"cell-reorder dnd",html:Q("div",{className:this._addonOptions.cssClass||""})}:""}}class Uo{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(e,t,i,n,s,r,o,a){this.extensionUtility=e,this.filterService=t,this.pubSubService=i,this.sharedService=n,this.sortService=s,this.treeDataService=r,this.translaterService=o,this.lazyGridService=a,this._extensionCreatedList={},this._extensionList={},this._requireInitExternalExtensions=[]}dispose(){if(this.sharedService.visibleColumns=[],"object"===typeof this._extensionList){const e=Object.keys(this._extensionList);e.forEach((e=>{if(this._extensionList.hasOwnProperty(e)){const t=this._extensionList[e];"function"===typeof t?.instance?.dispose&&t.instance.dispose()}})),e.forEach((e=>{delete this._extensionList[e]}))}this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList={}}addExtensionToList(e,t){this._extensionList[e]=t}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(e){if(this._extensionCreatedList?.hasOwnProperty(e))return this._extensionCreatedList[e]}getExtensionByName(e){return this._extensionList?.[e]}getExtensionInstanceByName(e){return this.getExtensionByName(e)?.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableRowBasedEdit){this._rowBasedEdit=this._rowBasedEdit||new zo(this.extensionUtility,this.pubSubService,this.gridOptions.rowBasedEditOptions);const e=this.lazyGridService?.();if(!e)throw new Error("[Slickgrid-Universal] the RowBasedEdit Plugin requires a GridService to be configured and available");this._rowBasedEdit.init(this.sharedService.slickGrid,e),this.gridOptions.rowBasedEditOptions?.onExtensionRegistered&&this.gridOptions.rowBasedEditOptions.onExtensionRegistered(this._rowBasedEdit),this._extensionList[b.rowBasedEdit]={name:b.rowBasedEdit,instance:this._rowBasedEdit}}if(this.gridOptions.enableAutoTooltip){const e=new Xr(this.gridOptions?.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(e),this._extensionList[b.autoTooltip]={name:b.autoTooltip,instance:e}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new Qr,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),this.gridOptions.excelCopyBufferOptions?.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[b.cellExternalCopyManager]={name:b.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new no(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.cellMenu?.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[b.cellMenu]={name:b.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){const e=this.gridOptions.rowSelectionOptions??{};this.gridOptions.enableRowMoveManager&&!1!==this.gridOptions.rowMoveManager?.dragToSelect&&(e.dragToSelect=!0),this._rowSelectionModel=new ao(e),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[b.rowSelection]={name:b.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new ho(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);const e=this.getCreatedExtensionByName(b.checkboxSelector),t=e?.instance;t&&(this.gridOptions.checkboxSelector?.onExtensionRegistered&&this.gridOptions.checkboxSelector.onExtensionRegistered(t),this._extensionList[b.checkboxSelector]={name:b.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new wo(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.columnPicker?.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[b.columnPicker]={name:b.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new Ro(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),this.gridOptions.contextMenu?.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[b.contextMenu]={name:b.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),this.gridOptions.draggableGrouping?.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[b.contextMenu]={name:b.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[b.draggableGrouping]={name:b.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new uo(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.gridMenu?.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[b.gridMenu]={name:b.gridMenu,instance:this._gridMenuControl}),this.gridOptions.enableHeaderButton){const e=new Do(this.extensionUtility,this.pubSubService,this.sharedService);this.gridOptions.headerButton?.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(e),this._extensionList[b.headerButton]={name:b.headerButton,instance:e}}if(this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new Po(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.headerMenu?.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[b.headerMenu]={name:b.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager){this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new $o(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager);const e=this.getCreatedExtensionByName(b.rowMoveManager),t=e?.instance;t&&(this._extensionList[b.rowMoveManager]={name:b.rowMoveManager,instance:this._rowMoveManagerPlugin})}this._requireInitExternalExtensions.length&&this._requireInitExternalExtensions.forEach((e=>{e.instance.init(this.sharedService.slickGrid,void 0)}))}}createExtensionsBeforeGridCreation(e,t){const i=[];if(t.enableCheckboxSelector&&(this.getCreatedExtensionByName(b.checkboxSelector)||(this._checkboxSelectColumn=new ho(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),i.push({name:b.checkboxSelector,instance:this._checkboxSelectColumn,columnIndexPosition:t?.checkboxSelector?.columnIndexPosition??i.length}))),t.enableRowMoveManager&&(this.getCreatedExtensionByName(b.rowMoveManager)||(this._rowMoveManagerPlugin=new $o(this.pubSubService),i.push({name:b.rowMoveManager,instance:this._rowMoveManagerPlugin,columnIndexPosition:t?.rowMoveManager?.columnIndexPosition??i.length}))),t.enableRowBasedEdit&&(this.getCreatedExtensionByName(b.rowBasedEdit)||(this._rowBasedEdit=new zo(this.extensionUtility,this.pubSubService),i.push({name:b.rowBasedEdit,instance:this._rowBasedEdit,columnIndexPosition:t?.rowMoveManager?.columnIndexPosition??i.length}))),t.preRegisterExternalExtensions){t.preRegisterExternalExtensions(this.pubSubService).forEach((e=>{i.push(e),this._requireInitExternalExtensions.push(e),this._extensionList[e.name]||this.addExtensionToList(e.name,e)}))}this.createExtensionByTheirColumnIndex(i,e,t),t.enableDraggableGrouping&&(this.getCreatedExtensionByName(b.draggableGrouping)||(this._draggleGroupingPlugin=new Ao(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(t.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[b.draggableGrouping]={name:b.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(e){if("function"===typeof this.sharedService?.slickGrid?.getColumns){const t=this.sharedService.slickGrid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),t),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(e){this.extensionUtility.refreshBackendDataset(e)}removeColumnByIndex(e,t){return Array.isArray(e)?e.filter(((e,i)=>t!==i)):e}translateAllExtensions(e){this.translateCellMenu(),this.translateContextMenu(),this.translateHeaderMenu(),this.translateRowEditPlugin(),this.translateColumnHeaders(e)}translateCellMenu(){this._cellMenuPlugin?.translateCellMenu()}translateColumnPicker(){this._columnPickerControl?.translateColumnPicker()}translateContextMenu(){this._contextMenuPlugin?.translateContextMenu()}translateGridMenu(){this._gridMenuControl?.translateGridMenu()}translateHeaderMenu(){this._headerMenuPlugin?.translateHeaderMenu()}translateRowEditPlugin(){this._rowBasedEdit?.translate()}translateColumnHeaders(e,t){if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');e&&this.translaterService?.use&&this.translaterService.getCurrentLanguage()!==e&&this.translaterService.use(e);let i=t;i||(i=this.sharedService.columnDefinitions),this.translateItems(i,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup"),this.renderColumnHeaders(i,Array.isArray(t))}renderColumnHeaders(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e;i||(i=this.sharedService.columnDefinitions),Array.isArray(i)&&this.sharedService.slickGrid?.setColumns&&((i.length>this.sharedService.allColumns.length||t)&&(this.sharedService.allColumns=i),this.sharedService.slickGrid.setColumns(i)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns,this._columnPickerControl.translateColumnPicker()),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=this.sharedService.allColumns??[],this._gridMenuControl.recreateGridMenu(),this._gridMenuControl.translateGridMenu())}createExtensionByTheirColumnIndex(e,t,i){e.sort(((e,t)=>(e?.columnIndexPosition??0)-(t?.columnIndexPosition??0))),e.forEach((e=>{const n=e.instance.create(t,i);n&&(this._extensionCreatedList[e.name]={name:e.name,instance:n})}))}translateItems(e,t,i){if(this.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.extensionUtility.translateItems(e,t,i)}}function Vo(e,t,i){if(i&&(e?.hasOwnProperty(i)||t?.hasOwnProperty(i)))return e[i]===t||e===t[i]||e[i]===t[i];if("object"===typeof e&&"object"===typeof t&&Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e.hasOwnProperty(n)&&e[n]!==t[n])return!1;return!0}const Wo=(e,t,i)=>{switch(e.toUpperCase()){case"<":case"LT":return t<i;case"<=":case"LE":return t<=i;case">":case"GT":return t>i;case">=":case"GE":return t>=i;case"!=":case"<>":case"NE":return t!==i;case"=":case"==":case"EQ":return t===i;case"IN":return!(!i||!Array.isArray(i))&&i.includes(t);case"NIN":case"NOT_IN":return!(!i||!Array.isArray(i))&&!i.includes(t);case"IN_CONTAINS":return!(!i||!Array.isArray(i)||"string"!==typeof t)&&i.some((e=>t.split(/[,]+/).map((e=>e.trim())).includes(e)));case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return!(!i||!Array.isArray(i)||"string"!==typeof t)&&!i.some((e=>t.split(/[,]+/).map((e=>e.trim())).includes(e)));case"IN_COLLECTION":return!!(t&&i&&Array.isArray(t)&&Array.isArray(i))&&i.some((e=>t.includes(e)));case"NOT_IN_COLLECTION":return!!(t&&i&&Array.isArray(t)&&Array.isArray(i))&&!i.some((e=>t.includes(e)))}return!0},jo=(e,t)=>{let[i,n]=t;if(void 0===i&&!e.operator)return!0;e.cellValue=void 0===e.cellValue||null===e.cellValue?"":e.cellValue.toString();const s=e?.ignoreAccentOnStringFilterAndSort?Be(e.cellValue,!0):e.cellValue.toLowerCase();if("string"===typeof i&&(i=e?.ignoreAccentOnStringFilterAndSort?Be(i,!0):i.toLowerCase()),"string"===typeof n&&(n=e?.ignoreAccentOnStringFilterAndSort?Be(n,!0):n.toLowerCase()),e.operator===C.startsWithEndsWith&&void 0!==i&&void 0!==n)return function(e,t){let[i,n]=t;return e.startsWith(i)&&e.endsWith(n)}(s,[i,n]);if(void 0!==i&&void 0!==n){let t=e?.operator??e.defaultFilterRangeOperator;t!==C.rangeInclusive&&t!==C.rangeExclusive&&(t=e.defaultFilterRangeOperator);const r=t===C.rangeInclusive,o=Go(r?">=":">",s,i,e.searchInputLastChar),a=Go(r?"<=":"<",s,n,e.searchInputLastChar);return o&&a}return Go(e.operator,s,i,e.searchInputLastChar)};function Go(e,t,i,n){return"*"===e||e===C.endsWith||"*z"===e?t.endsWith(i):""===e&&"*"===n||e===C.startsWith||"a*"===e?t.startsWith(i):""===e||e===C.contains?t.indexOf(i)>-1:"<>"===e||e===C.notContains?-1===t.indexOf(i):Wo(e||"==",t,i)}const Yo=(e,t)=>{const i=parseFloat(e.cellValue),[n,s]=t;if(void 0===n&&!e.operator)return!0;if(void 0!==n&&void 0!==s){let t=e?.operator??e.defaultFilterRangeOperator;t!==C.rangeInclusive&&t!==C.rangeExclusive&&(t=e.defaultFilterRangeOperator);const r=t===C.rangeInclusive,o=Wo(r?">=":">",i,+n),a=Wo(r?"<=":"<",i,+s);return o&&a}return Wo(e.operator||"==",i,+n)};const Ko=(e,t)=>Ne(e.cellValue)===Ne(t);const qo=e=>{const t=e.operator;let i;return i=!Array.isArray(e.cellValue)||"IN_COLLECTION"!==t&&"NOT_IN_COLLECTION"!==t?void 0===e.cellValue||null===e.cellValue?"":`${e.cellValue}`:e.cellValue.length?e.cellValue.map((e=>`${e}`)):[],Wo(t||"IN",i,e.searchTerms||[])};function Xo(e,t){let i;switch(Qo(t)){case"boolean":i=function(e){return Ne(Array.isArray(e)&&e[0]||!1)}(e);break;case"date":i=function(e,t){const i=Array.isArray(e)&&e||[],n=Pt(t||y.dateIso),s=[];if(2===i.length||"string"===typeof i[0]&&i[0].indexOf("..")>0){const e=2===i.length?i:i[0].split(".."),t=Array.isArray(e)&&e[0]||"",r=Array.isArray(e)&&e[1]||"",o=Mt(t,n,!0),a=Mt(r,n,!0);if(!o||!a)return[];s.push(o,a)}else{const e=Mt(i[0],n,!0);if(!e)return[];s.push(e)}return s}(e,t);break;case"number":i=function(e){const t=Array.isArray(e)&&e||[0],i=[];let n,s;if(2===t.length||"string"===typeof t[0]&&t[0].indexOf("..")>0){const e=2===t.length?t:t[0].split("..");n=parseFloat(Array.isArray(e)?e[0]:""),s=parseFloat(Array.isArray(e)?e[1]:"")}else n=parseFloat(t[0]);return Me(n,!0)&&Me(s,!0)?i.push(n,s):Me(n,!0)&&i.push(n),i}(e);break;case"object":i=function(e){return(Array.isArray(e)&&e.length>0?e[0]:"")||""}(e);break;case"string":i=function(e){let t=Array.isArray(e)&&e||[""];const i=[];let n,s;if(1===t.length&&"string"===typeof t[0]){const e=t[0];e.indexOf("..")>0?t=e.split(".."):e.indexOf("*")>0&&e.indexOf("*")<e.length-1&&(t=e.split("*"))}if(2===t.length)n=`${t[0]}`,s=`${t[1]}`;else{const t=Array.isArray(e)&&e.length>0?e[0]:"";n=void 0===t||null===t?"":`${t}`}return void 0!==n&&void 0!==s?i.push(n,s):void 0!==n&&i.push(n),i}(e)}return i}function Qo(e){if(U(e))return"date";switch(e){case y.boolean:return"boolean";case y.integer:case y.float:case y.number:return"number";case y.object:return"object";case y.string:case y.text:case y.password:case y.readonly:default:return"string"}}const Zo=(e,t)=>{if(function(e){switch(e&&e.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}(e.operator))return qo(e);switch(Qo(e.filterSearchType||e.fieldType)){case"boolean":return Ko(e,t);case"date":return function(e,t){const i=Pt(e&&(e.filterSearchType||e.fieldType)||y.dateIso),[n,s]=t,r=Mt(e.cellValue,i,!0);if(!n&&!s||!r)return!1;const o="ISO8601"===i||i.toLowerCase().includes("h")?r.valueOf():Et(new Date(r)).valueOf();if(n&&s){let t=e?.operator??e.defaultFilterRangeOperator;t!==C.rangeInclusive&&t!==C.rangeExclusive&&(t=e.defaultFilterRangeOperator);const i=t===C.rangeInclusive,r=Wo(i?">=":">",o,n.valueOf()),a=Wo(i?"<=":"<",o,s.valueOf());return r&&a}const a="ISO8601"===i||i.toLowerCase().includes("h")?n.valueOf():Et(new Date(n)).valueOf();return Wo(e.operator||"==",o,a)}(e,t||[]);case"number":return Yo(e,t||[]);case"object":return((e,t)=>{if(void 0===t&&!e.operator)return!0;switch((e.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!Vo(e.cellValue,t,e.dataKey);default:return Vo(e.cellValue,t,e.dataKey)}})(e,t);default:return jo(e,t||[])}};class Jo{constructor(e,t,i,n,s){this.filterFactory=e,this.pubSubService=t,this.sharedService=i,this.backendUtilities=n,this.rxjs=s,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new ti,this._eventHandler=new ii,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}get _dataView(){return this._grid?.getData()??{}}addRxJsResource(e){this.rxjs=e}init(e){this._grid=e,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let e=this._filtersMetadata.pop();for(;e;)"function"===typeof e?.destroy&&e.destroy(),e=this._filtersMetadata.pop()}}bindBackendOnFilter(e){this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,((e,t)=>{t.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(t,this._isFilterFirstRender),""===this._firstColumnIdRendered&&(this._firstColumnIdRendered=t.column.id)})),this.subscribeToOnHeaderRowCellRendered(e),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(e){this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,(async(e,t)=>{const i=t?.clearFilterTriggered??!1;i||await this.emitFilterChanged(l.local,!0),!0===this._gridOptions.enableTreeData&&(this._tmpPreFilteredData=this.preFilterTreeData(this._dataView.getItems(),this._columnFilters)),i||await this.emitFilterChanged(l.local),null!==t.columnId&&this._dataView.refresh(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)})),this._eventHandler.subscribe(e.onHeaderRowCellRendered,((e,t)=>{this.addFilterTemplateToHeaderRow(t)})),this.subscribeToOnHeaderRowCellRendered(e)}async clearFilterByColumnId(e,t){await this.pubSubService.publish("onBeforeFilterClear",{columnId:t},0);const i=this._gridOptions.backendServiceApi??!1,n=i?l.remote:l.local,s=Object.keys(this._columnFilters);let r;Array.isArray(s)&&(r=s.find((e=>e===`${t}`)));const o=this._filtersMetadata.find((e=>e.columnDef.id===t));return o?.clear&&o.clear(!0),i&&void 0!==r&&this.onBackendFilterChange(e,{grid:this._grid,columnFilters:this._columnFilters}),await this.emitFilterChanged(n),!0}async clearFilters(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e&&await this.pubSubService.publish("onBeforeFilterClear",!0,0),this._filtersMetadata.forEach((e=>{e?.clear&&e.clear(!1)})),this.removeAllColumnFiltersProperties(),Array.isArray(this._columnDefinitions)&&this._columnDefinitions.forEach((e=>{e.filter?.searchTerms&&delete e.filter.searchTerms})),this._dataView&&this._grid&&(this._dataView.refresh(),this._grid.invalidate());const t=this._gridOptions.backendServiceApi;if(t&&e){const i={clearFilterTriggered:!0,shouldTriggerQuery:e,grid:this._grid,columnFilters:this._columnFilters},n=t.service.processOnFilterChanged(void 0,i),s=this._gridOptions.pagination?.totalItems??0;this.backendUtilities?.executeBackendCallback(t,n,i,new Date,s,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:e=>this._previousFilters=this.extractBasicFilterDetails(e.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this)})}else this._previousFilters=this.extractBasicFilterDetails(this._columnFilters);e&&this.pubSubService.publish("onFilterCleared",!0)}customLocalFilter(e,t){const i=t?.grid,n=t?.columnFilters??{},s=this._gridOptions.enableTreeData??!1,r=this._gridOptions.treeDataOptions;if(s&&r){const t=r.collapsedPropName??g.treeDataProperties.COLLAPSED_PROP,i=r.parentPropName??g.treeDataProperties.PARENT_PROP,n=r?.childrenPropName??g.treeDataProperties.CHILDREN_PROP,s=this._gridOptions.datasetIdPropertyName??"id",o=r.autoRecalcTotalsOnFilterChange??!1;let a=!1;if(null!==e[i]){let n=this._dataView.getItemById(e[i]);for(;n;){if(n[t]){if(!o)return!1;a=!0}n=this._dataView.getItemById(n[i])}}if(this._tmpPreFilteredData instanceof Set){const t=this._tmpPreFilteredData.has(e[s]);if(o){const i=M(this.sharedService.hierarchicalDataset,(t=>t[s]===e[s]),n);if(i&&(i.__filteredOut=!t),a)return!1}return t}}else if("object"===typeof n)for(const o of Object.keys(n)){const t=n[o],s=t.columnDef?.filter;if("function"===typeof s?.filterPredicate){if(!s.filterPredicate(e,t))return!1}else{const n=this.preProcessFilterConditionOnDataContext(e,t,i);if("boolean"===typeof n)return n;let s=t?.parsedSearchTerms;if(void 0===s&&(s=Xo(t.searchTerms,t.columnDef.type||y.string),void 0!==s&&(t.parsedSearchTerms=s)),!Zo(n,s))return!1}}return!0}parseFormInputFilterConditions(e,t){const i=Se(!0,[],e)||[];let n=Array.isArray(i)&&1===i.length?i[0]:"";const s=t.columnDef,r=s.filter?.type??s.type??y.string;let o=null;if(r!==y.object){n=void 0===n||null===n?"":`${n}`;o=!1!==(s.autoParseInputFilterOperator??this._gridOptions.autoParseInputFilterOperator)?n.match(/^((.*[^\\*\r\n])[*]{1}(.*[^*\r\n]))|^([<>!=*]{0,2})(.*[^<>!=*])([*]?)$/)||[]:[n,"","","","",n,""]}const a=o?.[2]||"",l=o?.[3]||"";let d=o?.[4]||t.operator,c=o?.[1]||o?.[5]||"";const h=o?.[6]||("*z"===d?"*":"");return"string"===typeof n&&(n=n.replace("'","''"),a&&l?(c=n,d=C.startsWithEndsWith):"*"===d||"*z"===d?d=C.endsWith:"a*"!==d&&"*"!==h||(d=C.startsWith)),Array.isArray(o)&&o.length>=1&&Array.isArray(i)&&1===i.length&&(i[0]=c.length>0&&" "===c.substring(0,1)?c.substring(1):c),{dataKey:s.dataKey,fieldType:r,searchTerms:i||[],operator:d,searchInputLastChar:h,filterSearchType:s.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(e,t,i){const n=t.columnDef,s=t.columnId;let r=i.getColumnIndex(s);if(!n&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(r=this.sharedService.allColumns.findIndex((e=>e.field===s))),!n)return!0;if(this._gridOptions.enableRowDetailView){const t=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";e[`${t}isPadding`]&&e[`${t}parent`]&&(e=e[`${t}parent`])}let o=n.filter?.queryField||n.queryFieldFilter||n.queryField||n.field||"";"function"===typeof n.queryFieldNameGetterFn&&(o=n.queryFieldNameGetterFn(e));const a=n.filter?.type??n.type??y.string;let l=e[o];o?.indexOf(".")>=0&&(l=H(e,o));const d=t.operator,c=t.searchTerms||[];if(!c||Array.isArray(c)&&(0===c.length||1===c.length&&d===c[0]))return!0;if(c&&Array.isArray(c)&&a!==y.object)for(let h=0,u=c.length;h<u;h++)c[h]=(void 0===c[h]||null===c[h]?"":c[h])+"";if(!0===n?.params?.useFormatterOuputToFilter){const t=this._gridOptions.datasetIdPropertyName||"id",i=this._dataView&&"function"===typeof this._dataView.getIdxById?this._dataView.getIdxById(e[t]):0;l=Ze(n&&"function"===typeof n.formatter?n.formatter(i||0,r,l,n,e,this._grid):"")}return"number"===typeof l&&(l=l.toString()),{dataKey:n.dataKey,fieldType:a,searchTerms:c,cellValue:l,operator:d,searchInputLastChar:t.searchInputLastChar,filterSearchType:n.filterSearchType,ignoreAccentOnStringFilterAndSort:this._gridOptions.ignoreAccentOnStringFilterAndSort??!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(e,t){const i=this._gridOptions.treeDataOptions,n=i?.collapsedPropName??g.treeDataProperties.COLLAPSED_PROP,s=i?.parentPropName??g.treeDataProperties.PARENT_PROP,r=i?.hasChildrenPropName??g.treeDataProperties.HAS_CHILDREN_PROP,o=this._gridOptions.datasetIdPropertyName??"id",a=this._gridOptions.presets?.treeData?.toggledItems,l=this._gridOptions.treeDataOptions?.initiallyCollapsed??!1,d=this._gridOptions.treeDataOptions?.columnId,c=this._gridOptions.treeDataOptions?.excludeChildrenWhenFilteringTree,h=!c&&!0===this._gridOptions.treeDataOptions?.autoApproveParentItemWhenTreeColumnIsValid,u={},p=new Set,m=new Map;return Array.isArray(e)&&(e.forEach((e=>{u[e[o]]=e,delete u[e[o]].__used})),"object"===typeof t&&Object.keys(t).forEach((e=>{const i=t[e],n=i?.searchTerms?Se(!0,[],i.searchTerms):[],s=this.parseFormInputFilterConditions(n,i),r=i.columnDef,o=r?.filter?.type??r?.type??y.string,a=Xo(s.searchTerms,o);void 0!==a&&(i.parsedSearchTerms=a)})),e.forEach((e=>{const i=e[r];let g=!0;for(const n of Object.keys(t)){const r=t[n],a=this.preProcessFilterConditionOnDataContext(e,r,this._grid);if(a){const t=r?.parsedSearchTerms,n="boolean"===typeof a?a:Zo(a,t);if(n&&h&&i&&r.columnId===d){m.set(e[o],!0);break}if(n||!c&&!0===m.get(e[s])){if(i&&r.columnId===d&&m.set(e[o],!0),n||!c&&r.columnId===d)continue}else i&&!0!==m.get(e[s])&&r.columnId!==d&&m.set(e[o],!1)}g=!1}if(g){p.add(e[o]);let t=u[e[s]]??!1;const i=!l;for(!this._isTreePresetExecuted&&Array.isArray(a)&&a.some((e=>e.itemId===t.id&&e.isCollapsed===i))&&(t[n]=i);t;)t.__used??p.add(t[o]),u[t[o]].__used=!0,t=u[t[s]]??!1}}))),this._isTreePresetExecuted=!0,p}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){const e=[];if(this._columnFilters)for(const t of Object.keys(this._columnFilters)){const i=this._columnFilters[t],n={columnId:t||""},s=this.sharedService.allColumns.find((e=>e.id===n.columnId)),r=s?.filter?.emptySearchTermReturnAllValues??!0;i?.searchTerms&&(n.searchTerms=i.searchTerms),i.operator&&(n.operator=i.operator),i.targetSelector&&(n.targetSelector=i.targetSelector),Array.isArray(n.searchTerms)&&n.searchTerms.length>0&&(!r||""!==n.searchTerms[0])&&e.push(n)}return e}emitFilterChanged(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"onBeforeFilterChange":"onFilterChanged";if(e===l.remote&&this._gridOptions.backendServiceApi){let e=[];const i=this._gridOptions.backendServiceApi.service;return i?.getCurrentFilters&&(e=i.getCurrentFilters()),this.pubSubService.publish(t,e)}if(e===l.local)return this.pubSubService.publish(t,this.getCurrentLocalFilters())}async onBackendFilterChange(e,t){const i=t?.shouldTriggerQuery;if(i&&await this.emitFilterChanged(l.remote,!0),!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');const n=this._gridOptions.backendServiceApi;if(!n||!n.process||!n.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const s=new Date;if(n.preProcess&&n.preProcess(),i){const i=await n.service.processOnFilterChanged(e,t),r=this._gridOptions.pagination?.totalItems??0;this.backendUtilities?.executeBackendCallback(n,i,t,s,r,{errorCallback:this.resetToPreviousSearchFilters.bind(this),successCallback:e=>this._previousFilters=this.extractBasicFilterDetails(e.columnFilters),emitActionChangedCallback:this.emitFilterChanged.bind(this),httpCancelRequestSubject:this.httpCancelRequests$})}}populateColumnFilterSearchTermPresets(e){return Array.isArray(e)&&(this._columnDefinitions.forEach((t=>{t.filter?.searchTerms&&delete t.filter.searchTerms;const i=e.find((e=>e.columnId===t.id));i&&Array.isArray(i?.searchTerms)&&(t.filter=t.filter||{},t.filter.operator=i.operator||t.filter.operator||"",t.filter.searchTerms=i.searchTerms)})),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(e){const t=e??this._dataView?.getItems()??[];this._dataView&&this._gridOptions.enableTreeData&&t.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(t,this._columnFilters),this._dataView.refresh()):0===t.length&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&queueMicrotask((()=>this.refreshTreeDataFilters()))}disableFilterFunctionality(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=!this._gridOptions.enableFiltering;i!==e&&(t&&e&&this.clearFilters(),this.disableAllFilteringCommands(e),this._grid.setOptions({enableFiltering:i},!1,!0),this._grid.setHeaderRowVisibility(i),this._gridOptions.enableFiltering=!e,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._gridOptions.enableFiltering;this.disableFilterFunctionality(t,e)}toggleHeaderFilterRow(){let e=this._gridOptions.showHeaderRow??!1;e=!e,this._grid.setHeaderRowVisibility(e),!0===e&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)}async updateFilters(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!this._filtersMetadata||0===this._filtersMetadata.length||!this._gridOptions||!this._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){this.clearFilters(!1),e.forEach((e=>{const t=this._filtersMetadata.find((t=>e.columnId===t.columnDef.id));if(e&&t){const i=e.operator||t.defaultOperator;this.updateColumnFilters(e.searchTerms,t.columnDef,i),t.setValues(e.searchTerms||[],i),(n||this._gridOptions.enableTreeData)&&this.callbackSearchEvent(void 0,{columnDef:t.columnDef,operator:i,searchTerms:e.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}}));const s=this._gridOptions.backendServiceApi,r=s?l.remote:l.local;if(t&&await this.emitFilterChanged(r,!0),this._dataView.refresh(),s){const t=s?.service;t?.updateFilters&&(t.updateFilters(e,!0),i&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}t&&await this.emitFilterChanged(r)}return!0}async updateSingleFilter(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=this.sharedService.allColumns.find((t=>t.id===e.columnId));if(n&&e.columnId){this._columnFilters={};const s=n.filter?.emptySearchTermReturnAllValues??!0;Array.isArray(e.searchTerms)&&(e.searchTerms.length>1||1===e.searchTerms.length&&(!s||""!==e.searchTerms[0]))&&(this._columnFilters[e.columnId]={columnId:e.columnId,operator:e.operator,searchTerms:e.searchTerms,columnDef:n,type:n.type??y.string});const r=this._gridOptions.backendServiceApi,o=r?l.remote:l.local;if(t&&await this.emitFilterChanged(o,!0),r){const e=r?.service;e?.updateFilters&&(e.updateFilters(this._columnFilters,!0),i&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}else this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._dataView.refresh();t&&await this.emitFilterChanged(o)}return!0}drawFilterTemplate(e,t){let i;if("string"===typeof t){if(i=document.querySelector(t),null===i)return null}else i=t;const n="string"===typeof e?this.sharedService.allColumns.find((t=>t.id===e)):e;if("selector"!==(n?.id??"")&&n?.filterable){let e,t;const s=this.filterFactory.createFilter(n.filter);t=n&&n.filter&&n.filter.operator||s&&s.operator,this._columnFilters[n.id]?(e=this._columnFilters[n.id].searchTerms||void 0,t=this._columnFilters[n.id].operator||void 0):n.filter&&(e=n.filter.searchTerms||void 0,this.updateColumnFilters(e,n,t));const r={grid:this._grid,operator:t,searchTerms:e,columnDef:n,filterContainerElm:i,callback:this.callbackSearchEvent.bind(this)};return s&&(s.init(r),e&&s.setValues&&s.setValues(e,t)),s}return null}addFilterTemplateToHeaderRow(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=e.column;if("selector"!==(i?.id??"")&&i?.filterable&&!i?.hidden){let n,s;const r=this.filterFactory.createFilter(i.filter);s=i&&i.filter&&i.filter.operator||r&&r.operator,this._columnFilters[i.id]?(n=this._columnFilters[i.id].searchTerms||void 0,s=this._columnFilters[i.id].operator||void 0):i.filter&&(n=i.filter.searchTerms||void 0,this.updateColumnFilters(n,i,s));const o={grid:this._grid,operator:s,searchTerms:n,columnDef:i,filterContainerElm:e.node,callback:this.callbackSearchEvent.bind(this)};if(r&&o.filterContainerElm){r.init(o,t);const e=this._filtersMetadata.findIndex((e=>r.columnDef.id===e.columnDef.id));-1===e?this._filtersMetadata.push(r):this._filtersMetadata[e]=r,n&&r.setValues&&r.setValues(n,s)}}}callbackSearchEvent(e,t){if(t){const i=e?.target?e.target.value:void 0,n=t.searchTerms&&Array.isArray(t.searchTerms)?t.searchTerms:i?[i]:void 0,s=t.columnDef||null,r=s?.id??"",o=s?.filter?.type??s?.type??y.string,a=t.operator||void 0,l=n&&Array.isArray(n),d=l&&n&&n.length,c={...this._columnFilters},h=s.filter?.emptySearchTermReturnAllValues??!0;let u;if(s&&r)if(!l||0===d||1===d&&Array.isArray(n)&&h&&""===n[0])delete this._columnFilters[r];else{const t=`${r}`,i={columnId:t,columnDef:s,parsedSearchTerms:[],type:o,targetSelector:this.getSelectorStringFromElement(e?.target)},l=this.parseFormInputFilterConditions(n,i);i.operator=a||l.operator||j(o),u=Xo(l.searchTerms,o),void 0!==u&&(i.parsedSearchTerms=u),i.searchTerms=l.searchTerms||[],this._columnFilters[t]=i}const p=e&&"function"!==typeof e.isPropagationStopped?Se({},new ei,e):e,m=e?.key;if(this._onSearchChange&&(t.forceOnSearchChangeEvent||"Enter"===m||!jt(c,this._columnFilters))){const i={clearFilterTriggered:t.clearFilterTriggered,shouldTriggerQuery:t.shouldTriggerQuery,columnId:r,columnDef:s,columnFilters:this._columnFilters,operator:a||j(o),searchTerms:n,parsedSearchTerms:u,grid:this._grid,target:e?.target};!1===this.pubSubService.publish("onBeforeSearchChange",i)?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(i,p)}}}disableAllFilteringCommands(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._grid.getColumns();t.forEach((t=>{t?.header?.menu&&t.header.menu.commandItems?.forEach((t=>{if(t&&"string"!==typeof t){"clear-filter"===t.command&&(t.hidden=e)}}))}));const i=this._gridOptions.gridMenu?.commandItems;return i&&i.forEach((t=>{if(t&&"string"!==typeof t){const i=t.command;"clear-filter"!==i&&"toggle-filter"!==i||(t.hidden=e)}})),t}extractBasicFilterDetails(e){const t=[];if(e&&"object"===typeof e)for(const i of Object.keys(e)){const{operator:n,searchTerms:s}=e[`${i}`];t.push({columnId:i,operator:n,searchTerms:s})}return t}getSelectorStringFromElement(e){return e?.localName?e?.className?`${e.localName}.${Array.from(e.classList).join(".")}`:e.localName:""}removeAllColumnFiltersProperties(){"object"===typeof this._columnFilters&&Object.keys(this._columnFilters).forEach((e=>{e&&this._columnFilters[e]&&delete this._columnFilters[e]}))}subscribeToOnHeaderRowCellRendered(e){this._eventHandler.subscribe(e.onBeforeHeaderRowCellDestroy,((e,t)=>{const i=this._filtersMetadata.find((e=>e.columnDef.id===t.column.id));i?.destroy?.()}))}updateColumnFilters(e,t,i){const n=t.filter?.type??t.type??y.string,s=Xo(e,n);e&&t&&(this._columnFilters[t.id]={columnId:t.id,columnDef:t,searchTerms:e,operator:i,parsedSearchTerms:s,type:n})}}const ea={skipError:!1,triggerEvent:!0},ta={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},ia={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},na={applySetColumns:!0,autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1},sa={autoResizeColumns:!0,triggerEvent:!0};class ra{constructor(e,t,i,n,s,r,o){this.gridStateService=e,this.filterService=t,this.pubSubService=i,this.paginationService=n,this.sharedService=s,this.sortService=r,this.treeDataService=o}get _dataView(){return this._grid?.getData()}get _gridOptions(){return this._grid?.getOptions()??{}}dispose(){this._rowSelectionPlugin?.dispose()}init(e){this._grid=e}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearPinning(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),e&&Array.isArray(t)&&this.sharedService.slickGrid.setColumns(t)}setPinning(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Le(e)?this.clearPinning():(this.sharedService.slickGrid.setOptions(e,i,n),this.sharedService.gridOptions={...this.sharedService.gridOptions,...e}),t&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(e){if(!e||!e.grid||!e.grid.getColumns||!e.grid.getDataItem)throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(e){if(!this._grid||"function"!==typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object or it\'s "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndex(e){if(!this._grid||"function"!==typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndexes(e){if(!this._grid||"function"!==typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');const t=[];return Array.isArray(e)&&e.forEach((e=>{t.push(this._grid.getDataItem(e))})),t}getSelectedRows(){if(!this._grid||"function"!==typeof this._grid.getSelectedRows)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||"function"!==typeof this._grid.getSelectedRows)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');const e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)}hideColumnById(e,t){if(this._grid){t={...na,...t};const i=this._grid.getColumns(),n=i.findIndex((t=>t.id===e));if(n>=0){const s=Ee(i,n);t?.applySetColumns&&(this.sharedService.visibleColumns=s,this._grid.setColumns(s));const r=this.sharedService.allColumns.findIndex((t=>t.id===e));return r&&(t?.hideFromColumnPicker&&(this.sharedService.allColumns[r].excludeFromColumnPicker=!0),t?.hideFromGridMenu&&(this.sharedService.allColumns[r].excludeFromGridMenu=!0)),this.executeVisibilityCommands(t,["onHeaderMenuHideColumns"],s),n}}return-1}hideColumnByIds(e,t){if(Array.isArray(e)){const i=this._grid.getColumns().filter((t=>!e.includes(t.id)));t={...na,...t};for(const n of e)this.hideColumnById(n,{...t,triggerEvent:!1,applySetColumns:!1,autoResizeColumns:!1});this.sharedService.visibleColumns=i,this._grid.setColumns(i),this.executeVisibilityCommands(t,["onHeaderMenuHideColumns","onHideColumns"],i)}}showColumnByIds(e,t){if(this._grid){t={...sa,...t};const i=this.sharedService.allColumns.filter((t=>e.includes(t.id)));this._grid.setColumns(i),this.sharedService.visibleColumns=i,this.executeVisibilityCommands(t,["onShowColumns"],this.sharedService.visibleColumns)}}executeVisibilityCommands(e,t,i){e?.autoResizeColumns&&this._grid.autosizeColumns(),e?.triggerEvent&&t.forEach((e=>this.pubSubService.publish(e,{columns:i})))}highlightRow(e,t){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new ao(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),t||=this._gridOptions.rowHighlightDuration,Array.isArray(e)?e.forEach((e=>this._grid.highlightRow(e))):this._grid.highlightRow(e,t)}setSelectedRow(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows([e])}setSelectedRows(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows(e)}renderGrid(){"function"===typeof this._grid?.invalidate&&this._grid.invalidate()}resetGrid(e){if(this.clearPinning(!1),this._grid){const t=this.sharedService.allColumns||[];Array.isArray(t)&&t.length>0&&(this._grid.setColumns(t),this._gridOptions?.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}"function"===typeof this.filterService?.clearFilters&&this.filterService.clearFilters(),"function"===typeof this.sortService?.clearSorting&&this.sortService.clearSorting()}addItem(e,t){const i={...ta,...t};if(!i?.skipError&&(!this._grid||!this._gridOptions||!this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");const n=this._gridOptions.datasetIdPropertyName||"id";if(!i?.skipError&&(!e||!e.hasOwnProperty(n)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${n}" property`);if(this._gridOptions?.enableTreeData&&"top"===t?.position)throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');const s=i?.position;"bottom"===s||this._gridOptions?.enableTreeData?this._dataView.addItem(e):this._dataView.insertItem(0,e);let r=0;const o=e?.[n]??"";this._gridOptions?.enableTreeData?(this.invalidateHierarchicalDataset(),r=this._dataView.getRowById(o),i.scrollRowIntoView&&this._grid.scrollRowIntoView(r??0,!1)):i.resortGrid?(this._dataView.reSort(),r=this._dataView.getRowById(o)):(r="bottom"===s?this._dataView.getRowById(o):0,i.scrollRowIntoView&&this._grid.scrollRowIntoView(r??0)),i.highlightRow&&void 0!==r&&this.highlightRow(r),void 0!==r&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(r),i.triggerEvent&&this.pubSubService.publish("onItemAdded",e);return!this._gridOptions?.backendServiceApi&&this._gridOptions.enablePagination&&("bottom"===s?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),r}addItems(e,t){const i={...ta,...t},n=this._gridOptions.datasetIdPropertyName||"id",s=i?.position,r=[];if(!Array.isArray(e))return[this.addItem(e,i)||0];if(this._dataView.beginUpdate(!0),"bottom"===s||this._gridOptions?.enableTreeData?this._dataView.addItems(e):this._dataView.insertItems(0,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData){this.invalidateHierarchicalDataset();const t=e[0]?.[n]??"",s=this._dataView.getRowById(t);i.scrollRowIntoView&&this._grid.scrollRowIntoView(s??0,!1)}else i.resortGrid&&this._dataView.reSort();return s&&i.scrollRowIntoView&&!this._gridOptions?.enableTreeData&&("bottom"===s?this._grid.navigateBottom():this._grid.navigateTop()),e.forEach((e=>r.push(this._dataView.getRowById(e[n])))),i.highlightRow&&this.highlightRow(r),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(r),i.triggerEvent&&this.pubSubService.publish("onItemAdded",e),r}deleteItem(e,t){t={...ea,...t};const i=this._gridOptions.datasetIdPropertyName||"id";if(!t?.skipError&&(!e||!e.hasOwnProperty(i)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${i}" property`);return this.deleteItemById(e[i],t)}deleteItems(e,t){t={...ea,...t};const i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return this.deleteItem(e,t),[e[i]];this._dataView.beginUpdate(!0);const n=[];return e.forEach((e=>{void 0!==e?.[i]&&n.push(e[i])})),this._dataView.deleteItems(n),this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),n}deleteItemById(e,t){if(t={...ea,...t},!t?.skipError&&(null===e||void 0===e))throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection()||!1)&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}deleteItemByIds(e,t){if(t={...ea,...t},Array.isArray(e)){this._dataView.beginUpdate(!0);for(let t=0;t<e.length;t++)null!==e[t]&&this.deleteItemById(e[t],{triggerEvent:!1});return this._dataView.endUpdate(),t.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}return[]}updateItem(e,t){t={...ia,...t};const i=this._gridOptions.datasetIdPropertyName||"id",n=e&&e.hasOwnProperty(i)?e[i]:void 0;if(!t?.skipError&&void 0===n)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${i}" property`);return this.updateItemById(n,e,t)}updateItems(e,t){t={...ia,...t};const i=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return[this.updateItem(e,t)];this._dataView.beginUpdate(!0);const n=[],s=[];return e.forEach((e=>{const t=e&&e.hasOwnProperty(i)?e[i]:void 0;if(s.push(t),void 0!==this._dataView.getIdxById(t)){const e=this._dataView.getRowById(t);void 0!==e&&(n.push(e),this._grid.updateRow(e))}})),this._dataView.updateItems(s,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),t.highlightRow&&this.highlightRow(n),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(n),t.triggerEvent&&this.pubSubService.publish("onItemUpdated",e),n}updateItemById(e,t,i){if(i={...ia,...i},!i?.skipError&&void 0===e)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');const n=this._dataView.getRowById(e);if(!i?.skipError&&!t&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${e}`);return void 0!==this._dataView.getIdxById(e)&&(this._dataView.updateItem(e,t),void 0!==n&&this._grid.updateRow(n),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),i.scrollRowIntoView&&void 0!==n&&this._grid.scrollRowIntoView(n),i.highlightRow&&void 0!==n&&this.highlightRow(n),void 0!==n&&i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(n),i.triggerEvent&&this.pubSubService.publish("onItemUpdated",t)),n}upsertItem(e,t){t={...ta,...t};const i=this._gridOptions.datasetIdPropertyName||"id",n=e&&e.hasOwnProperty(i)?e[i]:void 0;if(!t?.skipError&&void 0===n)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${i}" property`);return this.upsertItemById(n,e,t)}upsertItems(e,t){if(t={...ta,...t},!Array.isArray(e))return[this.upsertItem(e,t)];this._dataView.beginUpdate(!0);const i=[];e.forEach((e=>{i.push(this.upsertItem(e,{...t,highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1}))})),this._dataView.endUpdate();const n=i.map((e=>void 0!==e.added?e.added:e.updated));if(t.highlightRow&&this.highlightRow(n),t.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(n),t.triggerEvent){this.pubSubService.publish("onItemUpserted",e);const t=i.filter((e=>void 0!==e.added));Array.isArray(t)&&t.length>0&&this.pubSubService.publish("onItemAdded",t);const n=i.filter((e=>void 0!==e.updated));Array.isArray(n)&&n.length>0&&this.pubSubService.publish("onItemUpdated",n)}return i}upsertItemById(e,t,i){let n,s,r=!1;if(i={...ta,...i},!i?.skipError&&void 0===e&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');return void 0===this._dataView.getRowById(e)?(n=this.addItem(t,i),r=!0):(s=this.updateItem(t,{highlightRow:i.highlightRow,selectRow:i.selectRow,triggerEvent:i.triggerEvent}),r=!1),i.triggerEvent&&(this.pubSubService.publish("onItemUpserted",t),r?this.pubSubService.publish("onItemAdded",t):this.pubSubService.publish("onItemUpdated",t)),{added:n,updated:s}}invalidateHierarchicalDataset(e){if(this._gridOptions?.enableTreeData&&this.treeDataService){const t=e??this._dataView.getItems(),i=this.sortService.getCurrentColumnSorts(),n=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(t||[],this.sharedService.allColumns,this._gridOptions,i);this.sharedService.hierarchicalDataset=n.hierarchical,this.filterService.refreshTreeDataFilters(e),this._dataView.setItems(n.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!(!this._gridOptions.enableRowSelection&&!this._gridOptions.enableCheckboxSelector)&&!!e}}class oa{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new ii}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(e){const t=e?.getData();this._eventHandler.subscribe(e.onBeforeEditCell,((i,n)=>{if(!i||!n||!e||void 0===n.cell||!e.getColumns||!e.getDataItem)return;const s=e.getColumns()[n.cell];if("function"===typeof s.onBeforeEditCell){const r={row:n.row,cell:n.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(n.row)};s.onBeforeEditCell(i instanceof ei?i.getNativeEvent():i,r)}}))}bindOnCellChange(e){const t=e?.getData();this._eventHandler.subscribe(e.onCellChange,((i,n)=>{if(!i||!n||!e||void 0===n.cell||!e.getColumns||!e.getDataItem)return;const s=e.getColumns()[n.cell];if("function"===typeof s.onCellChange){const r={row:n.row,cell:n.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(n.row)};s.onCellChange(i instanceof ei?i.getNativeEvent():i,r)}}))}bindOnClick(e){const t=e?.getData();this._eventHandler.subscribe(e.onClick,((i,n)=>{if(!i||!n||!e||void 0===n.cell||!e.getColumns||!e.getDataItem)return;const s=e.getColumns()[n.cell];if("function"===typeof s.onCellClick){const r={row:n.row,cell:n.cell,dataView:t,grid:e,columnDef:s,dataContext:e.getDataItem(n.row)};s.onCellClick(i instanceof ei?i.getNativeEvent():i,r)}}))}}class aa{constructor(e,t,i,n,s,r){this.extensionService=e,this.filterService=t,this.pubSubService=i,this.sharedService=n,this.sortService=s,this.treeDataService=r,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0,this._eventHandler=new ii}get _dataView(){return this._grid?.getData()??{}}get _gridOptions(){return this._grid?.getOptions()??{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(e){this._selectedRowDataContextIds=e}init(e){this._grid=e,this.subscribeToAllGridChanges(e)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e)&&e.length>0){const n=this.getAssociatedGridColumns(this._grid,e);if(n&&Array.isArray(n)&&n.length>0){if(Array.isArray(this.sharedService.allColumns)){const e=[];if(this._gridOptions.enableCheckboxSelector){const t=this._gridOptions?.checkboxSelector?.columnIndexPosition??0;e.push({columnId:"_checkbox_selector",columnIndexPosition:t})}if(this._gridOptions.enableRowDetailView){const t=this._gridOptions?.rowDetailView?.columnIndexPosition??0;e.push({columnId:"_detail_selector",columnIndexPosition:t})}if(this._gridOptions.enableRowMoveManager){const t=this._gridOptions?.rowMoveManager?.columnIndexPosition??0;e.push({columnId:"_move",columnIndexPosition:t})}this.addColumnDynamicWhenFeatureEnabled(e,this.sharedService.allColumns,n)}n.forEach((e=>e.originalWidth=e.width||e.originalWidth)),this._grid.setColumns(n),this.sharedService.visibleColumns=n,t?this._grid.autosizeColumns():(i||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){const{frozenColumn:e,frozenRow:t,frozenBottom:i}=this.sharedService.gridOptions,n={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:t,frozenBottom:i}},s=this.getCurrentPagination();if(s&&(n.pagination=s),this.hasRowSelectionEnabled()){const e=this.getCurrentRowSelections();e&&(n.rowSelection=e)}if(this._gridOptions?.enableTreeData){const e=this.getCurrentTreeDataToggleState();e&&(n.treeData=e)}return n}getColumns(){return this._columns}getAssociatedCurrentColumns(e){const t=[];return e&&Array.isArray(e)&&e.forEach((e=>{e?.id&&t.push({columnId:e.id,cssClass:e.cssClass||"",headerCssClass:e.headerCssClass||"",width:e.width||0})})),t}getAssociatedGridColumns(e,t){const i=[],n=this.sharedService.allColumns||e.getColumns();return t&&Array.isArray(t)&&t.forEach((e=>{const t=n.find((t=>t.id===e.columnId));t?.id&&i.push({...t,cssClass:e.cssClass||t.cssClass,headerCssClass:e.headerCssClass||t.headerCssClass,width:e.width})})),this._columns=i,i}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){if(this._gridOptions?.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService?.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){if(this._gridOptions?.enablePagination){if(!this._gridOptions.backendServiceApi)return this.sharedService.currentPagination;{const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentPagination)return e.getCurrentPagination()}}return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){if(this._gridOptions?.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService?.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){return this._gridOptions?.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){let e=!1;if(this._gridOptions?.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){const t=this._gridOptions.dataView.syncGridSelection;"boolean"===typeof t?e=this._gridOptions.dataView.syncGridSelection:"object"===typeof t&&(e=t.preserveHidden||t.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(e){const t=e||this._columns,i=this.getAssociatedCurrentColumns(t);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:w.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,e&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){if(!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)){const e=this.extensionService?.getExtensionByName?.(b.rowSelection);e?.instance&&this._grid.setSelectedRows([])}}subscribeToAllGridChanges(e){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",(e=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:w.filter},gridState:this.getCurrentGridState()})}))),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",(()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:w.filter},gridState:this.getCurrentGridState()})}))),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",(e=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:w.sorter},gridState:this.getCurrentGridState()})}))),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",(()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:w.sorter},gridState:this.getCurrentGridState()})}))),this.bindExtensionAddonEventToGridStateChange(b.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(b.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),this.bindSlickGridOnSetOptionsEventToGridStateChange(e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,((e,t)=>{const i=(this._selectedRowIndexes||[]).slice(),n=(this.selectedRowDataContextIds||[]).slice();if(this.selectedRowDataContextIds=t.filteredIds,this._selectedRowIndexes=t.rows,!jt(this.selectedRowDataContextIds,n)||!jt(this._selectedRowIndexes,i)){const e={gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:t.selectedRowIds,filteredDataContextIds:t.filteredIds};this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:w.rowSelection},gridState:this.getCurrentGridState()})}})),this._subscriptions.push(this.pubSubService.subscribe(["onHeaderMenuHideColumns","onHideColumns","onShowColumns"],(e=>{const t=this.getAssociatedCurrentColumns(e.columns);this.pubSubService.publish("onGridStateChanged",{change:{newValues:t,type:w.columns},gridState:this.getCurrentGridState()})}))),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",(e=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:w.treeData},gridState:this.getCurrentGridState()})}))),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",(e=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:w.treeData},gridState:this.getCurrentGridState()})})))}addColumnDynamicWhenFeatureEnabled(e,t,i){e.sort(((e,t)=>e.columnIndexPosition-t.columnIndexPosition)),e.forEach((e=>{const n=t.findIndex((t=>t.id===e.columnId)),s=i.findIndex((t=>t.id===e.columnId));if(n>=0&&-1===s){const e=t[n];0===n?i.unshift(e):i.splice(n,0,e)}}))}bindExtensionAddonEventToGridStateChange(e,t){const i=this.extensionService?.getExtensionByName?.(e),n=i?.instance?.[t];n&&"function"===typeof n.subscribe&&this._eventHandler.subscribe(n,((e,t)=>{const i=t?.columns,n=this.getAssociatedCurrentColumns(i);this.pubSubService.publish("onGridStateChanged",{change:{newValues:n,type:w.columns},gridState:this.getCurrentGridState()})}))}bindSlickGridColumnChangeEventToGridStateChange(e,t){const i=t?.[e];i&&"function"===typeof i.subscribe&&this._eventHandler.subscribe(i,(()=>{const e=t.getColumns(),i=this.getAssociatedCurrentColumns(e);this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:w.columns},gridState:this.getCurrentGridState()})}))}bindSlickGridOnSetOptionsEventToGridStateChange(e){const t=e.onSetOptions;this._eventHandler.subscribe(t,((e,t)=>{const{frozenBottom:i,frozenColumn:n,frozenRow:s}=t.optionsBefore,{frozenBottom:r,frozenColumn:o,frozenRow:a}=t.optionsAfter;if(i!==r||n!==o||s!==a){const e={frozenBottom:r,frozenColumn:o,frozenRow:a},t=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:e,type:w.pinning},gridState:t})}}))}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!(!this._gridOptions.enableRowSelection&&!this._gridOptions.enableCheckboxSelector)&&!!e}}class la{constructor(e){this.extensionUtility=e,this._subscriptions=[],this._eventHandler=new ii}get _dataView(){return this._grid?.getData()??{}}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}init(e){this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel&&(this._gridOptions.enableTranslate&&this.translateHeaderGrouping(),this._eventHandler.subscribe(e.onRendered,(()=>this.renderPreHeaderRowGroupingTitles())),this._eventHandler.subscribe(e.onAutosizeColumns,(()=>this.renderPreHeaderRowGroupingTitles())),this._eventHandler.subscribe(this._dataView.onRowCountChanged,(()=>this.delayRenderPreHeaderRowGroupingTitles(0))),this._eventHandler.subscribe(e.onSetOptions,((e,t)=>{t?.optionsBefore?.frozenColumn!==t?.optionsAfter?.frozenColumn&&this.delayRenderPreHeaderRowGroupingTitles(0)})),this.delayRenderPreHeaderRowGroupingTitles(75))}dispose(){this._eventHandler.unsubscribeAll()}delayRenderPreHeaderRowGroupingTitles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;window.setTimeout((()=>this.renderPreHeaderRowGroupingTitles()),e)}renderPreHeaderRowGroupingTitles(){const e=this._columnDefinitions.length;if(void 0!==this._gridOptions?.frozenColumn&&this._gridOptions.frozenColumn>=0){const t=this._gridOptions.frozenColumn;this.renderHeaderGroups(this._grid.getPreHeaderPanelLeft(),0,t+1),this.renderHeaderGroups(this._grid.getPreHeaderPanelRight(),t+1,e)}else this.renderHeaderGroups(this._grid.getPreHeaderPanel(),0,e)}renderHeaderGroups(e,t,i){ee(e),e.className="slick-header-columns",e.style.left="-1000px",e.style.width=`${this._grid.getHeadersWidth()}px`,e.parentElement?.classList.add("slick-header");const n=this._grid.getHeaderColumnWidthDiff();let s,r=null,o="",a=0;const l=this._gridOptions?.frozenHeaderWidthCalcDifferential??0,d=void 0!==this._gridOptions?.frozenColumn&&this._gridOptions.frozenColumn>=0;for(let c=t;c<i;c++)s=this._columnDefinitions[c],s&&(o===s.columnGroup&&c>0?(a+=s.width||0,r?.style&&(r.style.width=a-n-l+"px")):(a=s.width||0,r=Q("div",{className:"slick-state-default slick-header-column "+(d?"frozen":""),dataset:{group:s.columnGroup},style:{width:a-n+"px"}}),Q("span",{className:"slick-column-name",textContent:s.columnGroup||""},r),e.appendChild(r)),o=s.columnGroup||"")}translateHeaderGrouping(){const e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()}}class da{constructor(e,t,i,n){this.pubSubService=e,this.sharedService=t,this.backendUtilities=i,this.rxjs=n,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[],this._isCursorBased=!1,this._eventHandler=new ii}get dataView(){return this.grid?.getData()??{}}set paginationOptions(e){this._paginationOptions=e}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this._initialized&&this.refreshPagination()}get isCursorBased(){return this._isCursorBased}addRxJsResource(e){this.rxjs=e}init(e,t,i){if(this._availablePageSizes=t.pageSizes||[],this.grid=e,this._backendServiceApi=i,this._paginationOptions=t,this._isLocalGrid=!i,this._pageNumber=t.pageNumber||1,this._isCursorBased=i?.options?.useCursor??!1,i&&(!i.service||!i.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,((e,t)=>{this._totalItems!==t.totalRows&&(this.updateTotalItems(t.totalRows),this._previousPagination={pageNumber:t.pageNum,pageSize:t.pageSize,pageSizes:this.availablePageSizes,totalItems:t.totalRows})})),queueMicrotask((()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))}))),this._subscriptions.push(this.pubSubService.subscribe(["onFilterChanged","onFilterCleared"],(()=>this.resetPagination()))),i?.options?.infiniteScroll&&this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",(()=>this.resetPagination()))),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",(e=>this.processOnItemAddedOrRemoved(e,!0)))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",(e=>this.processOnItemAddedOrRemoved(e,!1))))),this.refreshPagination(!1,!1,!0);const n=this.getFullPagination();this._previousPagination={pageNumber:n.pageNumber,pageSize:n.pageSize,pageSizes:n.pageSizes,totalItems:this.totalItems},this._initialized=!0,p(t,"totalItems",(e=>this._totalItems=e))}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination())}goToFirstPage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._pageNumber=1,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToLastPage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._pageNumber=this._pageCount||1,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToNextPage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._pageNumber<this._pageCount?(this._pageNumber++,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isCursorBased)return console.assert(!0,"Cursor based navigation cannot navigate to arbitrary page"),Promise.resolve(!1);const n=this._pageNumber;return e<1?this._pageNumber=1:e>this._pageCount?this._pageNumber=this._pageCount:this._pageNumber=e,this._pageNumber!==n?i?this.processOnPageChanged(this._pageNumber,t):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._pageNumber>1?(this._pageNumber--,t?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n={...this.getFullPagination()};if(this._paginationOptions){const t=this._paginationOptions;this._itemsPerPage||(this._isLocalGrid?this._itemsPerPage=t.pageSize:this._itemsPerPage=+(this._backendServiceApi?.options?.paginationOptions?.first?this._backendServiceApi.options.paginationOptions.first:t.pageSize)),(e||this._totalItems!==t.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&t.pageNumber&&t.pageNumber>1&&(this._pageNumber=t.pageNumber||1),1===this._pageNumber&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=t.pageSizes||[],!this._totalItems&&t.totalItems&&(this._totalItems=t.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),t&&!jt(n,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),i&&!jt(n,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());const s=this.getFullPagination();this._previousPagination={pageNumber:s.pageNumber,pageSize:s.pageSize,pageSizes:s.pageSizes,totalItems:this.totalItems}}resetPagination(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._isLocalGrid&&this.dataView&&this.sharedService?.gridOptions?.enablePagination&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,e),t&&this.grid.scrollTo(0)}togglePaginationVisibility(e){if(this.grid&&this.sharedService?.gridOptions){const t=void 0!==e?e:!this.sharedService.gridOptions.enablePagination;if(t&&this.goToFirstPage(),this._isLocalGrid&&this.dataView){const t=e?this._itemsPerPage:0;this.dataView.setPagingOptions({pageSize:t,pageNum:0})}this.sharedService.gridOptions.enablePagination=t,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:t})}}processOnPageChanged(e,t,i){return console.assert(!this.isCursorBased||i,"Configured for cursor based pagination - cursorArgs expected"),!1===this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise(((n,s)=>{if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:e-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),n(this.getFullPagination());else{const r=+this._itemsPerPage,o=new Date;if(this._backendServiceApi?.preProcess&&this._backendServiceApi.preProcess(),this._backendServiceApi?.process){const a=this.isCursorBased&&i?this._backendServiceApi.service.processOnPaginationChanged(t,i):this._backendServiceApi.service.processOnPaginationChanged(t,{newPage:e,pageSize:r}),l=this._backendServiceApi.process(a);l instanceof Promise?l.then((e=>{this.backendUtilities?.executeBackendProcessesCallback(o,e,this._backendServiceApi,this._totalItems);const t=this.getFullPagination();this._previousPagination={pageNumber:t.pageNumber,pageSize:t.pageSize,pageSizes:t.pageSizes,totalItems:this.totalItems},n(this.getFullPagination())})).catch((e=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(e,this._backendServiceApi),this._backendServiceApi?.onError&&this.backendUtilities?.onBackendError||s(l)})):this.rxjs?.isObservable(l)&&this._subscriptions.push(l.subscribe((e=>{const t=this.getFullPagination();this._previousPagination={pageNumber:t.pageNumber,pageSize:t.pageSize,pageSizes:t.pageSizes,totalItems:this.totalItems},n(this.backendUtilities?.executeBackendProcessesCallback(o,e,this._backendServiceApi,this._totalItems))}),(e=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(e,this._backendServiceApi),this._backendServiceApi?.onError&&this.backendUtilities?.onBackendError||s(l)}))),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}))}recalculateFromToIndexes(){((this._pageNumber-1)*this._itemsPerPage>this._totalItems||this._totalItems>0&&0===this._pageNumber)&&(this._pageNumber=1),0===this._totalItems?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),(this._dataTo>this._totalItems||this._totalItems<this._itemsPerPage)&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){const e=this._previousPagination?.pageNumber!==this.getFullPagination().pageNumber,t=this._previousPagination?.pageSize!==this.getFullPagination().pageSize;t&&this.changeItemPerPage(this._previousPagination?.pageSize??0,null,!1),e&&this.goToPageNumber(this._previousPagination?.pageNumber??0,null,!1),(e||t)&&(this.refreshPagination(),this._backendServiceApi?.service?.updatePagination?.(this._previousPagination?.pageNumber??0,this._previousPagination?.pageSize??0))}setCursorBased(e){this._isCursorBased=e,e&&this.setCursorPageInfo({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1}),this.goToFirstPage(),this.pubSubService.publish("onPaginationSetCursorBased",{isCursorBased:e})}setCursorPageInfo(e){this._cursorPageInfo=e}updateTotalItems(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._totalItems=e,this._paginationOptions&&(this._paginationOptions.totalItems=e,this.refreshPagination(!1,t))}processOnItemAddedOrRemoved(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null!==e){const i=this._dataTo,n=Array.isArray(e)?e.length:1,s=t?+n:-n;this._totalItems+=s,this.recalculateFromToIndexes(),this._dataTo=i+s,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}class ca{get autoHeightRecalcRow(){return this._autoHeightRecalcRow||100}get isAutoHeightEnabled(){return!(!this.gridOptions.enableAutoResize||!this.gridOptions.autoResize?.autoHeight)}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get dataView(){return this._grid?.getData()}get gridUid(){return this._grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(e){this._intervalRetryDelay=e}get resizeByContentOptions(){return this.gridOptions?.resizeByContentOptions??{}}constructor(e){this.pubSubService=e,this._allHeaderHeight=0,this._autoHeightRecalcRow=0,this._intervalRetryDelay=200,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new ii,this._bindingEventService=new Vt}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),window.clearInterval(this._intervalId),window.clearTimeout(this._timer),"container"===this.gridOptions.autoResize?.resizeDetection&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(e,t){if(!e||!this.gridOptions||!t)throw new Error('\n      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.\n      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.');this._grid=e,this._gridContainerElm=t;const i=this.gridOptions?.gridHeight||this.gridOptions?.gridWidth?{height:this.gridOptions?.gridHeight,width:this.gridOptions?.gridWidth}:void 0;this._autoResizeOptions=this.gridOptions?.autoResize??{container:"grid1",bottomPadding:0},i?.width&&t?.style&&(t.style.width="string"===typeof i.width?i.width:`${i.width}px`),this._gridDomElm=e.getContainerNode(),"string"===typeof this._autoResizeOptions.container?this._pageContainerElm="string"===typeof this._autoResizeOptions.container?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container:this._pageContainerElm=this._autoResizeOptions.container,i&&(this._fixedHeight=i.height,this._fixedWidth=i.width),this.gridOptions.enableAutoResize&&(this._autoHeightRecalcRow=this.gridOptions.autoResize?.autoHeightRecalcRow??100,this.bindAutoResizeDataGrid()),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",(()=>this.resizeColumnsByCellContent(!0)))),this.gridOptions.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",(e=>{this.handleSingleColumnResizeByContent(e.columnId)}))),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,((e,t)=>{this.handleSingleColumnResizeByContent(t.triggeredByColumn)})))}bindAutoResizeDataGrid(e){if("container"===this.gridOptions.autoResize?.resizeDetection){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error('\n          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"\n          You can fix this by setting your gridOption.autoResize.container');this._resizeObserver||(this._resizeObserver=new ResizeObserver((()=>this.resizeObserverCallback()))),this._resizeObserver.observe(this._pageContainerElm)}else{if(void 0===this._gridDomElm)return null;this.resizeGrid().then((()=>this.resizeGridWhenStylingIsBrokenUntilCorrected())).catch((e=>console.log("Error:",e))),this.resizeGrid(10,e),this._bindingEventService.bind(window,"resize",(()=>{this.handleResizeGrid(e)}))}}handleResizeGrid(e){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,e),this.resizeGrid(0,e))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}cacheHeaderHeightTotal(){const e=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-topheader-panel`),t=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-pane-header`),i=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-headerrow`);this._allHeaderHeight=(e?.offsetHeight||0)+(t?.offsetHeight||0)+(i?.offsetHeight||0)}calculateGridNewDimensions(e){const t=e?.autoResize??{},i=ne(this._gridDomElm);if(!window||!this._gridDomElm)return null;let n=void 0!==t?.bottomPadding?t.bottomPadding:20;if(n&&e.enablePagination&&(n+=35),n&&e.showCustomFooter){const e=this.gridOptions?.customFooterOptions?.footerHeight??25;n+=parseInt(`${e}`,10)}let s=0,r=0;"container"===t.calculateAvailableSizeBy?s=se(this._pageContainerElm,"height")||0:(s=window.innerHeight||0,r=i.top);const o=s-r-n,a=se(this._pageContainerElm,"width")||window.innerWidth||0,l=t?.maxHeight,d=t?.minHeight??180,c=t?.maxWidth,h=t?.minWidth??300;let u=o,p=t?.rightPadding?a-t.rightPadding:a;if(e.enableAutoResize&&this.isAutoHeightEnabled){const t=this.dataView.getLength();if(t<this.autoHeightRecalcRow){this._allHeaderHeight||this.cacheHeaderHeightTotal();const i=t*e.rowHeight,n=this._allHeaderHeight+i;n<u&&(u=n)}}return u<d&&(u=d),l&&u>l&&(u=l),p<h&&(p=h),c&&p>c&&(p=c),{height:this._fixedHeight||u,width:this._fixedWidth||p}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(e){this._resizePaused=e}resizeGrid(e,t){return new Promise((i=>{(e=e||0)>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout((()=>i(this.resizeGridCallback(t))),e)):i(this.resizeGridCallback(t))}))}resizeGridCallback(e){const t=this.resizeGridWithDimensions(e);return this.pubSubService.publish("onGridAfterResize",t),!this.gridOptions.enableAutoResizeColumnsByCellContent||this._lastDimensions?.width&&t?.width===this._lastDimensions?.width||this.resizeColumnsByCellContent(!1),this._lastDimensions=t,t}resizeGridWithDimensions(e){const t=this.calculateGridNewDimensions(this.gridOptions);if((e||t)&&this._gridDomElm){const i=e?.height?e.height:t?.height,n=e?.width?e.width:t?.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${i}px`),this._gridDomElm.style.width=`${n}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${n}px`),this._grid?.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),this._grid&&this.gridOptions?.enableAutoSizeColumns?this.gridUid&&document.querySelector(this.gridUidSelector)&&(this._lastDimensions&&this._lastDimensions.height===i&&this._lastDimensions.width===n||this._grid.autosizeColumns()):!this.gridOptions.enableAutoResizeColumnsByCellContent||this._lastDimensions?.width&&n===this._lastDimensions?.width||this.resizeColumnsByCellContent(!1),this._lastDimensions={height:i||0,width:n||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isStopResizeIntervalRequested=e}resizeColumnsByCellContent(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._grid.getColumns(),i=this.dataView.getItems(),n={};let s=!1,r=0;const o=this._gridContainerElm?.offsetWidth??0;if(!Array.isArray(i)||0===i.length||!e&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<o)return void this._grid.autosizeColumns();if(this._hasResizedByContentAtLeastOnce&&this.gridOptions?.resizeByContentOnlyOnFirstLoad&&!e)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),0===this._totalColumnsWidthByContent||e){for(const i of t)n[i.id]=i.originalWidth??i.minWidth??0;r=this.calculateCellWidthByReadingDataset(t,n,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let e=0;for(const i of t){const t=i.resizeAlwaysRecalculateWidth??this.resizeByContentOptions.alwaysRecalculateColumnWidth??!1;i.originalWidth&&!t?i.width=i.originalWidth:void 0!==n[i.id]&&(i.rerenderOnResize&&(s=!0),this.applyNewCalculatedColumnWidthByReference(i,n[i.id])),e+=i.width||0,this._totalColumnsWidthByContent=e}}this._grid.setColumns(t),this._hasResizedByContentAtLeastOnce=!0;const a={};for(const l of t)a[l.id]=l.width;this._totalColumnsWidthByContent>o?this._grid.reRenderColumns(s):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:r,calculateColumnWidths:a})}calculateCellWidthByReadingDataset(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3?arguments[3]:void 0;const s=Array.isArray(e)?e:[e],r=this.dataView.getItems();let o=0;for(const[a,l]of r.entries()){if(a>i)break;Array.isArray(s)&&"object"===typeof t&&s.forEach(((e,i)=>{const s=this.calculateCellWidthByContent(l,e,a,n??i,t[e.id]);void 0!==s&&(t[e.id]=s)})),o=a+1}return o}calculateCellWidthByContent(e,t,i,n,s){const r=this.resizeByContentOptions.cellCharWidthInPx??7;if(!t.originalWidth){const o=t?.resizeCharWidthInPx??r,a=Io(t?.formatter,i,n,t,e,this._grid),l=Fe(a)?Ze(a):"",d=Math.ceil(l.length*o),c=t.resizeMaxWidthThreshold;t&&(void 0===s||d>s)&&(s=void 0!==c&&d>c?c:void 0!==t.maxWidth&&d>t.maxWidth?t.maxWidth:d)}return s}applyNewCalculatedColumnWidthByReference(e,t){const i=this.resizeByContentOptions.cellPaddingWidthInPx??6,n=this.resizeByContentOptions.formatterPaddingWidthInPx??6,s=e?.filter?.type??e?.type??y.string;let r=t;const o=e?.resizeCalcWidthRatio??this.resizeByContentOptions.defaultRatioForStringType??.9;r*="string"===s?o:1,r+=i,e.resizeExtraWidthPadding&&(r+=e.resizeExtraWidthPadding),e.editor&&this.gridOptions.editable&&(r+=n),void 0!==e.maxWidth&&r>e.maxWidth&&(r=e.maxWidth),void 0!==e.resizeMaxWidthThreshold&&r>e.resizeMaxWidthThreshold&&(r=e.resizeMaxWidthThreshold),r=Math.ceil(r),void 0!==e.originalWidth&&!0!==e.resizeAlwaysRecalculateWidth&&!0!==this.resizeByContentOptions.alwaysRecalculateColumnWidth||(e.width=this.readjustNewColumnWidthWhenOverLimit(e,r))}handleSingleColumnResizeByContent(e){const t=this._grid.getColumns(),i=t.findIndex((t=>t.id===e));if(i>=0){const n=t[i],s={[e]:n.originalWidth??n.minWidth??0};n.originalWidth=void 0,this.calculateCellWidthByReadingDataset(n,s,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,i),this.applyNewCalculatedColumnWidthByReference(n,s[e]),this._grid.reRenderColumns(n?.rerenderOnResize??!1)}}readjustNewColumnWidthWhenOverLimit(e,t){const i=this.gridOptions.frozenColumn??-1,n=this._grid.getColumns().findIndex((t=>t.id===e.id))??0;let s=t;if(i>=0&&n<=i){const i=Array.from(this._grid.getViewports());if(i){const n=i.find((e=>e.classList.contains("slick-viewport-left")))?.clientWidth??0,r=i.find((e=>e.classList.contains("slick-viewport-right")))?.clientWidth??0,o=n+r,a=n-(e.width??0);if(a+t>o){s=n-a+r-(this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment??50)}}}return Math.ceil(s)}checkIsGridShown(){return!!document.querySelector(`${this.gridUidSelector}`)?.offsetParent}resizeGridWhenStylingIsBrokenUntilCorrected(){const e=this.gridOptions?.autoFixResizeTimeout??18e3,t=this.gridOptions?.autoFixResizeRequiredGoodCount??5,i=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),n=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`);let s=0,r=0;if(i&&n&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){const o=this.dataView.getItemCount(),a=this._grid.getColumns()||[];this._intervalId=window.setInterval((async()=>{const l=ne(i);let d=l.top;this.gridOptions?.enableFiltering&&this.gridOptions.headerRowHeight&&(d+=this.gridOptions.headerRowHeight),this.gridOptions?.createPreHeaderPanel&&this.gridOptions.showPreHeaderPanel&&this.gridOptions.preHeaderPanelHeight&&(d+=this.gridOptions.preHeaderPanelHeight),d+=44;const c=ne(n).top,h=ne(this._gridContainerElm);let u=0===l?.top||d-c>2||0===h.left&&0===h.top;const p=this._grid.getRenderedRange()?.rightPx??0;!u&&o>0&&0===p&&a.length>1&&(u=!0),this._isStopResizeIntervalRequested&&(u=!1,s=e),this.checkIsGridShown()&&(u||0===h.left||0===h.top)&&(await this.resizeGrid(),r<5&&this._grid.updateColumns(),this.checkIsGridShown()&&(u=!1)),this.checkIsGridShown()&&r++,this.checkIsGridShown()&&!u&&(r>=t||s++>=e)&&window.clearInterval(this._intervalId)}),this.intervalRetryDelay)}}}class ha{constructor(){this.currentPagination=null,this.isItemsDateParsed=!1,this.frozenVisibleColumnId="",this.hasColumnsReordered=!1,this.hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(e){this._allColumns=e}get columnDefinitions(){return this.slickGrid?.getColumns()??[]}get gridOptions(){return this._gridOptions||this.slickGrid?.getOptions()||{}}set gridOptions(e){this._gridOptions=e}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(e){this._externalRegisteredResources=e}get visibleColumns(){return this._visibleColumns}set visibleColumns(e){this._visibleColumns=e}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(e){this._hierarchicalDataset=e}}class ua{constructor(e,t,i,n,s){this.collectionService=e,this.sharedService=t,this.pubSubService=i,this.backendUtilities=n,this.rxjs=s,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new ii,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}dispose(){this._eventHandler?.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(e){this.rxjs=e}bindBackendOnSort(e){this._isBackendGrid=!0,this._grid=e,this._dataView=e?.getData(),this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(e){this._isBackendGrid=!1,this._grid=e,this._dataView=e?.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(e.onSort,this.handleLocalOnSort.bind(this)),this._gridOptions.preParseDateColumns&&(this._eventHandler.subscribe(e.onCellChange,((e,t)=>this.preParseSingleDateItem(t.item))),this.pubSubService.subscribe(["onItemAdded","onItemUpdated"],(e=>this.preParseSingleDateItem(e))))}preParseSingleDateItem(e){if(this._gridOptions.preParseDateColumns){(Array.isArray(e)?e:[e]).forEach((e=>this.collectionService.parseSingleDateItem(e,this._grid,this._gridOptions.preParseDateColumns)))}}preParseAllDateItems(){if(this._gridOptions.preParseDateColumns){const e=this._dataView?.getItems()||[];this.collectionService.preParseByMutationDateItems(e,this._grid,this._gridOptions.preParseDateColumns),this.sharedService.isItemsDateParsed=!0}}handleLocalOnSort(e,t){const i=t.multiColumnSort?t.sortCols:new Array({columnId:t.sortCol?.id??"",sortAsc:t.sortAsc,sortCol:t.sortCol});this._currentLocalSorters=[],Array.isArray(i)&&i.forEach((e=>{e.sortCol&&this._currentLocalSorters.push({columnId:e.sortCol.id,direction:e.sortAsc?E.ASC:E.DESC})})),this.onLocalSortChanged(this._grid,i),this.emitSortChanged(l.local)}clearSortByColumnId(e,t){const i=this.getCurrentColumnSorts(),n=this.getCurrentColumnSorts(`${t}`);if(Array.isArray(i)&&Array.isArray(n)&&i.length!==n.length){if(this._gridOptions.backendServiceApi)this.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:n,grid:this._grid});else if(this._dataView)this.onLocalSortChanged(this._grid,n,!0,!0);else{const e=this._gridOptions.multiColumnSort||!1?n:n[0];this._grid.onSort.notify(e)}const t=n.map((e=>({columnId:e?.sortCol?.id??"",sortAsc:e?.sortAsc,sortCol:e?.sortCol})));this._grid.setSortColumns(t)}Array.isArray(n)&&0===n.length&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._grid&&this._gridOptions&&this._dataView)if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){const e=this._gridOptions.backendServiceApi?.service;e?.clearSorters&&e.clearSorters()}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=!this._gridOptions.enableSorting;let n;this._gridOptions.enableSorting=i,e?(t&&this.clearSorting(),this._eventHandler.unsubscribeAll(),n=this.disableAllSortingCommands(!0)):(n=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,((e,t)=>this.handleLocalOnSort(e,t)))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(n)}toggleSortFunctionality(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._gridOptions.enableSorting;this.disableSortFunctionality(t,e)}emitSortChanged(e,t){if(e===l.remote&&this._gridOptions.backendServiceApi){let e=[];const t=this._gridOptions.backendServiceApi.service;t?.getCurrentSorters&&(e=t.getCurrentSorters()),this.pubSubService.publish("onSortChanged",e)}else e===l.local&&(t&&(this._currentLocalSorters=t),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(e){if(this._grid){const t=this._grid.getSortColumns();if(Array.isArray(t)){return t.reduce(((t,i)=>(!i||e&&i.columnId===e||t.push({columnId:i.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(i.columnId||"")],sortAsc:i.sortAsc}),t)),[])}}return[]}loadGridSorters(e){this._currentLocalSorters=[];const t=[];if(Array.isArray(e)){(this._gridOptions.multiColumnSort?e:e.slice(0,1)).forEach((e=>{const i=this._columnDefinitions.find((t=>t.id===e.columnId));if(i){if(!i.sortable){let e="[Slickgrid-Universal] Cannot add sort icon to a column that is not sortable, please add `sortable: true` to your column or remove it from your list of columns to sort.";throw this._gridOptions.enableTreeData&&(e+=" Also note that TreeData feature requires the column holding the tree (expand/collapse icons) to be sortable."),new Error(e)}t.push({columnId:i.id,sortAsc:e.direction.toUpperCase()===E.ASC,sortCol:i}),this._currentLocalSorters.push({columnId:String(i.id),direction:e.direction.toUpperCase()})}})),this.onLocalSortChanged(this._grid,t),this._grid.setSortColumns(t.map((e=>({columnId:e.columnId,sortAsc:e.sortAsc}))))}return t}processTreeDataInitialSort(){if(this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions){const e=this._gridOptions.treeDataOptions,t=this._columnDefinitions.find((t=>t.id===e.columnId));if(t){let i=E.ASC,n={columnId:e.columnId,sortCol:t,sortAsc:!0};if(e?.initialSort?.columnId){const t=e.initialSort.columnId,s=this._columnDefinitions.find((e=>e.id===t));i=(e.initialSort.direction||E.ASC).toUpperCase(),n={columnId:t,sortCol:s,sortAsc:i===E.ASC}}n?.columnId&&this.sharedService?.hierarchicalDataset&&this.updateSorting([{columnId:n.columnId||"",direction:i}])}}}onBackendSortChanged(e,t){if(!t||!t.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');const i=t.grid?.getOptions()??{},n=i.backendServiceApi;if(!n||!n.process||!n.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const s=new Date;n.preProcess&&n.preProcess();const r=n.service.processOnSortChanged(e,t),o=i?.pagination?.totalItems||0;this.backendUtilities?.executeBackendCallback(n,r,t,s,o,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{this._grid.setSortColumns(t.previousSortColumns||[]);const e=t.previousSortColumns?.map((e=>({columnId:e.columnId,sortAsc:e.sortAsc,sortCol:this._columnDefinitions.find((t=>t.id===e.columnId))})));n?.service?.updateSorters?.(e||[])},httpCancelRequestSubject:this.httpCancelRequests$})}async onLocalSortChanged(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=this._gridOptions.datasetIdPropertyName||"id",r=this._gridOptions.enableTreeData||!1,o=e.getData();if(await this.pubSubService.publish("onBeforeSortChange",{sortColumns:t},0),e&&o){if(this._gridOptions.preParseDateColumns&&!this.sharedService.isItemsDateParsed&&t.some((e=>U(e.sortCol?.type)))&&this.preParseAllDateItems(),i&&!r&&o.reSort(),r&&this._dataView&&this.sharedService&&Array.isArray(this.sharedService.hierarchicalDataset)){const e=this.sortHierarchicalDataset(this.sharedService.hierarchicalDataset,t);this._dataView.setItems(e.flat,s),this._dataView.onRowCountChanged.notify({previous:this._dataView.getFilteredItemCount(),current:this._dataView.getLength(),itemCount:this._dataView.getItemCount(),dataView:this._dataView,callingOnRowsChanged:!0})}else o.sort(this.sortComparers.bind(this,t));e.invalidate(),n&&this.emitSortChanged(l.local,t.map((e=>({columnId:e.sortCol?.id??"id",direction:e.sortAsc?E.ASC:E.DESC}))))}}sortHierarchicalDataset(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.sortTreeData(e,t);const n=this._gridOptions.datasetIdPropertyName||"id",s=this._gridOptions.treeDataOptions||{columnId:""},r=D(e,{...s,identifierPropName:s.identifierPropName??n,shouldAddTreeLevelNumber:!0});if(i){this._currentLocalSorters=[],t.forEach((e=>{this._currentLocalSorters.push({columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"})}));const e=this._gridOptions.backendServiceApi?l.remote:l.local;this.emitSortChanged(e)}return{hierarchical:e,flat:r}}sortLocalGridByDefaultSortFieldId(){const e=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",t={id:e,field:e};this.onLocalSortChanged(this._grid,new Array({columnId:t.id,sortAsc:!0,sortCol:t,clearSortTriggered:!0}),!1,!0)}sortComparers(e,t,i){if(Array.isArray(e))for(const n of e){const e=this.sortComparer(n,t,i);if(void 0!==e)return e}return O.neutral}sortComparer(e,t,i,n){if(e?.sortCol){const s=e.sortCol,r=s.type||y.string,o=e.sortAsc?O.asc:O.desc;let a=n||s.queryFieldSorter||s.queryField||s.field;this._gridOptions.preParseDateColumns&&U(r)&&e?.columnId&&(a="string"===typeof this._gridOptions.preParseDateColumns?`${this._gridOptions.preParseDateColumns}${e.columnId}`:`${e.columnId}`);let l=a;"function"===typeof s.queryFieldNameGetterFn&&(a=s.queryFieldNameGetterFn(t),l=s.queryFieldNameGetterFn(i));let d=t[a],c=i[l];if(a?.indexOf(".")>=0&&(d=H(t,a)),l?.indexOf(".")>=0&&(c=H(i,l)),s.sortComparer){const e=s.sortComparer(d,c,o,s,this._gridOptions);if(e!==O.neutral)return e}else{const e=Ht(r,d,c,o,s,this._gridOptions);if(e!==O.neutral)return e}}}sortTreeData(e,t){Array.isArray(t)&&t.forEach((t=>{this.sortTreeChildren(e,t,0)}))}sortTreeChildren(e,t,i){const n=this._gridOptions.treeDataOptions?.childrenPropName??"children";e.sort(((e,i)=>this.sortComparer(t,e,i)??O.neutral)),e.forEach((e=>{if(e){e.hasOwnProperty(n)&&Array.isArray(e[n])&&(i++,this.sortTreeChildren(e[n],t,i),i--)}}))}updateSorting(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(e)){const n=this._gridOptions.backendServiceApi;if(n){const t=n?.service;t?.updateSorters&&(t.updateSorters(void 0,e),i&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}else this.loadGridSorters(e);if(t){const e=n?l.remote:l.local;this.emitSortChanged(e)}}}disableAllSortingCommands(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this._grid.getColumns();t.forEach((t=>{void 0!==t.sortable&&(t.sortable=!e),t?.header?.menu&&t.header.menu.commandItems?.forEach((t=>{if(t&&"string"!==typeof t){const i=t.command;"sort-asc"!==i&&"sort-desc"!==i&&"clear-sort"!==i||(t.hidden=e)}}))}));const i=this._gridOptions.gridMenu?.commandItems;return i&&i.forEach((t=>{t&&"string"!==typeof t&&"clear-sorting"===t.command&&(t.hidden=e)})),t}}class pa{constructor(e,t,i){this.pubSubService=e,this.sharedService=t,this.sortService=i,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new ii,window.setTimeout((()=>this._isOneCpuCyclePassed=!0))}set currentToggledItems(e){this._currentToggledItems=e}get dataset(){return this.dataView?.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){return this._grid?.getData()}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(e){if(this._grid=e,this._isTreeDataEnabled=this.gridOptions?.enableTreeData??!1,this._isLastFullToggleCollapsed=this.treeDataOptions?.initiallyCollapsed??!1,this._currentToggledItems=this.gridOptions.presets?.treeData?.toggledItems??[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if(this.gridOptions?.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!this.gridOptions?.enableFiltering)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(this.gridOptions?.backendServiceApi||this.gridOptions?.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(e.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,(()=>{"function"===typeof this._treeDataRecalcHandler&&this._isOneCpuCyclePassed&&(window.clearTimeout(this._timer),this._timer=window.setTimeout((()=>this._treeDataRecalcHandler?.()),this.treeDataOptions?.autoRecalcTotalsDebounce??0))}))}applyToggledItemStateChanges(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Array.isArray(e)){const s=P(this.treeDataOptions,"collapsedPropName"),r=P(this.treeDataOptions,"hasChildrenPropName");this.dataView.beginUpdate(!0);const o="full-collapse"===(t??this._lastToggleStateChange.previousFullToggleType);t&&(this._lastToggleStateChange.previousFullToggleType=t),i&&(this.dataView.getItems()||[]).forEach((e=>{e[r]&&(e[s]=o)})),this.dynamicallyToggleItemState(e,n)}}dynamicallyToggleItemState(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Array.isArray(e)&&(this.dataView.beginUpdate(!0),e.forEach((e=>{const i=this.dataView.getItemById(e.itemId);if(this.updateToggledItem(i,e.isCollapsed,!0),t){const t=this._currentToggledItems.findIndex((t=>t.itemId===e.itemId));t>=0?this._currentToggledItems[t].isCollapsed=e.isCollapsed:this._currentToggledItems.push({itemId:e.itemId,isCollapsed:e.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:e.itemId,toggledItems:this._currentToggledItems,type:e.isCollapsed?x.toggleCollapse:x.toggleExpand})}})),this.dataView.endUpdate(),this.dataView.refresh())}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(e,t){const i=t?.treeDataOptions,n=i?.initialSort??{columnId:i?.columnId??"",direction:"ASC"},s=e.find((e=>e.id===n.columnId));return{columnId:n.columnId,sortAsc:"DESC"!==n?.direction?.toUpperCase(),sortCol:s}}getItemCount(e){if(void 0!==e){const t=P(this.treeDataOptions,"levelPropName");return this.dataView.getItems().filter((i=>i[t]===e)).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}clearSorting(){const e=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(e,t,i,n){const s=this.convertFlatParentChildToTreeDataset(e,i),r=Array.isArray(n)&&n.length?n[0]:this.getInitialSort(t,i),o=this.sortService.sortHierarchicalDataset(s,[r],!0);return this._grid?.setSortColumns([r]),o}convertFlatParentChildToTreeDataset(e,t){const i=t?.datasetIdPropertyName??"id",n=t?.treeDataOptions??{columnId:"id"};return F(e,{...n,identifierPropName:n.identifierPropName??i,initiallyCollapsed:this._isLastFullToggleCollapsed})}enableAutoRecalcTotalsFeature(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this._isTreeDataEnabled?this._treeDataRecalcHandler=this.recalculateTreeTotals.bind(this,this.gridOptions):this._treeDataRecalcHandler=null}recalculateTreeTotals(e){const t=e.treeDataOptions,i=t?.childrenPropName??g.treeDataProperties.CHILDREN_PROP,n=t?.levelPropName??g.treeDataProperties.TREE_LEVEL_PROP;t?.aggregators&&(t.aggregators.forEach((e=>{A(this.sharedService.hierarchicalDataset||[],{childrenPropName:i,levelPropName:n,aggregator:e})})),this._grid.invalidate())}sortHierarchicalDataset(e,t){const i=t??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),n=Array.isArray(i)?i:[i];return this.sortService.sortHierarchicalDataset(e,n)}async toggleTreeDataCollapse(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.gridOptions?.enableTreeData){const i=P(this.treeDataOptions,"hasChildrenPropName");t&&await this.pubSubService.publish("onTreeFullToggleStart",{collapsing:e}),this.dataView.beginUpdate(!0);const n=this.dataView.getItems()||[];n.forEach((t=>{t[i]&&this.updateToggledItem(t,e,!1)})),this.sharedService.hierarchicalDataset=this.convertFlatParentChildToTreeDataset(n,this.gridOptions),this.dataView.endUpdate(),this.dataView.refresh(),this._isLastFullToggleCollapsed=e}const i=e?x.fullCollapse:x.fullExpand;this._lastToggleStateChange={type:i,previousFullToggleType:i,toggledItems:null},t&&this.pubSubService.publish("onTreeFullToggleEnd",this._lastToggleStateChange)}handleOnCellClick(e,t){if(e&&t){const i=e.target||{},n=this.gridOptions.datasetIdPropertyName??"id",s=P(this.treeDataOptions,"collapsedPropName"),r=P(this.treeDataOptions,"childrenPropName");if("string"===typeof i?.className){if(i.className.indexOf("toggle")>=0||!1){const i=this.dataView.getItem(t.row);if(i){i[s]=!i[s];const e=i[s],t=i[n],o=this._currentToggledItems.findIndex((e=>e.itemId===t));o>=0?this._currentToggledItems[o].isCollapsed=e:this._currentToggledItems.push({itemId:t,isCollapsed:e}),this.dataView.updateItem(t,i);const a=e=>e[n]===t,l=M(this.sharedService.hierarchicalDataset||[],a,r);l&&(l[s]=e),this._grid.invalidate(),this._lastToggleStateChange={type:e?x.toggleCollapse:x.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:t})}e.stopImmediatePropagation()}}}}updateToggledItem(e,t,i){const n=this.gridOptions?.datasetIdPropertyName??"id",s=P(this.treeDataOptions,"childrenPropName"),r=P(this.treeDataOptions,"collapsedPropName");if(e&&(e[r]=t,this.dataView.updateItem(e[n],e),i)){const i=t=>t[n]===e[n],o=M(this.sharedService.hierarchicalDataset||[],i,s);o&&(o[r]=t)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(e){return e?.enableTreeData&&e?.treeDataOptions?.autoRecalcTotalsOnFilterChange&&e?.treeDataOptions?.aggregators?this.recalculateTreeTotals.bind(this,e):null}}class ma{constructor(e){this.translaterService=e,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new Vt}get columnFilter(){return this.columnDef?.filter??{}}get defaultOperator(){return C.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}get gridOptions(){return this.grid?.getOptions()??{}}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,"compound"===this.inputFilterType&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this._cellContainerElm=e.filterContainerElm;const t=this.gridOptions?.backendServiceApi;this._debounceTypingDelay=(t?t?.filterTypingDebounce??this.gridOptions?.defaultBackendServiceFilterTypingDebounce:this.gridOptions?.filterTypingDebounce)??0;const i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(i),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),"compound"===this.inputFilterType&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._filterInputElm&&(this._shouldTriggerQuery=e,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.updateFilterStyle(!1),"compound"===this.inputFilterType&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.onTriggerEvent(void 0,!0))}destroy(){this._bindEventService.unbindAll(),this._selectOperatorElm?.remove?.(),this._filterInputElm?.remove?.()}getValues(){return this._filterInputElm.value}setValues(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=Array.isArray(e)?e:[e];let s="";for(const r of n)s="single"===this.inputFilterType?t?this.addOptionalOperatorIntoSearchString(r,t):r:`${r}`,this._filterInputElm.value=`${s??""}`,this._currentValue=this._filterInputElm.value;if(this.updateFilterStyle(""!==this.getValues()),this.operator=t||this.defaultOperator,t&&this._selectOperatorElm){const e=W(this.operator);this._selectOperatorElm.value=e}i&&this.onTriggerEvent(void 0,!1)}addOptionalOperatorIntoSearchString(e,t){let i="",n="",s=void 0===e||null===e?"":`${e}`;if(t&&s){switch(t){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":i=t;break;case"EndsWith":case"*z":i="*";break;case"StartsWith":case"a*":n="*"}s=`${i}${s}${n}`}return s}getCompoundOperatorOptionValues(){const e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:y.string;let t,i="text";if(this.columnFilter?.compoundOperatorList)t=this.columnFilter.compoundOperatorList;else switch(e){case y.string:case y.text:case y.readonly:case y.password:i="text",n=this.gridOptions,s=this.translaterService,t=[{operator:"",desc:Qt("CONTAINS","TEXT_CONTAINS","Contains",n,s)},{operator:"<>",desc:Qt("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",n,s)},{operator:"=",desc:Qt("EQUALS","TEXT_EQUALS","Equals",n,s)},{operator:"!=",desc:Qt("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",n,s)},{operator:"a*",desc:Qt("STARTS_WITH","TEXT_STARTS_WITH","Starts with",n,s)},{operator:"*z",desc:Qt("ENDS_WITH","TEXT_ENDS_WITH","Ends with",n,s)}];break;default:i="numeric",t=Zt(this.gridOptions,this.translaterService)}var n,s;return Jt(this.gridOptions,t,i),t}createDomFilterElement(e){const t=this.columnDef?.id??"";ee(this._cellContainerElm);let i=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(i=this.columnFilter.placeholder);const n=`${e??""}`;if(this._filterInputElm=Q("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:i,ariaLabel:this.columnFilter?.ariaLabel??`${Ve(t+"")} Search Filter`,className:`form-control filter-${t}`,value:n,dataset:{columnid:`${t}`}}),this.updateFilterStyle(!!e),void 0!==e&&(this._currentValue=n),"single"===this.inputFilterType)this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter","slick-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=qt(this.getCompoundOperatorOptionValues(),this.grid),this._filterContainerElm=Q("div",{className:`form-group search-filter slick-filter filter-${t}`});const e=Q("div",{className:"input-group"},this._filterContainerElm);Q("div",{className:"input-group-addon input-group-prepend operator"},e).appendChild(this._selectOperatorElm),e.appendChild(this._filterInputElm),e.appendChild(Q("span")),this.operator&&(this._selectOperatorElm.value=W(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:t,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else{const t=e?.type||"",i=this._selectOperatorElm?.value??this.operator;let n=this._filterInputElm.value;const s=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;"string"===typeof n&&s&&(n=n.trim()),"select"!==e?.target?.tagName.toLowerCase()&&(this._currentValue=n),this.updateFilterStyle(""!==n);const r={columnDef:this.columnDef,operator:i,searchTerms:n?[n]:null,shouldTriggerQuery:this._shouldTriggerQuery},o="keyup"===t&&"Enter"!==e?.key?this._debounceTypingDelay:0,a=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,l=a&&Re(this._currentValue)||""===this._currentValue&&Re(this._lastSearchValue);"single"!==this.inputFilterType&&a&&!l||(o>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout((()=>this.callback(e,r)),o)):this.callback(e,r)),this._lastSearchValue=n}this._shouldTriggerQuery=!0}updateFilterStyle(e){e?(this._filterContainerElm?.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterContainerElm?.classList.remove("filled"),this._filterInputElm.classList.remove("filled"))}}class ga extends ma{constructor(e){super(e),this.translaterService=e,this.inputType="text",this.inputFilterType="compound"}}const fa="#86bff8";class va{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=fa,this.sliderType="double",this.searchTerms=[],this._bindEventService=new Vt}get columnFilter(){return this.columnDef?.filter??{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return"compound"===this.sliderType?C.empty:"single"===this.sliderType?C.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||C.rangeInclusive}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.slider,...this.columnFilter?.filterOptions}}get gridOptions(){return this.grid?.getOptions()??{}}get sliderOptions(){return this._sliderOptions}get operator(){return this._operator||(this.columnFilter.operator??this.defaultOperator)}set operator(e){this._operator=e}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=e?.searchTerms??[],this._argFilterContainerElm=e.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||fa,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];const t=+(this.filterOptions?.sliderStartValue??g.SLIDER_DEFAULT_MIN_VALUE),i=+(this.filterOptions?.sliderEndValue??g.SLIDER_DEFAULT_MAX_VALUE);"double"===this.sliderType?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${t}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${i}`),this._currentValues=[t,i],this._sliderLeftInputElm?.dispatchEvent(new Event("change")),this._sliderRightInputElm?.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${t}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=t,this._sliderRightInputElm?.dispatchEvent(new Event("change")));(this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers)||("double"===this.sliderType?this.renderSliderValues(t,i):this.renderSliderValues(void 0,t)),this.updateFilterStyle(!1),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e,searchTerms:[]})}}destroy(){this._bindEventService.unbindAll(),this._sliderTrackElm?.remove(),this._sliderLeftInputElm?.remove(),this._sliderRightInputElm?.remove()}renderSliderValues(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=e?.toString()||"",s=t?.toString()||"";this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=n),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=s),this._sliderRangeContainElm.title="double"===this.sliderType?`${n} - ${s}`:`${s}`,i&&this.grid.onHeaderRowMouseLeave.notify({column:this.columnDef,grid:this.grid})}getValues(){return"double"===this.sliderType?this._currentValues:this._currentValue}setValues(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){let t=[];const i=Array.isArray(e)?e?.[0]:e;if(Array.isArray(e)&&2===e.length?t=e:"string"===typeof i&&i.indexOf("..")>0?(t=i.split(".."),this._currentValue=+(t?.[0]??0)):(Re(i)||""===i)&&(this._currentValue=null===i?void 0:+i,t=[i]),"double"!==this.sliderType&&this._sliderRightInputElm)this._sliderRightInputElm.value="string"===typeof e?e:`${i}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(t)&&2===t.length&&!this.filterOptions?.hideSliderNumbers){const[e,i]=t;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(e??g.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(i??g.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...t)}}else this._currentValue=void 0,this._currentValues=void 0;const n=this.getValues(),s=void 0===n?[]:Array.isArray(n)?n:[n];if(this.updateFilterStyle(s.length>0),void 0!==t&&(this.operator=t),this.operator&&this._selectOperatorElm){const e=W(this.operator);this._selectOperatorElm.value=e}i&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:s,shouldTriggerQuery:!0})}createDomFilterElement(e){const t=this.columnDef?.id??"",i=+(this.columnFilter.minValue??g.SLIDER_DEFAULT_MIN_VALUE),n=+(this.columnFilter.maxValue??g.SLIDER_DEFAULT_MAX_VALUE),s=+(this.columnFilter.valueStep??g.SLIDER_DEFAULT_STEP);ee(this._argFilterContainerElm);const r=+((Array.isArray(e)&&e?.[0])??this.filterOptions?.sliderStartValue??i),o=+((Array.isArray(e)&&e?.[1])??this.filterOptions?.sliderEndValue??n);if(this._sliderRangeContainElm=Q("div",{className:`filter-input filter-${t} slider-input-container slider-values`,title:"double"===this.sliderType?`${r} - ${o}`:`${r}`}),this._sliderTrackElm=Q("div",{className:"slider-track"}),"compound"===this.sliderType){const e=Q("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=qt(this.getOperatorOptionValues(),this.grid),e.appendChild(this._selectOperatorElm)}"double"===this.sliderType&&(this._sliderLeftInputElm=Q("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${Ve(t+"")} Search Filter`,defaultValue:`${r}`,value:`${r}`,min:`${i}`,max:`${n}`,step:`${s}`}));const a="double"===this.sliderType?o:r;this._sliderRightInputElm=Q("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${Ve(t+"")} Search Filter`,defaultValue:`${a}`,value:`${a}`,min:`${i}`,max:`${n}`,step:`${s}`});const l=this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers,d=l?"":"input-group";if(this._divContainerFilterElm=Q("div",{className:`${d} search-filter slick-filter slider-container slider-values filter-${t}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),"double"===this.sliderType&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),l)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let e;"compound"===this.sliderType&&this._selectOperatorElm?(e=Q("span",{className:"input-group-addon input-group-prepend operator"}),e.appendChild(this._selectOperatorElm)):"double"===this.sliderType&&(e=Q("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=Q("span",{className:`input-group-text lowest-range-${t}`,textContent:`${r}`}),e.appendChild(this._leftSliderNumberElm));const i=Q("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=Q("span",{className:`input-group-text highest-range-${t}`,textContent:`${a}`},i),e&&this._divContainerFilterElm.appendChild(e),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(i)}return this._sliderOptions={minValue:i,maxValue:n,step:s},this._currentValues=[r,o],Array.isArray(e)&&e.length>0&&""!==e[0]&&(this.updateFilterStyle(!0),this._currentValue=r),void 0===this.filterOptions.sliderStartValue&&void 0===this.columnFilter.minValue||(this._currentValue=r),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),"compound"===this.sliderType&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):"double"===this.sliderType&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){let e;return e=this.columnFilter.compoundOperatorList?this.columnFilter.compoundOperatorList:Zt(this.gridOptions,this.translaterService),Jt(this.gridOptions,e,"numeric"),e}onValueChanged(e){const t=parseInt(this._sliderRightInputElm?.value??"",10);let i,n;if("compound"===this.sliderType||"single"===this.sliderType)"select"!==e?.target?.tagName?.toLowerCase()&&(this._currentValue=+t),i=this._currentValue,n=[i||"0"];else if("double"===this.sliderType){const e=[parseInt(this._sliderLeftInputElm?.value??"",10),t];i=e.join(".."),n=e}if(this._clearFilterTriggered)this.updateFilterStyle(!1),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{const t=this._selectOperatorElm?.value??this.operator;this.updateFilterStyle(""!==i);const s=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,r=s&&Re(this._currentValue)||!Re(this._currentValue)&&Re(this._lastSearchValue);"compound"===this.sliderType&&s&&!r||this.callback(e,{columnDef:this.columnDef,operator:t||"",searchTerms:n,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new ei(e)),this._lastSearchValue=i}changeBothSliderFocuses(e){const t=e?"add":"remove";this._sliderLeftInputElm?.classList[t]("focus"),this._sliderRightInputElm?.classList[t]("focus")}slideLeftInputChanged(e){const t=parseInt(this._sliderLeftInputElm?.value??"",10),i=parseInt(this._sliderRightInputElm?.value??"",10);this._sliderLeftInputElm&&i-t<=(this.filterOptions?.stopGapBetweenSliderHandles??0)&&(this._sliderLeftInputElm.value=String(t-(this.filterOptions?.stopGapBetweenSliderHandles??0))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-20?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(e,"left",t,i)}slideRightInputChanged(e){const t=parseInt(this._sliderLeftInputElm?.value??"",10),i=parseInt(this._sliderRightInputElm?.value??"",10);"double"===this.sliderType&&this._sliderRightInputElm&&i-t<=(this.filterOptions?.stopGapBetweenSliderHandles??0)&&(this._sliderRightInputElm.value=String(t+(this.filterOptions?.stopGapBetweenSliderHandles??0))),this.sliderLeftOrRightChanged(e,"right",t,i)}sliderLeftOrRightChanged(e,t,i,n){let s=!0;this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title="double"===this.sliderType?`${i} - ${n}`:`${n}`,"double"===this.sliderType&&this._sliderLeftInputElm&&this._sliderRightInputElm&&("left"===t&&i>n?(this._sliderLeftInputElm.value=`${n}`,s=!1):"right"===t&&i>n&&(this._sliderRightInputElm.value=`${i}`,s=!1));(this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers)||(this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=this._sliderLeftInputElm?.value??""),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=this._sliderRightInputElm?.value??"")),s&&this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new ei(e))}sliderTrackClicked(e){e.preventDefault();const t=100*(e.offsetX+0)/this._sliderTrackElm.offsetWidth;this._sliderRightInputElm&&"double"!==this.sliderType?(this._sliderRightInputElm.value=`${t}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(t<=50?(this._sliderLeftInputElm.value=`${t}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${t}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){if(this.filterOptions?.enableSliderTrackColoring&&this._sliderRightInputElm){let e=0;this._sliderLeftInputElm&&(e=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderLeftInputElm.min)*100);const t=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderRightInputElm.min)*100,i="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,this.filterOptions?.sliderTrackFilledColor||this._sliderTrackFilledColor||fa).replace(/%p1/g,`${e}%`).replace(/%p2/g,`${t}%`);this._sliderTrackElm.style.background=i,this._sliderOptions.sliderTrackBackground=i}}updateFilterStyle(e){e?(this._divContainerFilterElm.classList.add("filled"),this._filterElm?.classList.add("filled")):(this._divContainerFilterElm.classList.remove("filled"),this._filterElm?.classList.remove("filled"))}}var ba=Object.defineProperty,ya=(e,t,i)=>((e,t,i)=>t in e?ba(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i),_a=class{constructor(e){ya(this,"_distinctEvent"),ya(this,"_boundedEvents",[]),this._distinctEvent=e?.distinctEvent??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=Array.isArray(t)?t:[t];if("function"==typeof e?.forEach)e.forEach((e=>{for(let t of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(e,t))&&(e.addEventListener(t,i,n),this._boundedEvents.push({element:e,eventName:t,listener:i,groupName:s}))}));else for(let o of r)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(e,o))&&(e.addEventListener(o,i,n),this._boundedEvents.push({element:e,eventName:o,listener:i,groupName:s}))}hasBinding(e,t){return this._boundedEvents.some((i=>i.element===e&&(!t||i.eventName===t)))}unbind(e,t,i){if(e){let n=Array.isArray(e)?e:[e],s=Array.isArray(t)?t||"":[t||""];for(let e of n){i||(i=this._boundedEvents.find((i=>{if(i.element===e&&(!t||i.eventName===t))return i.listener})));for(let t of s)e?.removeEventListener?.(t,i)}}}unbindAll(e){if(e){let t=Array.isArray(e)?e:[e];for(let e=this._boundedEvents.length-1;e>=0;--e){let i=this._boundedEvents[e];if(t.some((e=>e===i.groupName))){let{element:t,eventName:n,listener:s}=i;this.unbind(t,n,s),this._boundedEvents.splice(e,1)}}}else for(;this._boundedEvents.length>0;){let e=this._boundedEvents.pop(),{element:t,eventName:i,listener:n}=e;this.unbind(t,i,n)}}},Sa=typeof window<"u"&&void 0!==window.multipleSelect?window.multipleSelect:{locales:{}},wa={formatSelectAll:()=>"[Select all]",formatAllSelected:()=>"All selected",formatCountSelected:(e,t)=>`${e} of ${t} selected`,formatNoMatchesFound:()=>"No matches found",formatOkButton:()=>"OK"};Sa.locales["en-US"]=wa;var Ca=Sa.locales,Ea={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(e){let{text:t,label:i,search:n}=e;return(i||t||"").includes(n)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,navigationHighlight:!0,infiniteScroll:!1,virtualScroll:!0,cssStyler:()=>null,textTemplate:e=>e.innerHTML.trim(),labelTemplate:e=>e.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onBeforeClick:()=>!0,onClick:()=>!1,onFilter:()=>!1,onFilterClear:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1};Object.assign(Ea,Ca["en-US"]);var Oa={BLOCK_ROWS:50,CLUSTER_BLOCKS:4,DEFAULTS:Ea,METHODS:["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"]};function xa(e){let t=Object.prototype.toString.call(e).slice(8,-1).toLowerCase();return"object"===t?(()=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=xa(e[i]));return t})():"array"===t?e.map((e=>xa(e))):e}function Ta(e){return null!=e&&""!==e}function ka(e,t,i){if(Array.isArray(e))for(let n of e){if(n[t]===i||n[t]===""+ +n[t]&&+n[t]===i)return n;if("optgroup"===n.type)for(let e of n.children)if(e&&(e[t]===i||e[t]===""+ +e[t]&&+e[t]===i))return e}}function Ia(e){return Object.keys(e).forEach((t=>void 0===e[t]?delete e[t]:"")),e}function Ra(e,t){if("string"!=typeof e)return e;if("function"==typeof t)return t(e);if("function"==typeof e.normalize)return e.normalize("NFD").replace(/[\u0300-\u036F]/g,"");throw new Error("[Multiple-Select-Vanilla] `normalize()` function is not defined, you can optionally provide a custom parser via the `diacriticParser` option.")}function Aa(e){let t=0,i=0,n=0,s=0,r=window.innerHeight??0,o=window.innerWidth??0,a={left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0},l=a.top,d=a.left,c=Na(e);if(c){let e=c.top??0,a=c.left??0;i=e-l,t=r-(e-l),n=a-d,s=o-(a-d)}return{top:i,bottom:t,left:n,right:s}}function Da(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(" ").filter((e=>e))}function Pa(e,t,i){let n=document.createElement(e);return t&&Object.keys(t).forEach((e=>{let i=t[e];"object"==typeof i?Object.assign(n[e],i):n[e]=t[e]})),i?.appendChild&&i.appendChild(n),n}function Fa(e,t,i){let n=e.props?.innerHTML?function(e,t){let{[t]:i,...n}=e;return n}(e.props,"innerHTML"):e.props,s=Pa(e.tagName,function(e,t){return"object"==typeof e?Object.fromEntries(t?Object.entries(e).filter((e=>{let[i,n]=e;return!Ta(n)&&!t.includes(i)||Ta(n)})):Object.entries(e).filter((e=>{let[t,i]=e;return Ta(i)}))):e}(n,["className","title","style"]),t),r=i;if(r||(r=s),e.props.innerHTML&&(s.innerHTML=e.props.innerHTML),e.attrs)for(let o of Object.keys(e.attrs))s.setAttribute(o,e.attrs[o]);if(e.children)for(let o of e.children)Fa(o,s,r);return t?.appendChild(s),s}function Ma(e){return e.hasOwnProperty("tagName")?Fa(e):document.createElement("li")}function La(e){for(;e?.firstChild;)e.lastChild&&e.removeChild(e.lastChild);return e}function Na(e){if(!e)return;let t=e?.getBoundingClientRect?.(),i=0,n=0,s=0,r=0;return void 0!==t?.top&&void 0!==t.left&&(i=t.top+window.pageYOffset,n=t.left+window.pageXOffset,r=t.right,s=t.bottom),{top:i,left:n,bottom:s,right:r}}function Ba(e,t,i){if(!e)return 0;let n=Number.parseFloat(e.style[i]);if(!n||Number.isNaN(n)){switch(t){case"outer":n=e["width"===i?"offsetWidth":"offsetHeight"];break;case"scroll":n=e["width"===i?"scrollWidth":"scrollHeight"];break;default:n=e["width"===i?"clientWidth":"clientHeight"]}n=e.getBoundingClientRect()[i]}if(!n||Number.isNaN(n)){let t=e.style.display,s=e.style.position;e.style.display="block",e.style.position="absolute";let r=window.getComputedStyle(e)[i];n=Number.parseFloat(r),Number.isNaN(n)&&(n=0),e.style.display=t,e.style.position=s}return n||0}function Ha(e,t){let i=null,n=e?.parentElement;for(;n;){let[e,s,r,o]=t.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(r&&o)for(let t of o.replace(r,"").split(" "))n.classList.contains(t)&&(s?n?.tagName.toLowerCase()===s&&(i=n):i=n);n=n.parentElement}return i}function za(e,t){e?.style&&(e.style.display="none"===e.style.display&&!1!==t||!0===t?"block":"none")}var $a=class{constructor(e){ya(this,"clusterRows"),ya(this,"cache"),ya(this,"scrollEl"),ya(this,"blockHeight"),ya(this,"clusterHeight"),ya(this,"contentEl"),ya(this,"parentEl"),ya(this,"itemHeight"),ya(this,"lastCluster"),ya(this,"scrollTop"),ya(this,"dataStart"),ya(this,"dataEnd"),ya(this,"rows"),ya(this,"destroy"),ya(this,"callback"),ya(this,"sanitizer"),this.rows=e.rows,this.scrollEl=e.scrollEl,this.contentEl=e.contentEl,this.parentEl=e.contentEl?.parentElement,this.callback=e.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let t=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",t,!1),this.destroy=()=>{this.scrollEl.removeEventListener("scroll",t,!1),La(this.contentEl)}}reset(e){this.lastCluster=0,this.cache={},La(this.contentEl),this.initDOM(e)}initDOM(e){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let t=Ma(e[0]);this.contentEl.appendChild(t),this.contentEl.appendChild(t),this.contentEl.appendChild(t),this.cache.data=[e[0]],this.getRowsHeight()}let t=this.initData(e,this.getNum()),i=this.checkChanges("data",t.rows),n=this.checkChanges("top",t.topOffset),s=this.checkChanges("bottom",t.bottomOffset);La(this.contentEl),i&&n?(t.topOffset&&this.contentEl.appendChild(this.getExtra("top",t.topOffset)),t.rows.forEach((e=>this.contentEl.appendChild(Ma(e)))),t.bottomOffset&&this.contentEl.appendChild(this.getExtra("bottom",t.bottomOffset))):s&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${t.bottomOffset}px`)}getRowsHeight(){if(typeof this.itemHeight>"u"){let e=this.parentEl?.style.display||"";this.parentEl&&(""===e||"none"===e)&&(this.parentEl.style.display="block");let t=this.contentEl.children,i=t[Math.floor(t.length/2)];this.itemHeight=i.offsetHeight,this.parentEl&&(this.parentEl.style.display=e)}this.blockHeight=this.itemHeight*Oa.BLOCK_ROWS,this.clusterRows=Oa.BLOCK_ROWS*Oa.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*Oa.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let e=(this.clusterHeight||0)-(this.blockHeight||0);return e&&Math.floor(this.scrollTop/e)||0}initData(e,t){if(e.length<Oa.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:e};let i=Math.max((this.clusterRows-Oa.BLOCK_ROWS)*t,0),n=i+this.clusterRows,s=Math.max(i*this.itemHeight,0),r=Math.max((e.length-n)*this.itemHeight,0),o=[],a=i;s<1&&a++;for(let l=i;l<n;l++)e[l]&&o.push(e[l]);return this.dataStart=i,this.dataEnd=n,{topOffset:s,bottomOffset:r,rowsAbove:a,rows:o}}checkChanges(e,t){let i=t!==this.cache[e];return this.cache[e]=t,i}getExtra(e,t){let i=document.createElement("li");return i.className=`virtual-scroll-${e}`,t&&(i.style.height=`${t}px`),i}},Ua=".ms-select-all, ul li[data-key]",Va=class{constructor(e,t){this.elm=e,ya(this,"_bindEventService"),ya(this,"isAllSelected",!1),ya(this,"isPartiallyAllSelected",!1),ya(this,"fromHtml",!1),ya(this,"choiceElm"),ya(this,"selectClearElm"),ya(this,"closeElm"),ya(this,"clearSearchIconElm"),ya(this,"filterText",""),ya(this,"updateData",[]),ya(this,"data",[]),ya(this,"dataTotal"),ya(this,"dropElm"),ya(this,"okButtonElm"),ya(this,"filterParentElm"),ya(this,"lastFocusedItemKey",""),ya(this,"lastMouseOverPosition",""),ya(this,"ulElm"),ya(this,"parentElm"),ya(this,"labelElm"),ya(this,"selectAllParentElm"),ya(this,"selectAllElm"),ya(this,"searchInputElm"),ya(this,"selectGroupElms"),ya(this,"selectItemElms"),ya(this,"noResultsElm"),ya(this,"options"),ya(this,"selectAllName",""),ya(this,"selectGroupName",""),ya(this,"selectItemName",""),ya(this,"scrolledByMouse",!1),ya(this,"openDelayTimer"),ya(this,"updateDataStart"),ya(this,"updateDataEnd"),ya(this,"virtualScroll"),ya(this,"_currentHighlightIndex",-1),ya(this,"_currentSelectedElm"),ya(this,"isMoveUpRecalcRequired",!1),ya(this,"locales",{}),this.options=Object.assign({},Oa.DEFAULTS,this.elm.dataset,t),this._bindEventService=new _a({distinctEvent:!0})}get isRenderAsHtml(){return this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.elm&&this.parentElm&&(this.options.onDestroy({hardDestroy:e}),e&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),this.virtualScroll?.destroy(),this.dropElm?.remove(),this.dropElm=void 0,this.parentElm.parentNode?.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:e}),e&&(this.options.onAfterHardDestroy?.(),Object.keys(this.options).forEach((e=>delete this[e]))))}initLocale(){if(this.options.locale){if("object"==typeof this.options.locale)return void Object.assign(this.options,this.options.locale);let e=window.multipleSelect.locales,t=this.options.locale.split(/-|_/);if(t[0]=t[0].toLowerCase(),t[1]&&(t[1]=t[1].toUpperCase()),e[this.options.locale])Object.assign(this.options,e[this.options.locale]);else if(e[t.join("-")])Object.assign(this.options,e[t.join("-")]);else{if(!e[t[0]])throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`);Object.assign(this.options,e[t[0]])}}}initContainer(){let e=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),this.labelElm?.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=Pa("div",{className:Da(`ms-parent ${this.elm.className||""} ${this.options.classes}`).join(" "),dataset:{test:"sel"}}),this.options.darkMode&&this.parentElm.classList.add("ms-dark-mode");let t=this.elm.getAttribute("title")||"";t&&(this.parentElm.title=t),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.choiceElm=Pa("button",{className:"ms-choice",type:"button"},this.parentElm),this.options.labelId&&(this.choiceElm.id=this.options.labelId,this.choiceElm.setAttribute("aria-labelledby",this.options.labelId)),this.choiceElm.appendChild(Pa("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&(this.selectClearElm=Pa("div",{className:"ms-icon ms-icon-close"}),this.selectClearElm.style.display="none",this.choiceElm.appendChild(this.selectClearElm)),this.choiceElm.appendChild(Pa("div",{className:"ms-icon ms-icon-caret"})),this.dropElm=Pa("div",{className:`ms-drop ${this.options.position}`,ariaExpanded:"false"},this.parentElm),this.options.darkMode&&this.dropElm.classList.add("ms-dark-mode"),e&&(this.dropElm.dataset.name=e);let i=this.elm.getAttribute("data-test")||this.options.dataTest;i&&(this.parentElm.dataset.test=i,this.dropElm.dataset.test=i),this.closeElm=this.choiceElm.querySelector(".ms-icon-close"),this.options.dropWidth&&(this.dropElm.style.width="string"==typeof this.options.dropWidth?this.options.dropWidth:`${this.options.dropWidth}px`),function(e,t){e.parentNode?.insertBefore(t,e.nextSibling)}(this.elm,this.parentElm),this.elm.disabled&&(this.choiceElm.classList.add("disabled"),this.choiceElm.disabled=!0),this.selectAllName=`selectAll${e}`,this.selectGroupName=`selectGroup${e}`,this.selectItemName=`selectItem${e}`,this.options.keepOpen||(this._bindEventService.unbindAll("body-click"),this._bindEventService.bind(document.body,"click",(e=>{this.getEventTarget(e)===this.choiceElm||Ha(this.getEventTarget(e),".ms-choice")===this.choiceElm||(this.getEventTarget(e)===this.dropElm||Ha(this.getEventTarget(e),".ms-drop")!==this.dropElm&&this.getEventTarget(e)!==this.elm)&&this.options.isOpen&&this.close("body.click")}),void 0,"body-click"))}initData(){let e=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map((e=>"string"==typeof e||"number"==typeof e?{text:e,value:e}:e));else if("object"==typeof this.options.data){for(let[t,i]of Object.entries(this.options.data))e.push({value:t,text:`${i}`});this.data=e}}else this.elm.childNodes.forEach((t=>{let i=this.initRow(t);i&&e.push(i)})),this.options.data=e,this.data=e,this.fromHtml=!0;this.dataTotal=function(e){let t=0;return e.forEach(((e,i)=>{"optgroup"===e.type?(e._key=`group_${i}`,e.visible=typeof e.visible>"u"||e.visible,e.children.forEach(((e,n)=>{e&&(e.visible=typeof e?.visible>"u"||e.visible,e.divider||(e._key=`option_${i}_${n}`,t+=1))}))):(e.visible=typeof e.visible>"u"||e.visible,e.divider||(e._key=`option_${i}`,t+=1))})),t}(this.data||[])}initRow(e,t){let i={};return"option"===e.tagName?.toLowerCase()?(i.type="option",i.text=this.options.textTemplate(e),i.value=e.value,i.visible=!0,i.selected=!!e.selected,i.disabled=t||e.disabled,i.classes=e.getAttribute("class")||"",i.title=e.getAttribute("title")||"",e.dataset.value&&(i._value=e.dataset.value),Object.keys(e.dataset).length&&(i._data=e.dataset,i._data.divider&&(i.divider=i._data.divider)),i):"optgroup"===e.tagName?.toLowerCase()?(i.type="optgroup",i.label=this.options.labelTemplate(e),i.visible=!0,i.selected=!!e.selected,i.disabled=e.disabled,i.children=[],Object.keys(e.dataset).length&&(i._data=e.dataset),e.childNodes.forEach((e=>{i.children.push(this.initRow(e,i.disabled))})),i):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",(()=>this.open(null))),this._bindEventService.bind(this.parentElm,"mouseout",(()=>this.close("hover.mouseout"))))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let e=0;for(let t of this.data||[])"optgroup"===t.type?e+=t.children.length:e+=1;this.options.filter=e>this.options.filterByDataLength}initList(){if(this.options.filter&&(this.filterParentElm=Pa("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(Pa("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||"\ud83d\udd0e\ufe0e"})),this.options.showSearchClear&&this.filterParentElm.appendChild(Pa("span",{className:"ms-icon ms-icon-close"}))),this.options.selectAll&&!this.options.single){let e=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=Pa("div",{className:"ms-select-all",dataset:{key:"select_all"}});let t=document.createElement("label"),i="ms-icon "+(this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck"),n=Pa("div",{className:"icon-checkbox-container"},t);Pa("input",{type:"checkbox",ariaChecked:String(this.isAllSelected),checked:this.isAllSelected,dataset:{name:`selectAll${e}`}},n),Pa("div",{className:i},n),t.appendChild(Pa("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(t),this.dropElm?.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.ulElm.role="combobox",this.ulElm.ariaExpanded="false",this.ulElm.ariaMultiSelectable=String(!this.options.single),this.dropElm?.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=Pa("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){let e=0,t=this.getListRows();if(this.options.selectAll&&!this.options.single&&(e=-1),t.length>Oa.BLOCK_ROWS*Oa.CLUSTER_BLOCKS){let i=this.dropElm&&"none"!==this.dropElm?.style.display;!i&&this.dropElm&&(this.dropElm.style.left="-10000",this.dropElm.style.display="block",this.dropElm.ariaExpanded="true");let n=()=>{if(this.virtualScroll){this._currentHighlightIndex=0,this.updateDataStart=this.virtualScroll.dataStart+e,this.updateDataEnd=this.virtualScroll.dataEnd+e,this.updateDataStart<0&&(this.updateDataStart=0,this._currentHighlightIndex=0);let t=this.getDataLength();this.updateDataEnd>t&&(this.updateDataEnd=t),this.ulElm&&(this.isMoveUpRecalcRequired?this.recalculateArrowMove("up"):this.virtualScroll.dataStart>this.updateDataStart&&this.recalculateArrowMove("down"))}};this.ulElm&&(this.virtualScroll?this.virtualScroll.reset(t):this.virtualScroll=new $a({rows:t,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{n(),this.events()}})),n(),!i&&this.dropElm&&(this.dropElm.style.left="0",this.dropElm.style.display="none",this.dropElm.ariaExpanded="false")}else this.ulElm&&(La(this.ulElm),t.forEach((e=>this.ulElm.appendChild(Ma(e))))),this.updateDataStart=0,this.updateDataEnd=this.updateData.length;return this.events(),t}getEventTarget(e){return e.composedPath?e.composedPath()[0]:e.target}getListRows(){let e=[];return this.updateData=[],this.data?.forEach((t=>e.push(...this.initListItem(t)))),this.options.infiniteScroll&&e.push({tagName:"li",props:{className:"ms-infinite-option",role:"option"}}),e.push({tagName:"li",props:{className:"ms-no-results",textContent:this.formatNoMatchesFound()}}),e}initListItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=e?.title||"",n=this.options.multiple?"multiple":"",s=this.options.single?"radio":"checkbox",r=!!e?.selected,o=this.options.single&&!this.options.singleRadio,a="";if(!e?.visible)return[];if(this.updateData.push(e),o&&(a="hide-radio "),e.selected&&(a+="selected "),"optgroup"===e.type){let t,i=[];if(this.options.hideOptgroupCheckboxes||this.options.single)t={tagName:"span",props:{dataset:{name:this.selectGroupName,key:e._key}}};else{let i={tagName:"input",props:{type:"checkbox",dataset:{name:this.selectGroupName,key:e._key},checked:r,disabled:e.disabled}};t=o?i:{tagName:"div",props:{className:"icon-checkbox-container"+("radio"===s?" radio":"")},children:[i,{tagName:"div",props:{className:"ms-icon "+(r?"radio"===s?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck")}}]}}!a.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(a+="hide-radio ");let n={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(n.props,e.label);let l={tagName:"li",props:{className:Da(`group${this.options.single||e.disabled?" disabled":""} ${a}`).join(" "),role:"option",ariaSelected:String(r),dataset:{key:e._key}},children:[{tagName:"label",props:{className:Da("optgroup"+(this.options.single||e.disabled?" disabled":"")).join(" ")},children:[t,n]}]},d=this.options.cssStyler(e);return d&&(l.props.style=d),i.push(l),e.children.forEach((e=>i.push(...this.initListItem(e,1)))),i}if(a+=e.classes||"",t&&this.options.single&&(a+=`option-level-${t} `),e.divider)return[{tagName:"li",props:{className:"option-divider"}}];let l=n||a?(n+a).trim():"";e.disabled&&(l+=" disabled");let d=""+(e.disabled?"disabled":""),c={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(c.props,e.text);let h={tagName:"input",props:{type:s,value:encodeURI(e.value),dataset:{key:e._key,name:this.selectItemName},checked:r,disabled:!!e.disabled}};e.selected&&(h.attrs={checked:"checked"});let u={tagName:"div",props:{className:"icon-checkbox-container"+("radio"===s?" radio":"")},children:[h,{tagName:"div",props:{className:"ms-icon "+(h.props.checked?"radio"===s?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck")}}]},p={tagName:"li",props:{role:"option",title:i,ariaSelected:String(r),dataset:{key:e._key}},children:[{tagName:"label",props:{className:d},children:[o?h:u,c]}]};l&&(p.props.className=l);let m=this.options.cssStyler(e);return m&&(p.props.style=m),[p]}initSelected(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;for(let i of this.data||[])if("optgroup"===i.type){let e=i.children.filter((e=>e?.selected&&!e.disabled&&e.visible)).length;i.children.length&&(i.selected=!this.options.single&&e&&e===i.children.filter((e=>e&&!e.disabled&&e.visible&&!e.divider)).length),t+=e}else t+=i.selected&&!i.disabled&&i.visible?1:0;this.isAllSelected=this.data?.filter((e=>e.selected&&!e.disabled&&e.visible)).length===this.data?.filter((e=>!e.disabled&&e.visible&&!e.divider)).length,this.isPartiallyAllSelected=!this.isAllSelected&&t>0,e||(this.isAllSelected?this.options.onCheckAll():0===t&&this.options.onUncheckAll())}initView(){let e;window.getComputedStyle?(e=window.getComputedStyle(this.elm).width,"auto"===e&&(e=Ba(this.dropElm,"outer","width")+20)):e=Ba(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||e}px`,this.elm.classList.add("ms-offscreen")}events(){this._bindEventService.unbindAll(["ok-button","search-input","select-all-checkbox","input-checkbox-list","group-checkbox-list","hover-highlight","arrow-highlight","option-list-scroll"]),this.clearSearchIconElm=this.filterParentElm?.querySelector(".ms-icon-close"),this.searchInputElm=this.dropElm?.querySelector(".ms-search input"),this.selectAllElm=this.dropElm?.querySelector(`input[data-name="${this.selectAllName}"]`),this.selectGroupElms=this.dropElm?.querySelectorAll(`input[data-name="${this.selectGroupName}"],span[data-name="${this.selectGroupName}"]`),this.selectItemElms=this.dropElm?.querySelectorAll(`input[data-name="${this.selectItemName}"]:enabled`),this.noResultsElm=this.dropElm?.querySelector(".ms-no-results");let e=e=>{e.preventDefault(),!this.getEventTarget(e).classList.contains("ms-icon-close")&&(this.options.isOpen?this.close("toggle.close"):this.open())};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",(t=>{"label"===this.getEventTarget(t).nodeName.toLowerCase()&&(e(t),(!this.options.filter||!this.options.isOpen)&&this.focus(),t.stopPropagation())})),this._bindEventService.bind(this.choiceElm,"click",e),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",(e=>{"Escape"===e.code&&this.handleEscapeKey()})),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",(e=>{e.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()})),this.clearSearchIconElm&&this._bindEventService.bind(this.clearSearchIconElm,"click",(e=>{e.preventDefault(),this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this._currentHighlightIndex=-1,this.moveHighlightDown(),this.filter(),this.options.onFilterClear()})),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",(e=>{"Tab"===e.code&&e.shiftKey&&this.close("key.shift+tab")}),void 0,"search-input"),this._bindEventService.bind(this.searchInputElm,"keyup",(e=>{if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(e.code)&&this.searchInputElm?.value){if(this.options.single){let e=[];this.selectItemElms?.forEach((t=>{"none"!==t.closest("li")?.style.display&&e.push(t)})),e.length&&e[0].hasAttribute("data-name")&&this.setSelects([e[0].value])}else this.selectAllElm?.click();return this.close(`key.${e.code.toLowerCase()}`),void this.focus()}this.filter()}),void 0,"search-input")),this.selectAllElm&&this._bindEventService.bind(this.selectAllElm,"click",(e=>this._checkAll(e.currentTarget?.checked)),void 0,"select-all-checkbox"),this.okButtonElm&&this._bindEventService.bind(this.okButtonElm,"click",(t=>{e(t),t.stopPropagation()}),void 0,"ok-button"),this.selectGroupElms&&this._bindEventService.bind(this.selectGroupElms,"click",(e=>{let t=e.currentTarget,i=t.checked,n=ka(this.data,"_key",t.dataset.key);this._checkGroup(n,i),this.options.onOptgroupClick(Ia({label:n.label,selected:n.selected,data:n._data,children:n.children.map((e=>{if(e)return Ia({text:e.text,value:e.value,selected:e.selected,disabled:e.disabled,data:e._data})}))}))}),void 0,"group-checkbox-list"),this.selectItemElms&&this._bindEventService.bind(this.selectItemElms,"click",(e=>{let t=e.currentTarget,i=t.checked,n=ka(this.data,"_key",t.dataset.key),s=()=>{this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close("selection")};!1!==this.options.onBeforeClick(n)?(this._check(n,i),this.options.onClick(Ia({text:n.text,value:n.value,selected:n.selected,data:n._data})),s()):s()}),void 0,"input-checkbox-list"),this.lastFocusedItemKey&&this.dropElm&&this.dropElm.querySelector(`li[data-key=${this.lastFocusedItemKey}]`)?.focus(),this.options.navigationHighlight&&this.dropElm&&(this._bindEventService.bind(this.dropElm,"mouseover",(e=>{let t=this.getEventTarget(e).closest(".ms-select-all")||this.getEventTarget(e).closest("li");if(this.dropElm?.contains(t)&&this.lastMouseOverPosition!==`${e.clientX}:${e.clientY}`){let e=this.dropElm?.querySelectorAll(Ua)||[],i=Array.from(e).findIndex((e=>e.dataset.key===t.dataset.key));this._currentHighlightIndex!==i&&!t.classList.contains("disabled")&&(this._currentSelectedElm=t,this._currentHighlightIndex=i,this.changeCurrentOptionHighlight(t))}this.lastMouseOverPosition=`${e.clientX}:${e.clientY}`}),void 0,"hover-highlight"),this._bindEventService.bind(this.dropElm,"keydown",(e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.moveHighlightUp();break;case"ArrowDown":e.preventDefault(),this.moveHighlightDown();break;case"Escape":this.handleEscapeKey();break;case"Enter":case" ":if(document.activeElement!==this.okButtonElm){let t=this.getEventTarget(e).closest(".ms-select-all")||this.getEventTarget(e).closest("li");if(" "===e.key&&this.options.filter||this.options.filterAcceptOnEnter&&!t)return;e.preventDefault(),this._currentSelectedElm?.querySelector("input")?.click(),this.options.single&&(this.choiceElm.focus(),this.lastFocusedItemKey=this.choiceElm?.dataset.key||"")}break;case"Tab":e.preventDefault(),e.shiftKey?document.activeElement===this.okButtonElm?(this.focusSelectAllOrList(),this.highlightCurrentOption()):(this.close("key.shift+tab"),this.choiceElm.focus()):(this.changeCurrentOptionHighlight(),this.okButtonElm?.focus())}}),void 0,"arrow-highlight")),this.ulElm&&this.options.infiniteScroll&&this._bindEventService.bind(this.ulElm,"scroll",this.infiniteScrollHandler.bind(this),void 0,"option-list-scroll")}handleEscapeKey(){this.options.keepOpen||(this.close("key.escape"),this.choiceElm.focus())}infiniteScrollHandler(e,t,i){let n=!1;e&&this.getEventTarget(e)&&this.ulElm&&this.scrolledByMouse?this.getEventTarget(e).scrollTop+this.getEventTarget(e).clientHeight===this.ulElm.scrollHeight&&(n=!0):void 0!==t&&t+1===i&&(n=!0),n&&this.ulElm&&(this.virtualScroll?this.initListItems():this.ulElm.scrollTop=0,this._currentHighlightIndex=0,this.highlightCurrentOption())}open(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((t=>{null!==e&&e>=0?(window.clearTimeout(this.openDelayTimer),this.openDelayTimer=window.setTimeout((()=>{this.openDrop(),t()}),e)):(this.openDrop(),t())}))}openDrop(){if(!this.dropElm||this.choiceElm?.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),this.choiceElm?.querySelector("div.ms-icon-caret")?.classList.add("open"),this.dropElm.style.display="block",this.dropElm.ariaExpanded="true",this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="inline-flex"),this.noResultsElm&&(this.noResultsElm.style.display="none"),this.getDataLength()||(this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let e,t=Na(this.dropElm);this.options.container instanceof Node?e=this.options.container:"string"==typeof this.options.container&&(e="body"===this.options.container?document.body:document.querySelector(this.options.container)),e.appendChild(this.dropElm),this.dropElm.style.top=`${t?.top??0}px`,this.dropElm.style.left=`${t?.left??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Ba(this.parentElm,"outer","width")}px`}let e=this.options.minHeight,t=this.options.maxHeight;"row"===this.options.maxHeightUnit&&(t=Ba(this.dropElm.querySelector("ul>li"),"outer","height")*this.options.maxHeight),this.ulElm??=this.dropElm.querySelector("ul"),this.ulElm&&(e&&(this.ulElm.style.minHeight=`${e}px`),this.ulElm.style.maxHeight=`${t}px`),this.dropElm.querySelectorAll(".multiple").forEach((e=>{e.style.width=`${this.options.multipleWidth}px`})),this.getDataLength()&&this.options.filter?(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)):this.focusSelectAllOrList(),this._currentHighlightIndex<0?this.moveHighlightDown():this.highlightCurrentOption(),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let i=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:e,top:t}=Aa(this.dropElm);i=e<this.dropElm.getBoundingClientRect().height&&t>e?"top":"bottom"}this.adjustDropHeight(i)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}focusSelectAllOrList(){this.selectAllElm?this.selectAllElm.focus():this.ulElm&&(this.ulElm.tabIndex=0,this.ulElm.focus())}highlightCurrentOption(){let e=this.dropElm?.querySelectorAll(Ua)||[];if(this._currentHighlightIndex<=e.length){let t=e[this._currentHighlightIndex];t&&(this.lastFocusedItemKey=t.dataset.key||"",this._currentSelectedElm=t,this.scrolledByMouse=!1,t.scrollIntoView({block:"nearest"}),this.changeCurrentOptionHighlight(t),window.setTimeout((()=>this.scrolledByMouse=!0),10))}}changeCurrentOptionHighlight(e){e?.classList.add("highlighted"),(this.dropElm?.querySelectorAll(".ms-select-all.highlighted, ul li[data-key].highlighted")||[]).forEach((t=>{t!==e&&t.classList.remove("highlighted")}))}moveHighlightDown(){let e=this.dropElm?.querySelectorAll(Ua)||[],t=e.length;this._currentHighlightIndex<t-1?(this._currentHighlightIndex++,e[this._currentHighlightIndex]?.classList.contains("disabled")&&this.moveHighlightDown()):this.options.infiniteScroll&&this.infiniteScrollHandler(null,this._currentHighlightIndex,t),this.highlightCurrentOption()}moveHighlightUp(){let e=this.dropElm?.querySelectorAll(Ua)||[],t=this.options.single?0:1;if(this.virtualScroll&&this._currentHighlightIndex<=t&&this.updateDataStart>0&&this.ulElm){let t=e[this._currentHighlightIndex+(this.options.single?0:1)],i=t?.dataset.key;return this.lastFocusedItemKey=i,this.ulElm.scrollTop=this.ulElm.scrollTop-t?.getBoundingClientRect().height||10,void(this.isMoveUpRecalcRequired=!0)}this._currentHighlightIndex>0&&(this._currentHighlightIndex--,e[this._currentHighlightIndex]?.classList.contains("disabled")&&this.moveHighlightUp()),this.highlightCurrentOption()}recalculateArrowMove(e){let t=this.dropElm?.querySelectorAll(Ua)||[],i=Array.from(t).findIndex((e=>e.dataset.key===this.lastFocusedItemKey));this._currentHighlightIndex=i-1,"down"===e?this.moveHighlightDown():"up"===e&&(this.moveHighlightUp(),this.isMoveUpRecalcRequired=!1)}close(e){this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),this.choiceElm?.querySelector("div.ms-icon-caret")?.classList.remove("open"),this.dropElm&&(this.dropElm.style.display="none",this.dropElm.ariaExpanded="false",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto")),this.options.onClose(e)}applyAsTextOrHtmlWhenEnabled(e,t){e||(e={}),this.isRenderAsHtml?e.innerHTML="function"==typeof this.options.sanitizer?this.options.sanitizer(t):t:e.textContent=t}update(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getSelects(),i=this.getSelects("text");this.options.displayValues&&(i=t);let n=this.choiceElm?.querySelector("span"),s=t.length,r=null,o=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let e=t.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?e.replace(/(\b)(on[a-z]+)(\s*)=([^>]*)|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;|&#60;)(\/*)(script|script defer)(.*)(&#62;|&gt;|&gt;">)/gi,""):e}return i.join(this.options.displayDelimiter)};if(n){if(0===s){let e=this.options.placeholder||"";n.classList.add("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(n,e)}else r=s<this.options.minimumCountSelected?o():this.formatAllSelected()&&s===this.dataTotal?this.formatAllSelected():this.options.ellipsis&&s>this.options.minimumCountSelected?`${i.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(s,this.dataTotal)&&s>this.options.minimumCountSelected?this.formatCountSelected(s,this.dataTotal):o();if(null!==r&&(n?.classList.remove("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(n,r)),this.options.showClear&&this.selectClearElm){let e=r?"block":"none";this.selectClearElm.style.display=e}if(this.options.displayTitle){let e=this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text";n.title=this.getSelects(e).join(this.options.displayDelimiter)}}let a=this.getSelects();this.options.single?this.elm.value=a.length?a[0]:"":Array.from(this.elm.options).forEach((e=>{e.selected=a.some((t=>t===e.value))})),e||this.elm.dispatchEvent(new Event("change"))}updateSelected(e){for(let i=this.updateDataStart;i<this.updateDataEnd;i++){let e=this.updateData[i],t=this.dropElm?.querySelector(`input[data-key=${e._key}]`);if(t){t.checked=e.selected;let i=t.closest("li"),n=i?.querySelector(".icon-checkbox-container div");i&&(e.selected&&!i.classList.contains("selected")?(i.classList.add("selected"),i.ariaSelected="true",n&&(n.className="ms-icon ms-icon-"+("radio"===t.type?"radio":"check"))):e.selected||(i.classList.remove("selected"),i.ariaSelected="false",n&&(n.className="ms-icon ms-icon-uncheck")))}}let t=0===this.data?.filter((e=>e.visible)).length;if(this.selectAllElm){this.selectAllElm.ariaChecked=String(this.isAllSelected);let e=this.dropElm?.querySelector(".ms-select-all .icon-checkbox-container div");if(e){let t="";t=this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck",e.className=`ms-icon ${t}`}this.selectAllElm.checked=this.isAllSelected,za(this.selectAllElm.closest("li"),!t)}za(this.noResultsElm,t),this.virtualScroll&&(this.virtualScroll.rows=e??this.getListRows())}getData(){return this.options.data}getDataLength(){return this.data?.length??0}getOptions(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.assign({},this.options);return delete t.data,e?xa(t):this.options}refreshOptions(e){(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=Object.keys(e),s=Object.keys(t);if(i&&n.length!==s.length)return!1;for(let r of n)if(s.includes(r)&&e[r]!==t[r])return!1;return!0})(this.options,e,!0)||(this.options=Object.assign(this.options,e),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value",t=[];for(let i of this.data||[])if("optgroup"===i.type){let n=i.children.filter((e=>e?.selected));if(!n.length)continue;if("value"===e||this.options.single)t.push(...n.map((t=>"value"===e&&t._value||t[e])));else{let s=[];s.push("["),s.push(i.label),s.push(`: ${n.map((t=>t[e])).join(", ")}`),s.push("]"),t.push(s.join(""))}}else i.selected&&t.push("value"===e&&i._value||i[e]);return t}setSelects(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!1,s=i=>{for(let s of i){let i=!1;if("text"===t){let t=document.createElement("div");this.applyAsTextOrHtmlWhenEnabled(t,s.text),i=e.includes(t.textContent?.trim()??"")}else i=e.includes(s._value||s.value),!i&&s.value===""+ +s.value&&(i=e.includes(+s.value));s.selected!==i&&(n=!0),s.selected=i}};for(let r of this.data||[])"optgroup"===r.type?s(r.children):s([r]);n&&(this.initSelected(i),this.updateSelected(),this.update(i))}enable(){this.choiceElm&&(this.choiceElm.classList.remove("disabled"),this.choiceElm.disabled=!1)}disable(){this.choiceElm&&(this.choiceElm?.classList.add("disabled"),this.choiceElm.disabled=!0)}check(e){let t=ka(this.data,"value",e);t&&this._check(t,!0)}uncheck(e){let t=ka(this.data,"value",e);t&&this._check(t,!1)}_check(e,t){this.options.single&&this._checkAll(!1,!0),e.selected=t,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(e,t){for(let i of this.data||[])"optgroup"===i.type?this._checkGroup(i,e,!0):!i.disabled&&!i.divider&&(t||i.visible)&&(i.selected=e);t||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(e,t,i){e.selected=t,e.children.forEach((e=>{e&&!e.disabled&&!e.divider&&(i||e.visible)&&(e.selected=t)})),i||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let e of this.data||[])if("optgroup"===e.type)for(let t of e.children)t&&(t.divider||(t.selected=!t.selected));else e&&!e.divider&&(e.selected=!e.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){this.choiceElm?.focus(),this.options.onFocus()}blur(){this.choiceElm?.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(e){let t=this.searchInputElm?.value.trim()??"",i=t.toLowerCase();if(this.filterText===i)return;this.filterText=i;for(let s of this.data||[])if("optgroup"===s.type)if(this.options.filterGroup){let e=`${s?.label??""}`;if(null!=s){let n=this.options.customFilter({label:Ra(e.toString().toLowerCase(),this.options.diacriticParser),search:Ra(i,this.options.diacriticParser),originalLabel:e,originalSearch:t,row:s});s.visible=n;for(let e of s.children)e&&(e.visible=n)}}else{for(let e of s.children)if(null!=e){let n=`${e?.text??""}`;e.visible=this.options.customFilter({text:Ra(n.toString().toLowerCase(),this.options.diacriticParser),search:Ra(i,this.options.diacriticParser),originalText:n,originalSearch:t,row:e,parent:s})}s.visible=s.children.filter((e=>e?.visible)).length>0}else{let e=`${s?.text??""}`;s.visible=this.options.customFilter({text:Ra(e.toString().toLowerCase(),this.options.diacriticParser),search:Ra(i,this.options.diacriticParser),originalText:e,originalSearch:t,row:s})}let n=this.initListItems();this.initSelected(e),this.updateSelected(n),e||this.options.onFilter(t)}adjustDropHeight(e){let t="top"!==e,i=(this.filterParentElm?.getBoundingClientRect().height??0)+(this.okButtonElm?.getBoundingClientRect().height??0)+(this.options.single?0:this.selectAllParentElm?.getBoundingClientRect().height??0)+5,{bottom:n,top:s}=Aa(this.parentElm),r=this.options.maxHeight;if(r=t?n-i-this.options.adjustedHeightPadding:s-i-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&r<this.options.maxHeight){let e=this.dropElm?.querySelector("ul");return e&&(e.style.maxHeight=`${r}px`),!0}return!1}adjustDropPosition(e){let t="bottom";if(this.dropElm&&this.parentElm){let{bottom:i,top:n}=Aa(this.dropElm),{top:s,left:r}=Na(this.parentElm),o=this.dropElm.getBoundingClientRect().height,a=this.dropElm.getBoundingClientRect().width,l=document.body.offsetWidth||window.innerWidth,d=this.parentElm.getBoundingClientRect().width;if(i>o)t="bottom";else if(o>i&&n>i){if(this.options.container){let i=s-o;i<0&&(i=0),(i>0||e)&&(t="top",this.dropElm.style.top=`${i<0?0:i}px`)}else t="top",this.dropElm.classList.add(t);this.dropElm.classList.remove("bottom")}l-a<r&&(this.dropElm.style.left=r-(a-d)+"px")}return t}adjustDropWidthByText(){if(this.dropElm){let e=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(e=this.options.dropWidth||this.options.width||0);let t=this.dropElm.querySelector(".ms-select-all span"),i=this.dropElm.querySelector("ul"),n=26,s=t?.clientWidth??0+n,r=i.scrollHeight>i.clientHeight?this.getScrollbarWidth():0,o=0;this.dropElm.querySelectorAll("li label").forEach((e=>{e.scrollWidth>o&&(o=e.scrollWidth)})),o+=n+r,o<s&&(o=s),this.options.maxWidth&&o>this.options.maxWidth&&(o=this.options.maxWidth),this.options.minWidth&&o<this.options.minWidth&&(o=this.options.minWidth),("100%"===e||+e<o)&&(this.dropElm.style.width=`${o}px`,this.dropElm.style.maxWidth=`${o}px`)}}getScrollbarWidth(){let e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",document.body.appendChild(e);let t=e.offsetWidth;e.style.overflow="scroll";let i=document.createElement("div");i.style.width="100%",e.appendChild(i);let n=i.offsetWidth;return e.parentNode?.removeChild(e),t-n}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(e,t){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${e}`).replace("%",`${t}`):this.options.formatCountSelected(e,t)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},Wa=(e,t)=>"string"==typeof e?ja(document.querySelectorAll(e),t):e instanceof Node?ja([e],t):ja(e,t);function ja(e,t){let i=Array.from(e),n=[];for(let r=0;r<i.length;r++){let e=i[r];try{void 0!==e._multipleSelect&&(e._multipleSelect.destroy(),delete e._multipleSelect),e._multipleSelect=new Va(e,t||{}),e._multipleSelect.init();let i=e._multipleSelect.getOptions(!1);i.onHardDestroy=()=>delete e._multipleSelect,i.onAfterHardDestroyed=()=>n[r]=null,n.push(e._multipleSelect)}catch(s){console.error(s)}}return 1===n.length?n[0]:n}Wa.defaults=Oa.DEFAULTS,Wa.locales={...Ca},Wa.methods=Oa.METHODS,typeof window<"u"&&(window.multipleSelect=Wa);class Ga{constructor(e,t,i){let n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.translaterService=e,this.collectionService=t,this.rxjs=i,this._isMultipleSelect=!0,this._collectionLength=0,this._collectionObservers=[],this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=n}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get columnFilter(){return this.columnDef?.filter??{}}get customStructure(){return this.columnDef?.filter?.customStructure}get gridOptions(){return this.grid?.getOptions()??{}}get defaultOperator(){return this.isMultipleSelect?C.in:C.equal}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.select,...this.columnFilter?.filterOptions}}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error("[Slickgrid-Universal] You need to pass a \"collection\" (or \"collectionAsync\") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");if(this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this.optionLabel=this.customStructure?.optionLabel??"value",this.valueName=this.customStructure?.value??"value",this.enableTranslateLabel&&(!this.translaterService||"function"!==typeof this.translaterService.translate))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=this.gridOptions?.locales??g.locales,this.initMultipleSelectTemplate();let t=this.gridOptions?.defaultFilterPlaceholder||"";this.columnFilter?.placeholder&&(t=this.columnFilter.placeholder),this.defaultOptions.placeholder=t||"",this._isMultipleSelect&&this.columnDef?.filter&&(this.columnDef.filter.emptySearchTermReturnAllValues=this.columnDef.filter?.emptySearchTermReturnAllValues??!1);const i=this.columnFilter.collection||[];return new Promise((async(e,t)=>{try{let t;this.columnFilter.collectionAsync&&!this.columnFilter.collection?(t=Xt(this.columnFilter.collectionAsync,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),e(t)):(t=i,this.renderDomElement(i),e(i)),(this.columnFilter.collectionAsync||this.columnFilter.enableCollectionWatch)&&(await(t??this.columnFilter.collectionAsync),this.watchCollectionChanges())}catch(n){t(n)}}))}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),this.updateFilterStyle(!1),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){"function"===typeof this._msInstance?.destroy&&this._msInstance.destroy(),this.filterElm?.remove(),q(this.subscriptions)}getValues(){return this._msInstance?.getSelects()??[]}setValues(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];void 0!==e&&this._msInstance&&(e=Array.isArray(e)?e.every((e=>Pe(e)))?e.map(String):e:[e],this._msInstance.setSelects(e)),this.updateFilterStyle(this.getValues().length>0),this.operator=t||this.defaultOperator,i&&this.onTriggerEvent()}filterCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const e=this.columnFilter.collectionFilterBy,i=this.columnFilter.collectionOptions?.filterResultAfterEachPass||null;t=this.collectionService?.filterCollection(t,e,i)||[]}return t}sortCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const e=this.columnFilter.collectionSortBy;t=this.collectionService?.sortCollection(this.columnDef,t,e,this.enableTranslateLabel)||[]}return t}watchCollectionChanges(){this.columnFilter?.collection&&(this._collectionObservers.push(u(this.columnFilter.collection,this.watchCallback.bind(this))),p(this.columnFilter,"collection",this.propertyObserverCallback.bind(this)))}propertyObserverCallback(e){this.renderDomElement(e||[]),this.columnFilter.collection&&this._collectionObservers.push(u(this.columnFilter.collection,this.watchCallback.bind(this)))}watchCallback(e){this.renderDomElement(this.columnFilter.collection||e||[])}renderDomElement(e){if(!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty){e=H(e,this.collectionOptions.collectionInsideObjectProperty||"")}if(!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let t=[];if(e.length>0&&(t=[...e]),this.collectionOptions?.addBlankEntry&&Array.isArray(t)&&t.length>0&&""!==t[0][this.valueName]&&t.unshift(this.createBlankEntry()),this.collectionOptions?.addCustomFirstEntry&&Array.isArray(t)&&t.length>0&&t[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&t.unshift(this.collectionOptions.addCustomFirstEntry),this.collectionOptions?.addCustomLastEntry&&Array.isArray(t)&&t.length>0){t[t.length-1][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&t.push(this.collectionOptions.addCustomLastEntry)}let i=t;i=this.filterCollection(i),i=this.sortCollection(i);const n=Kr("filter",i,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=n.hasFoundSearchTerm,this.createFilterElement(n.selectElement,n.dataCollection),this._collectionLength=i.length}createBlankEntry(){const e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createFilterElement(e,t){const i=this.columnDef?.id??"";this.elementName=`filter-${i}`,this.defaultOptions.name=this.elementName,ee(this.filterContainerElm),this.filterElm=e,this.filterElm.dataset.columnId=`${i}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(e),this.filterElmOptions={...this.defaultOptions,...this.filterOptions,data:t},this._msInstance=Wa(e,this.filterElmOptions)}initMultipleSelectTemplate(){const e=this.gridOptions?.enableTranslate??!1,t={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${this.columnDef?.id??""}`,container:"body",darkMode:!!this.gridOptions.darkMode,filter:!1,maxHeight:275,single:!0,singleRadio:!0,showSearchClear:!0,renderOptionLabelAsHtml:this.columnFilter?.enableRenderHtml??!1,sanitizer:e=>this.grid.sanitizeHtmlString(e),onClose:()=>this.onTriggerEvent(),onClear:()=>this.clear()};if(this._isMultipleSelect){t.single=!1,t.singleRadio=!1,t.showOkButton=!0,t.displayTitle=!0;const i=z(this.gridOptions);t.countSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${i}X_OF_Y_SELECTED`):this._locales?.TEXT_X_OF_Y_SELECTED,t.allSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${i}ALL_SELECTED`):this._locales?.TEXT_ALL_SELECTED,t.noMatchesFoundText=e&&this.translaterService?.translate?this.translaterService.translate(`${i}NO_MATCHES_FOUND`):this._locales?.TEXT_NO_MATCHES_FOUND,t.okButtonText=e&&this.translaterService?.translate?this.translaterService.translate(`${i}OK`):this._locales?.TEXT_OK,t.selectAllText=e&&this.translaterService?.translate?this.translaterService.translate(`${i}SELECT_ALL`):this._locales?.TEXT_SELECT_ALL}this.defaultOptions=t}onTriggerEvent(){if(this._msInstance){const e=this.getValues();this.updateFilterStyle(Array.isArray(e)&&e.length>1||1===e.length&&""!==e[0]),this.searchTerms=e,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(e){e?(this.isFilled=!0,this.filterElm?.classList.add("filled"),this._msInstance?.getParentElement()?.classList.add("filled")):(this.isFilled=!1,this.filterElm?.classList.remove("filled"),this._msInstance?.getParentElement()?.classList.remove("filled"))}}const Ya={autocompleter:class{constructor(e,t,i){this.translaterService=e,this.collectionService=t,this.rxjs=i,this._clearFilterTriggered=!1,this._collectionObservers=[],this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new Vt}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get collection(){return this._collection}get columnFilter(){return this.columnDef?.filter||{}}get filterDomElement(){return this._filterElm}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.autocompleter,...this.columnFilter?.filterOptions}}get customStructure(){let e=this.columnFilter?.customStructure;const t=this.columnFilter?.type??this.columnDef?.type;return!e&&t===y.object&&this.columnDef?.dataKey&&this.columnDef?.labelKey&&(e={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),e}get defaultOperator(){return C.equal}get gridOptions(){return this.grid?.getOptions()??{}}get instance(){return this._instance}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync&&!this.columnFilter.filterOptions)throw new Error("[Slickgrid-Universal] You need to pass a \"collection\" (or \"collectionAsync\") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.valueName=this.customStructure?.value??"value",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this._locales=this.gridOptions?.locales??g.locales;const t=this.columnFilter.collection;return this._collection=t,this.renderDomElement(t),new Promise((async(e,i)=>{try{const i=this.columnFilter.collectionAsync;let n;i&&!this.columnFilter.collection?(n=Xt(i,this.columnDef,this.renderDomElement.bind(this),this.rxjs,this.subscriptions),e(n)):(n=t,e(t)),(i||this.columnFilter.enableCollectionWatch)&&(await(n??i),this.watchCollectionChanges())}catch(n){i(n)}}))}clear(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this.updateFilterStyle(!1))}destroy(){"function"===typeof this._instance?.destroy&&this._instance.destroy(),this._filterElm,this._filterElm?.remove?.(),this._collection=void 0,this._bindEventService.unbindAll(),this._collectionObservers.forEach((e=>e?.disconnect())),q(this.subscriptions)}getValues(){return this._filterElm?.value||""}setValues(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&this._filterElm&&(this._filterElm.value=e),this.updateFilterStyle(""!==this.getValues()),this.operator=t||this.defaultOperator,i&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[this.getValues()],shouldTriggerQuery:!0})}filterCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const e=this.columnFilter.collectionFilterBy,i=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;t=this.collectionService?.filterCollection(t,e,i)||[]}return t}sortCollection(e){let t=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const e=this.columnFilter.collectionSortBy;t=this.collectionService?.sortCollection(this.columnDef,t,e,this.enableTranslateLabel)||[]}return t}watchCollectionChanges(){this.columnFilter?.collection&&(this._collectionObservers.push(u(this.columnFilter.collection,(e=>{this.renderDomElement(this.columnFilter.collection||e||[])}))),p(this.columnFilter,"collection",(e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&this._collectionObservers.push(u(this.columnFilter.collection,(e=>{this.renderDomElement(this.columnFilter.collection||e||[])})))})))}renderDomElement(e){if(!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty){e=H(e,this.collectionOptions.collectionInsideObjectProperty||"")}let t=e;t&&(t=this.filterCollection(t),t=this.sortCollection(t));const i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=t,this._filterElm=this.createFilterElement(t,i),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",(()=>{this.isItemSelected||this.clear()}))}createFilterElement(e,t){this._collection=e;const i=this.columnDef?.id??"";ee(this.filterContainerElm);let n=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(n=this.columnFilter.placeholder),this._filterElm=Q("input",{type:"text",ariaLabel:this.columnFilter?.ariaLabel??`${Ve(i+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:n,className:`form-control search-filter slick-filter filter-${i} slick-autocomplete-container`,value:t??"",dataset:{columnid:`${i}`}});const s=t;Array.isArray(e)&&(e=e.every((e=>Pe(e)))?e.map((e=>({label:e,value:e}))):e.map((e=>({label:e?.[this.labelName],value:e?.[this.valueName],labelPrefix:e?.[this.labelPrefixName]??"",labelSuffix:e?.[this.labelSuffixName]??""})))),this._autocompleterOptions={input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${this.filterOptions?.className??""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&this.translaterService?.translate?this.translaterService.translate("NO_ELEMENTS_FOUND"):this._locales?.TEXT_NO_ELEMENTS_FOUND??"No elements found",customize:(e,t,i)=>{i.style.width=""},onSelect:e=>{this.isItemSelected=!0,this.handleSelect(e)},...this.filterOptions},this.gridOptions?.darkMode&&(this._autocompleterOptions.className+=" slick-dark-mode"),this.autocompleterOptions.className=Z(this.autocompleterOptions.className).join(" "),this._autocompleterOptions.renderItem?.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${Ue(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(e)?this._autocompleterOptions.render=this._autocompleterOptions.render?.bind(this)??this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),this.filterOptions?.fetch?(Gt(this._filterElm,this._autocompleterOptions),this._instance=Ut(this._autocompleterOptions)):this._instance=Ut({...this._autocompleterOptions,fetch:(t,i)=>{e&&i(e.filter((e=>(("string"===typeof e?e:e?.label)||"").toLowerCase().includes(t.toLowerCase()))))}}),this._filterElm.value=s??"";const r=Q("div",{className:"autocomplete-filter-container"});return r.appendChild(this._filterElm),r.appendChild(Q("span")),t&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(r),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(e){if(void 0!==e){const t=void 0,i=this.filterOptions?.renderItem??!1,n="string"===typeof e?e:i?e[this.labelName]:e.label;let s="string"===typeof e?e:i?e[this.valueName]:e.value;s=this.trimWhitespaceWhenEnabled(s),this.updateFilterStyle(""!==s),this.setValues(n),this.callback(t,{columnDef:this.columnDef,operator:this.operator,searchTerms:[s],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(e){let t=e?.target?.value??"";const i=this.filterOptions.triggerOnEveryKeyStroke??!1;if(t=this.trimWhitespaceWhenEnabled(t),this._clearFilterTriggered||""===t||i){const i={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?i.clearFilterTriggered=this._clearFilterTriggered:(i.operator=this.operator,i.searchTerms=[t]),this.updateFilterStyle(""!==t),this.callback(e,i)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(e){return Q("div",{textContent:("string"===typeof e?e:e?.label??"")||""})}renderCustomItem(e){const t=this._autocompleterOptions?.renderItem?.templateCallback(e)??"",i=document.createElement("div");return this.grid.applyHtmlCode(i,t),i}renderCollectionItem(e){const t=this.columnFilter?.enableRenderHtml??!1,i=(e.labelPrefix||"")+(e.label||"")+(e.labelSuffix||""),n=this.grid.sanitizeHtmlString(i)||"",s=document.createElement("div");return s[t?"innerHTML":"textContent"]=n,s}trimWhitespaceWhenEnabled(e){let t=e;const i=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;return"string"===typeof e&&i&&(t=e.trim()),t}updateFilterStyle(e){this.isItemSelected=e,e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}},compoundDate:class extends Gr{constructor(e){super(e),this.translaterService=e,this.inputFilterType="compound"}},compoundInput:ga,compoundInputNumber:class extends ma{constructor(e){super(e),this.translaterService=e,this.inputType="number",this.inputFilterType="compound"}},compoundInputPassword:class extends ma{constructor(e){super(e),this.translaterService=e,this.inputType="password",this.inputFilterType="compound"}},compoundInputText:ga,compoundSlider:class extends va{constructor(e){super(e),this.translaterService=e,this.sliderType="compound"}},dateRange:class extends Gr{constructor(e){super(e),this.translaterService=e,this.inputFilterType="range"}},input:ma,inputMask:class extends ma{constructor(e){super(e),this.translaterService=e,this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._cellContainerElm=e.filterContainerElm,this.columnDef?.params?.mask?this._inputMask=this.columnDef.params.mask:this.columnFilter?.params?.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error("[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params\n        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]");const t=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(t),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this))}onTriggerEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="";if(e?.target?.value){let t=e?.target?.value??"";const n=this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace;"string"===typeof t&&n&&(t=t.trim());const s=this.unmaskValue(t),r=this.maskValue(s);i=s,e?.keyCode>=48&&(this._filterInputElm.value=r,e.preventDefault())}t?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:t,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterInputElm.classList.remove("filled")):(this._filterInputElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[i],shouldTriggerQuery:this._shouldTriggerQuery})),this._shouldTriggerQuery=!0}maskValue(e){let t=0,i="";return this._inputMask&&(i=this._inputMask.replace(/[09A]/gi,(i=>(("0"===i||"9"===i)&&/\d+/g.test(e[t])||"A"===i.toUpperCase()&&/[^\d]+/gi.test(e[t]))&&e[t++]||""))),i}unmaskValue(e){const t=e.replace(/[^0-9a-z]*/gi,""),i=this._inputMask.replace(/[^0-9a-z]*/gi,"");let n="";for(let s=0;s<i.length;s++)t[s]&&(("0"===i[s]||"9"===i[s])&&/\d+/g.test(t[s])||"A"===i[s].toUpperCase()&&/[^\d]+/gi.test(t[s]))&&(n+=t[s]);return n}},inputNumber:class extends ma{constructor(e){super(e),this.translaterService=e,this.inputType="number"}},inputPassword:class extends ma{constructor(e){super(e),this.translaterService=e,this.inputType="password"}},inputText:ma,multipleSelect:class extends Ga{constructor(e,t,i){super(e,t,i,!0),this.translaterService=e,this.collectionService=t,this.rxjs=i}},singleSelect:class extends Ga{constructor(e,t,i){super(e,t,i,!1),this.translaterService=e,this.collectionService=t,this.rxjs=i}},slider:class extends va{constructor(e){super(e),this.translaterService=e,this.sliderType="single"}},sliderRange:class extends va{constructor(e){super(e),this.translaterService=e,this.sliderType="double"}}};class Ka{constructor(e,t,i,n){this.config=e,this.translaterService=t,this.collectionService=i,this.rxjs=n,this._options=this.config?.options??{}}addRxJsResource(e){this.rxjs=e}createFilter(e){let t;return e?.model&&(t="function"===typeof e.model?new e.model(this.translaterService,this.collectionService,this.rxjs):e.model),!t&&this._options.defaultFilter&&(t=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),t}}const qa={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:1500,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,autoHeight:!0,autoHeightRecalcRow:100,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:250,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:Xa},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Ya.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"\ud83d\udd0e\ufe0e",defaultFilterRangeOperator:C.rangeInclusive,defaultColumnSortFieldId:"id",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:_.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2b9e",groupExpandedSymbol:"\u2b9f",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:v.comma,exportWithFormatter:!1,filename:"export",format:_.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},eventNamingStyle:zt.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideToggleDarkModeCommand:!0,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-pin-off-outline",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:Xa},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFilterShortcutSubMenu:"mdi mdi-filter-outline",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\xb7"}};function Xa(e,t){let i=e?.columnPickerLabel??e?.name??"";(i instanceof HTMLElement||i instanceof DocumentFragment)&&(i=i.textContent||"");const n=e?.columnGroup||"";return n?n+(t?.columnGroupSeparator??" - ")+i:i}const Qa=(e,t,i)=>{if(Array.isArray(i)&&i.length>0){const e=i.join(", ");return Q("span",{title:e,textContent:e})}return i},Za=(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,numberPrefix:l,numberSuffix:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(n,r,"decimal","cell");return Me(i)?N(i,o,a,u,l,d,c,h):i},Ja=(e,t,i,n,s)=>{if(!n)return"";const r=n.params||{},o=r?.complexField??r?.complexFieldLabel??n.field;if(!o)throw new Error("For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.\n      There are 3 ways to provide it:\n      1- via the generic \"params\" with a \"complexField\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]\n      2- via the generic \"params\" with a \"complexField\" and a \"labelKey\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]\n      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] ");if(n.labelKey&&s.hasOwnProperty(o))return s[o]?.[n.labelKey];if("string"===typeof o&&o.indexOf(".")>0){let e=o.split(".").reduce(((e,t)=>e?.hasOwnProperty(t)?e[t]:""),s);return void 0!==e&&null!==e&&("object"!==typeof e||0!==Object.entries(e).length||e instanceof Date)||(e=""),e}return i},el={arrayObjectToCsv:(e,t,i,n,s)=>{const r=n&&n.params||{},o=r.propertyNames,a=r?.includeTitle??!0;let l=r.dataContextProperty;if(l||(l=n?.field?.split(".")[0]||""),!o||!Array.isArray(o)||!l)throw new Error('Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.\n      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: [\'firtName\'] }}.\n      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.');if(s[l]&&Array.isArray(s[l])&&Array.isArray(s[l])&&s[l].length>0){const e=[];s[l].forEach((t=>{const i=[];o.forEach((e=>{i.push(t[e])})),e.push(i.join(" "))}));const t=e.join(", "),i=Q("span",{textContent:t});return a&&(i.title=t),i}return i},arrayToCsv:Qa,checkmarkMaterial:(e,t,i)=>{let n=!1;const s=Me(i);return s&&(i=+i),(!0===i||s&&+i>0||"string"===typeof i&&i.length>0&&"false"!==i.toLowerCase()&&"0"!==i)&&(n=!0),n?Q("i",{className:"mdi mdi-18px mdi-check checkmark-icon",ariaHidden:"true"}):""},complex:Ja,complexObject:Ja,collection:(e,t,i,n,s,r)=>{if(!i||!n||!n.params||!n.params.collection||!n.params.collection.length)return i;const{params:o,params:{collection:a}}=n,l=o.customStructure?o.customStructure.label:"label",d=o.customStructure?o.customStructure.value:"value";return Array.isArray(i)?Qa(0,0,i.map((e=>K(a,(t=>t[d]===e))[l]))):K(a,(e=>e[d]===i))[l]||""},collectionEditor:(e,t,i,n,s,r)=>{if(!i||!n||!n.editor||!n.editor.collection||!n.editor.collection.length)return i;const{editor:o,editor:{collection:a}}=n,l=o.customStructure?o.customStructure.label:"label",d=o.customStructure?o.customStructure.value:"value";return Array.isArray(i)?a.every((e=>"string"===typeof e))?Qa(0,0,i.map((e=>K(a,(t=>t===e))))):Qa(0,0,i.map((e=>K(a,(t=>t[d]===e))[l]))):K(a,(e=>e[d]===i))[l]||""},currency:(e,t,i,n,s,r)=>{const{currencyPrefix:o,currencySuffix:a,minDecimal:l,maxDecimal:d,numberPrefix:c,numberSuffix:h,decimalSeparator:u,thousandSeparator:p,wrapNegativeNumber:m}=Oo(n,r,"decimal","cell");if(Me(i)){return`${c}${N(i,l,d,m,o,a,u,p)}${h}`}return i},dateIso:To(y.dateIso,"-"),dateTimeIso:To(y.dateTimeIso,"-"),dateTimeShortIso:To(y.dateTimeShortIso,"-"),dateTimeIsoAmPm:To(y.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:To(y.dateTimeIsoAM_PM,"-"),dateEuro:To(y.dateEuro,"/"),dateEuroShort:To(y.dateEuroShort,"/"),dateTimeEuro:To(y.dateTimeEuro,"/"),dateTimeEuroShort:To(y.dateTimeEuroShort,"/"),dateTimeShortEuro:To(y.dateTimeShortEuro,"/"),dateTimeEuroAmPm:To(y.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:To(y.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:To(y.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:To(y.dateTimeEuroShortAM_PM,"/"),dateUs:To(y.dateUs,"/"),dateTimeUs:To(y.dateTimeUs,"/"),dateTimeShortUs:To(y.dateTimeShortUs,"/"),dateTimeUsAmPm:To(y.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:To(y.dateTimeUsAM_PM,"/"),dateTimeUsShort:To(y.dateTimeUsShort,"/"),dateTimeUsShortAmPm:To(y.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:To(y.dateTimeUsShortAM_PM,"/"),dateUsShort:To(y.dateUsShort,"/"),dateUtc:To(y.dateUtc,"-"),decimal:Za,dollar:(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:d,wrapNegativeNumber:c}=Oo(n,r,"currency","cell");return Me(i)?N(i,o,a,c,"$","",l,d):i},dollarColored:(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:d,wrapNegativeNumber:c}=Oo(n,r,"currency","cell");if(Me(i)){const e=i>=0?"green":"red",t=Q("span",{ariaHidden:"true",textContent:N(i,o,a,c,"$","",l,d)});return t.style.color=e,t}return i},dollarColoredBold:(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:d,wrapNegativeNumber:c}=Oo(n,r,"currency","cell");if(Me(i)){const e=i>=0?"green":"red",t=Q("span",{ariaHidden:"true",textContent:N(i,o,a,c,"$","",l,d)});return t.style.color=e,t.style.fontWeight="bold",t}return i},hyperlink:(e,t,i,n,s,r)=>{const o=n&&n.params||{};let a=o.hyperlinkText?o.hyperlinkText:i;a=r.sanitizeHtmlString(a);let l=o.hyperlinkUrl?o.hyperlinkUrl:i;l=r.sanitizeHtmlString(l);const d=l.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#])?/i);if(d&&Array.isArray(d)&&d.length>0){return Q("a",{href:d[0],textContent:a})}return i},icon:(e,t,i,n)=>{const s=n?.params??{},r=s.iconCssClass||s.icon||s.formatterIcon;if(!r)throw new Error('[Slickgrid-Universal] When using `Formatters.icon`, you must provide the "iconCssClass" via the generic "params". (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "mdi mdi-magnify" }}`');return Q("i",{className:r,ariaHidden:"true",title:s.title||null})},iconBoolean:(e,t,i,n)=>{const s=(n?.params||{}).cssClass;if(!s)throw new Error('[Slickgrid-Universal] When using `Formatters.iconBoolean`, you must provide You must provide the "cssClass", e.g.: { formatter: Formatters.iconBoolean, params: { cssClass: "mdi mdi-check" }}');let r=!1;const o=!isNaN(i);return(!0===i||o&&parseFloat(i)>0||!o&&"string"===typeof i&&"false"!==i.toLowerCase()&&"0"!==i)&&(r=!0),r?Q("i",{className:s,ariaHidden:"true"}):""},mask:(e,t,i,n,s,r)=>{const o=(n.params||{}).mask;if(!o)throw new Error('You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: \'000-000\' }}');if(i){let e=0;const t=i.toString(),n=r.getOptions()||{},s=n?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return s.textContent=o.replace(/[09A]/gi,(()=>t[e++]||"")),s}return i},multiple:Co,percent:(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:d,wrapNegativeNumber:c}=Oo(n,r,"percent","cell");if(Me(i)){return N(100*i,o,a,c,"","%",l,d)}return i},percentComplete:(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:d,wrapNegativeNumber:c}=Oo(n,r,"percent","cell");if(Me(i)){const e=i<50?"red":"green",t=N(i,o,a,c,"","%",l,d);return Q("span",{textContent:i>100?"100%":t,style:{color:e}})}return i},percentCompleteBar:(e,t,i)=>{if(!Me(i))return"";let n="",s=parseFloat(i);return s>100&&(s=100),n=s<30?"red":s<70?"silver":"green",Q("span",{className:"percent-complete-bar",title:`${s}%`,style:{background:n,width:`${s}%`}})},percentCompleteBarWithText:(e,t,i)=>{if(!Me(i))return"";let n="",s=parseFloat(i);return s>100&&(s=100),n=s<30?"red":s<70?"silver":"green",Q("div",{className:"percent-complete-bar-with-text",title:`${s}%`,textContent:`${s}%`,style:{background:n,width:`${s}%`}})},percentSymbol:(e,t,i,n,s,r)=>{const{minDecimal:o,maxDecimal:a,decimalSeparator:l,thousandSeparator:d,wrapNegativeNumber:c}=Oo(n,r,"percent","cell");return Me(i)?N(i,o,a,c,"","%",l,d):i},progressBar:(e,t,i)=>{if(!Me(i))return"";let n="",s=parseFloat(i);s>100&&(s=100),n=s<30?"danger":s<70?"warning":"success";const r=Q("div",{className:"progress"});return r.appendChild(Q("div",{className:`progress-bar progress-bar-${n} bg-${n}`,role:"progressbar",ariaValueNow:String(s),ariaValueMin:"0",ariaValueMax:"100",textContent:`${s}%`,style:{minWidth:"2em",width:`${s}%`}})),r},translate:(e,t,i,n,s,r)=>{const o=(r?.getOptions()??{}).translater||n&&n.params&&n.params.translater;if(!o||"function"!==typeof o.translate)throw new Error('"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).\n    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }');return void 0!==i&&null!==i&&"string"!==typeof i&&(i+=""),i?o.translate(i):""},translateBoolean:(e,t,i,n,s,r)=>{const o=(r?.getOptions()??{}).translater||n&&n.params&&n.params.translater;if(!o||"function"!==typeof o.translate)throw new Error('"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).\n    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }');return void 0!==i&&null!==i&&"string"!==typeof i&&(i+=""),i?o.translate(i.toUpperCase()):""},tree:(e,t,i,n,s,r)=>{const o=r.getOptions(),a=o?.treeDataOptions,l=a?.indentMarginLeft??15,d=a?.collapsedPropName??g.treeDataProperties.COLLAPSED_PROP,c=a?.hasChildrenPropName??g.treeDataProperties.HAS_CHILDREN_PROP,h=a?.levelPropName??g.treeDataProperties.TREE_LEVEL_PROP;let u=i;if(u=B(n,s,i),null===u||void 0===u||void 0===s)return"";if(!s.hasOwnProperty(h))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const p=s?.[h]??0,m=document.createElement("span");m.style.display="inline-block",m.style.width=l*p+"px";const f=`slick-tree-level-${p}`;let v="";s[c]&&(v=s?.[d]?"collapsed":"expanded"),a?.titleFormatter&&(u=Io(a.titleFormatter,e,t,n,s,r));const b=Q("div",{className:`slick-group-toggle ${v}`.trim(),ariaExpanded:String("expanded"===v)}),y=Q("span",{className:"slick-tree-title"});r.applyHtmlCode(y,u),y.setAttribute("level",p);const _=o?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return _.appendChild(m),_.appendChild(b),_.appendChild(y),{addClasses:f,html:_}},treeParseTotals:(e,t,i,n,s,r)=>{const o=r.getOptions(),a=o?.treeDataOptions?.hasChildrenPropName??g.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:l,treeTotalsFormatter:d,params:c}=n;if(!l&&!d)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(s[a]&&s?.__treeTotals&&(l||d)){return(d??l)(s?.__treeTotals,n,r)}if(c.formatters){let o=i;for(const l of c.formatters)s[a]||s?.__treeTotals||"function"!==typeof l||(o=l(e,t,o,n,s,r)||i);return o}return i},treeExport:(e,t,i,n,s,r)=>{const o=r.getOptions(),a=o?.treeDataOptions,l=a?.collapsedPropName??g.treeDataProperties.COLLAPSED_PROP,d=a?.hasChildrenPropName??g.treeDataProperties.HAS_CHILDREN_PROP,c=a?.levelPropName??g.treeDataProperties.TREE_LEVEL_PROP,h=a?.exportIndentMarginLeft??5,u=a?.exportIndentationLeadingChar??".",p=a?.exportIndentationLeadingSpaceCount??3,m=o?.excelExportOptions?.groupCollapsedSymbol??"\u2b9e",f=o?.excelExportOptions?.groupExpandedSymbol??"\u2b9f";let v=i;if(v=B(n,s,i),null===v||void 0===v||void 0===s)return"";if(!s.hasOwnProperty(c))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const b=s?.[c]??0;let y="",_=0;s[d]?(y=s?.[l]?m:f,_=0===b?0:h*b):_=h*(0===b?0:b+1);const S=Ce(_);a?.titleFormatter&&(v=Io(a.titleFormatter,e,t,n,s,r));v=`${0===b&&y?"":0===b?`${u}${Ce(p)}`:u}${S}${y} ${v}`;return Ze(v)}},tl=(e,t,i)=>{const n=t.field??"";let s=e.avg?.[n];const r=t?.params;let o=r?.groupFormatterPrefix||"";const a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"regular","group");if(Me(s)){if(s<0){if(s=Math.abs(s),u){if(isNaN(l)&&isNaN(d)){return`${o}(${Y(Math.round(s),h)})${a}`}return`${o}(${L(s,l,d,c,h)})${a}`}o+="-"}if(isNaN(l)&&isNaN(d)){return`${o}${Y(Math.round(s),h)}${a}`}return`${o}${L(s,l,d,c,h)}${a}`}return""},il=(e,t,i)=>{const n=t.field??"",s=e.avg?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",l=r?.groupFormatterCurrencyPrefix||"",d=r?.groupFormatterCurrencySuffix||"",{minDecimal:c,maxDecimal:h,decimalSeparator:u,thousandSeparator:p,wrapNegativeNumber:m}=Oo(t,i,"currency","group");if(Me(s)){return`${o}${N(s,c,h,m,l,d,u,p)}${a}`}return""},nl=(e,t,i)=>{const n=t.field??"",s=e.avg?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"currency","group");if(Me(s)){return`${o}${N(s,l,d,u,"$","",c,h)}${a}`}return""},sl=(e,t,i)=>{const n=t.field??"";let s=e.avg?.[n];const r=t?.params;let o=r?.groupFormatterPrefix||"";const a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"percent","group");if(Me(s)){if(s<0){if(s=Math.abs(s),u){if(isNaN(l)&&isNaN(d)){return`${o}(${Y(Math.round(s),h)}%)${a}`}return`${o}(${L(s,l,d,c,h)}%)${a}`}o+="-"}if(isNaN(l)&&isNaN(d)){return`${o}${Y(Math.round(s),h)}%${a}`}return`${o}${L(s,l,d,c,h)}%${a}`}return""},rl=(e,t,i)=>{const n=t.field??"",s=e.max?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"regular","group");if(Me(s)){return`${o}${N(s,l,d,u,"","",c,h)}${a}`}return""},ol=(e,t,i)=>{const n=t.field??"",s=e.min?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"regular","group");if(Me(s)){return`${o}${N(s,l,d,u,"","",c,h)}${a}`}return""},al=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"regular","group");if(Me(s)){return`${o}${N(s,l,d,u,"","",c,h)}${a}`}return""},ll=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"regular","group");if(Me(s)){return Q("span",{style:{fontWeight:"bold"},textContent:`${o}${N(s,l,d,u,"","",c,h)}${a}`})}return""},dl=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"regular","group");if(Me(s)){return Q("span",{style:{color:s>=0?"green":"red"},textContent:`${o}${N(s,l,d,u,"","",c,h)}${a}`})}return""},cl=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",l=r?.groupFormatterCurrencyPrefix||"",d=r?.groupFormatterCurrencySuffix||"",{minDecimal:c,maxDecimal:h,decimalSeparator:u,thousandSeparator:p,wrapNegativeNumber:m}=Oo(t,i,"currency","group");if(Me(s)){return`${o}${N(s,c,h,m,l,d,u,p)}${a}`}return""},hl=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",l=r?.groupFormatterCurrencyPrefix||"",d=r?.groupFormatterCurrencySuffix||"",{minDecimal:c,maxDecimal:h,decimalSeparator:u,thousandSeparator:p,wrapNegativeNumber:m}=Oo(t,i,"currency","group");if(Me(s)){return Q("span",{style:{color:s>=0?"green":"red"},textContent:`${o}${N(s,c,h,m,l,d,u,p)}${a}`})}return""},ul=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"currency","group");if(Me(s)){return`${o}${N(s,l,d,u,"$","",c,h)}${a}`}return""},pl=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"currency","group");if(Me(s)){return Q("span",{style:{fontWeight:"bold"},textContent:`${o}${N(s,l,d,u,"$","",c,h)}${a}`})}return""},ml=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"currency","group");if(Me(s)){return Q("span",{style:{color:s>=0?"green":"red"},textContent:`${o}${N(s,l,d,u,"$","",c,h)}${a}`})}return""},gl=(e,t,i)=>{const n=t.field??"",s=e.sum?.[n],r=t?.params,o=r?.groupFormatterPrefix||"",a=r?.groupFormatterSuffix||"",{minDecimal:l,maxDecimal:d,decimalSeparator:c,thousandSeparator:h,wrapNegativeNumber:u}=Oo(t,i,"currency","group");if(Me(s)){return Q("span",{style:{color:s>=0?"green":"red",fontWeight:"bold"},textContent:`${o}${N(s,l,d,u,"$","",c,h)}${a}`})}return""};class fl{constructor(){this.options=qa}}class vl{constructor(e){this._value=null,this._boundedEventWithListeners=[],this._elementBindings=[],this._binding=e,this._property=e.property||"",this._elementBindings=[],e.property&&e.variable&&(e.variable.hasOwnProperty(e.property)||e.property in e.variable)?this._value=e.variable[e.property]:this._value=e.variable,"object"===typeof e.variable&&Object.defineProperty(e.variable,e.property,{get:this.valueGetter.bind(this),set:this.valueSetter.bind(this)})}get boundedEventWithListeners(){return this._boundedEventWithListeners}get elementBindings(){return this._elementBindings}get property(){return this._property}dispose(){this.unbindAll(),this._boundedEventWithListeners=[],this._elementBindings=[]}valueGetter(){return this._value}valueSetter(e){if(this._value=e,Array.isArray(this._elementBindings))for(const t of this._elementBindings)t?.element&&t?.attribute&&(t.element[t.attribute]=e)}bind(e,t,i,n){return e&&e.forEach?e.forEach((e=>this.bindSingleElement(e,t,i,n))):e&&this.bindSingleElement(e,t,i,n),this}unbind(e,t,i,n,s){if(e){e.removeEventListener(t,i,n);const r=this._boundedEventWithListeners.findIndex((e=>e.uid===s));r>=0&&this._boundedEventWithListeners.splice(r,1)}}unbindAll(){let e=this._boundedEventWithListeners.pop();for(;e;){const{element:t,eventName:i,listener:n,uid:s}=e;this.unbind(t,i,n,void 0,s),e=this._boundedEventWithListeners.pop()}this._boundedEventWithListeners=[]}bindSingleElement(e,t,i,n){const s={element:e,attribute:t};if(e){if(i){const r=()=>{let i=e[t];if(this.hasData(i)&&"number"===e?.type&&(i=+i),this.valueSetter(i),(this._binding.variable.hasOwnProperty(this._binding.property)||this._binding.property in this._binding.variable)&&(this._binding.variable[this._binding.property]=this.valueGetter()),"function"===typeof n)return n(this.valueGetter())};s.event=i,s.listener=r,e.addEventListener(i,r),this._boundedEventWithListeners.push({element:e,eventName:i,listener:r,uid:this.generateUuidV4()})}this._elementBindings.push(s),e[t]=this._value}}generateUuidV4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}hasData(e){return void 0!==e&&null!==e&&""!==e}}class bl{constructor(){this._observers=[],this._querySelectorPrefix=""}get querySelectorPrefix(){return this._querySelectorPrefix||""}set querySelectorPrefix(e){this._querySelectorPrefix=e}get observers(){return this._observers}dispose(){let e=this._observers.pop();for(;e;)e.dispose(),e=this._observers.pop();this._observers=[]}addElementBinding(e,t,i,n,s,r){const o=document.querySelectorAll(`${this.querySelectorPrefix}${i}`);let a=this._observers.find((t=>t.property===e));a||(a=new vl({variable:e,property:t})),Array.isArray(s)?s.forEach((e=>a?.bind(o,n,e,r))):a?.bind(o,n,s,r),this._observers.push(a)}bindEventHandler(e,t,i,n){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach((e=>{e?.addEventListener&&e.addEventListener(t,i,n)}))}setElementAttributeValue(e,t,i){document.querySelectorAll(`${this.querySelectorPrefix}${e}`).forEach((e=>{e.textContent="",e&&t in e&&(e[t]=i)}))}}class yl{get eventHandler(){return this._eventHandler}get gridUid(){return this.grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get gridOptions(){return this.grid?.getOptions()??{}}get locales(){return this.gridOptions?.locales??g.locales}set metrics(e){this.renderMetrics(e)}get leftFooterText(){return document.querySelector(`.slick-custom-footer${this.gridUidSelector} .left-footer`)?.textContent??""}set leftFooterText(e){this.renderLeftFooterText(e)}get rightFooterText(){return document.querySelector(`.slick-custom-footer${this.gridUidSelector} .right-footer`)?.textContent??""}set rightFooterText(e){this.renderRightFooterText(e)}constructor(e,t,i,n){if(this.grid=e,this.customFooterOptions=t,this.pubSubService=i,this.translaterService=n,this._enableTranslate=!1,this._isLeftFooterOriginallyEmpty=!0,this._isLeftFooterDisplayingSelectionRowCount=!1,this._isRightFooterOriginallyEmpty=!0,this._selectedRowCount=0,this._subscriptions=[],this._bindingHelper=new bl,this._bindingHelper.querySelectorPrefix=`.${this.gridUid} `,this._eventHandler=new ii,this._enableTranslate=this.gridOptions?.enableTranslate??!1,this._isLeftFooterOriginallyEmpty=!this.gridOptions.customFooterOptions?.leftFooterText,this._isRightFooterOriginallyEmpty=!this.gridOptions.customFooterOptions?.rightFooterText,this.registerOnSelectedRowsChangedWhenEnabled(t),this._enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translateCustomFooterTexts(),this._enableTranslate&&this.pubSubService?.subscribe){const e=this.translaterService?.eventName??"onLanguageChange";this._subscriptions.push(this.pubSubService.subscribe(e,(()=>this.translateCustomFooterTexts())))}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingHelper.dispose(),this._footerElement?.remove()}renderFooter(e){this.translateCustomFooterTexts(),this.createFooterContainer(e)}renderMetrics(e){const t=e?.endTime?kt(e.endTime,this.customFooterOptions.dateFormat,"en-US"):"";this._bindingHelper.setElementAttributeValue("span.last-update-timestamp","textContent",t),this._bindingHelper.setElementAttributeValue("span.item-count","textContent",e.itemCount),this._bindingHelper.setElementAttributeValue("span.total-count","textContent",e.totalItemCount),this.customFooterOptions.metricTexts?.lastUpdate&&this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"lastUpdate","span.text-last-update","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"items","span.text-items","textContent"),this._bindingHelper.addElementBinding(this.customFooterOptions.metricTexts,"of","span.text-of","textContent")}renderLeftFooterText(e){this._bindingHelper.setElementAttributeValue("div.left-footer","textContent",e)}renderRightFooterText(e){this._bindingHelper.setElementAttributeValue("div.right-footer","textContent",e)}translateCustomFooterTexts(){if(this.gridOptions.enableTranslate&&this.translaterService?.translate){this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{};for(const e of Object.keys(this.customFooterOptions.metricTexts))if(e.lastIndexOf("Key")>0){const t=e.substring(0,e.lastIndexOf("Key"));this.customFooterOptions.metricTexts[t]=this.translaterService.translate(this.customFooterOptions.metricTexts[e]||" ")}this._isLeftFooterDisplayingSelectionRowCount&&(this.leftFooterText=`${this._selectedRowCount} ${this.customFooterOptions.metricTexts.itemsSelected}`)}else this.locales&&(this.customFooterOptions.metricTexts=this.customFooterOptions.metricTexts||{},this.customFooterOptions.metricTexts.lastUpdate=this.customFooterOptions.metricTexts.lastUpdate||this.locales?.TEXT_LAST_UPDATE||"TEXT_LAST_UPDATE",this.customFooterOptions.metricTexts.items=this.customFooterOptions.metricTexts.items||this.locales?.TEXT_ITEMS||"TEXT_ITEMS",this.customFooterOptions.metricTexts.itemsSelected=this.customFooterOptions.metricTexts.itemsSelected||this.locales?.TEXT_ITEMS_SELECTED||"TEXT_ITEMS_SELECTED",this.customFooterOptions.metricTexts.of=this.customFooterOptions.metricTexts.of||this.locales?.TEXT_OF||"TEXT_OF")}createFooterContainer(e){const t=Q("div",{className:`slick-custom-footer ${this.gridUid}`,style:{width:"100%",height:`${this.customFooterOptions.footerHeight||20}px`}}),i=Q("div",{className:`left-footer ${this.customFooterOptions.leftContainerClass}`});this.grid.applyHtmlCode(i,this.customFooterOptions.leftFooterText),t.appendChild(i),t.appendChild(this.createFooterRightContainer()),this._footerElement=t,e?.appendChild&&this._footerElement&&e.appendChild(this._footerElement)}createFooterRightContainer(){const e=Q("div",{className:`right-footer ${this.customFooterOptions.rightContainerClass||""}`});if(this._isRightFooterOriginallyEmpty){if(!this.customFooterOptions.hideMetrics){e.classList.add("metrics");const t=Q("span",{className:"timestamp"},e);if(!this.customFooterOptions.hideLastUpdateTimestamp){const e=this.createFooterLastUpdate();e&&t.appendChild(e)}e.appendChild(Q("span",{className:"item-count",textContent:`${this.metrics?.itemCount??"0"}`})),this.customFooterOptions.hideTotalItemCount||(e.appendChild(document.createTextNode("\r\n")),e.appendChild(Q("span",{className:"text-of",textContent:` ${this.customFooterOptions.metricTexts?.of??"of"} `})),e.appendChild(document.createTextNode("\r\n")),e.appendChild(Q("span",{className:"total-count",textContent:`${this.metrics?.totalItemCount??"0"}`}))),e.appendChild(document.createTextNode("\r\n")),e.appendChild(Q("span",{className:"text-items",textContent:` ${this.customFooterOptions.metricTexts?.items??"items"} `}))}}else this.grid.applyHtmlCode(e,this.customFooterOptions.rightFooterText);return e}createFooterLastUpdate(){const e=this.customFooterOptions?.metricTexts?.lastUpdate??"Last Update",t=this.metrics?.endTime?kt(this.metrics?.endTime,this.customFooterOptions.dateFormat,"en-US"):"",i=Q("span");return i.appendChild(Q("span",{className:"text-last-update",textContent:e})),i.appendChild(document.createTextNode("\r\n")),i.appendChild(Q("span",{className:"last-update-timestamp",textContent:t})),i.appendChild(Q("span",{className:"separator",textContent:` ${this.customFooterOptions.metricSeparator||""} `})),i}registerOnSelectedRowsChangedWhenEnabled(e){if((this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowSelection)&&e&&!e.hideRowSelectionCount&&this._isLeftFooterOriginallyEmpty){this._isLeftFooterDisplayingSelectionRowCount=!0;const t=e.metricTexts?.itemsSelected??this.locales?.TEXT_ITEMS_SELECTED??"TEXT_ITEMS_SELECTED";e.leftFooterText=`0 ${t}`,this._eventHandler.subscribe(this.grid.onSelectedRowsChanged,((t,i)=>{this._selectedRowCount=i.rows.length;const n=e.metricTexts?.itemsSelected??this.locales?.TEXT_ITEMS_SELECTED??"TEXT_ITEMS_SELECTED";this.leftFooterText=`${this._selectedRowCount} ${n}`}))}}}class _l{constructor(){this._isPreviouslyShown=!1,this._warningLeftElement=null,this._warningRightElement=null}get gridOptions(){return this._grid?.getOptions()??{}}init(e,t){this._grid=e,this._translaterService=t.get("TranslaterService")}dispose(){this._warningLeftElement?.remove(),this._warningRightElement?.remove(),this._warningLeftElement=null,this._warningRightElement=null}showEmptyDataMessage(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;if(!this._grid||!this.gridOptions||this._isPreviouslyShown===e)return!1;this._isPreviouslyShown=e;const i=this._grid.getUID(),n={message:"No data to display.",...this.gridOptions.emptyDataWarning,...t},s=n?.className??"slick-empty-data-warning";this._warningLeftElement=document.querySelector(`.${i} .${s}`);const r=document.querySelector(`.${i} .grid-canvas.grid-canvas-left`),o=document.querySelector(`.${i} .grid-canvas.grid-canvas-right`),a=n.leftViewportMarginLeft??0,l=n.rightViewportMarginLeft??0,d=n.frozenLeftViewportMarginLeft??0,c=n.frozenRightViewportMarginLeft??0,h=void 0!==this.gridOptions?.frozenColumn&&this.gridOptions.frozenColumn>=0,u="string"===typeof a?a:`${a}px`,p="string"===typeof l?l:`${l}px`;if(this.gridOptions.autoHeight){const t=document.querySelector(`.${i} .slick-pane.slick-pane-top.slick-pane-left`);if(t&&t.style&&r&&r.style){const i=parseInt(t.style.height,10)||0,n=this.gridOptions?.rowHeight??0,s=this.gridOptions.enableFiltering?this.gridOptions?.headerRowHeight??0:0,o=this.gridOptions.createPreHeaderPanel?this.gridOptions?.preHeaderPanelHeight??0:0;if(e){let e=null!==i&&i<100?i:100;e+=s+o,t.style.minHeight=`${e}px`,r.style.minHeight=`${n}px`}}}let m=n.message;if(this.gridOptions.enableTranslate&&this._translaterService&&n?.messageKey&&(m=this._translaterService.translate(n.messageKey)),!this._warningLeftElement&&r&&o&&(this._warningLeftElement=document.createElement("div"),this._warningLeftElement.classList.add(...Z(s)),this._warningLeftElement.classList.add("left"),this._grid.applyHtmlCode(this._warningLeftElement,m),this._warningRightElement=this._warningLeftElement.cloneNode(!0),this._warningRightElement.classList.add("right"),o.appendChild(this._warningRightElement),r.appendChild(this._warningLeftElement)),this._warningLeftElement){let t=e?"flex":"none";h&&e&&(t=n.hideFrozenLeftWarning?"none":"flex"),this._warningLeftElement.style.display=t;const i="string"===typeof d?d:`${d}px`;this._warningLeftElement.style.marginLeft=h?i:u}if(this._warningRightElement){let t=e?"flex":"none";h&&e&&(t=n.hideFrozenRightWarning?"none":"flex"),this._warningRightElement.style.display=t;const i="string"===typeof c?c:`${c}px`;this._warningRightElement.style.marginLeft=h?i:p}return e}}class Sl{constructor(){this._enableTranslate=!1,this._subscriptions=[],this.currentPagination={},this.firstButtonClasses="",this.lastButtonClasses="",this.prevButtonClasses="",this.nextButtonClasses="",this.textItemsPerPage="items per page",this.textItems="items",this.textOf="of",this.textPage="Page",this._bindingHelper=new bl,this._bindingEventService=new Vt}get availablePageSizes(){return this._paginationService.availablePageSizes||[]}get dataFrom(){return this._paginationService.dataFrom}get dataTo(){return this._paginationService.dataTo}get itemsPerPage(){return this._paginationService.itemsPerPage}set itemsPerPage(e){this._paginationService.changeItemPerPage(e)}get pageCount(){return this._paginationService.pageCount}get pageNumber(){return this._paginationService.pageNumber}get gridOptions(){return this._grid?.getOptions()??{}}get gridUid(){return this._grid?.getUID()||""}get locales(){return this.gridOptions?.locales??g.locales}get totalItems(){return this._paginationService.totalItems}get isLeftPaginationDisabled(){return 1===this.pageNumber||0===this.totalItems}get isRightPaginationDisabled(){return this.pageNumber===this.pageCount||0===this.totalItems}init(e,t,i,n){if(this._grid=e,this._pubSubService=i,this._translaterService=n,this._paginationService=t,this.currentPagination=t.getFullPagination(),this._bindingHelper.querySelectorPrefix=this.gridUid?`.${this.gridUid} `:"",this._enableTranslate=this.gridOptions?.enableTranslate??!1,this._enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');if(this.translatePaginationTexts(),this._enableTranslate&&this._pubSubService?.subscribe){const e=this._translaterService?.eventName??"onLanguageChange";this._subscriptions.push(this._pubSubService.subscribe(e,(()=>this.translatePaginationTexts())))}this._subscriptions.push(this._pubSubService.subscribe("onPaginationRefreshed",(e=>{Object.keys(e).forEach((t=>this.currentPagination[t]=e[t])),this.updatePageButtonsUsability(),this._spanInfoFromToElm?.style&&(this._spanInfoFromToElm.style.display=0===this.currentPagination.totalItems?"none":"")})),this._pubSubService.subscribe("onPaginationSetCursorBased",(()=>{this.disposeDom(),this.renderPagination(this._gridContainerElm)})))}dispose(){this._pubSubService.unsubscribeAll(this._subscriptions),this.disposeDom()}disposeDom(){this._bindingEventService.unbindAll(),this._bindingHelper.dispose(),this._paginationElement.remove()}renderPagination(e){this._gridContainerElm=e;const t=this.createPaginationContainer(),i=Q("div",{className:"slick-pagination-nav"}),n=Q("nav",{ariaLabel:"Page navigation"}),s=Q("ul",{className:"pagination"});this._seekFirstElm=Q("li",{className:"page-item seek-first"},s),this._seekFirstElm.appendChild(Q("a",{className:"page-link icon-seek-first",ariaLabel:"First Page",role:"button"})),this._seekPrevElm=Q("li",{className:"page-item seek-prev"},s),this._seekPrevElm.appendChild(Q("a",{className:"page-link icon-seek-prev",ariaLabel:"Previous Page",role:"button"})),n.appendChild(s);const r=this.createPageNumberSection(),o=Q("nav",{ariaLabel:"Page navigation"}),a=Q("ul",{className:"pagination"});this._seekNextElm=Q("li",{className:"page-item seek-next"},a),this._seekNextElm.appendChild(Q("a",{className:"page-link icon-seek-next",ariaLabel:"Next Page",role:"button"})),this._seekEndElm=Q("li",{className:"page-item seek-end"},a),this._seekEndElm.appendChild(Q("a",{className:"page-link icon-seek-end",ariaLabel:"Last Page",role:"button"})),o.appendChild(a),t.appendChild(i),i.appendChild(n),i.appendChild(r),i.appendChild(o);const l=this.createPaginationSettingsSection();t.appendChild(i),t.appendChild(l),this._paginationElement.appendChild(t),e?.appendChild&&this._paginationElement&&e.appendChild(this._paginationElement),this.renderPageSizes(),this.addBindings(),this.addEventListeners(),this.updatePageButtonsUsability()}renderPageSizes(){if(this._itemPerPageElm&&Array.isArray(this.availablePageSizes))for(const e of this.availablePageSizes)this._itemPerPageElm.appendChild(Q("option",{value:`${e}`,text:`${e}`}))}addBindings(){this._bindingHelper.addElementBinding(this,"firstButtonClasses","li.page-item.seek-first","className"),this._bindingHelper.addElementBinding(this,"prevButtonClasses","li.page-item.seek-prev","className"),this._bindingHelper.addElementBinding(this,"lastButtonClasses","li.page-item.seek-end","className"),this._bindingHelper.addElementBinding(this,"nextButtonClasses","li.page-item.seek-next","className"),this._bindingHelper.addElementBinding(this.currentPagination,"dataFrom","span.item-from","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"dataTo","span.item-to","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"totalItems","span.total-items","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageCount","span.page-count","textContent"),this._bindingHelper.addElementBinding(this.currentPagination,"pageSize","select.items-per-page","value"),this._paginationService.isCursorBased?this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","span.page-number","textContent"):this._bindingHelper.addElementBinding(this.currentPagination,"pageNumber","input.page-number","value","change",this.changeToCurrentPage.bind(this)),this._bindingHelper.addElementBinding(this,"textItems","span.text-items","textContent"),this._bindingHelper.addElementBinding(this,"textItemsPerPage","span.text-item-per-page","textContent"),this._bindingHelper.addElementBinding(this,"textOf","span.text-of","textContent"),this._bindingHelper.addElementBinding(this,"textPage","span.text-page","textContent")}addEventListeners(){this._bindingEventService.bind(this._seekFirstElm,"click",this.changeToFirstPage.bind(this)),this._bindingEventService.bind(this._seekEndElm,"click",this.changeToLastPage.bind(this)),this._bindingEventService.bind(this._seekNextElm,"click",this.changeToNextPage.bind(this)),this._bindingEventService.bind(this._seekPrevElm,"click",this.changeToPreviousPage.bind(this)),this._bindingEventService.bind(this._itemPerPageElm,"change",this.updateItemsPerPage.bind(this))}changeToFirstPage(e){this.isLeftPaginationDisabled||this._paginationService.goToFirstPage(e)}changeToLastPage(e){this.isRightPaginationDisabled||this._paginationService.goToLastPage(e)}changeToNextPage(e){this.isRightPaginationDisabled||this._paginationService.goToNextPage(e)}changeToPreviousPage(e){this.isLeftPaginationDisabled||this._paginationService.goToPreviousPage(e)}changeToCurrentPage(e){this._paginationService.goToPageNumber(+e)}updateItemsPerPage(e){this.itemsPerPage=+(e?.target?.value??0)}translatePaginationTexts(){if(this._enableTranslate&&this._translaterService?.translate){const e=z(this.gridOptions);this.textItemsPerPage=this._translaterService.translate(`${e}ITEMS_PER_PAGE`),this.textItems=this._translaterService.translate(`${e}ITEMS`),this.textOf=this._translaterService.translate(`${e}OF`),this.textPage=this._translaterService.translate(`${e}PAGE`)}else this.locales&&(this.textItemsPerPage=this.locales.TEXT_ITEMS_PER_PAGE||"TEXT_ITEMS_PER_PAGE",this.textItems=this.locales.TEXT_ITEMS||"TEXT_ITEMS",this.textOf=this.locales.TEXT_OF||"TEXT_OF",this.textPage=this.locales.TEXT_PAGE||"TEXT_PAGE")}createPaginationContainer(){const e=Q("div",{id:"pager",className:`slick-pagination-container ${this.gridUid} pager`,style:{width:"100%"}}),t=Q("div",{className:"slick-pagination"});return e.appendChild(t),this._paginationElement=e,t}createPageNumberSection(){const e=Q("div",{className:"slick-page-number"});return Q("span",{className:"text-page",textContent:"Page"},e),e.appendChild(document.createTextNode(" ")),this._paginationService.isCursorBased?Q("span",{className:"page-number",ariaLabel:"Page Number",dataset:{test:"page-number-label"},textContent:"1"},e):Q("input",{type:"text",className:"form-control page-number",ariaLabel:"Page Number",value:"1",size:1,dataset:{test:"page-number-input"}},e),e.appendChild(document.createTextNode(" ")),Q("span",{className:"text-of",textContent:"of"},e),e.appendChild(document.createTextNode(" ")),Q("span",{className:"page-count",dataset:{test:"page-count"}},e),e}createPaginationSettingsSection(){const e=Q("span",{className:"slick-pagination-settings"});this._itemPerPageElm=Q("select",{id:"items-per-page-label",ariaLabel:"Items per Page",className:"items-per-page"},e),e.appendChild(document.createTextNode(" ")),Q("span",{className:"text-item-per-page",textContent:"items per page"},e),e.appendChild(document.createTextNode(", "));const t=Q("span",{className:"slick-pagination-count"},e);this._spanInfoFromToElm=Q("span",{className:"page-info-from-to"},t),Q("span",{className:"item-from",ariaLabel:"Page Item From",dataset:{test:"item-from"}},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode("-")),Q("span",{className:"item-to",ariaLabel:"Page Item To",dataset:{test:"item-to"}},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode(" ")),Q("span",{className:"text-of",textContent:"of"},this._spanInfoFromToElm),this._spanInfoFromToElm.appendChild(document.createTextNode(" "));const i=Q("span",{className:"page-info-total-items"},t);return Q("span",{className:"total-items",ariaLabel:"Total Items",dataset:{test:"total-items"}},i),i.appendChild(document.createTextNode(" ")),Q("span",{className:"text-items",textContent:"items"},i),i.appendChild(document.createTextNode(" ")),e}updatePageButtonsUsability(){this.firstButtonClasses=this.isLeftPaginationDisabled?"page-item seek-first disabled":"page-item seek-first",this.prevButtonClasses=this.isLeftPaginationDisabled?"page-item seek-prev disabled":"page-item seek-prev",this.lastButtonClasses=this.isRightPaginationDisabled?"page-item seek-end disabled":"page-item seek-end",this.nextButtonClasses=this.isRightPaginationDisabled?"page-item seek-next disabled":"page-item seek-next"}}const wl=e=>"string"===typeof e,Cl=()=>{let e,t;const i=new Promise(((i,n)=>{e=i,t=n}));return i.resolve=e,i.reject=t,i},El=e=>null==e?"":""+e,Ol=/###/g,xl=e=>e&&e.indexOf("###")>-1?e.replace(Ol,"."):e,Tl=e=>!e||wl(e),kl=(e,t,i)=>{const n=wl(t)?t.split("."):t;let s=0;for(;s<n.length-1;){if(Tl(e))return{};const t=xl(n[s]);!e[t]&&i&&(e[t]=new i),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++s}return Tl(e)?{}:{obj:e,k:xl(n[s])}},Il=(e,t,i)=>{const{obj:n,k:s}=kl(e,t,Object);if(void 0!==n||1===t.length)return void(n[s]=i);let r=t[t.length-1],o=t.slice(0,t.length-1),a=kl(e,o,Object);for(;void 0===a.obj&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),a=kl(e,o,Object),a&&a.obj&&"undefined"!==typeof a.obj[`${a.k}.${r}`]&&(a.obj=void 0);a.obj[`${a.k}.${r}`]=i},Rl=(e,t)=>{const{obj:i,k:n}=kl(e,t);if(i)return i[n]},Al=(e,t,i)=>{for(const n in t)"__proto__"!==n&&"constructor"!==n&&(n in e?wl(e[n])||e[n]instanceof String||wl(t[n])||t[n]instanceof String?i&&(e[n]=t[n]):Al(e[n],t[n],i):e[n]=t[n]);return e},Dl=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Pl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Fl=e=>wl(e)?e.replace(/[&<>"'\/]/g,(e=>Pl[e])):e;const Ml=[" ",",","?","!",";"],Ll=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const i=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,i),this.regExpQueue.push(e),i}}(20),Nl=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const n=t.split(i);let s=e;for(let r=0;r<n.length;){if(!s||"object"!==typeof s)return;let e,t="";for(let o=r;o<n.length;++o)if(o!==r&&(t+=i),t+=n[o],e=s[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&o<n.length-1)continue;r+=o-r+1;break}s=e}return s},Bl=e=>e&&e.replace("_","-"),Hl={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class zl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Hl,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,i,n){return n&&!this.debug?null:(wl(e[0])&&(e[0]=`${i}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new zl(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new zl(this.logger,e)}}var $l=new zl;class Ul{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach((e=>{this.observers[e]||(this.observers[e]=new Map);const i=this.observers[e].get(t)||0;this.observers[e].set(t,i+1)})),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach((e=>{let[t,n]=e;for(let s=0;s<n;s++)t(...i)}))}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach((t=>{let[n,s]=t;for(let r=0;r<s;r++)n.apply(n,[e,...i])}))}}}class Vl extends Ul{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=void 0!==n.keySeparator?n.keySeparator:this.options.keySeparator,r=void 0!==n.ignoreJSONStructure?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,t],i&&(Array.isArray(i)?o.push(...i):wl(i)&&s?o.push(...i.split(s)):o.push(i)));const a=Rl(this.data,o);return!a&&!t&&!i&&e.indexOf(".")>-1&&(e=o[0],t=o[1],i=o.slice(2).join(".")),!a&&r&&wl(i)?Nl(this.data&&this.data[e]&&this.data[e][t],i,s):a}addResource(e,t,i,n){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const r=void 0!==s.keySeparator?s.keySeparator:this.options.keySeparator;let o=[e,t];i&&(o=o.concat(r?i.split(r):i)),e.indexOf(".")>-1&&(o=e.split("."),n=t,t=o[1]),this.addNamespaces(t),Il(this.data,o,n),s.silent||this.emit("added",e,t,i,n)}addResources(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const s in i)(wl(i[s])||Array.isArray(i[s]))&&this.addResource(e,t,s,i[s],{silent:!0});n.silent||this.emit("added",e,t,i)}addResourceBundle(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},o=[e,t];e.indexOf(".")>-1&&(o=e.split("."),n=i,i=t,t=o[1]),this.addNamespaces(t);let a=Rl(this.data,o)||{};r.skipCopy||(i=JSON.parse(JSON.stringify(i))),n?Al(a,i,s):a={...a,...i},Il(this.data,o,a),r.silent||this.emit("added",e,t,i)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find((e=>t[e]&&Object.keys(t[e]).length>0))}toJSON(){return this.data}}var Wl={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,i,n,s){return e.forEach((e=>{this.processors[e]&&(t=this.processors[e].process(t,i,n,s))})),t}};const jl={};class Gl extends Ul{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,i)=>{e.forEach((e=>{t[e]&&(i[e]=t[e])}))})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=$l.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const i=this.resolve(e,t);return i&&void 0!==i.res}extractFromKey(e,t){let i=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===i&&(i=":");const n=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let s=t.ns||this.options.defaultNS||[];const r=i&&e.indexOf(i)>-1,o=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,i)=>{t=t||"",i=i||"";const n=Ml.filter((e=>t.indexOf(e)<0&&i.indexOf(e)<0));if(0===n.length)return!0;const s=Ll.getRegExp(`(${n.map((e=>"?"===e?"\\?":e)).join("|")})`);let r=!s.test(e);if(!r){const t=e.indexOf(i);t>0&&!s.test(e.substring(0,t))&&(r=!0)}return r})(e,i,n);if(r&&!o){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:wl(s)?[s]:s};const r=e.split(i);(i!==n||i===n&&this.options.ns.indexOf(r[0])>-1)&&(s=r.shift()),e=r.join(n)}return{key:e,namespaces:wl(s)?[s]:s}}translate(e,t,i){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t={...t}),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const n=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,s=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:r,namespaces:o}=this.extractFromKey(e[e.length-1],t),a=o[o.length-1],l=t.lng||this.language,d=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(d){const e=t.nsSeparator||this.options.nsSeparator;return n?{res:`${a}${e}${r}`,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:`${a}${e}${r}`}return n?{res:r,usedKey:r,exactUsedKey:r,usedLng:l,usedNS:a,usedParams:this.getUsedParamsDetails(t)}:r}const c=this.resolve(e,t);let h=c&&c.res;const u=c&&c.usedKey||r,p=c&&c.exactUsedKey||r,m=Object.prototype.toString.apply(h),g=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,f=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!wl(h)&&"boolean"!==typeof h&&"number"!==typeof h;if(!(f&&h&&v&&["[object Number]","[object Function]","[object RegExp]"].indexOf(m)<0)||wl(g)&&Array.isArray(h))if(f&&wl(g)&&Array.isArray(h))h=h.join(g),h&&(h=this.extendTranslation(h,e,t,i));else{let n=!1,o=!1;const d=void 0!==t.count&&!wl(t.count),u=Gl.hasDefaultValue(t),p=d?this.pluralResolver.getSuffix(l,t.count,t):"",m=t.ordinal&&d?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",g=d&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),f=g&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${p}`]||t[`defaultValue${m}`]||t.defaultValue;!this.isValidLookup(h)&&u&&(n=!0,h=f),this.isValidLookup(h)||(o=!0,h=r);const v=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&o?void 0:h,b=u&&f!==h&&this.options.updateMissing;if(o||n||b){if(this.logger.log(b?"updateKey":"missingKey",l,a,r,b?f:h),s){const e=this.resolve(r,{...t,keySeparator:!1});e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const i=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&i&&i[0])for(let t=0;t<i.length;t++)e.push(i[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const n=(e,i,n)=>{const s=u&&n!==h?n:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,a,i,s,b,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,a,i,s,b,t),this.emit("missingKey",e,a,i,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&d?e.forEach((e=>{const i=this.pluralResolver.getSuffixes(e,t);g&&t[`defaultValue${this.options.pluralSeparator}zero`]&&i.indexOf(`${this.options.pluralSeparator}zero`)<0&&i.push(`${this.options.pluralSeparator}zero`),i.forEach((i=>{n([e],r+i,t[`defaultValue${i}`]||f)}))})):n(e,r,f))}h=this.extendTranslation(h,e,t,c,i),o&&h===r&&this.options.appendNamespaceToMissingKey&&(h=`${a}:${r}`),(o||n)&&this.options.parseMissingKeyHandler&&(h="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${a}:${r}`:r,n?h:void 0):this.options.parseMissingKeyHandler(h))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(u,h,{...t,ns:o}):`key '${r} (${this.language})' returned an object instead of string.`;return n?(c.res=e,c.usedParams=this.getUsedParamsDetails(t),c):e}if(s){const e=Array.isArray(h),i=e?[]:{},n=e?p:u;for(const r in h)if(Object.prototype.hasOwnProperty.call(h,r)){const e=`${n}${s}${r}`;i[r]=this.translate(e,{...t,joinArrays:!1,ns:o}),i[r]===e&&(i[r]=h[r])}h=i}}return n?(c.res=h,c.usedParams=this.getUsedParamsDetails(t),c):h}extendTranslation(e,t,i,n,s){var r=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...i},i.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!i.skipInterpolation){i.interpolation&&this.interpolator.init({...i,interpolation:{...this.options.interpolation,...i.interpolation}});const o=wl(e)&&(i&&i.interpolation&&void 0!==i.interpolation.skipOnVariables?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let a;if(o){const t=e.match(this.interpolator.nestingRegexp);a=t&&t.length}let l=i.replace&&!wl(i.replace)?i.replace:i;if(this.options.interpolation.defaultVariables&&(l={...this.options.interpolation.defaultVariables,...l}),e=this.interpolator.interpolate(e,l,i.lng||this.language||n.usedLng,i),o){const t=e.match(this.interpolator.nestingRegexp);a<(t&&t.length)&&(i.nest=!1)}!i.lng&&"v1"!==this.options.compatibilityAPI&&n&&n.res&&(i.lng=this.language||n.usedLng),!1!==i.nest&&(e=this.interpolator.nest(e,(function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return s&&s[0]===n[0]&&!i.context?(r.logger.warn(`It seems you are nesting recursively key: ${n[0]} in key: ${t[0]}`),null):r.translate(...n,t)}),i)),i.interpolation&&this.interpolator.reset()}const o=i.postProcess||this.options.postProcess,a=wl(o)?[o]:o;return void 0!==e&&null!==e&&a&&a.length&&!1!==i.applyPostProcessor&&(e=Wl.handle(a,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(i)},...i}:i,this)),e}resolve(e){let t,i,n,s,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wl(e)&&(e=[e]),e.forEach((e=>{if(this.isValidLookup(t))return;const a=this.extractFromKey(e,o),l=a.key;i=l;let d=a.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const c=void 0!==o.count&&!wl(o.count),h=c&&!o.ordinal&&0===o.count&&this.pluralResolver.shouldUseIntlApi(),u=void 0!==o.context&&(wl(o.context)||"number"===typeof o.context)&&""!==o.context,p=o.lngs?o.lngs:this.languageUtils.toResolveHierarchy(o.lng||this.language,o.fallbackLng);d.forEach((e=>{this.isValidLookup(t)||(r=e,!jl[`${p[0]}-${e}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(r)&&(jl[`${p[0]}-${e}`]=!0,this.logger.warn(`key "${i}" for languages "${p.join(", ")}" won't get resolved as namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach((i=>{if(this.isValidLookup(t))return;s=i;const r=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(r,l,i,e,o);else{let e;c&&(e=this.pluralResolver.getSuffix(i,o.count,o));const t=`${this.options.pluralSeparator}zero`,n=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(c&&(r.push(l+e),o.ordinal&&0===e.indexOf(n)&&r.push(l+e.replace(n,this.options.pluralSeparator)),h&&r.push(l+t)),u){const i=`${l}${this.options.contextSeparator}${o.context}`;r.push(i),c&&(r.push(i+e),o.ordinal&&0===e.indexOf(n)&&r.push(i+e.replace(n,this.options.pluralSeparator)),h&&r.push(i+t))}}let a;for(;a=r.pop();)this.isValidLookup(t)||(n=a,t=this.getResource(i,e,a,o))})))}))})),{res:t,usedKey:i,exactUsedKey:n,usedLng:s,usedNS:r}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,i,n):this.resourceStore.getResource(e,t,i,n)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],i=e.replace&&!wl(e.replace);let n=i?e.replace:e;if(i&&"undefined"!==typeof e.count&&(n.count=e.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!i){n={...n};for(const e of t)delete n[e]}return n}static hasDefaultValue(e){const t="defaultValue";for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&t===i.substring(0,12)&&void 0!==e[i])return!0;return!1}}const Yl=e=>e.charAt(0).toUpperCase()+e.slice(1);class Kl{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=$l.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Bl(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Bl(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(wl(e)&&e.indexOf("-")>-1){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(t){}const i=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map((e=>e.toLowerCase())):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),i.indexOf(n[1].toLowerCase())>-1&&(n[1]=Yl(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),i.indexOf(n[1].toLowerCase())>-1&&(n[1]=Yl(n[1].toLowerCase())),i.indexOf(n[2].toLowerCase())>-1&&(n[2]=Yl(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach((e=>{if(t)return;const i=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(i)||(t=i)})),!t&&this.options.supportedLngs&&e.forEach((e=>{if(t)return;const i=this.getLanguagePartFromCode(e);if(this.isSupportedCode(i))return t=i;t=this.options.supportedLngs.find((e=>e===i?e:e.indexOf("-")<0&&i.indexOf("-")<0?void 0:e.indexOf("-")>0&&i.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===i||0===e.indexOf(i)&&i.length>1?e:void 0))})),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),wl(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let i=e[t];return i||(i=e[this.getScriptPartFromCode(t)]),i||(i=e[this.formatLanguageCode(t)]),i||(i=e[this.getLanguagePartFromCode(t)]),i||(i=e.default),i||[]}toResolveHierarchy(e,t){const i=this.getFallbackCodes(t||this.options.fallbackLng||[],e),n=[],s=e=>{e&&(this.isSupportedCode(e)?n.push(e):this.logger.warn(`rejecting language code not found in supportedLngs: ${e}`))};return wl(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&s(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&s(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&s(this.getLanguagePartFromCode(e))):wl(e)&&s(this.formatLanguageCode(e)),i.forEach((e=>{n.indexOf(e)<0&&s(this.formatLanguageCode(e))})),n}}let ql=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Xl={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const Ql=["v1","v2","v3"],Zl=["v4"],Jl={zero:0,one:1,two:2,few:3,many:4,other:5};class ed{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=$l.create("pluralResolver"),this.options.compatibilityJSON&&!Zl.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return ql.forEach((t=>{t.lngs.forEach((i=>{e[i]={numbers:t.nr,plurals:Xl[t.fc]}}))})),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const i=Bl("dev"===e?"en":e),n=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:i,type:n});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let r;try{r=new Intl.PluralRules(i,{type:n})}catch($d){if(!e.match(/-|_/))return;const n=this.languageUtils.getLanguagePartFromCode(e);r=this.getRule(n,t)}return this.pluralRulesCache[s]=r,r}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getRule(e,t);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}getPluralFormsOfKey(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,i).map((e=>`${t}${e}`))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.getRule(e,t);return i?this.shouldUseIntlApi()?i.resolvedOptions().pluralCategories.sort(((e,t)=>Jl[e]-Jl[t])).map((e=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${e}`)):i.numbers.map((i=>this.getSuffix(e,i,t))):[]}getSuffix(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=this.getRule(e,i);return n?this.shouldUseIntlApi()?`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${n.select(t)}`:this.getSuffixRetroCompatible(n,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const i=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let n=e.numbers[i];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===n?n="plural":1===n&&(n=""));const s=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return"v1"===this.options.compatibilityJSON?1===n?"":"number"===typeof n?`_plural_${n.toString()}`:s():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?s():this.options.prepend&&i.toString()?this.options.prepend+i.toString():i.toString()}shouldUseIntlApi(){return!Ql.includes(this.options.compatibilityJSON)}}const td=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=((e,t,i)=>{const n=Rl(e,i);return void 0!==n?n:Rl(t,i)})(e,t,i);return!r&&s&&wl(i)&&(r=Nl(e,i,n),void 0===r&&(r=Nl(t,i,n))),r},id=e=>e.replace(/\$/g,"$$$$");class nd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=$l.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:i,useRawValueToEscape:n,prefix:s,prefixEscaped:r,suffix:o,suffixEscaped:a,formatSeparator:l,unescapeSuffix:d,unescapePrefix:c,nestingPrefix:h,nestingPrefixEscaped:u,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:g,maxReplaces:f,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:Fl,this.escapeValue=void 0===i||i,this.useRawValueToEscape=void 0!==n&&n,this.prefix=s?Dl(s):r||"{{",this.suffix=o?Dl(o):a||"}}",this.formatSeparator=l||",",this.unescapePrefix=d?"":c||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=h?Dl(h):u||Dl("$t("),this.nestingSuffix=p?Dl(p):m||Dl(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=f||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,i,n){let s,r,o;const a=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const s=td(t,a,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(s,void 0,i,{...n,...t,interpolationkey:e}):s}const s=e.split(this.formatSeparator),r=s.shift().trim(),o=s.join(this.formatSeparator).trim();return this.format(td(t,a,r,this.options.keySeparator,this.options.ignoreJSONStructure),o,i,{...n,...t,interpolationkey:r})};this.resetRegExp();const d=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,c=n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>id(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?id(this.escape(e)):id(e)}].forEach((t=>{for(o=0;s=t.regex.exec(e);){const i=s[1].trim();if(r=l(i),void 0===r)if("function"===typeof d){const t=d(e,s,n);r=wl(t)?t:""}else if(n&&Object.prototype.hasOwnProperty.call(n,i))r="";else{if(c){r=s[0];continue}this.logger.warn(`missed to pass in variable ${i} for interpolating ${e}`),r=""}else wl(r)||this.useRawValueToEscape||(r=El(r));const a=t.safeValue(r);if(e=e.replace(s[0],a),c?(t.regex.lastIndex+=r.length,t.regex.lastIndex-=s[0].length):t.regex.lastIndex=0,o++,o>=this.maxReplaces)break}})),e}nest(e,t){let i,n,s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=(e,t)=>{const i=this.nestingOptionsSeparator;if(e.indexOf(i)<0)return e;const n=e.split(new RegExp(`${i}[ ]*{`));let r=`{${n[1]}`;e=n[0],r=this.interpolate(r,s);const o=r.match(/'/g),a=r.match(/"/g);(o&&o.length%2===0&&!a||a.length%2!==0)&&(r=r.replace(/'/g,'"'));try{s=JSON.parse(r),t&&(s={...t,...s})}catch(l){return this.logger.warn(`failed parsing options string in nesting for key ${e}`,l),`${e}${i}${r}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,e};for(;i=this.nestingRegexp.exec(e);){let a=[];s={...r},s=s.replace&&!wl(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let l=!1;if(-1!==i[0].indexOf(this.formatSeparator)&&!/{.*}/.test(i[1])){const e=i[1].split(this.formatSeparator).map((e=>e.trim()));i[1]=e.shift(),a=e,l=!0}if(n=t(o.call(this,i[1].trim(),s),s),n&&i[0]===e&&!wl(n))return n;wl(n)||(n=El(n)),n||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${e}`),n=""),l&&(n=a.reduce(((e,t)=>this.format(e,t,r.lng,{...r,interpolationkey:i[1].trim()})),n.trim())),e=e.replace(i[0],n),this.regexp.lastIndex=0}return e}}const sd=e=>{const t={};return(i,n,s)=>{let r=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(r={...r,[s.interpolationkey]:void 0});const o=n+JSON.stringify(r);let a=t[o];return a||(a=e(Bl(n),s),t[o]=a),a(i)}};class rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=$l.create("formatter"),this.options=e,this.formats={number:sd(((e,t)=>{const i=new Intl.NumberFormat(e,{...t});return e=>i.format(e)})),currency:sd(((e,t)=>{const i=new Intl.NumberFormat(e,{...t,style:"currency"});return e=>i.format(e)})),datetime:sd(((e,t)=>{const i=new Intl.DateTimeFormat(e,{...t});return e=>i.format(e)})),relativetime:sd(((e,t)=>{const i=new Intl.RelativeTimeFormat(e,{...t});return e=>i.format(e,t.range||"day")})),list:sd(((e,t)=>{const i=new Intl.ListFormat(e,{...t});return e=>i.format(e)}))},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=sd(t)}format(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=t.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find((e=>e.indexOf(")")>-1))){const e=s.findIndex((e=>e.indexOf(")")>-1));s[0]=[s[0],...s.splice(1,e)].join(this.formatSeparator)}const r=s.reduce(((e,t)=>{const{formatName:s,formatOptions:r}=(e=>{let t=e.toLowerCase().trim();const i={};if(e.indexOf("(")>-1){const n=e.split("(");t=n[0].toLowerCase().trim();const s=n[1].substring(0,n[1].length-1);"currency"===t&&s.indexOf(":")<0?i.currency||(i.currency=s.trim()):"relativetime"===t&&s.indexOf(":")<0?i.range||(i.range=s.trim()):s.split(";").forEach((e=>{if(e){const[t,...n]=e.split(":"),s=n.join(":").trim().replace(/^'+|'+$/g,""),r=t.trim();i[r]||(i[r]=s),"false"===s&&(i[r]=!1),"true"===s&&(i[r]=!0),isNaN(s)||(i[r]=parseInt(s,10))}}))}return{formatName:t,formatOptions:i}})(t);if(this.formats[s]){let t=e;try{const o=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},a=o.locale||o.lng||n.locale||n.lng||i;t=this.formats[s](e,a,{...r,...n,...o})}catch(o){this.logger.warn(o)}return t}return this.logger.warn(`there was no format function for ${s}`),e}),e);return r}}class od extends Ul{constructor(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=i,this.languageUtils=i.languageUtils,this.options=n,this.logger=$l.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(i,n.backend,n)}queueLoad(e,t,i,n){const s={},r={},o={},a={};return e.forEach((e=>{let n=!0;t.forEach((t=>{const o=`${e}|${t}`;!i.reload&&this.store.hasResourceBundle(e,t)?this.state[o]=2:this.state[o]<0||(1===this.state[o]?void 0===r[o]&&(r[o]=!0):(this.state[o]=1,n=!1,void 0===r[o]&&(r[o]=!0),void 0===s[o]&&(s[o]=!0),void 0===a[t]&&(a[t]=!0)))})),n||(o[e]=!0)})),(Object.keys(s).length||Object.keys(r).length)&&this.queue.push({pending:r,pendingCount:Object.keys(r).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(s),pending:Object.keys(r),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(a)}}loaded(e,t,i){const n=e.split("|"),s=n[0],r=n[1];t&&this.emit("failedLoading",s,r,t),!t&&i&&this.store.addResourceBundle(s,r,i,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&i&&(this.state[e]=0);const o={};this.queue.forEach((i=>{((e,t,i)=>{const{obj:n,k:s}=kl(e,t,Object);n[s]=n[s]||[],n[s].push(i)})(i.loaded,[s],r),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(i,e),t&&i.errors.push(t),0!==i.pendingCount||i.done||(Object.keys(i.loaded).forEach((e=>{o[e]||(o[e]={});const t=i.loaded[e];t.length&&t.forEach((t=>{void 0===o[e][t]&&(o[e][t]=!0)}))})),i.done=!0,i.errors.length?i.callback(i.errors):i.callback())})),this.emit("loaded",o),this.queue=this.queue.filter((e=>!e.done))}read(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,r=arguments.length>5?arguments[5]:void 0;if(!e.length)return r(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:i,tried:n,wait:s,callback:r});this.readingCalls++;const o=(o,a)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}o&&a&&n<this.maxRetries?setTimeout((()=>{this.read.call(this,e,t,i,n+1,2*s,r)}),s):r(o,a)},a=this.backend[i].bind(this.backend);if(2!==a.length)return a(e,t,o);try{const i=a(e,t);i&&"function"===typeof i.then?i.then((e=>o(null,e))).catch(o):o(null,i)}catch($d){o($d)}}prepareLoading(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();wl(e)&&(e=this.languageUtils.toResolveHierarchy(e)),wl(t)&&(t=[t]);const s=this.queueLoad(e,t,i,n);if(!s.toLoad.length)return s.pending.length||n(),null;s.toLoad.forEach((e=>{this.loadOne(e)}))}load(e,t,i){this.prepareLoading(e,t,{},i)}reload(e,t,i){this.prepareLoading(e,t,{reload:!0},i)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const i=e.split("|"),n=i[0],s=i[1];this.read(n,s,"read",void 0,void 0,((i,r)=>{i&&this.logger.warn(`${t}loading namespace ${s} for language ${n} failed`,i),!i&&r&&this.logger.log(`${t}loaded namespace ${s} for language ${n}`,r),this.loaded(e,i,r)}))}saveMissing(e,t,i,n,s){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn(`did not save key "${i}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==i&&null!==i&&""!==i){if(this.backend&&this.backend.create){const a={...r,isUpdate:s},l=this.backend.create.bind(this.backend);if(l.length<6)try{let s;s=5===l.length?l(e,t,i,n,a):l(e,t,i,n),s&&"function"===typeof s.then?s.then((e=>o(null,e))).catch(o):o(null,s)}catch($d){o($d)}else l(e,t,i,n,o,a)}e&&e[0]&&this.store.addResource(e[0],t,i,n)}}}const ad=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),wl(e[1])&&(t.defaultValue=e[1]),wl(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const i=e[3]||e[2];Object.keys(i).forEach((e=>{t[e]=i[e]}))}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),ld=e=>(wl(e.ns)&&(e.ns=[e.ns]),wl(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),wl(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),dd=()=>{};class cd extends Ul{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var i;if(super(),this.options=ld(e),this.services={},this.logger=$l,this.modules={external:[]},i=this,Object.getOwnPropertyNames(Object.getPrototypeOf(i)).forEach((e=>{"function"===typeof i[e]&&(i[e]=i[e].bind(i))})),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout((()=>{this.init(e,t)}),0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(i=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(wl(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=ad();this.options={...n,...this.options,...ld(t)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const s=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?$l.init(s(this.modules.logger),this.options):$l.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=rd);const i=new Kl(this.options);this.store=new Vl(this.options.resources,this.options);const r=this.services;r.logger=$l,r.resourceStore=this.store,r.languageUtils=i,r.pluralResolver=new ed(i,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format||(r.formatter=s(t),r.formatter.init(r,this.options),this.options.interpolation.format=r.formatter.format.bind(r.formatter)),r.interpolator=new nd(this.options),r.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},r.backendConnector=new od(s(this.modules.backend),r.resourceStore,r,this.options),r.backendConnector.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];e.emit(t,...n)})),this.modules.languageDetector&&(r.languageDetector=s(this.modules.languageDetector),r.languageDetector.init&&r.languageDetector.init(r,this.options.detection,this.options)),this.modules.i18nFormat&&(r.i18nFormat=s(this.modules.i18nFormat),r.i18nFormat.init&&r.i18nFormat.init(this)),this.translator=new Gl(this.services,this.options),this.translator.on("*",(function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];e.emit(t,...n)})),this.modules.external.forEach((e=>{e.init&&e.init(this)}))}if(this.format=this.options.interpolation.format,i||(i=dd),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach((t=>{this[t]=function(){return e.store[t](...arguments)}}));["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach((t=>{this[t]=function(){return e.store[t](...arguments),e}}));const r=Cl(),o=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),r.resolve(t),i(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?o():setTimeout(o,0),r}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dd;const i=wl(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(i&&"cimode"===i.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],n=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach((t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)}))};if(i)n(i);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach((e=>n(e)))}this.options.preload&&this.options.preload.forEach((e=>n(e))),this.services.backendConnector.load(e,this.options.ns,(e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)}))}else t(null)}reloadResources(e,t,i){const n=Cl();return"function"===typeof e&&(i=e,e=void 0),"function"===typeof t&&(i=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),i||(i=dd),this.services.backendConnector.reload(e,t,(e=>{n.resolve(),i(e)})),n}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Wl.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var i=this;this.isLanguageChangingTo=e;const n=Cl();this.emit("languageChanging",e);const s=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},r=(e,r)=>{r?(s(r),this.translator.changeLanguage(r),this.isLanguageChangingTo=void 0,this.emit("languageChanged",r),this.logger.log("languageChanged",r)):this.isLanguageChangingTo=void 0,n.resolve((function(){return i.t(...arguments)})),t&&t(e,(function(){return i.t(...arguments)}))},o=t=>{e||t||!this.services.languageDetector||(t=[]);const i=wl(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);i&&(this.language||s(i),this.translator.language||this.translator.changeLanguage(i),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(i)),this.loadResources(i,(e=>{r(e,i)}))};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(e):o(this.services.languageDetector.detect()),n}getFixedT(e,t,i){var n=this;const s=function(e,t){let r;if("object"!==typeof t){for(var o=arguments.length,a=new Array(o>2?o-2:0),l=2;l<o;l++)a[l-2]=arguments[l];r=n.options.overloadTranslationOptionHandler([e,t].concat(a))}else r={...t};r.lng=r.lng||s.lng,r.lngs=r.lngs||s.lngs,r.ns=r.ns||s.ns,""!==r.keyPrefix&&(r.keyPrefix=r.keyPrefix||i||s.keyPrefix);const d=n.options.keySeparator||".";let c;return c=r.keyPrefix&&Array.isArray(e)?e.map((e=>`${r.keyPrefix}${d}${e}`)):r.keyPrefix?`${r.keyPrefix}${d}${e}`:e,n.t(c,r)};return wl(e)?s.lng=e:s.lngs=e,s.ns=t,s.keyPrefix=i,s}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const i=t.lng||this.resolvedLanguage||this.languages[0],n=!!this.options&&this.options.fallbackLng,s=this.languages[this.languages.length-1];if("cimode"===i.toLowerCase())return!0;const r=(e,t)=>{const i=this.services.backendConnector.state[`${e}|${t}`];return-1===i||0===i||2===i};if(t.precheck){const e=t.precheck(this,r);if(void 0!==e)return e}return!!this.hasResourceBundle(i,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!r(i,e)||n&&!r(s,e)))}loadNamespaces(e,t){const i=Cl();return this.options.ns?(wl(e)&&(e=[e]),e.forEach((e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)})),this.loadResources((e=>{i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}loadLanguages(e,t){const i=Cl();wl(e)&&(e=[e]);const n=this.options.preload||[],s=e.filter((e=>n.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e)));return s.length?(this.options.preload=n.concat(s),this.loadResources((e=>{i.resolve(),t&&t(e)})),i):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new Kl(ad());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new cd(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dd;const i=e.forkResourceStore;i&&delete e.forkResourceStore;const n={...this.options,...e,isClone:!0},s=new cd(n);void 0===e.debug&&void 0===e.prefix||(s.logger=s.logger.clone(e));return["store","services","language"].forEach((e=>{s[e]=this[e]})),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},i&&(s.store=new Vl(this.store.data,n),s.services.resourceStore=s.store),s.translator=new Gl(s.services,n),s.translator.on("*",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];s.emit(e,...i)})),s.init(n,t),s.translator.options=n,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const hd=cd.createInstance();hd.createInstance=cd.createInstance;hd.createInstance,hd.dir,hd.init,hd.loadResources,hd.reloadResources,hd.use,hd.changeLanguage,hd.getFixedT,hd.t,hd.exists,hd.setDefaultNamespace,hd.hasLoadedNamespace,hd.loadNamespaces,hd.loadLanguages;const ud={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoResize:{applyResizeToContainer:!0,autoHeight:!0,autoHeightRecalcRow:100,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:250,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:pd},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"},resetEditorButtonCssClass:"mdi mdi-refresh mdi-15px",resetFormButtonIconCssClass:"mdi mdi-refresh mdi-16px mdi-flip-h"},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline text-success",iconExportTextDelimitedCommand:"mdi mdi-download"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{items:"items",itemsKey:"ITEMS",of:"of",ofKey:"OF",itemsSelected:"items selected",itemsSelectedKey:"ITEMS_SELECTED"}},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:Ya.input,defaultBackendServiceFilterTypingDebounce:500,defaultColumnSortFieldId:"id",defaultFilterPlaceholder:"\ud83d\udd0e\ufe0e",defaultFilterRangeOperator:C.rangeInclusive,editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,enableFilterTrimWhiteSpace:!1,emptyDataWarning:{className:"slick-empty-data-warning",message:"No data to display.",messageKey:"EMPTY_DATA_WARNING_MESSAGE",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,eventNamingStyle:zt.camelCase,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,exportWithFormatter:!1,filename:"export",format:_.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2b9e",groupExpandedSymbol:"\u2b9f",groupingAggregatorRowText:"",sanitizeDataExport:!1},textExportOptions:{delimiter:v.comma,exportWithFormatter:!1,filename:"export",format:_.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!1,useUtf8WithBom:!0},forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleDarkModeCommand:!0,hideToggleFilterCommand:!1,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-close",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4 mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,headerColumnValueExtractor:pd},headerMenu:{autoAlign:!0,autoAlignOffset:12,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1},multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},rowDetailView:{collapseAllOnSort:!0,cssClass:"detail-view-toggle",panelRows:1,keyPrefix:"__",useRowClick:!1,useSimpleViewportCalc:!0,saveDetailViewOnScroll:!1},headerRowHeight:35,rowHeight:35,topPanelHeight:30,preHeaderPanelWidth:"100%",translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\xb7"}};function pd(e,t){var i,n,s;let r=null!==(n=null!==(i=null===e||void 0===e?void 0:e.columnPickerLabel)&&void 0!==i?i:null===e||void 0===e?void 0:e.name)&&void 0!==n?n:"";(r instanceof HTMLElement||r instanceof DocumentFragment)&&(r=r.textContent||"");const o=(null===e||void 0===e?void 0:e.columnGroup)||"",a=null!==(s=null===t||void 0===t?void 0:t.columnGroupSeparator)&&void 0!==s?s:" - ";return o?o+a+r:r}new $t,new ha;const md=new class{constructor(){this.container={}}get(e){return this.container[e]}registerInstance(e,t){this.container[e]=t}};function gd(e,t,i,n){return new Promise((s=>{const r=(0,d.createRef)();null!==n&&void 0!==n||(n=(0,c.createRoot)(t)),n.render(d.createElement(e,{...i,ref:r})),queueMicrotask((()=>{s({component:r.current,root:n})}))}))}class fd extends d.Component{setStateValue(e,t,i){var n;if((null===(n=this.state)||void 0===n?void 0:n[e])!==t)return this._mounted?void this.setState((()=>{const i={};return i[e]=t,i}),i):(this.state=this.state||{},void(this.state[e]=t))}get gridOptions(){return this._gridOptions||{}}set gridOptions(e){var t,i,n;let s;s=(null===(t=this.grid)||void 0===t?void 0:t.getOptions)?Se(!0,{},this.grid.getOptions(),e):this.mergeGridOptions(e),(null===(i=this.sharedService)||void 0===i?void 0:i.gridOptions)&&(null===(n=this.grid)||void 0===n?void 0:n.setOptions)&&(this.sharedService.gridOptions=s,this.grid.setOptions(s,!1,!0),this.grid.reRenderColumns(!0)),this._gridOptions=s}get dataset(){var e;return(null===(e=this.dataView)||void 0===e?void 0:e.getItems())||[]}set dataset(e){var t,i;const n=this._currentDatasetLength,s=jt(e,this.dataset||[]);let r=!!(null===(t=this._gridOptions)||void 0===t?void 0:t.enableDeepCopyDatasetOnPageLoad)?Se(!0,[],e):e;this.grid&&(null===(i=this.gridOptions)||void 0===i?void 0:i.enableTreeData)&&Array.isArray(e)&&(e.length>0||e.length!==n||!s)&&(this._isDatasetHierarchicalInitialized=!1,r=this.sortTreeDataset(e,!s)),this.refreshGridData(r||[]),this._currentDatasetLength=(e||[]).length,this.grid&&this.gridOptions.autoFitColumnsOnFirstLoad&&0===n&&!this._isAutosizeColsCalled&&(this.grid.autosizeColumns(),this._isAutosizeColsCalled=!0)}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}set datasetHierarchical(e){var t,i,n,s,r,o;const a=jt(e,null!==(i=null===(t=this.sharedService)||void 0===t?void 0:t.hierarchicalDataset)&&void 0!==i?i:[]),l=this._currentDatasetLength;this.sharedService&&(this.sharedService.hierarchicalDataset=e),e&&this.props.columnDefinitions&&(null===(n=this.filterService)||void 0===n?void 0:n.clearFilters)&&this.filterService.clearFilters(),this.dataView&&e&&this.grid&&(null===(s=this.sortService)||void 0===s?void 0:s.processTreeDataInitialSort)&&(this.dataView.setItems([],null!==(o=null===(r=this._gridOptions)||void 0===r?void 0:r.datasetIdPropertyName)&&void 0!==o?o:"id"),this.sortService.processTreeDataInitialSort(),queueMicrotask((()=>{var e,t;const i=null!==(t=null===(e=this.dataView)||void 0===e?void 0:e.getItemCount())&&void 0!==t?t:0;i>0&&(i!==l||!a)&&this.filterService.refreshTreeDataFilters()}))),this._isDatasetHierarchicalInitialized=!0}get paginationService(){var e;return null===(e=this.state)||void 0===e?void 0:e.paginationService}set paginationService(e){this.setStateValue("paginationService",e)}constructor(e){var t;super(e),this.props=e,this._mounted=!1,this._columnDefinitions=[],this._currentDatasetLength=0,this._dataset=null,this._collectionObservers=[],this._hideHeaderRowAfterPageLoad=!1,this._isAutosizeColsCalled=!1,this._isGridInitialized=!1,this._isDatasetInitialized=!1,this._isDatasetHierarchicalInitialized=!1,this._isPaginationInitialized=!1,this._isLocalGrid=!0,this._registeredResources=[],this._scrollEndCalled=!1,this._gridOptions={},this.showPagination=!1,this.serviceList=[],this.subscriptions=[],this.totalItems=0,this.instances=null;const i=new fl;this._eventHandler=new ii,this.showPagination=!1,this._hideHeaderRowAfterPageLoad=!1===(null===(t=e.gridOptions)||void 0===t?void 0:t.showHeaderRow),this._gridOptions=this.mergeGridOptions(e.gridOptions||{}),this._eventPubSubService=new $t,this._eventPubSubService.eventNamingStyle=zt.camelCase,this.backendUtilityService=new h,this.gridEventService=new oa,this.sharedService=new ha,this.collectionService=new Yr(this.props.translaterService),this.extensionUtility=new qr(this.sharedService,this.backendUtilityService,this.props.translaterService),this.filterFactory=new Ka(i,this.props.translaterService,this.collectionService),this.filterService=new Jo(this.filterFactory,this._eventPubSubService,this.sharedService,this.backendUtilityService),this.resizerService=new ca(this._eventPubSubService),this.sortService=new ua(this.collectionService,this.sharedService,this._eventPubSubService,this.backendUtilityService),this.treeDataService=new pa(this._eventPubSubService,this.sharedService,this.sortService),this.paginationService=new da(this._eventPubSubService,this.sharedService,this.backendUtilityService),this.extensionService=new Uo(this.extensionUtility,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService,this.props.translaterService,(()=>this.gridService)),this.gridStateService=new aa(this.extensionService,this.filterService,this._eventPubSubService,this.sharedService,this.sortService,this.treeDataService),this.gridService=new ra(this.gridStateService,this.filterService,this._eventPubSubService,this.paginationService,this.sharedService,this.sortService,this.treeDataService),this.headerGroupingService=new la(this.extensionUtility),this.serviceList=[this.extensionService,this.filterService,this.gridEventService,this.gridService,this.gridStateService,this.headerGroupingService,this.paginationService,this.resizerService,this.sortService,this.treeDataService],this.props.datasetHierarchical&&(this.sharedService.hierarchicalDataset=this.props.datasetHierarchical||[]),this.props.containerService.registerInstance("PubSubService",this._eventPubSubService),this.props.containerService.registerInstance("EventPubSubService",this._eventPubSubService),this.props.containerService.registerInstance("ExtensionUtility",this.extensionUtility),this.props.containerService.registerInstance("FilterService",this.filterService),this.props.containerService.registerInstance("CollectionService",this.collectionService),this.props.containerService.registerInstance("ExtensionService",this.extensionService),this.props.containerService.registerInstance("GridEventService",this.gridEventService),this.props.containerService.registerInstance("GridService",this.gridService),this.props.containerService.registerInstance("GridStateService",this.gridStateService),this.props.containerService.registerInstance("HeaderGroupingService",this.headerGroupingService),this.props.containerService.registerInstance("PaginationService",this.paginationService),this.props.containerService.registerInstance("ResizerService",this.resizerService),this.props.containerService.registerInstance("SharedService",this.sharedService),this.props.containerService.registerInstance("SortService",this.sortService),this.props.containerService.registerInstance("TranslaterService",this.props.translaterService),this.props.containerService.registerInstance("TreeDataService",this.treeDataService)}get backendService(){var e;return null===(e=this.gridOptions.backendServiceApi)||void 0===e?void 0:e.service}get eventHandler(){return this._eventHandler}get isDatasetInitialized(){return this._isDatasetInitialized}set isDatasetInitialized(e){this._isDatasetInitialized=e}set isDatasetHierarchicalInitialized(e){this._isDatasetHierarchicalInitialized=e}get registeredResources(){return this._registeredResources}componentDidMount(){var e,t,i;if(this._mounted=!0,this._elm&&this._eventPubSubService instanceof $t){this._eventPubSubService.elementSource=this._elm;for(const e in this.props)e.startsWith("on")&&this.subscriptions.push(this._eventPubSubService.subscribe(e,(t=>{const i=this.props[e],n=this._eventPubSubService.getEventNameByNamingConvention(e,"");"function"===typeof i&&i.call(null,new CustomEvent(n,{detail:t}))})))}if(this._registeredResources=(null===(e=this.gridOptions)||void 0===e?void 0:e.externalResources)||[],this.initialization(this._eventHandler),this._isGridInitialized=!0,this.hasBackendInfiniteScroll()||(this.gridOptions.enablePagination=!!(this.gridOptions.backendServiceApi&&void 0===this.gridOptions.enablePagination||this.gridOptions.enablePagination)),!this._isPaginationInitialized&&!this.props.datasetHierarchical&&(null===(t=this._gridOptions)||void 0===t?void 0:t.enablePagination)&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(this.dataset)),null===(i=this._gridOptions)||void 0===i?void 0:i.enableEmptyDataWarningMessage){const e=this.props.dataset||[];if(Array.isArray(e)){const t=e.length;this.displayEmptyDataWarning(t<1)}}this.gridOptions.darkMode&&this.setDarkMode(!0),this.suggestDateParsingWhenHelpful()}initialization(e){var t,i,n,s,r,o,a,l,d,c,h,u,p,m,g,f;if(!this._columnDefinitions)throw new Error("Using `<SlickgridReact>` requires columnDefinitions, it seems that you might have forgot to provide the missing bindable model.");if(this._gridOptions.translater=this.props.translaterService,this._eventHandler=e,this._isAutosizeColsCalled=!1,this._gridOptions&&(void 0!==this._gridOptions.frozenRow&&this._gridOptions.frozenRow>=0||void 0!==this._gridOptions.frozenColumn&&this._gridOptions.frozenColumn>=0)&&void 0===this._gridOptions.enableMouseWheelScrollHandler&&(this._gridOptions.enableMouseWheelScrollHandler=!0),this._eventPubSubService.eventNamingStyle=null!==(i=null===(t=this._gridOptions)||void 0===t?void 0:t.eventNamingStyle)&&void 0!==i?i:zt.camelCase,this._eventPubSubService.publish("onBeforeGridCreate",!0),this._dataset||(this._dataset=this.props.dataset||[]),this._currentDatasetLength=this._dataset.length,this._gridOptions=this.mergeGridOptions(this._gridOptions),this._paginationOptions=null===(n=this._gridOptions)||void 0===n?void 0:n.pagination,this.backendServiceApi=null===(s=this._gridOptions)||void 0===s?void 0:s.backendServiceApi,this._isLocalGrid=!this.backendServiceApi,this.gridOptions.backendServiceApi&&!(null===(r=this.gridOptions.backendServiceApi)||void 0===r?void 0:r.disableInternalPostProcess)&&this.createBackendApiInternalPostProcessCallback(this._gridOptions),!this.props.customDataView){const e=this._gridOptions.dataView&&this._gridOptions.dataView.inlineFilters||!1;let t={...this._gridOptions.dataView,inlineFilters:e};(this._gridOptions.draggableGrouping||this._gridOptions.enableGrouping)&&(this.groupItemMetadataProvider=new di,this.sharedService.groupItemMetadataProvider=this.groupItemMetadataProvider,t={...t,groupItemMetadataProvider:this.groupItemMetadataProvider}),this.dataView=new ci(t,this._eventPubSubService),this._eventPubSubService.publish("onDataviewCreated",this.dataView)}this.preRegisterResources(),this._columnDefinitions=this.loadSlickGridEditors(this.props.columnDefinitions),this._gridOptions.autoAddCustomEditorFormatter&&Eo(this._columnDefinitions,this._gridOptions.autoAddCustomEditorFormatter),this.sharedService.allColumns=this._columnDefinitions,this.sharedService.visibleColumns=this._columnDefinitions,this.extensionService.createExtensionsBeforeGridCreation(this._columnDefinitions,this._gridOptions),(null===(o=this.gridOptions.presets)||void 0===o?void 0:o.pinning)&&(this.gridOptions={...this.gridOptions,...this.gridOptions.presets.pinning}),this.grid=new _s(`#${this.props.gridId}`,this.props.customDataView||this.dataView,this._columnDefinitions,this._gridOptions,this._eventPubSubService),this.sharedService.dataView=this.dataView,this.sharedService.slickGrid=this.grid,this.sharedService.gridContainerElement=this._elm,this.groupItemMetadataProvider&&this.grid.registerPlugin(this.groupItemMetadataProvider),this.extensionService.bindDifferentExtensions(),this.bindDifferentHooks(this.grid,this._gridOptions,this.dataView);const v=null!==(l=null===(a=this._gridOptions)||void 0===a?void 0:a.frozenColumn)&&void 0!==l?l:-1;v>=0&&v<=this._columnDefinitions.length&&this._columnDefinitions.length>0&&(this.sharedService.frozenVisibleColumnId=null!==(c=null===(d=this._columnDefinitions[v])||void 0===d?void 0:d.id)&&void 0!==c?c:""),this.registerResources(),this.grid.init();const b=this._elm;if(b&&this.resizerService.init(this.grid,b),!this._gridOptions.enablePagination&&this._gridOptions.showCustomFooter&&this._gridOptions.customFooterOptions&&b&&(this.slickFooter=new yl(this.grid,this._gridOptions.customFooterOptions,this._eventPubSubService,this.props.translaterService),this.slickFooter.renderFooter(b)),!this.props.customDataView&&this.dataView){const e=(null===(h=this._gridOptions)||void 0===h?void 0:h.enableTreeData)?this.sortTreeDataset(this.props.dataset):this.props.dataset;if(Array.isArray(e)&&this.dataView.setItems(e,null!==(u=this._gridOptions.datasetIdPropertyName)&&void 0!==u?u:"id"),(null===(p=this.grid)||void 0===p?void 0:p.getSelectionModel())&&(null===(m=this._gridOptions)||void 0===m?void 0:m.dataView)&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){let e=!1;this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService);const t=this._gridOptions.dataView.syncGridSelection;if("boolean"===typeof t){let i=t;this._isLocalGrid||(i=t&&e),this.dataView.syncGridSelection(this.grid,i)}else"object"===typeof t&&this.dataView.syncGridSelection(this.grid,t.preserveHidden,t.preserveHiddenOnSelectionChange)}this._dataset.length>0&&(this._isDatasetInitialized||!this._gridOptions.enableCheckboxSelector&&!this._gridOptions.enableRowSelection||this.loadRowSelectionPresetWhenExists(),this.loadFilterPresetsWhenDatasetInitialized(),this._isDatasetInitialized=!0)}this._hideHeaderRowAfterPageLoad&&(this.showHeaderRow(!1),this.sharedService.hideHeaderRowAfterPageLoad=this._hideHeaderRowAfterPageLoad),this._eventPubSubService.publish("onGridCreated",this.grid),this.props.customDataView||this.executeAfterDataviewCreated(this.grid,this._gridOptions),this.bindResizeHook(this.grid,this._gridOptions),(null===(g=this._gridOptions)||void 0===g?void 0:g.backendServiceApi)&&this.bindBackendCallbackFunctions(this._gridOptions);const y={element:this._elm,dataView:this.dataView,slickGrid:this.grid,dispose:this.dispose.bind(this),backendService:this.backendService,eventPubSubService:this._eventPubSubService,extensionService:this.extensionService,filterService:this.filterService,gridEventService:this.gridEventService,gridStateService:this.gridStateService,gridService:this.gridService,groupingService:this.headerGroupingService,headerGroupingService:this.headerGroupingService,paginationService:this.paginationService,resizerService:this.resizerService,sortService:this.sortService,treeDataService:this.treeDataService};this.extensions=null===(f=this.extensionService)||void 0===f?void 0:f.extensionList,this.instances=y,this.setStateValue("instances",y),this._eventPubSubService.publish("onReactGridCreated",y),this.observeColumnDefinitions()}componentWillUnmount(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t,i,n,s,r,o,a;if(this._eventPubSubService.publish("onBeforeGridDestroy",this.grid),null===(t=this._eventHandler)||void 0===t||t.unsubscribeAll(),hd.off("languageChanged"),e&&this.emptyGridContainerElm(),this._collectionObservers.forEach((e=>null===e||void 0===e?void 0:e.disconnect())),this._eventPubSubService.publish("onAfterGridDestroyed",!0),this.serviceList.forEach((e=>{(null===e||void 0===e?void 0:e.dispose)&&e.dispose()})),this.serviceList=[],null===(n=null===(i=this.backendService)||void 0===i?void 0:i.dispose)||void 0===n||n.call(i),this.disposeExternalResources(),null===(s=this.slickEmptyWarning)||void 0===s||s.dispose(),null===(r=this.slickFooter)||void 0===r||r.dispose(),null===(o=this.slickPagination)||void 0===o||o.dispose(),this.dataView&&(this.dataView.setItems&&this.dataView.setItems([]),this.dataView.destroy&&this.dataView.destroy()),(null===(a=this.grid)||void 0===a?void 0:a.destroy)&&this.grid.destroy(e),this.subscriptions=function(e){if(Array.isArray(e))for(;e.length>0;){const t=e.pop();(null===t||void 0===t?void 0:t.unsubscribe)&&t.unsubscribe()}return e}(this.subscriptions),this.backendServiceApi){for(const e of Object.keys(this.backendServiceApi))this.backendServiceApi[e]=null;this.backendServiceApi=void 0}for(const l of Object.keys(this.props.columnDefinitions))this.props.columnDefinitions[l]=null;for(const l of Object.keys(this.sharedService))this.sharedService[l]=null;this._dataset=null,this._columnDefinitions=[]}emptyGridContainerElm(){var e;const t=(null===(e=this._gridOptions)||void 0===e?void 0:e.gridContainerId)||"grid1";ee(document.querySelector(`#${t}`))}dispose(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.componentWillUnmount(e)}disposeExternalResources(){if(Array.isArray(this._registeredResources))for(;this._registeredResources.length>0;){const e=this._registeredResources.pop();(null===e||void 0===e?void 0:e.dispose)&&e.dispose()}this._registeredResources=[]}componentDidUpdate(e){this.props.gridOptions!==e.gridOptions&&(this._gridOptions={...ud,...this._gridOptions}),this.props.columnDefinitions!==e.columnDefinitions&&(this._columnDefinitions=this.props.columnDefinitions,this.columnDefinitionsChanged(this.props.columnDefinitions)),this.props.dataset!==e.dataset&&(this.dataset=this.props.dataset||e.dataset),this.props.datasetHierarchical&&this.props.datasetHierarchical!==e.datasetHierarchical&&(this.datasetHierarchical=this.props.datasetHierarchical),this.suggestDateParsingWhenHelpful()}columnDefinitionsChanged(e){e&&(this._columnDefinitions=e),this._isGridInitialized&&this.updateColumnDefinitionsList(this._columnDefinitions),this._columnDefinitions.length>0&&this.copyColumnWidthsReference(this._columnDefinitions)}createBackendApiInternalPostProcessCallback(e){const t=null===e||void 0===e?void 0:e.backendServiceApi;if(null===t||void 0===t?void 0:t.service){const e=t.service;"function"===typeof e.getDatasetName&&(t.internalPostProcess=i=>{const n=t&&e&&"function"===typeof e.getDatasetName?e.getDatasetName():"";if(null===i||void 0===i?void 0:i.data[n]){const e=i.data[n].hasOwnProperty("nodes")?i.data[n].nodes:i.data[n],t=i.data[n].hasOwnProperty("totalCount")?i.data[n].totalCount:i.data[n].length;this.refreshGridData(e,t||0)}})}}bindDifferentHooks(e,t,i){var n;if(t.enableTranslate&&this.extensionService.translateAllExtensions(),hd.on("languageChanged",(e=>{this._eventPubSubService.publish("onLanguageChange"),t.enableTranslate&&(this.extensionService.translateAllExtensions(e),(t.createPreHeaderPanel&&t.createTopHeaderPanel||t.createPreHeaderPanel&&!t.enableDraggableGrouping)&&this.headerGroupingService.translateHeaderGrouping())})),t.backendServiceApi){const e=t.backendServiceApi;(null===(n=null===e||void 0===e?void 0:e.service)||void 0===n?void 0:n.init)&&e.service.init(e.options,t.pagination,this.grid,this.sharedService)}i&&e&&(this.gridEventService.bindOnBeforeEditCell(e),this.gridEventService.bindOnCellChange(e),this.gridEventService.bindOnClick(e),i&&e&&(t.enableSorting&&(t.backendServiceApi&&!t.backendServiceApi.useLocalSorting?this.sortService.bindBackendOnSort(e):this.sortService.bindLocalOnSort(e)),t.enableFiltering&&(this.filterService.init(e),t.backendServiceApi&&!t.backendServiceApi.useLocalFiltering?this.filterService.bindBackendOnFilter(e):this.filterService.bindLocalOnFilter(e)),this._eventHandler.subscribe(e.onColumnsReordered,((e,t)=>{this.sharedService.hasColumnsReordered=!0,this.sharedService.visibleColumns=t.impactedColumns})),this._eventHandler.subscribe(e.onSetOptions,((e,t)=>{t.optionsBefore.darkMode!==t.optionsAfter.darkMode&&this.sharedService.gridContainerElement&&this.setDarkMode(t.optionsAfter.darkMode)})),this.loadColumnPresetsWhenDatasetInitialized(),this.loadFilterPresetsWhenDatasetInitialized(),this._eventHandler.subscribe(i.onRowCountChanged,(()=>{e.invalidate(),this.handleOnItemCountChanged(i.getFilteredItemCount()||0,i.getItemCount()||0)})),this._eventHandler.subscribe(i.onSetItemsCalled,((e,t)=>{var n;this.sharedService.isItemsDateParsed=!1,this.handleOnItemCountChanged(i.getFilteredItemCount()||0,t.itemCount),t.itemCount>0&&(this.gridOptions.autosizeColumnsByCellContentOnFirstLoad||this.gridOptions.enableAutoResizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent(!(null===(n=this._gridOptions)||void 0===n?void 0:n.resizeByContentOnlyOnFirstLoad))})),(null===t||void 0===t?void 0:t.enableFiltering)&&!t.enableRowDetailView&&this._eventHandler.subscribe(i.onRowsChanged,((t,i)=>{let{calledOnRowCountChanged:n,rows:s}=i;if(!n&&Array.isArray(s)){const t=e.getRenderedRange();s.filter((e=>e>=t.top&&e<=t.bottom)).forEach((t=>e.updateRow(t))),e.render()}})))),(null===t||void 0===t?void 0:t.colspanCallback)&&(null===i||void 0===i?void 0:i.getItem)&&(null===i||void 0===i?void 0:i.getItemMetadata)&&(i.getItemMetadata=e=>{let n=null;return t.colspanCallback&&(n=t.colspanCallback(i.getItem(e))),n})}bindBackendCallbackFunctions(e){var t,i,n,s,r,o;const a=e.backendServiceApi,l=null===a||void 0===a?void 0:a.service,d=(null===l||void 0===l?void 0:l.options)||{},c=!!d&&(!d||!d.hasOwnProperty("executeProcessCommandOnInit")||d.executeProcessCommandOnInit);if(l){if(null===e||void 0===e?void 0:e.presets){if(l.updateFilters&&Array.isArray(e.presets.filters)&&e.presets.filters.length>0&&l.updateFilters(e.presets.filters,!0),l.updateSorters&&Array.isArray(e.presets.sorters)&&e.presets.sorters.length>0){const i=(null===(t=this._gridOptions)||void 0===t?void 0:t.multiColumnSort)?e.presets.sorters:e.presets.sorters.slice(0,1);l.updateSorters(void 0,i)}if(l.updatePagination&&e.presets.pagination&&!this.hasBackendInfiniteScroll()){const{pageNumber:t,pageSize:i}=e.presets.pagination;l.updatePagination(t,i)}}else{const e=this.filterService.getColumnFilters();e&&l.updateFilters&&l.updateFilters(e,!1)}if(a&&l&&(a.onInit||c)){const e="function"===typeof l.buildQuery?l.buildQuery():"",t=c?null!==(n=null===(i=a.process)||void 0===i?void 0:i.call(a,e))&&void 0!==n?n:null:null!==(r=null===(s=a.onInit)||void 0===s?void 0:s.call(a,e))&&void 0!==r?r:null;queueMicrotask((()=>{var e,i,n,s;const r=this.backendUtilityService,o=new Date;a.preProcess&&a.preProcess();const l=null!==(n=null===(i=null===(e=this._gridOptions)||void 0===e?void 0:e.pagination)||void 0===i?void 0:i.totalItems)&&void 0!==n?n:0;t instanceof Promise?t.then((e=>r.executeBackendProcessesCallback(o,e,a,l))).catch((e=>r.onBackendError(e,a))):t&&(null===(s=this.rxjs)||void 0===s?void 0:s.isObservable(t))&&this.subscriptions.push(t.subscribe((e=>r.executeBackendProcessesCallback(o,e,a,l)),(e=>r.onBackendError(e,a))))}))}(null===(o=a.service.options)||void 0===o?void 0:o.infiniteScroll)&&this.addBackendInfiniteScrollCallback()}}addBackendInfiniteScrollCallback(){var e;if(this.grid&&this.gridOptions.backendServiceApi&&this.hasBackendInfiniteScroll()&&!(null===(e=this.gridOptions.backendServiceApi)||void 0===e?void 0:e.onScrollEnd)){const e=()=>{this.backendUtilityService.setInfiniteScrollBottomHit(!0),this.paginationService.goToNextPage().then((e=>{e||this.backendUtilityService.setInfiniteScrollBottomHit(!1)}))};this.gridOptions.backendServiceApi.onScrollEnd=e,this._eventHandler.subscribe(this.grid.onScroll,((t,i)=>{var n;const s=i.grid.getViewportNode();["mousewheel","scroll"].includes(i.triggeredBy||"")&&(null===(n=this.paginationService)||void 0===n?void 0:n.totalItems)&&i.scrollTop>0&&Math.ceil(s.offsetHeight+i.scrollTop)>=i.scrollHeight&&(this._scrollEndCalled||(e(),this._scrollEndCalled=!0))}));const t=this.gridOptions.backendServiceApi.postProcess;this.gridOptions.backendServiceApi.postProcess=e=>{this._scrollEndCalled=!1,t&&t(e)}}}bindResizeHook(e,t){if(t.autoFitColumnsOnFirstLoad&&t.autosizeColumnsByCellContentOnFirstLoad||t.enableAutoSizeColumns&&t.enableAutoResizeColumnsByCellContent)throw new Error('[Slickgrid-React] You cannot enable both autosize/fit viewport & resize by content, you must choose which resize technique to use. You can enable these 2 options ("autoFitColumnsOnFirstLoad" and "enableAutoSizeColumns") OR these other 2 options ("autosizeColumnsByCellContentOnFirstLoad" and "enableAutoResizeColumnsByCellContent").');t.gridHeight||t.gridWidth?this.resizerService.resizeGrid(0,{height:t.gridHeight,width:t.gridWidth}):this.resizerService.resizeGrid(),e&&(null===t||void 0===t?void 0:t.enableAutoResize)&&t.autoFitColumnsOnFirstLoad&&t.enableAutoSizeColumns&&!this._isAutosizeColsCalled&&(e.autosizeColumns(),this._isAutosizeColsCalled=!0)}executeAfterDataviewCreated(e,t){var i;if(t.enableSorting&&t.presets&&Array.isArray(t.presets.sorters)){const e=(null===(i=this._gridOptions)||void 0===i?void 0:i.multiColumnSort)?t.presets.sorters:t.presets.sorters.slice(0,1);this.sortService.loadGridSorters(e)}}paginationChanged(e){var t,i,n;const s=null!==(i=null===(t=this.gridStateService)||void 0===t?void 0:t.needToPreserveRowSelection())&&void 0!==i&&i;this.grid&&!s&&(null===(n=this.gridOptions)||void 0===n?void 0:n.backendServiceApi)&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector)&&this.grid.setSelectedRows([]);const{pageNumber:r,pageSize:o}=e;this.sharedService&&void 0!==o&&void 0!==r&&(this.sharedService.currentPagination={pageNumber:r,pageSize:o}),this._eventPubSubService.publish("onGridStateChanged",{change:{newValues:{pageNumber:r,pageSize:o},type:w.pagination},gridState:this.gridStateService.getCurrentGridState()})}paginationOptionsChanged(e){var t;e&&this._paginationOptions?this._paginationOptions={...this._paginationOptions,...e}:this._paginationOptions=e,this._gridOptions&&(this._gridOptions.pagination=this._paginationOptions,this.paginationService.updateTotalItems(null!==(t=null===e||void 0===e?void 0:e.totalItems)&&void 0!==t?t:0,!0))}refreshGridData(e,t){var i,n,s,r,o,a,l,d;if(this.grid&&this._gridOptions){if((null===(i=this._gridOptions)||void 0===i?void 0:i.enablePagination)&&this._isLocalGrid&&(this.showPagination=!0,this.loadLocalGridPagination(e)),(null===(n=this._gridOptions)||void 0===n?void 0:n.enableEmptyDataWarningMessage)&&Array.isArray(e)){const i=t||e.length;this.displayEmptyDataWarning(i<1)}if(Array.isArray(e)&&this.grid&&(null===(s=this.dataView)||void 0===s?void 0:s.setItems)){if(this.dataView.setItems(e,null!==(r=this._gridOptions.datasetIdPropertyName)&&void 0!==r?r:"id"),this._gridOptions.backendServiceApi||this._gridOptions.enableTreeData||this.dataView.reSort(),e.length>0&&(this._isDatasetInitialized||(this.loadFilterPresetsWhenDatasetInitialized(),this._gridOptions.enableCheckboxSelector&&this.loadRowSelectionPresetWhenExists()),this._isDatasetInitialized=!0),this.showPagination=!(!this._gridOptions||!(this._gridOptions.enablePagination||this._gridOptions.backendServiceApi&&void 0===this._gridOptions.enablePagination)),this._paginationOptions&&(null===(o=this._gridOptions)||void 0===o?void 0:o.pagination)&&(null===(a=this._gridOptions)||void 0===a?void 0:a.backendServiceApi)){const e=this.setPaginationOptionsWhenPresetDefined(this._gridOptions,this._paginationOptions),i=void 0!==t?t:null===(d=null===(l=this._gridOptions)||void 0===l?void 0:l.pagination)||void 0===d?void 0:d.totalItems;void 0!==i&&i!==this.totalItems&&(this.totalItems=+i),this._isPaginationInitialized?this.paginationService.updateTotalItems(this.totalItems):this.initializePaginationService(e)}if(this.grid&&this._gridOptions.enableAutoResize){const e=this._gridOptions.autoResize&&this._gridOptions.autoResize.delay;this.resizerService.resizeGrid(e||10)}}}}showHeaderRow(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.grid.setHeaderRowVisibility(e),!0===e&&this._isGridInitialized&&this.grid.setColumns(this.props.columnDefinitions),e}setPaginationOptionsWhenPresetDefined(e,t){var i;return(null===(i=e.presets)||void 0===i?void 0:i.pagination)&&e.pagination&&(this.hasBackendInfiniteScroll()?console.warn("[Slickgrid-React] `presets.pagination` is not supported with Infinite Scroll, reverting to first page."):(t.pageSize=e.presets.pagination.pageSize,t.pageNumber=e.presets.pagination.pageNumber)),t}setDarkMode(){var e,t;arguments.length>0&&void 0!==arguments[0]&&arguments[0]?null===(e=this.sharedService.gridContainerElement)||void 0===e||e.classList.add("slick-dark-mode"):null===(t=this.sharedService.gridContainerElement)||void 0===t||t.classList.remove("slick-dark-mode")}updateColumnDefinitionsList(e){var t,i,n;this.grid&&this._gridOptions&&Array.isArray(e)&&(e=this.loadSlickGridEditors(e),this._gridOptions.autoAddCustomEditorFormatter&&Eo(e,this._gridOptions.autoAddCustomEditorFormatter),this._gridOptions.enableTranslate?this.extensionService.translateColumnHeaders(void 0,e):this.extensionService.renderColumnHeaders(e,!0),(null===(t=this._gridOptions)||void 0===t?void 0:t.enableAutoSizeColumns)?this.grid.autosizeColumns():(null===(i=this._gridOptions)||void 0===i?void 0:i.enableAutoResizeColumnsByCellContent)&&(null===(n=this.resizerService)||void 0===n?void 0:n.resizeColumnsByCellContent)&&this.resizerService.resizeColumnsByCellContent())}observeColumnDefinitions(){this._collectionObservers.push(u(this._columnDefinitions,this.columnDefinitionsChanged.bind(this)))}copyColumnWidthsReference(e){e.forEach((e=>e.originalWidth=e.width))}displayEmptyDataWarning(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;null===(t=this.slickEmptyWarning)||void 0===t||t.showEmptyDataMessage(e)}handleOnItemCountChanged(e,t){var i;this._currentDatasetLength=t,this.metrics={startTime:new Date,endTime:new Date,itemCount:e,totalItemCount:t},this.slickFooter&&(this.slickFooter.metrics=this.metrics),this._isLocalGrid&&(null===(i=this._gridOptions)||void 0===i?void 0:i.enableEmptyDataWarningMessage)&&this.displayEmptyDataWarning(0===e),this._gridOptions.enableAutoResize&&this.resizerService.isAutoHeightEnabled&&e>0&&this.resizerService.resizeGrid()}initializePaginationService(e){this.grid&&this.gridOptions&&(this.paginationService.totalItems=this.totalItems,this.paginationService.init(this.grid,e,this.backendServiceApi),this.subscriptions.push(this._eventPubSubService.subscribe("onPaginationChanged",(e=>this.paginationChanged(e))),this._eventPubSubService.subscribe("onPaginationOptionsChanged",(e=>this.paginationOptionsChanged(e))),this._eventPubSubService.subscribe("onPaginationVisibilityChanged",(e=>{var t,i,n;this.showPagination=null!==(t=null===e||void 0===e?void 0:e.visible)&&void 0!==t&&t,(null===(i=this.gridOptions)||void 0===i?void 0:i.backendServiceApi)&&(null===(n=this.backendUtilityService)||void 0===n||n.refreshBackendDataset(this.gridOptions)),this.renderPagination(this.showPagination)}))),this.renderPagination(),this._isPaginationInitialized=!0)}async renderPagination(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t,i;if(this.grid&&(null===(t=this._gridOptions)||void 0===t?void 0:t.enablePagination)&&!this._isPaginationInitialized&&e){if(this.gridOptions.customPaginationComponent){const e=document.createElement("section");this._elm.appendChild(e);const{component:t}=await gd(this.gridOptions.customPaginationComponent,e);this.slickPagination=t}else this.slickPagination=new Sl;this.slickPagination&&(this.slickPagination.init(this.grid,this.paginationService,this._eventPubSubService,this.props.translaterService),this.slickPagination.renderPagination(this._elm),this._isPaginationInitialized=!0)}else e||(null===(i=this.slickPagination)||void 0===i||i.dispose(),this._isPaginationInitialized=!1)}loadEditorCollectionAsync(e){var t;if(null===e||void 0===e?void 0:e.editor){const i=e.editor.collectionAsync;e.editor.disabled=!0,i instanceof Promise?i.then((t=>{Array.isArray(t)?this.updateEditorCollection(e,t):t instanceof Response&&"function"===typeof t.json?t.bodyUsed?console.warn("[SlickGrid-React] The response body passed to collectionAsync was already read.Either pass the dataset from the Response or clone the response first using response.clone()"):t.json().then((t=>this.updateEditorCollection(e,t))):(null===t||void 0===t?void 0:t.content)&&this.updateEditorCollection(e,t.content)})):(null===(t=this.rxjs)||void 0===t?void 0:t.isObservable(i))&&queueMicrotask((()=>{this.subscriptions.push(i.subscribe((t=>this.updateEditorCollection(e,t))))}))}}insertDynamicPresetColumns(e,t){if(this._columnDefinitions){const i=this._columnDefinitions.findIndex((t=>t.id===e));if(i>=0){const n=this._columnDefinitions[i];(null===n||void 0===n?void 0:n.id)!==e||t.some((t=>t.id===e))||(i>0?t.splice(i,0,n):t.unshift(n))}}}loadColumnPresetsWhenDatasetInitialized(){var e,t,i,n,s,r,o,a,l;if(this.grid&&this.gridOptions.presets&&Array.isArray(this.gridOptions.presets.columns)&&this.gridOptions.presets.columns.length>0){const d=this.gridStateService.getAssociatedGridColumns(this.grid,this.gridOptions.presets.columns);if(d&&Array.isArray(d)&&d.length>0&&Array.isArray(this._columnDefinitions)){if(this.gridOptions.enableRowMoveManager){const n=null!==(i=null===(t=null===(e=this.gridOptions)||void 0===e?void 0:e.rowMoveManager)||void 0===t?void 0:t.columnId)&&void 0!==i?i:"_move";this.insertDynamicPresetColumns(n,d)}if(this.gridOptions.enableCheckboxSelector){const e=null!==(r=null===(s=null===(n=this.gridOptions)||void 0===n?void 0:n.checkboxSelector)||void 0===s?void 0:s.columnId)&&void 0!==r?r:"_checkbox_selector";this.insertDynamicPresetColumns(e,d)}if(this.gridOptions.enableRowDetailView){const e=null!==(l=null===(a=null===(o=this.gridOptions)||void 0===o?void 0:o.rowDetailView)||void 0===a?void 0:a.columnId)&&void 0!==l?l:"_detail_selector";this.insertDynamicPresetColumns(e,d)}d.forEach((e=>e.originalWidth=e.width)),this.grid.setColumns(d),this.sharedService.visibleColumns=d}}}loadFilterPresetsWhenDatasetInitialized(){var e,t,i;this._gridOptions&&!this.props.customDataView&&this._gridOptions.presets&&(Array.isArray(this._gridOptions.presets.filters)||Array.isArray(null===(t=null===(e=this._gridOptions.presets)||void 0===e?void 0:e.treeData)||void 0===t?void 0:t.toggledItems))&&this.filterService.populateColumnFilterSearchTermPresets((null===(i=this._gridOptions.presets)||void 0===i?void 0:i.filters)||[])}loadLocalGridPagination(e){var t;if(this._gridOptions&&this._paginationOptions){if(this.totalItems=Array.isArray(e)?e.length:0,this._paginationOptions&&(null===(t=this.dataView)||void 0===t?void 0:t.getPagingInfo)){const e=this.dataView.getPagingInfo();(null===e||void 0===e?void 0:e.hasOwnProperty("totalRows"))&&this._paginationOptions.totalItems!==e.totalRows&&(this.totalItems=e.totalRows||0)}this._paginationOptions.totalItems=this.totalItems;const i=this.setPaginationOptionsWhenPresetDefined(this._gridOptions,this._paginationOptions);this.initializePaginationService(i)}}loadRowSelectionPresetWhenExists(){var e,t;const i=null===(e=this._gridOptions)||void 0===e?void 0:e.presets;if(this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&(null===(t=this.grid)||void 0===t?void 0:t.getSelectionModel())&&(null===i||void 0===i?void 0:i.rowSelection)&&(Array.isArray(i.rowSelection.gridRowIndexes)||Array.isArray(i.rowSelection.dataContextIds))){let e=i.rowSelection.dataContextIds,t=i.rowSelection.gridRowIndexes;Array.isArray(e)&&e.length>0?t=this.dataView.mapIdsToRows(e)||[]:Array.isArray(t)&&t.length>0&&(e=this.dataView.mapRowsToIds(t)||[]),this.grid&&Array.isArray(t)&&(this.grid.setSelectedRows(t),this.dataView.setSelectedIds(e||[],{isRowBeingAdded:!0,shouldTriggerEvent:!1,applyRowSelectionToGrid:!0}))}}hasBackendInfiniteScroll(e){var t,i;return!!(null===(i=null===(t=(e||this.gridOptions).backendServiceApi)||void 0===t?void 0:t.service.options)||void 0===i?void 0:i.infiniteScroll)}mergeGridOptions(e){const t=Se(!0,{},ud,e);return t.gridId=this.props.gridId,t.gridContainerId=`slickGridContainer-${this.props.gridId}`,t.enableFiltering&&!t.showHeaderRow&&(t.showHeaderRow=t.enableFiltering),(null===t||void 0===t?void 0:t.pagination)&&(e.enablePagination||e.backendServiceApi)&&e.pagination&&Array.isArray(e.pagination.pageSizes)&&(t.pagination.pageSizes=e.pagination.pageSizes),this.sharedService&&!t.enableFiltering&&t.enablePagination&&this._isLocalGrid&&(t.enableFiltering=!0,t.showHeaderRow=!1,this._hideHeaderRowAfterPageLoad=!0,this.sharedService.hideHeaderRowAfterPageLoad=!0),t}registerExternalResources(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.disposeExternalResources(),e.forEach((e=>this._registeredResources.push(e))),this.initializeExternalResources(e)}resetExternalResources(){this._registeredResources=[]}preRegisterResources(){if(this._registeredResources=this.gridOptions.externalResources||[],Array.isArray(this._registeredResources))for(const e of this._registeredResources)"RxJsResource"===(null===e||void 0===e?void 0:e.className)&&this.registerRxJsResource(e)}initializeExternalResources(e){if(Array.isArray(e))for(const t of e)this.grid&&"function"===typeof t.init&&t.init(this.grid,this.props.containerService)}registerResources(){Array.isArray(this._registeredResources)&&(this.sharedService.externalRegisteredResources=this._registeredResources),this._registeredResources.push(this.gridService,this.gridStateService),(this.gridOptions.createPreHeaderPanel&&this.gridOptions.createTopHeaderPanel||this.gridOptions.createPreHeaderPanel&&!this.gridOptions.enableDraggableGrouping)&&this._registeredResources.push(this.headerGroupingService),this.gridOptions.enableTreeData&&this._registeredResources.push(this.treeDataService),this.gridOptions.enableTranslate&&this.extensionService.translateColumnHeaders(),this.slickEmptyWarning=new _l,this._registeredResources.push(this.slickEmptyWarning),this.initializeExternalResources(this._registeredResources)}registerRxJsResource(e){this.rxjs=e,this.backendUtilityService.addRxJsResource(this.rxjs),this.filterFactory.addRxJsResource(this.rxjs),this.filterService.addRxJsResource(this.rxjs),this.sortService.addRxJsResource(this.rxjs),this.paginationService.addRxJsResource(this.rxjs),this.props.containerService.registerInstance("RxJsResource",this.rxjs)}sortTreeDataset(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._currentDatasetLength;let n,s=[];return this._isDatasetHierarchicalInitialized&&this.datasetHierarchical?(n=this.treeDataService.sortHierarchicalDataset(this.datasetHierarchical),s=n.flat):this._gridOptions&&Array.isArray(e)&&e.length>0&&(n=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(e,this._columnDefinitions,this._gridOptions),this.sharedService.hierarchicalDataset=n.hierarchical,s=n.flat),e.length>0&&(t||e.length!==i)&&this.filterService.refreshTreeDataFilters(s),s}loadSlickGridEditors(e){return e.some((e=>`${null===e||void 0===e?void 0:e.id}`.includes(".")))&&console.error('[Slickgrid-React] Make sure that none of your Column Definition "id" property includes a dot in its name because that will cause some problems with the Editors. For example if your column definition "field" property is "user.firstName" then use "firstName" as the column "id".'),e.map((e=>{var t,i;if(e)return(null===(t=e.editor)||void 0===t?void 0:t.collectionAsync)&&this.loadEditorCollectionAsync(e),{...e,editorClass:null===(i=e.editor)||void 0===i?void 0:i.model}}))}suggestDateParsingWhenHelpful(){var e;(null===(e=this.dataView)||void 0===e?void 0:e.getItemCount())>1e4&&!this.gridOptions.silenceWarnings&&!this.gridOptions.preParseDateColumns&&this.grid.getColumns().some((e=>U(e.type)))&&console.warn("[Slickgrid-React] For getting better perf, we suggest you enable the `preParseDateColumns` grid option, for more info visit => https://ghiscoding.gitbook.io/slickgrid-react/column-functionalities/sorting#pre-parse-date-columns-for-better-perf")}updateEditorCollection(e,t){if(this.grid&&e.editor){e.editor.collection=t,e.editor.disabled=!1;const i=this.grid.getCellEditor();(null===i||void 0===i?void 0:i.disable)&&(null===i||void 0===i?void 0:i.renderDomElement)&&(i.destroy(),i.disable(!1),i.renderDomElement(t))}}render(){return d.createElement("div",{id:`slickGridContainer-${this.props.gridId}`,className:"grid-pane",ref:e=>this._elm=e},this.props.header&&d.createElement("div",{className:"header"},this.props.header),d.createElement("div",{id:`${this.props.gridId}`,className:"slickgrid-container"}),this.props.footer&&d.createElement("div",{className:"footer"},this.props.footer))}}fd.defaultProps={containerService:md,translaterService:new class{constructor(){this.i18n=hd}getCurrentLanguage(){return this.i18n.language}async use(e){return this.i18n.changeLanguage(e)}translate(e){return this.i18n.t(e)}},dataset:[],gridId:"",columnDefinitions:[]};var vd={},bd=Uint8Array,yd=Uint16Array,_d=Int32Array,Sd=new bd([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wd=new bd([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cd=new bd([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ed=function(e,t){for(var i=new yd(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];var s=new _d(i[30]);for(n=1;n<30;++n)for(var r=i[n];r<i[n+1];++r)s[r]=r-i[n]<<5|n;return{b:i,r:s}},Od=Ed(Sd,2),xd=Od.b,Td=Od.r;xd[28]=258,Td[258]=28;for(var kd=Ed(wd,0),Id=(kd.b,kd.r),Rd=new yd(32768),Ad=0;Ad<32768;++Ad){var Dd=(43690&Ad)>>1|(21845&Ad)<<1;Dd=(61680&(Dd=(52428&Dd)>>2|(13107&Dd)<<2))>>4|(3855&Dd)<<4,Rd[Ad]=((65280&Dd)>>8|(255&Dd)<<8)>>1}var Pd=function(e,t,i){for(var n=e.length,s=0,r=new yd(t);s<n;++s)e[s]&&++r[e[s]-1];var o,a=new yd(t);for(s=1;s<t;++s)a[s]=a[s-1]+r[s-1]<<1;if(i){o=new yd(1<<t);var l=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],c=t-e[s],h=a[e[s]-1]++<<c,u=h|(1<<c)-1;h<=u;++h)o[Rd[h]>>l]=d}else for(o=new yd(n),s=0;s<n;++s)e[s]&&(o[s]=Rd[a[e[s]-1]++]>>15-e[s]);return o},Fd=new bd(288);for(Ad=0;Ad<144;++Ad)Fd[Ad]=8;for(Ad=144;Ad<256;++Ad)Fd[Ad]=9;for(Ad=256;Ad<280;++Ad)Fd[Ad]=7;for(Ad=280;Ad<288;++Ad)Fd[Ad]=8;var Md=new bd(32);for(Ad=0;Ad<32;++Ad)Md[Ad]=5;var Ld=Pd(Fd,9,0),Nd=Pd(Md,5,0),Bd=function(e){return(e+7)/8|0},Hd=function(e,t,i){return(null==t||t<0)&&(t=0),(null==i||i>e.length)&&(i=e.length),new bd(e.subarray(t,i))},zd=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$d=function(e,t,i){var n=new Error(t||zd[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,$d),!i)throw n;return n},Ud=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8},Vd=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>8,e[n+2]|=i>>16},Wd=function(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var s=i.length,r=i.slice();if(!s)return{t:Qd,l:0};if(1==s){var o=new bd(i[0].s+1);return o[i[0].s]=1,{t:o,l:1}}i.sort((function(e,t){return e.f-t.f})),i.push({s:-1,f:25001});var a=i[0],l=i[1],d=0,c=1,h=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=s-1;)a=i[i[d].f<i[h].f?d++:h++],l=i[d!=c&&i[d].f<i[h].f?d++:h++],i[c++]={s:-1,f:a.f+l.f,l:a,r:l};var u=r[0].s;for(n=1;n<s;++n)r[n].s>u&&(u=r[n].s);var p=new yd(u+1),m=jd(i[c-1],p,0);if(m>t){n=0;var g=0,f=m-t,v=1<<f;for(r.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));n<s;++n){var b=r[n].s;if(!(p[b]>t))break;g+=v-(1<<m-p[b]),p[b]=t}for(g>>=f;g>0;){var y=r[n].s;p[y]<t?g-=1<<t-p[y]++-1:++n}for(;n>=0&&g;--n){var _=r[n].s;p[_]==t&&(--p[_],++g)}m=t}return{t:new bd(p),l:m}},jd=function(e,t,i){return-1==e.s?Math.max(jd(e.l,t,i+1),jd(e.r,t,i+1)):t[e.s]=i},Gd=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new yd(++t),n=0,s=e[0],r=1,o=function(e){i[n++]=e},a=1;a<=t;++a)if(e[a]==s&&a!=t)++r;else{if(!s&&r>2){for(;r>138;r-=138)o(32754);r>2&&(o(r>10?r-11<<5|28690:r-3<<5|12305),r=0)}else if(r>3){for(o(s),--r;r>6;r-=6)o(8304);r>2&&(o(r-3<<5|8208),r=0)}for(;r--;)o(s);r=1,s=e[a]}return{c:i.subarray(0,n),n:t}},Yd=function(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i},Kd=function(e,t,i){var n=i.length,s=Bd(t+2);e[s]=255&n,e[s+1]=n>>8,e[s+2]=255^e[s],e[s+3]=255^e[s+1];for(var r=0;r<n;++r)e[s+r+4]=i[r];return 8*(s+4+n)},qd=function(e,t,i,n,s,r,o,a,l,d,c){Ud(t,c++,i),++s[256];for(var h=Wd(s,15),u=h.t,p=h.l,m=Wd(r,15),g=m.t,f=m.l,v=Gd(u),b=v.c,y=v.n,_=Gd(g),S=_.c,w=_.n,C=new yd(19),E=0;E<b.length;++E)++C[31&b[E]];for(E=0;E<S.length;++E)++C[31&S[E]];for(var O=Wd(C,7),x=O.t,T=O.l,k=19;k>4&&!x[Cd[k-1]];--k);var I,R,A,D,P=d+5<<3,F=Yd(s,Fd)+Yd(r,Md)+o,M=Yd(s,u)+Yd(r,g)+o+14+3*k+Yd(C,x)+2*C[16]+3*C[17]+7*C[18];if(l>=0&&P<=F&&P<=M)return Kd(t,c,e.subarray(l,l+d));if(Ud(t,c,1+(M<F)),c+=2,M<F){I=Pd(u,p,0),R=u,A=Pd(g,f,0),D=g;var L=Pd(x,T,0);Ud(t,c,y-257),Ud(t,c+5,w-1),Ud(t,c+10,k-4),c+=14;for(E=0;E<k;++E)Ud(t,c+3*E,x[Cd[E]]);c+=3*k;for(var N=[b,S],B=0;B<2;++B){var H=N[B];for(E=0;E<H.length;++E){var z=31&H[E];Ud(t,c,L[z]),c+=x[z],z>15&&(Ud(t,c,H[E]>>5&127),c+=H[E]>>12)}}}else I=Ld,R=Fd,A=Nd,D=Md;for(E=0;E<a;++E){var $=n[E];if($>255){Vd(t,c,I[(z=$>>18&31)+257]),c+=R[z+257],z>7&&(Ud(t,c,$>>23&31),c+=Sd[z]);var U=31&$;Vd(t,c,A[U]),c+=D[U],U>3&&(Vd(t,c,$>>5&8191),c+=wd[U])}else Vd(t,c,I[$]),c+=R[$]}return Vd(t,c,I[256]),c+R[256]},Xd=new _d([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Qd=new bd(0),Zd=function(e,t,i,n,s,r){var o=r.z||e.length,a=new bd(n+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(n,a.length-s),d=r.l,c=7&(r.r||0);if(t){c&&(l[0]=r.r>>3);for(var h=Xd[t-1],u=h>>13,p=8191&h,m=(1<<i)-1,g=r.p||new yd(32768),f=r.h||new yd(m+1),v=Math.ceil(i/3),b=2*v,y=function(t){return(e[t]^e[t+1]<<v^e[t+2]<<b)&m},_=new _d(25e3),S=new yd(288),w=new yd(32),C=0,E=0,O=r.i||0,x=0,T=r.w||0,k=0;O+2<o;++O){var I=y(O),R=32767&O,A=f[I];if(g[R]=A,f[I]=R,T<=O){var D=o-O;if((C>7e3||x>24576)&&(D>423||!d)){c=qd(e,l,0,_,S,w,E,x,k,O-k,c),x=C=E=0,k=O;for(var P=0;P<286;++P)S[P]=0;for(P=0;P<30;++P)w[P]=0}var F=2,M=0,L=p,N=R-A&32767;if(D>2&&I==y(O-N))for(var B=Math.min(u,D)-1,H=Math.min(32767,O),z=Math.min(258,D);N<=H&&--L&&R!=A;){if(e[O+F]==e[O+F-N]){for(var $=0;$<z&&e[O+$]==e[O+$-N];++$);if($>F){if(F=$,M=N,$>B)break;var U=Math.min(N,$-2),V=0;for(P=0;P<U;++P){var W=O-N+P&32767,j=W-g[W]&32767;j>V&&(V=j,A=W)}}}N+=(R=A)-(A=g[R])&32767}if(M){_[x++]=268435456|Td[F]<<18|Id[M];var G=31&Td[F],Y=31&Id[M];E+=Sd[G]+wd[Y],++S[257+G],++w[Y],T=O+F,++C}else _[x++]=e[O],++S[e[O]]}}for(O=Math.max(O,T);O<o;++O)_[x++]=e[O],++S[e[O]];c=qd(e,l,d,_,S,w,E,x,k,O-k,c),d||(r.r=7&c|l[c/8|0]<<3,c-=7,r.h=f,r.p=g,r.i=O,r.w=T)}else{for(O=r.w||0;O<o+d;O+=65535){var K=O+65535;K>=o&&(l[c/8|0]=d,K=o),c=Kd(l,c+1,e.subarray(O,K))}r.i=o}return Hd(a,0,n+Bd(c)+s)},Jd=function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var i=t,n=9;--n;)i=(1&i&&-306674912)^i>>>1;e[t]=i}return e}(),ec=function(){var e=-1;return{p:function(t){for(var i=e,n=0;n<t.length;++n)i=Jd[255&i^t[n]]^i>>>8;e=i},d:function(){return~e}}},tc=function(e,t,i,n,s){if(!s&&(s={l:1},t.dictionary)){var r=t.dictionary.subarray(-32768),o=new bd(r.length+e.length);o.set(r),o.set(e,r.length),e=o,s.w=r.length}return Zd(e,null==t.level?6:t.level,null==t.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,i,n,s)},ic=function(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i},nc=function(e,t,i){for(var n=e(),s=e.toString(),r=s.slice(s.indexOf("[")+1,s.lastIndexOf("]")).replace(/\s+/g,"").split(","),o=0;o<n.length;++o){var a=n[o],l=r[o];if("function"==typeof a){t+=";"+l+"=";var d=a.toString();if(a.prototype)if(-1!=d.indexOf("[native code]")){var c=d.indexOf(" ",8)+1;t+=d.slice(c,d.indexOf("(",c))}else for(var h in t+=d,a.prototype)t+=";"+l+".prototype."+h+"="+a.prototype[h].toString();else t+=d}else i[l]=a}return t},sc=[],rc=function(e,t,i,n){if(!sc[i]){for(var s="",r={},o=e.length-1,a=0;a<o;++a)s=nc(e[a],s,r);sc[i]={c:nc(e[o],s,r),e:r}}var l=ic({},sc[i].e);return function(e,t,i,n,s){var r=new Worker(vd[t]||(vd[t]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return r.onmessage=function(e){var t=e.data,i=t.$e$;if(i){var n=new Error(i[0]);n.code=i[1],n.stack=i[2],s(n,null)}else s(null,t)},r.postMessage(i,n),r}(sc[i].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",i,l,function(e){var t=[];for(var i in e)e[i].buffer&&t.push((e[i]=new e[i].constructor(e[i])).buffer);return t}(l),n)},oc=function(){return[bd,yd,_d,Sd,wd,Cd,Td,Id,Ld,Fd,Nd,Md,Rd,Xd,Qd,Pd,Ud,Vd,Wd,jd,Gd,Yd,Kd,qd,Bd,Hd,Zd,tc,cc,ac]},ac=function(e){return postMessage(e,[e.buffer])},lc=function(e,t,i,n,s,r){var o=rc(i,n,s,(function(e,t){o.terminate(),r(e,t)}));return o.postMessage([e,t],t.consume?[e.buffer]:[]),function(){o.terminate()}},dc=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8};function cc(e,t){return tc(e,t||{},0,0)}var hc=function(e,t,i,n){for(var s in e){var r=e[s],o=t+s,a=n;Array.isArray(r)&&(a=ic(n,r[1]),r=r[0]),r instanceof bd?i[o]=[r,a]:(i[o+="/"]=[new bd(0),a],hc(r,o,i,n))}},uc="undefined"!=typeof TextEncoder&&new TextEncoder,pc="undefined"!=typeof TextDecoder&&new TextDecoder;try{pc.decode(Qd,{stream:!0})}catch(_b){}function mc(e,t){if(t){for(var i=new bd(e.length),n=0;n<e.length;++n)i[n]=e.charCodeAt(n);return i}if(uc)return uc.encode(e);var s=e.length,r=new bd(e.length+(e.length>>1)),o=0,a=function(e){r[o++]=e};for(n=0;n<s;++n){if(o+5>r.length){var l=new bd(o+8+(s-n<<1));l.set(r),r=l}var d=e.charCodeAt(n);d<128||t?a(d):d<2048?(a(192|d>>6),a(128|63&d)):d>55295&&d<57344?(a(240|(d=65536+(1047552&d)|1023&e.charCodeAt(++n))>>18),a(128|d>>12&63),a(128|d>>6&63),a(128|63&d)):(a(224|d>>12),a(128|d>>6&63),a(128|63&d))}return Hd(r,0,o)}var gc=function(e){var t=0;if(e)for(var i in e){var n=e[i].length;n>65535&&$d(9),t+=n+4}return t},fc=function(e,t,i,n,s,r,o,a){var l=n.length,d=i.extra,c=a&&a.length,h=gc(d);dc(e,t,null!=o?33639248:67324752),t+=4,null!=o&&(e[t++]=20,e[t++]=i.os),e[t]=20,t+=2,e[t++]=i.flag<<1|(r<0&&8),e[t++]=s&&8,e[t++]=255&i.compression,e[t++]=i.compression>>8;var u=new Date(null==i.mtime?Date.now():i.mtime),p=u.getFullYear()-1980;if((p<0||p>119)&&$d(10),dc(e,t,p<<25|u.getMonth()+1<<21|u.getDate()<<16|u.getHours()<<11|u.getMinutes()<<5|u.getSeconds()>>1),t+=4,-1!=r&&(dc(e,t,i.crc),dc(e,t+4,r<0?-r-2:r),dc(e,t+8,i.size)),dc(e,t+12,l),dc(e,t+14,h),t+=16,null!=o&&(dc(e,t,c),dc(e,t+6,i.attrs),dc(e,t+10,o),t+=14),e.set(n,t),t+=l,h)for(var m in d){var g=d[m],f=g.length;dc(e,t,+m),dc(e,t+2,f),e.set(g,t+4),t+=4+f}return c&&(e.set(a,t),t+=c),t},vc=function(e,t,i,n,s){dc(e,t,101010256),dc(e,t+8,i),dc(e,t+10,i),dc(e,t+12,n),dc(e,t+16,s)};function bc(e,t,i){i||(i=t,t={}),"function"!=typeof i&&$d(7);var n={};hc(e,"",n,t);var s=Object.keys(n),r=s.length,o=0,a=0,l=r,d=new Array(r),c=[],h=function(){for(var e=0;e<c.length;++e)c[e]()},u=function(e,t){yc((function(){i(e,t)}))};yc((function(){u=i}));var p=function(){var e=new bd(a+22),t=o,i=a-o;a=0;for(var n=0;n<l;++n){var s=d[n];try{var r=s.c.length;fc(e,a,s,s.f,s.u,r);var c=30+s.f.length+gc(s.extra),h=a+c;e.set(s.c,h),fc(e,o,s,s.f,s.u,r,a,s.m),o+=16+c+(s.m?s.m.length:0),a=h+r}catch(_b){return u(_b,null)}}vc(e,o,d.length,i,t),u(null,e)};r||p();for(var m=function(e){var t=s[e],i=n[t],l=i[0],m=i[1],g=ec(),f=l.length;g.p(l);var v=mc(t),b=v.length,y=m.comment,_=y&&mc(y),S=_&&_.length,w=gc(m.extra),C=0==m.level?0:8,E=function(i,n){if(i)h(),u(i,null);else{var s=n.length;d[e]=ic(m,{size:f,crc:g.d(),c:n,f:v,m:_,u:b!=t.length||_&&y.length!=S,compression:C}),o+=30+b+w+s,a+=76+2*(b+w)+(S||0)+s,--r||p()}};if(b>65535&&E($d(11,0,1),null),C)if(f<16e4)try{E(null,cc(l,m))}catch(_b){E(_b,null)}else c.push(function(e,t,i){return i||(i=t,t={}),"function"!=typeof i&&$d(7),lc(e,t,[oc],(function(e){return ac(cc(e.data[0],e.data[1]))}),0,i)}(l,m,E));else E(null,l)},g=0;g<l;++g)m(g);return h}var yc="function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout?setTimeout:function(e){e()};var _c=Object.defineProperty,Sc=(e,t,i)=>((e,t,i)=>t in e?_c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i)(e,"symbol"!=typeof t?t+"":t,i);function wc(e){const t=typeof e;return null!=e&&("object"===t||"function"===t)}function Cc(e){if("object"!=typeof e||null===e||"[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);if(null===t)return!0;const i=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&Function.prototype.call(i)===Function.prototype.call(e)}function Ec(e){return null!=e&&"string"==typeof e.valueOf()}const Oc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xc=e=>("string"!=typeof e&&(e=`${e}`),e.replace(/[&<>"']/g,(e=>Oc[e])));class Tc{constructor(e,t){Sc(this,"documentElement"),this.documentElement=this.createElement(t),this.documentElement.setAttribute("xmlns",e)}createElement(e){return new Ic({nodeName:e})}createTextNode(e){return new kc(e)}toString(){return this.documentElement.toString()}}Sc(Tc,"Node",{Create:e=>{switch(e.type){case"XML":return new Ic(e);case"TEXT":return new kc(e.nodeValue);default:return null}}});class kc{constructor(e){Sc(this,"nodeValue"),this.nodeValue=e}toJSON(){return{nodeValue:this.nodeValue,type:"TEXT"}}toString(){return xc(this.nodeValue)}}class Ic{constructor(e){if(Sc(this,"nodeName",""),Sc(this,"children"),Sc(this,"nodeValue"),Sc(this,"attributes"),Sc(this,"firstChild"),this.nodeName=e.nodeName,this.children=[],this.nodeValue=e.nodeValue||"",this.attributes={},e.children)for(let t=0,i=e.children.length;t<i;t++)this.appendChild(Tc.Node.Create(e.children[t]));if(e.attributes)for(const t in e.attributes)e.attributes.hasOwnProperty(t)&&this.setAttribute(t,e.attributes[t])}toString(){let e=`<${this.nodeName}`;for(const i in this.attributes)this.attributes.hasOwnProperty(i)&&(e=`${e} ${i}="${xc(this.attributes[i])}"`);let t="";for(let i=0,n=this.children.length;i<n;i++)t+=this.children[i].toString();return e+=t?`>${t}</${this.nodeName}>`:"/>",e}toJSON(){const e=[];for(let t=0,i=this.children.length;t<i;t++)e.push(this.children[t].toJSON());return{nodeName:this.nodeName,children:e,nodeValue:this.nodeValue,attributes:this.attributes,type:"XML"}}setAttribute(e,t){if(null===t)return delete this.attributes[e],void delete this[e];this.attributes[e]=t,this[e]=t}appendChild(e){this.children.push(e),this.firstChild=this.children[0]}cloneNode(e){return new Ic(this.toJSON())}}const Rc=class e{static uniqueId(t){return e._idSpaces[t]||(e._idSpaces[t]=1),e._idSpaces[t]++}static createXmlDoc(e,t){return new Tc(e||null,t)}static createElement(e,t,i){const n=e.createElement(t);let s=(i=i||[]).length;for(;s--;)n.setAttribute(i[s][0],i[s][1]);return n}static setAttributesOnDoc(e,t){for(let[i,n]of Object.entries(t)){if(Cc(n))if(null!==n.v&&void 0!==n.v){if(n.type===Boolean)n=n.v?"1":"0"}else n=null;null!=n&&e.setAttribute(i,n)}}static positionToLetterRef(t,i){let n,s=1,r=t,o="";if(e.LETTER_REFS[t])return e.LETTER_REFS[t].concat(i);for(;r>0;)r-=Math.pow(26,s-1),n=r%Math.pow(26,s),r-=n,n/=Math.pow(26,s-1),o="ABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(n)+o,s+=1;return e.LETTER_REFS[t]=o,o.concat(String(i))}};Sc(Rc,"_idSpaces",{}),Sc(Rc,"LETTER_REFS",{}),Sc(Rc,"schemas",{worksheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",sharedStrings:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",stylesheet:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",relationships:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",relationshipPackage:"http://schemas.openxmlformats.org/package/2006/relationships",contentTypes:"http://schemas.openxmlformats.org/package/2006/content-types",spreadsheetml:"http://schemas.openxmlformats.org/spreadsheetml/2006/main",markupCompat:"http://schemas.openxmlformats.org/markup-compatibility/2006",x14ac:"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac",officeDocument:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",package:"http://schemas.openxmlformats.org/package/2006/relationships",table:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/table",spreadsheetDrawing:"http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing",drawing:"http://schemas.openxmlformats.org/drawingml/2006/main",drawingRelationship:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",image:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",chart:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",hyperlink:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink"});let Ac=Rc;const Dc={};function Pc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$lodash$";Dc[e]||(Dc[e]=0);const t=++Dc[e];return"$lodash$"===e?`${t}`:`${e}${t}`}const Fc={};class Mc{constructor(){Sc(this,"relations",{}),Sc(this,"lastId",1),Pc("rId")}importData(e){this.relations=e.relations,this.lastId=e.lastId}exportData(){return{relations:this.relations,lastId:this.lastId}}addRelation(e,t){return this.relations[e.id]={id:Pc("rId"),schema:Ac.schemas[t],object:e},this.relations[e.id].id}getRelationshipId(e){return this.relations[e.id]?this.relations[e.id].id:null}toXML(){const e=Ac.createXmlDoc(Ac.schemas.relationshipPackage,"Relationships"),t=e.documentElement;for(const[i,n]of Object.entries(this.relations)){const s=Ac.createElement(e,"Relationship",[["Id",n.id],["Type",n.schema],["Target",n.object.target||Fc[i]]]);n.object.targetMode&&s.setAttribute("TargetMode",n.object.targetMode),t.appendChild(s)}return e}}class Lc{constructor(){Sc(this,"state",null),Sc(this,"xSplit",null),Sc(this,"ySplit",null),Sc(this,"activePane","bottomRight"),Sc(this,"topLeftCell",null),Sc(this,"_freezePane")}freezePane(e,t,i){this._freezePane={xSplit:e,ySplit:t,cell:i}}exportXML(e){const t=e.createElement("pane");return null!==this.state&&(t.setAttribute("xSplit",this._freezePane.xSplit),t.setAttribute("ySplit",this._freezePane.ySplit),t.setAttribute("topLeftCell",this._freezePane.cell),t.setAttribute("activePane","bottomRight"),t.setAttribute("state","frozen")),t}}class Nc{constructor(){Sc(this,"strings",{}),Sc(this,"stringArray",[]),Sc(this,"id",Pc("SharedStrings"))}addString(e){return this.strings[e]=this.stringArray.length,this.stringArray[this.stringArray.length]=e,this.strings[e]}exportData(){return this.strings}toXML(){const e=Ac.createXmlDoc(Ac.schemas.spreadsheetml,"sst"),t=e.documentElement;this.stringArray.reverse();let i=this.stringArray.length;t.setAttribute("count",i),t.setAttribute("uniqueCount",i);const n=e.createElement("si"),s=e.createElement("t");s.appendChild(e.createTextNode("--placeholder--")),n.appendChild(s);const r=this.stringArray;for(;i--;){const e=n.cloneNode(!0);"string"==typeof r[i]&&r[i].match(/\s+/)&&e.firstChild.setAttribute("xml:space","preserve"),e.firstChild.firstChild.nodeValue=r[i],t.appendChild(e)}return e}}class Bc{constructor(e){Sc(this,"pane"),Sc(this,"showZeros",null),Sc(this,"defaultGridColor",null),Sc(this,"colorId",null),Sc(this,"rightToLeft",null),Sc(this,"showFormulas",null),Sc(this,"showGridLines",null),Sc(this,"showOutlineSymbols",null),Sc(this,"showRowColHeaders",null),Sc(this,"showRuler",null),Sc(this,"showWhiteSpace",null),Sc(this,"tabSelected",null),Sc(this,"topLeftCell",null),Sc(this,"viewType",null),Sc(this,"windowProtection",null),Sc(this,"zoomScale",null),Sc(this,"zoomScaleNormal",null),Sc(this,"zoomScalePageLayoutView",null),Sc(this,"zoomScaleSheetLayoutView",null);const t=e||{};this.pane=t.pane||new Lc}freezePane(e,t,i){this.pane.state="frozen",this.pane.xSplit=e,this.pane.ySplit=t,this.pane.topLeftCell=i}exportXML(e){const t=e.createElement("sheetViews"),i=e.createElement("sheetView");return Ac.setAttributesOnDoc(i,{workbookViewId:0,showZeros:{v:this.showZeros,type:Boolean},defaultGridColor:{v:this.defaultGridColor,type:Boolean},colorId:this.colorId,rightToLeft:{v:this.rightToLeft,type:Boolean},showFormulas:{v:this.showFormulas,type:Boolean},showGridLines:{v:this.showGridLines,type:Boolean},showOutlineSymbols:{v:this.showOutlineSymbols,type:Boolean},showRowColHeaders:{v:this.showRowColHeaders,type:Boolean},showRuler:{v:this.showRuler,type:Boolean},showWhiteSpace:{v:this.showWhiteSpace,type:Boolean},tabSelected:{v:this.tabSelected,type:Boolean},viewType:this.viewType,windowProtection:{v:this.windowProtection,type:Boolean},zoomScale:{v:this.zoomScale,type:Boolean},zoomScaleNormal:this.zoomScaleNormal,zoomScalePageLayoutView:this.zoomScalePageLayoutView,zoomScaleSheetLayoutView:this.zoomScaleSheetLayoutView}),i.appendChild(this.pane.exportXML(e)),t.appendChild(i),t}}class Hc{constructor(){Sc(this,"id",Pc("StyleSheet")),Sc(this,"cellStyles",[{name:"Normal",xfId:"0",builtinId:"0"}]),Sc(this,"defaultTableStyle",!1),Sc(this,"differentialStyles",[{}]),Sc(this,"masterCellFormats",[{numFmtId:0,fontId:0,fillId:0,borderId:0,xfid:0}]),Sc(this,"masterCellStyles",[{numFmtId:0,fontId:0,fillId:0,borderId:0}]),Sc(this,"fonts",[{}]),Sc(this,"numberFormatters",[]),Sc(this,"fills",[{},{type:"pattern",patternType:"gray125",fgColor:"FF333333",bgColor:"FF333333"}]),Sc(this,"borders",[{top:{},left:{},right:{},bottom:{},diagonal:{}}]),Sc(this,"tableStyles",[])}createSimpleFormatter(e){const t={id:this.masterCellFormats.length};if("date"===e)t.numFmtId=14;return this.masterCellFormats.push(t),t}createFill(e){const t=this.fills.length,i=e;return i.id=t,this.fills.push(i),i}createNumberFormatter(e){const t={id:this.numberFormatters.length+100,formatCode:e};return this.numberFormatters.push(t),t}createFormat(e){const t={id:this.masterCellFormats.length};if(e.protection&&(t.protection=e.protection),e.font&&wc(e.font))t.fontId=this.createFontStyle(e.font).id;else if(e.font){if(Number.isNaN(Number.parseInt(e.font,10)))throw new Error("Passing a non-numeric font id is not supported");t.fontId=e.font}if(e.format&&Ec(e.format))t.numFmtId=this.createNumberFormatter(e.format).id;else if(e.format){if(Number.isNaN(Number.parseInt(e.format,10)))throw new Error("Invalid number formatter id");t.numFmtId=e.format}if(e.border&&wc(e.border))t.borderId=this.createBorderFormatter(e.border).id;else if(e.border){if(Number.isNaN(Number.parseInt(e.border,10)))throw new Error("Passing a non-numeric border id is not supported");t.borderId=e.border}if(e.fill&&wc(e.fill))t.fillId=this.createFill(e.fill).id;else if(e.fill){if(Number.isNaN(Number.parseInt(e.fill,10)))throw new Error("Passing a non-numeric fill id is not supported");t.fillId=e.fill}return e.alignment&&wc(e.alignment)&&(t.alignment=function(e,t){return t.reduce(((t,i)=>(null!=e&&e.hasOwnProperty(i)&&(t[i]=e[i]),t)),{})}(e.alignment,["horizontal","justifyLastLine","readingOrder","relativeIndent","shrinkToFit","textRotation","vertical","wrapText"])),this.masterCellFormats.push(t),t}createDifferentialStyle(e){const t=this.differentialStyles.length,i={id:t};return e.font&&wc(e.font)&&(i.font=e.font),e.border&&wc(e.border)&&(i.border=Object.assign({top:{},left:{},right:{},bottom:{},diagonal:{}},e.border)),e.fill&&wc(e.fill)&&(i.fill=e.fill),e.alignment&&wc(e.alignment)&&(i.alignment=e.alignment),e.format&&Ec(e.format)&&(i.numFmt=e.format),this.differentialStyles[t]=i,i}createTableStyle(e){this.tableStyles.push(e)}createBorderFormatter(e){return e={top:{},left:{},right:{},bottom:{},diagonal:{},id:this.borders.length,...e},this.borders.push(e),e}createFontStyle(e){const t={id:this.fonts.length};return e.bold&&(t.bold=!0),e.italic&&(t.italic=!0),e.superscript&&(t.vertAlign="superscript"),e.subscript&&(t.vertAlign="subscript"),e.underline&&("string"==typeof e.underline&&["double","singleAccounting","doubleAccounting"].includes(e.underline)?t.underline=e.underline:t.underline=!0),e.strike&&(t.strike=!0),e.outline&&(t.outline=!0),e.shadow&&(t.shadow=!0),e.size&&(t.size=e.size),e.color&&(t.color=e.color),e.fontName&&(t.fontName=e.fontName),this.fonts.push(t),t}exportBorders(e){const t=e.createElement("borders");t.setAttribute("count",this.borders.length);for(let i=0,n=this.borders.length;i<n;i++)t.appendChild(this.exportBorder(e,this.borders[i]));return t}exportBorder(e,t){const i=e.createElement("border"),n=i=>{const n=e.createElement(i);return t[i].style&&n.setAttribute("style",t[i].style),t[i].color&&n.appendChild(this.exportColor(e,t[i].color)),n};return i.appendChild(n("left")),i.appendChild(n("right")),i.appendChild(n("top")),i.appendChild(n("bottom")),i.appendChild(n("diagonal")),i}exportColor(e,t){const i=e.createElement("color");return Ec(t)?(i.setAttribute("rgb",t),i):(void 0!==t.tint&&i.setAttribute("tint",t.tint),void 0!==t.auto&&i.setAttribute("auto",String(!!t.auto)),void 0!==t.theme&&i.setAttribute("theme",t.theme),i)}exportMasterCellFormats(e){const t=Ac.createElement(e,"cellXfs",[["count",this.masterCellFormats.length]]);for(let i=0,n=this.masterCellFormats.length;i<n;i++){const n=this.masterCellFormats[i];t.appendChild(this.exportCellFormatElement(e,n))}return t}exportMasterCellStyles(e){const t=Ac.createElement(e,"cellStyleXfs",[["count",this.masterCellStyles.length]]);for(let i=0,n=this.masterCellStyles.length;i<n;i++){const n=this.masterCellStyles[i];t.appendChild(this.exportCellFormatElement(e,n))}return t}exportCellFormatElement(e,t){const i=e.createElement("xf"),n=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","borderId","fillId","fontId","numFmtId","pivotButton","quotePrefix","xfId"],s=Object.keys(t).filter((e=>-1!==n.indexOf(e)));if(t.alignment){const n=t.alignment;i.appendChild(this.exportAlignment(e,n))}t.protection&&(i.appendChild(this.exportProtection(e,t.protection)),i.setAttribute("applyProtection","1"));let r=s.length;for(;r--;)i.setAttribute(s[r],t[s[r]]);return t.fillId&&i.setAttribute("applyFill","1"),t.fontId&&i.setAttribute("applyFont","1"),t.borderId&&i.setAttribute("applyBorder","1"),t.alignment&&i.setAttribute("applyAlignment","1"),t.numFmtId&&i.setAttribute("applyNumberFormat","1"),void 0!==t.numFmtId&&void 0===t.xfId&&i.setAttribute("xfId","0"),i}exportAlignment(e,t){const i=e.createElement("alignment"),n=Object.keys(t);for(let s=0,r=n.length;s<r;s++)i.setAttribute(n[s],t[n[s]]);return i}exportFonts(e){const t=e.createElement("fonts");t.setAttribute("count",String(this.fonts.length));for(let i=0,n=this.fonts.length;i<n;i++){const n=this.fonts[i];t.appendChild(this.exportFont(e,n))}return t}exportFont(e,t){const i=e.createElement("font");if(t.size){const n=e.createElement("sz");n.setAttribute("val",t.size),i.appendChild(n)}if(t.fontName){const n=e.createElement("name");n.setAttribute("val",t.fontName),i.appendChild(n)}if(t.bold&&i.appendChild(e.createElement("b")),t.italic&&i.appendChild(e.createElement("i")),t.vertAlign){const n=e.createElement("vertAlign");n.setAttribute("val",t.vertAlign),i.appendChild(n)}if(t.underline){const n=e.createElement("u");!0!==t.underline&&n.setAttribute("val",t.underline),i.appendChild(n)}return t.strike&&i.appendChild(e.createElement("strike")),t.shadow&&i.appendChild(e.createElement("shadow")),t.outline&&i.appendChild(e.createElement("outline")),t.color&&i.appendChild(this.exportColor(e,t.color)),i}exportFills(e){const t=e.createElement("fills");t.setAttribute("count",String(this.fills.length));for(let i=0,n=this.fills.length;i<n;i++){const n=this.fills[i];t.appendChild(this.exportFill(e,n))}return t}exportFill(e,t){let i;const n=e.createElement("fill");return"pattern"===t.type?(i=this.exportPatternFill(e,t),n.appendChild(i)):"gradient"===t.type&&(i=this.exportGradientFill(e,t),n.appendChild(i)),n}exportGradientFill(e,t){const i=e.createElement("gradientFill");t.degree?i.setAttribute("degree",t.degree):t.left&&(i.setAttribute("left",t.left),i.setAttribute("right",t.right),i.setAttribute("top",t.top),i.setAttribute("bottom",t.bottom));const n=e.createElement("stop");n.setAttribute("position",t.start.pureAt||0);const s=e.createElement("color");"string"==typeof t.start||t.start.color?s.setAttribute("rgb",t.start.color||t.start):t.start.theme&&s.setAttribute("theme",t.start.theme);const r=e.createElement("stop"),o=e.createElement("color");return r.setAttribute("position",t.end.pureAt||1),"string"==typeof t.start||t.end.color?o.setAttribute("rgb",t.end.color||t.end):t.end.theme&&o.setAttribute("theme",t.end.theme),n.appendChild(s),r.appendChild(o),i.appendChild(n),i.appendChild(r),i}exportPatternFill(e,t){const i=Ac.createElement(e,"patternFill",[["patternType",t.patternType]]);t.bgColor||(t.bgColor="FFFFFFFF"),t.fgColor||(t.fgColor="FFFFFFFF");const n=e.createElement("bgColor");Ec(t.bgColor)?n.setAttribute("rgb",t.bgColor):t.bgColor.theme?n.setAttribute("theme",t.bgColor.theme):n.setAttribute("rgb",t.bgColor.rbg);const s=e.createElement("fgColor");return Ec(t.fgColor)?s.setAttribute("rgb",t.fgColor):t.fgColor.theme?s.setAttribute("theme",t.fgColor.theme):s.setAttribute("rgb",t.fgColor.rbg),i.appendChild(s),i.appendChild(n),i}exportNumberFormatters(e){const t=e.createElement("numFmts");t.setAttribute("count",String(this.numberFormatters.length));for(let i=0,n=this.numberFormatters.length;i<n;i++){const n=this.numberFormatters[i];t.appendChild(this.exportNumberFormatter(e,n))}return t}exportNumberFormatter(e,t){const i=e.createElement("numFmt");return i.setAttribute("numFmtId",t.id),i.setAttribute("formatCode",t.formatCode),i}exportCellStyles(e){const t=e.createElement("cellStyles");t.setAttribute("count",String(this.cellStyles.length));for(let i=0,n=this.cellStyles.length;i<n;i++){const n=this.cellStyles[i];delete n.id;const s=Ac.createElement(e,"cellStyle");t.appendChild(s);const r=Object.keys(n);let o=r.length;for(;o--;)s.setAttribute(r[o],n[r[o]])}return t}exportDifferentialStyles(e){const t=e.createElement("dxfs");t.setAttribute("count",String(this.differentialStyles.length));for(let i=0,n=this.differentialStyles.length;i<n;i++){const n=this.differentialStyles[i];t.appendChild(this.exportDFX(e,n))}return t}exportDFX(e,t){const i=e.createElement("dxf");return t.font&&i.appendChild(this.exportFont(e,t.font)),t.fill&&i.appendChild(this.exportFill(e,t.fill)),t.border&&i.appendChild(this.exportBorder(e,t.border)),t.numFmt&&i.appendChild(this.exportNumberFormatter(e,t.numFmt)),t.alignment&&i.appendChild(this.exportAlignment(e,t.alignment)),i}exportTableStyles(e){const t=e.createElement("tableStyles");t.setAttribute("count",String(this.tableStyles.length)),this.defaultTableStyle&&t.setAttribute("defaultTableStyle",String(this.defaultTableStyle));for(let i=0,n=this.tableStyles.length;i<n;i++)t.appendChild(this.exportTableStyle(e,this.tableStyles[i]));return t}exportTableStyle(e,t){const i=e.createElement("tableStyle");i.setAttribute("name",t.name),i.setAttribute("pivot",String(0));let n=0;return Object.entries(t).forEach((t=>{let[s,r]=t;if("name"===s)return;n++;const o=e.createElement("tableStyleElement");o.setAttribute("type",s),o.setAttribute("dxfId",r),i.appendChild(o)})),i.setAttribute("count",String(n)),i}exportProtection(e,t){const i=e.createElement("protection");for(const n in t)n in t&&i.setAttribute(n,t[n]);return i}toXML(){const e=Ac.createXmlDoc(Ac.schemas.spreadsheetml,"styleSheet"),t=e.documentElement;return t.appendChild(this.exportNumberFormatters(e)),t.appendChild(this.exportFonts(e)),t.appendChild(this.exportFills(e)),t.appendChild(this.exportBorders(e)),t.appendChild(this.exportMasterCellStyles(e)),t.appendChild(this.exportMasterCellFormats(e)),t.appendChild(this.exportCellStyles(e)),t.appendChild(this.exportDifferentialStyles(e)),this.tableStyles.length&&t.appendChild(this.exportTableStyles(e)),e}}class zc{constructor(e){Sc(this,"name",""),Sc(this,"id",Pc("Worksheet")),Sc(this,"_timezoneOffset"),Sc(this,"relations",null),Sc(this,"columnFormats",[]),Sc(this,"data",[]),Sc(this,"mergedCells",[]),Sc(this,"columns",[]),Sc(this,"sheetProtection",!1),Sc(this,"_headers",[]),Sc(this,"_footers",[]),Sc(this,"_tables",[]),Sc(this,"_drawings",[]),Sc(this,"_orientation"),Sc(this,"_margin"),Sc(this,"_rowInstructions",{}),Sc(this,"_freezePane",{}),Sc(this,"sharedStrings",null),Sc(this,"hyperlinks",[]),Sc(this,"sheetView"),Sc(this,"showZeros",null),this._timezoneOffset=60*(new Date).getTimezoneOffset()*1e3,this.sheetView=e.sheetView||new Bc,this.initialize(e)}initialize(e){e=e||{},this.name=e.name,this.id=Pc("Worksheet"),this._timezoneOffset=60*(new Date).getTimezoneOffset()*1e3,e.columns&&this.setColumns(e.columns),this.relations=new Mc}exportData(){return{relations:this.relations.exportData(),columnFormats:this.columnFormats,data:this.data,columns:this.columns,mergedCells:this.mergedCells,_headers:this._headers,_footers:this._footers,_tables:this._tables,_rowInstructions:this._rowInstructions,_freezePane:this._freezePane,name:this.name,id:this.id}}importData(e){this.relations.importData(e.relations),delete e.relations,Object.assign(this,e)}setSharedStringCollection(e){this.sharedStrings=e}addTable(e){this._tables.push(e),this.relations.addRelation(e,"table")}addDrawings(e){this._drawings.push(e),this.relations.addRelation(e,"drawingRelationship")}setRowInstructions(e,t){this._rowInstructions[e]=t}setHeader(e){if(!Array.isArray(e))throw"Invalid argument type - setHeader expects an array of three instructions";this._headers=e}setFooter(e){if(!Array.isArray(e))throw"Invalid argument type - setFooter expects an array of three instructions";this._footers=e}compilePageDetailPackage(e){return e=e||"",["&L",this.compilePageDetailPiece(e[0]||""),"&C",this.compilePageDetailPiece(e[1]||""),"&R",this.compilePageDetailPiece(e[2]||"")].join("")}compilePageDetailPiece(e){if(Ec(e))return'&"-,Regular"'.concat(e);if(wc(e)&&!Array.isArray(e)){let t="";if(e.font||e.bold){const i=e.bold?"Bold":"Regular";t+=`&"${e.font||"-"}`,t+=`,${i}"`}else t+='&"-,Regular"';return e.underline&&(t+="&U"),e.fontSize&&(t+=`&${e.fontSize}`),t+=e.text,t}return Array.isArray(e)?e.reduce(((e,t)=>e.concat(this.compilePageDetailPiece(t))),""):void 0}exportHeader(e){const t=e.createElement("oddHeader");return t.appendChild(e.createTextNode(this.compilePageDetailPackage(this._headers))),t}exportFooter(e){const t=e.createElement("oddFooter");return t.appendChild(e.createTextNode(this.compilePageDetailPackage(this._footers))),t}_buildCache(e){const t=e.createElement("c"),i=e.createElement("v");i.appendChild(e.createTextNode("--temp--")),t.appendChild(i);const n=e.createElement("c"),s=e.createElement("f");s.appendChild(e.createTextNode("--temp--")),n.appendChild(s);const r=e.createElement("c");r.setAttribute("t","s");const o=e.createElement("v");return o.appendChild(e.createTextNode("--temp--")),r.appendChild(o),{number:t,date:t,string:r,formula:n}}collectSharedStrings(){const e=this.data,t={};for(let i=0,n=e.length;i<n;i++){const n=e[i],s=n.length;for(let e=0;e<s;e++){let i=n[e];const s=(null==i?void 0:i.metadata)||{};i&&"object"==typeof i&&(i=i.value),s.type||"number"==typeof i&&(s.type="number"),("text"===s.type||!s.type)&&typeof t[i]>"u"&&(t[i]=!0)}}return Object.keys(t)}toXML(){var e,t,i;const n=this.data,s=this.columns||[],r=Ac.createXmlDoc(Ac.schemas.spreadsheetml,"worksheet"),o=r.documentElement;let a,l,d;o.setAttribute("xmlns:r",Ac.schemas.relationships),o.setAttribute("xmlns:mc",Ac.schemas.markupCompat);let c=0;const h=Ac.createElement(r,"sheetData"),u=this._buildCache(r);for(d=0,l=n.length;d<l;d++){const o=n[d],a=o.length;c=a>c?a:c;const l=r.createElement("row");for(let n=0;n<a;n++){s[n]=s[n]||{};let r,a=o[n];const c=(null==a?void 0:a.metadata)||{};switch(a&&"object"==typeof a&&(a=a.value),c.type||"number"==typeof a&&(c.type="number"),c.type){case"number":r=u.number.cloneNode(!0),r.firstChild.firstChild.nodeValue=a;break;case"date":r=u.date.cloneNode(!0),a instanceof Date&&(a=a.getTime()),r.firstChild.firstChild.nodeValue=25569+(a-this._timezoneOffset)/864e5;break;case"formula":r=u.formula.cloneNode(!0),r.firstChild.firstChild.nodeValue=a;break;default:{let i;i=typeof(null==(e=this.sharedStrings)?void 0:e.strings[a])<"u"?this.sharedStrings.strings[a]:null==(t=this.sharedStrings)?void 0:t.addString(a),r=u.string.cloneNode(!0),r.firstChild.firstChild.nodeValue=i;break}}c.style?r.setAttribute("s",c.style):void 0!==(null==(i=this._rowInstructions[d])?void 0:i.style)&&r.setAttribute("s",this._rowInstructions[d].style),r.setAttribute("r",Ac.positionToLetterRef(n+1,String(d+1))),l.appendChild(r)}if(l.setAttribute("r",d+1),this._rowInstructions[d]){const e=this._rowInstructions[d];void 0!==e.height&&(l.setAttribute("customHeight","1"),l.setAttribute("ht",e.height)),void 0!==e.style&&(l.setAttribute("customFormat","1"),l.setAttribute("s",e.style))}h.appendChild(l)}if(0!==c?o.appendChild(Ac.createElement(r,"dimension",[["ref",`${Ac.positionToLetterRef(1,1)}:${Ac.positionToLetterRef(c,String(n.length))}`]])):o.appendChild(Ac.createElement(r,"dimension",[["ref",Ac.positionToLetterRef(1,1)]])),o.appendChild(this.sheetView.exportXML(r)),this.columns.length&&o.appendChild(this.exportColumns(r)),o.appendChild(h),this.sheetProtection&&o.appendChild(this.sheetProtection.exportXML(r)),this.hyperlinks.length>0){const e=r.createElement("hyperlinks"),t=this.hyperlinks;for(a=0,l=t.length;a<l;a++){const i=r.createElement("hyperlink"),n=t[a];i.setAttribute("ref",String(n.cell)),n.id=Ac.uniqueId("hyperlink"),this.relations.addRelation({id:n.id,target:n.location,targetMode:n.targetMode||"External"},"hyperlink"),i.setAttribute("r:id",this.relations.getRelationshipId(n)),e.appendChild(i)}o.appendChild(e)}if(this.mergedCells.length>0){const e=r.createElement("mergeCells");for(a=0,l=this.mergedCells.length;a<l;a++){const t=r.createElement("mergeCell");t.setAttribute("ref",`${this.mergedCells[a][0]}:${this.mergedCells[a][1]}`),e.appendChild(t)}o.appendChild(e)}if(this.exportPageSettings(r,o),this._headers.length>0||this._footers.length>0){const e=r.createElement("headerFooter");this._headers.length>0&&e.appendChild(this.exportHeader(r)),this._footers.length>0&&e.appendChild(this.exportFooter(r)),o.appendChild(e)}for(a=0,l=this._drawings.length;a<l;a++){const e=r.createElement("drawing");e.setAttribute("r:id",this.relations.getRelationshipId(this._drawings[a])),o.appendChild(e)}if(this._tables.length>0){const e=r.createElement("tableParts");for(e.setAttribute("count",this._tables.length),a=0,l=this._tables.length;a<l;a++){const t=r.createElement("tablePart");t.setAttribute("r:id",this.relations.getRelationshipId(this._tables[a])),e.appendChild(t)}o.appendChild(e)}return r}exportColumns(e){const t=Ac.createElement(e,"cols");for(let i=0,n=this.columns.length;i<n;i++){const n=this.columns[i],s=Ac.createElement(e,"col",[["min",n.min||i+1],["max",n.max||i+1]]);n.hidden&&s.setAttribute("hidden",String(1)),n.bestFit&&s.setAttribute("bestFit",String(1)),(n.customWidth||n.width)&&s.setAttribute("customWidth",String(1)),n.width?s.setAttribute("width",n.width):s.setAttribute("width",String(9.140625)),t.appendChild(s)}return t}exportPageSettings(e,t){if(this._margin){let i=.7;const n=this._margin.left?this._margin.left:i,s=this._margin.right?this._margin.right:i,r=this._margin.top?this._margin.top:i,o=this._margin.bottom?this._margin.bottom:i;i=.3;const a=this._margin.header?this._margin.header:i,l=this._margin.footer?this._margin.footer:i;t.appendChild(Ac.createElement(e,"pageMargins",[["top",r],["bottom",o],["left",n],["right",s],["header",a],["footer",l]]))}this._orientation&&t.appendChild(Ac.createElement(e,"pageSetup",[["orientation",this._orientation]]))}setPageOrientation(e){this._orientation=e}setPageMargin(e){this._margin=e}setColumns(e){this.columns=e}setData(e){this.data=e}mergeCells(e,t){this.mergedCells.push([e,t])}freezePane(e,t,i){this.sheetView.freezePane(e,t,i)}setColumnFormats(e){this.columnFormats=e}}class $c{constructor(){Sc(this,"id",Pc("Workbook")),Sc(this,"styleSheet",new Hc),Sc(this,"sharedStrings",new Nc),Sc(this,"relations",new Mc),Sc(this,"worksheets",[]),Sc(this,"tables",[]),Sc(this,"drawings",[]),Sc(this,"media",{}),Sc(this,"printTitles"),this.initialize()}initialize(){this.id=Pc("Workbook"),this.styleSheet=new Hc,this.sharedStrings=new Nc,this.relations=new Mc,this.relations.addRelation(this.styleSheet,"stylesheet"),this.relations.addRelation(this.sharedStrings,"sharedStrings")}createWorksheet(e){return e=Object.assign({},{name:"Sheet ".concat(String(this.worksheets.length+1))},e),new zc(e)}getStyleSheet(){return this.styleSheet}addTable(e){this.tables.push(e)}addDrawings(e){this.drawings.push(e)}setPrintTitleTop(e,t){null==this.printTitles&&(this.printTitles={}),null==this.printTitles[e]&&(this.printTitles[e]={}),this.printTitles[e].top=t}setPrintTitleLeft(e,t){null==this.printTitles&&(this.printTitles={}),null==this.printTitles[e]&&(this.printTitles[e]={}),this.printTitles[e].left=String.fromCharCode(64+t)}addMedia(e,t,i,n){const s=t.split("."),r=s[s.length-1];if(!n)switch(r.toLowerCase()){case"jpeg":case"jpg":n="image/jpeg";break;case"png":n="image/png";break;case"gif":n="image/gif";break;default:n=null}return this.media[t]||(this.media[t]={id:t,data:i,fileName:t,contentType:n,extension:r}),this.media[t]}addWorksheet(e){this.relations.addRelation(e,"worksheet"),e.setSharedStringCollection(this.sharedStrings),this.worksheets.push(e)}createContentTypes(){const e=Ac.createXmlDoc(Ac.schemas.contentTypes,"Types"),t=e.documentElement;let i,n;t.appendChild(Ac.createElement(e,"Default",[["Extension","rels"],["ContentType","application/vnd.openxmlformats-package.relationships+xml"]])),t.appendChild(Ac.createElement(e,"Default",[["Extension","xml"],["ContentType","application/xml"]]));const s={};for(const r in this.media)r in this.media&&(s[this.media[r].extension]=this.media[r].contentType);for(const r in s)r in s&&t.appendChild(Ac.createElement(e,"Default",[["Extension",r],["ContentType",s[r]]]));for(t.appendChild(Ac.createElement(e,"Override",[["PartName","/xl/workbook.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"]])),t.appendChild(Ac.createElement(e,"Override",[["PartName","/xl/sharedStrings.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"]])),t.appendChild(Ac.createElement(e,"Override",[["PartName","/xl/styles.xml"],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"]])),i=0,n=this.worksheets.length;i<n;i++)t.appendChild(Ac.createElement(e,"Override",[["PartName",`/xl/worksheets/sheet${i+1}.xml`],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"]]));for(i=0,n=this.tables.length;i<n;i++)t.appendChild(Ac.createElement(e,"Override",[["PartName",`/xl/tables/table${i+1}.xml`],["ContentType","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml"]]));for(i=0,n=this.drawings.length;i<n;i++)t.appendChild(Ac.createElement(e,"Override",[["PartName",`/xl/drawings/drawing${i+1}.xml`],["ContentType","application/vnd.openxmlformats-officedocument.drawing+xml"]]));return e}toXML(){const e=Ac.createXmlDoc(Ac.schemas.spreadsheetml,"workbook"),t=e.documentElement;t.setAttribute("xmlns:r",Ac.schemas.relationships);const i=Ac.createElement(e,"sheets");for(let r=0,o=this.worksheets.length;r<o;r++){const t=e.createElement("sheet");typeof console<"u"&&this.worksheets[r].name.length>31&&console.log(`Microsoft Excel requires work sheet names to be less than 32 characters long, work sheet name "${this.worksheets[r].name}" is ${this.worksheets[r].name.length} characters long`),t.setAttribute("name",this.worksheets[r].name),t.setAttribute("sheetId",r+1),t.setAttribute("r:id",this.relations.getRelationshipId(this.worksheets[r])),i.appendChild(t)}t.appendChild(i);const n=Ac.createElement(e,"definedNames");let s=0;for(const r in this.printTitles)if(r in this.printTitles){const t=this.printTitles[r],i=e.createElement("definedName");i.setAttribute("name","_xlnm.Print_Titles"),i.setAttribute("localSheetId",s++);let o="";t.top&&(o+=`${r}!$1:$${t.top}`,t.left&&(o+=",")),t.left&&(o+=`${r}!$A:$${t.left}`),i.appendChild(e.createTextNode(o)),n.appendChild(i)}return t.appendChild(n),e}createWorkbookRelationship(){const e=Ac.createXmlDoc(Ac.schemas.relationshipPackage,"Relationships");return e.documentElement.appendChild(Ac.createElement(e,"Relationship",[["Id","rId1"],["Type",Ac.schemas.officeDocument],["Target","xl/workbook.xml"]])),e}_generateCorePaths(e){let t,i;for(Fc[this.styleSheet.id]="styles.xml",Fc[this.sharedStrings.id]="sharedStrings.xml",Fc[this.id]="/xl/workbook.xml",t=0,i=this.tables.length;t<i;t++)e[`/xl/tables/table${t+1}.xml`]=this.tables[t].toXML(),Fc[this.tables[t].id]=`/xl/tables/table${t+1}.xml`;for(const n in this.media)if(n in this.media){const t=this.media[n];e[`/xl/media/${n}`]=t.data,Fc[n]=`/xl/media/${n}`}for(t=0,i=this.drawings.length;t<i;t++)e[`/xl/drawings/drawing${t+1}.xml`]=this.drawings[t].toXML(),Fc[this.drawings[t].id]=`/xl/drawings/drawing${t+1}.xml`,e[`/xl/drawings/_rels/drawing${t+1}.xml.rels`]=this.drawings[t].relations.toXML()}_prepareFilesForPackaging(e){Object.assign(e,{"/[Content_Types].xml":this.createContentTypes(),"/_rels/.rels":this.createWorkbookRelationship(),"/xl/styles.xml":this.styleSheet.toXML(),"/xl/workbook.xml":this.toXML(),"/xl/sharedStrings.xml":this.sharedStrings.toXML(),"/xl/_rels/workbook.xml.rels":this.relations.toXML()});for(const[t,i]of Object.entries(e))if(-1!==t.indexOf(".xml")||-1!==t.indexOf(".rels")){e[t]=i instanceof Tc?i.toString():i.xml||(new window.XMLSerializer).serializeToString(i);let n=e[t].replace(/xmlns=""/g,"");n=n.replace(/NS[\d]+:/g,""),n=n.replace(/xmlns:NS[\d]+=""/g,""),e[t]=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\n${n}`}}generateFiles(){return new Promise((e=>{const t={};this._generateCorePaths(t);for(let i=0,n=this.worksheets.length;i<n;i++)t[`/xl/worksheets/sheet${i+1}.xml`]=this.worksheets[i].toXML(),Fc[this.worksheets[i].id]=`worksheets/sheet${i+1}.xml`,t[`/xl/worksheets/_rels/sheet${i+1}.xml.rels`]=this.worksheets[i].relations.toXML();return this._prepareFilesForPackaging(t),e(t)}))}}function Uc(e,t,i){if("node"===(null==i?void 0:i.downloadType))throw new Error('[Excel-Builder-Vanilla] Please note that `downloadExcelFile()` is currently only supporting the "browser" download type at the moment.');const n=t.match(/.*\.xls$/)?"xls":"xlsx";return function(e,t,i){const n={};return new Promise(((s,r)=>{e.generateFiles().then((e=>{for(const[t,i]of Object.entries(e))n[t.substr(1)]=mc(i);return bc(n,(null==i?void 0:i.zipOptions)||{},((e,n)=>{if(e)r(e);else if("Uint8Array"===t)s(n);else{const e=(null==i?void 0:i.fileFormat)??"xlsx";let t=null==i?void 0:i.mimeType;void 0===t&&(t="xls"===e?"application/vnd.ms-excel":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),s(new Blob([n],{type:t}))}}))}))}))}(e,"Blob",{...i,fileFormat:n}).then((e=>{!function(e,t){const i=document.createElement("a"),n=URL.createObjectURL(t);i&&document&&(i.textContent="download",i.href=n,i.setAttribute("download",e),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(n))}(t,e)}))}const Vc=(e,t)=>{let{excelFormatId:i}=t;return void 0!==i?{value:e,metadata:{style:i}}:e},Wc=(e,t)=>{let{columnDef:i,excelFormatId:n,gridOptions:s}=t;return{value:"string"===typeof e&&/\d/g.test(e)?jc(e,i,s):e,metadata:{style:n}}};function jc(e,t,i){let n=e;if("string"===typeof e&&e){const s=","===xo("decimalSeparator",t,i,g.DEFAULT_NUMBER_DECIMAL_SEPARATOR)?parseFloat(e.replace(/[^0-9,-]+/g,"").replace(",",".")):parseFloat(e.replace(/[^\d.-]/g,""));n=isNaN(s)?e:s}return n}function Gc(e,t,i,n){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const r=$(i);let o,a=Vc;return r===y.number&&s&&(o=qc(e,t,i,n,"cell").excelFormat.id,a=Wc),{excelFormatId:o,getDataValueParser:a}}function Yc(e,t){return e?.[t.groupType]?.[t.columnDef.field]??0}function Kc(e){let t;switch(e){case el.currency:case el.dollar:case el.dollarColored:case el.dollarColoredBold:t="currency";break;case el.percent:case el.percentComplete:case el.percentCompleteBar:case el.percentCompleteBarWithText:case el.percentSymbol:t="percent";break;default:t="decimal"}return t}function qc(e,t,i,n,s){let r,o="",a=i.groupTotalsExcelExportOptions?.groupType||"";const l=$(i);if("group"===s)switch(i.groupTotalsFormatter){case tl:case il:case nl:case sl:a="avg";break;case ol:a="min";break;case rl:a="max";break;case al:case ll:case dl:case cl:case hl:case ul:case gl:case ml:case pl:a="sum";break;default:r=t.numberFormat}else if(l===y.number)switch(i.formatter){case el.multiple:if(Array.isArray(i.params?.formatters))for(const o of i.params.formatters){const{excelFormat:a}=qc(e,t,{...i,formatter:o},n,s);if(a!==t.numberFormat){r=a;break}}r||(r=t.numberFormat);break;case el.currency:case el.decimal:case el.dollar:case el.dollarColored:case el.dollarColoredBold:case el.percent:case el.percentComplete:case el.percentCompleteBar:case el.percentCompleteBarWithText:case el.percentSymbol:o=Qc(i,n,"cell");break;default:r=t.numberFormat}return r||!i.formatter&&!i.groupTotalsFormatter||(o=Qc(i,n,s,a),t.hasOwnProperty(o)||(t[o]=e.createFormat({format:o})),r=t[o]),{excelFormat:r,groupType:a}}function Xc(e){const[t,i,n,s,r,o,a,l]=e?.match(/^([^\d(-]*)([(]?)([^\d]*)([-]?[\w]]?[\d\s]*[.,\d]*[\d]*[^)\s%]?)([^\d.,)]*)([)]?)([^\d]*)$/i)||[],d=(r||"").replace(/1/g,"0").replace(/[2]/g,"#");return[Zc(i??""),n??"",Zc(s??""),d,Zc(o??""),a??"",Zc(l??"")].join("").replace(",",",")}function Qc(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s="",r="",o="";const{minDecimal:a,maxDecimal:l,thousandSeparator:d}=function(e,t,i){let n;if("group"===i)switch(e.groupTotalsFormatter){case il:case nl:case cl:case hl:case ul:case pl:case ml:case gl:n="currency";break;case sl:n="percent";break;default:n="decimal"}else if(e.formatter===el.multiple&&Array.isArray(e.params?.formatters)){n="decimal";for(const t of e.params.formatters)if(n=Kc(t),"decimal"!==n)break}else n=Kc(e.formatter);return Oo(e,t,n,i)}(e,t,i),c=parseFloat(`${d?"2220":"0"}.${function(e,t){return Jc("1",e)+Jc("2",t-e)}(a,l)}`);return"group"===i&&e.groupTotalsFormatter?(r=Ze(e.groupTotalsFormatter({[n]:{[e.field]:c}},e,t)),o=Ze(e.groupTotalsFormatter({[n]:{[e.field]:-c}},e,t))):e.formatter&&(r=Ze(e.formatter(0,0,c,e,{},t)),o=Ze(e.formatter(0,0,-c,e,{},t))),r&&o&&(s=Xc(r)+";"+Xc(o)),s}function Zc(e){return e?`"${e}"`:e}function Jc(e,t){let i="";for(let n=0;n<t;n++)i+=e;return i}const eh={filename:"export",format:_.xlsx};function th(e,t,i){return t<=e&&e<=i}function ih(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function nh(e){this.tokens=[].slice.call(e)}nh.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var sh=-1;var rh="utf-8";function oh(e,t){if(!(this instanceof oh))return new oh(e,t);if((e=void 0!==e?String(e).toLowerCase():rh)!==rh)throw new Error("Encoding not supported. Only utf-8 is supported");t=ih(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function ah(e){e.fatal;this.handler=function(e,t){if(-1===t)return sh;if(th(t,0,127))return t;var i,n;th(t,128,2047)?(i=1,n=192):th(t,2048,65535)?(i=2,n=224):th(t,65536,1114111)&&(i=3,n=240);for(var s=[(t>>6*i)+n];i>0;){var r=t>>6*(i-1);s.push(128|63&r),i-=1}return s}}oh.prototype={encode:function(e,t){e=e?String(e):"",t=ih(t),this._streaming||(this._encoder=new ah(this._options)),this._streaming=Boolean(t.stream);for(var i,n=[],s=new nh(function(e){for(var t=String(e),i=t.length,n=0,s=[];n<i;){var r=t.charCodeAt(n);if(r<55296||r>57343)s.push(r);else if(56320<=r&&r<=57343)s.push(65533);else if(55296<=r&&r<=56319)if(n===i-1)s.push(65533);else{var o=e.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=1023&r,l=1023&o;s.push(65536+(a<<10)+l),n+=1}else s.push(65533)}n+=1}return s}(e));!s.endOfStream()&&(i=this._encoder.handler(s,s.read()))!==sh;)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;(i=this._encoder.handler(s,s.read()))!==sh;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};const lh={delimiter:v.comma,filename:"export",format:_.csv,useUtf8WithBom:!0};var dh,ch,hh,uh,ph,mh,gh,fh,vh,bh=i(219),yh=i.n(bh);!function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(dh||(dh={})),function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(ch||(ch={})),function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(hh||(hh={})),function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(uh||(uh={})),function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(ph||(ph={})),function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(mh||(mh={})),function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"}(gh||(gh={})),function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth"}(fh||(fh={})),function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"}(vh||(vh={}));const[_h,Sh]=(()=>{const e=()=>{throw new Error("BigInt is not available in this environment")};function t(){throw e()}return t.asIntN=()=>{throw e()},t.asUintN=()=>{throw e()},"undefined"!==typeof BigInt?[BigInt,!0]:[t,!1]})(),[wh,Ch]=(()=>{const e=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!==typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}},!1]})(),[Eh,Oh]=(()=>{const e=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!==typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw e()}static from(){throw e()}constructor(){throw e()}},!1]})(),xh=e=>"number"===typeof e,Th=e=>"boolean"===typeof e,kh=e=>"function"===typeof e,Ih=e=>null!=e&&Object(e)===e,Rh=e=>Ih(e)&&kh(e.then),Ah=e=>Ih(e)&&kh(e[Symbol.iterator]),Dh=e=>Ih(e)&&kh(e[Symbol.asyncIterator]),Ph=e=>Ih(e)&&Ih(e.schema),Fh=e=>Ih(e)&&"done"in e&&"value"in e,Mh=e=>Ih(e)&&kh(e.stat)&&xh(e.fd),Lh=e=>Ih(e)&&Bh(e.body),Nh=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Bh=e=>Ih(e)&&kh(e.cancel)&&kh(e.getReader)&&!Nh(e),Hh=e=>Ih(e)&&kh(e.read)&&kh(e.pipe)&&Th(e.readable)&&!Nh(e);function zh(e){if(null===e)return"null";if(undefined===e)return"undefined";switch(typeof e){case"number":case"bigint":return`${e}`;case"string":return`"${e}"`}return"function"===typeof e[Symbol.toPrimitive]?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof wh||e instanceof Eh?`[${[...e].map((e=>zh(e)))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,((e,t)=>"bigint"===typeof t?`${t}`:t))}function $h(e,t,i,n){return new(i||(i=Promise))((function(s,r){function o(e){try{l(n.next(e))}catch(_b){r(_b)}}function a(e){try{l(n.throw(e))}catch(_b){r(_b)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))}Object.create;function Uh(e){var t="function"===typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vh(e){return this instanceof Vh?(this.v=e,this):new Vh(e)}function Wh(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),r=[];return n=Object.create(("function"===typeof AsyncIterator?AsyncIterator:Object).prototype),o("next"),o("throw"),o("return",(function(e){return function(t){return Promise.resolve(t).then(e,d)}})),n[Symbol.asyncIterator]=function(){return this},n;function o(e,t){s[e]&&(n[e]=function(t){return new Promise((function(i,n){r.push([e,t,i,n])>1||a(e,t)}))},t&&(n[e]=t(n[e])))}function a(e,t){try{!function(e){e.value instanceof Vh?Promise.resolve(e.value.v).then(l,d):c(r[0][2],e)}(s[e](t))}catch(_b){c(r[0][3],_b)}}function l(e){a("next",e)}function d(e){a("throw",e)}function c(e,t){e(t),r.shift(),r.length&&a(r[0][0],r[0][1])}}function jh(e){var t,i;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(i=!i)?{value:Vh(e[n](t)),done:!1}:s?s(t):t}:s}}function Gh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=Uh(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){(function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)})(n,s,(t=e[i](t)).done,t.value)}))}}}Object.create;"function"===typeof SuppressedError&&SuppressedError;const Yh=new TextDecoder("utf-8"),Kh=e=>Yh.decode(e),qh=new TextEncoder,Xh=e=>qh.encode(e),Qh="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Zh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.byteLength;const s=e.byteLength,r=new Uint8Array(e.buffer,e.byteOffset,s),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(n,s));return r.set(o,i),e}function Jh(e,t){const i=function(e){const t=e[0]?[e[0]]:[];let i,n,s,r;for(let o,a,l=0,d=0,c=e.length;++l<c;)o=t[d],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset?a&&(t[++d]=a):(({byteOffset:i,byteLength:s}=o),({byteOffset:n,byteLength:r}=a),i+s<n||n+r<i?a&&(t[++d]=a):t[d]=new Uint8Array(o.buffer,i,n-i+r));return t}(e),n=i.reduce(((e,t)=>e+t.byteLength),0);let s,r,o,a=0,l=-1;const d=Math.min(t||Number.POSITIVE_INFINITY,n);for(const c=i.length;++l<c;){if(s=i[l],r=s.subarray(0,Math.min(s.length,d-a)),d<=a+r.length){r.length<s.length?i[l]=s.subarray(r.length):r.length===s.length&&l++,o?Zh(o,r,a):o=r;break}Zh(o||(o=new Uint8Array(d)),r,a),a+=r.length}return[o||new Uint8Array(0),i.slice(l),n-(o?o.byteLength:0)]}function eu(e,t){let i=Fh(t)?t.value:t;return i instanceof e?e===Uint8Array?new e(i.buffer,i.byteOffset,i.byteLength):i:i?("string"===typeof i&&(i=Xh(i)),i instanceof ArrayBuffer||i instanceof Qh?new e(i):(e=>Ih(e)&&kh(e.clear)&&kh(e.bytes)&&kh(e.position)&&kh(e.setPosition)&&kh(e.capacity)&&kh(e.getBufferIdentifier)&&kh(e.createLong))(i)?eu(e,i.bytes()):ArrayBuffer.isView(i)?i.byteLength<=0?new e(0):new e(i.buffer,i.byteOffset,i.byteLength/e.BYTES_PER_ELEMENT):e.from(i)):new e(0)}const tu=e=>eu(Int32Array,e),iu=e=>eu(Uint8Array,e),nu=e=>(e.next(),e);function*su(e,t){const i=function*(e){yield e},n="string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Qh?i(t):Ah(t)?t:i(t);return yield*nu(function*(t){let i=null;do{i=t.next(yield eu(e,i))}while(!i.done)}(n[Symbol.iterator]())),new e}function ru(e,t){return Wh(this,arguments,(function*(){if(Rh(t))return yield Vh(yield Vh(yield*jh(Gh(ru(e,yield Vh(t))))));const i=function(e){return Wh(this,arguments,(function*(){yield yield Vh(yield Vh(e))}))},n="string"===typeof t||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Qh?i(t):Ah(t)?function(e){return Wh(this,arguments,(function*(){yield Vh(yield*jh(Gh(nu(function*(e){let t=null;do{t=e.next(yield null===t||void 0===t?void 0:t.value)}while(!t.done)}(e[Symbol.iterator]())))))}))}(t):Dh(t)?t:i(t);return yield Vh(yield*jh(Gh(nu(function(t){return Wh(this,arguments,(function*(){let i=null;do{i=yield Vh(t.next(yield yield Vh(eu(e,i))))}while(!i.done)}))}(n[Symbol.asyncIterator]()))))),yield Vh(new e)}))}function ou(e,t,i){if(0!==e){i=i.slice(0,t+1);for(let n=-1;++n<=t;)i[n]+=e}return i}const au=Symbol.for("isArrowBigNum");function lu(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return 0===i.length?Object.setPrototypeOf(eu(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...i),this.constructor.prototype)}function du(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return lu.apply(this,t)}function cu(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return lu.apply(this,t)}function hu(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return lu.apply(this,t)}function uu(e){const{buffer:t,byteOffset:i,length:n,signed:s}=e,r=new Eh(t,i,n),o=s&&r[r.length-1]&BigInt(1)<<BigInt(63);let a=o?BigInt(1):BigInt(0),l=BigInt(0);if(o){for(const e of r)a+=~e*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const d of r)a+=d*(BigInt(1)<<BigInt(32)*l++);return a}let pu,mu;function gu(e){let t="";const i=new Uint32Array(2);let n=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const s=new Uint32Array((n=new Uint16Array(n).reverse()).buffer);let r=-1;const o=n.length-1;do{for(i[0]=n[r=0];r<o;)n[r++]=i[1]=i[0]/10,i[0]=(i[0]-10*i[1]<<16)+n[r];n[r]=i[1]=i[0]/10,i[0]=i[0]-10*i[1],t=`${i[0]}${t}`}while(s[0]||s[1]||s[2]||s[3]);return null!==t&&void 0!==t?t:"0"}lu.prototype[au]=!0,lu.prototype.toJSON=function(){return`"${pu(this)}"`},lu.prototype.valueOf=function(){return uu(this)},lu.prototype.toString=function(){return pu(this)},lu.prototype[Symbol.toPrimitive]=function(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"){case"number":return uu(this);case"string":return pu(this);case"default":return mu(this)}return pu(this)},Object.setPrototypeOf(du.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(cu.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(hu.prototype,Object.create(Uint32Array.prototype)),Object.assign(du.prototype,lu.prototype,{constructor:du,signed:!0,TypedArray:Int32Array,BigIntArray:wh}),Object.assign(cu.prototype,lu.prototype,{constructor:cu,signed:!1,TypedArray:Uint32Array,BigIntArray:Eh}),Object.assign(hu.prototype,lu.prototype,{constructor:hu,signed:!0,TypedArray:Uint32Array,BigIntArray:Eh}),Sh?(mu=e=>8===e.byteLength?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:gu(e),pu=e=>8===e.byteLength?`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`:gu(e)):(pu=gu,mu=pu);class fu{static new(e,t){switch(t){case!0:return new du(e);case!1:return new cu(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case wh:return new du(e)}return 16===e.byteLength?new hu(e):new cu(e)}static signed(e){return new du(e)}static unsigned(e){return new cu(e)}static decimal(e){return new hu(e)}constructor(e,t){return fu.new(e,t)}}var vu,bu,yu,_u,Su,wu,Cu,Eu,Ou,xu,Tu,ku,Iu,Ru,Au,Du,Pu,Fu,Mu,Lu;class Nu{static isNull(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Null}static isInt(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Int}static isFloat(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Float}static isBinary(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Binary}static isUtf8(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Utf8}static isBool(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Bool}static isDecimal(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Decimal}static isDate(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Date}static isTime(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Time}static isTimestamp(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Timestamp}static isInterval(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Interval}static isList(e){return(null===e||void 0===e?void 0:e.typeId)===fh.List}static isStruct(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Struct}static isUnion(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Union}static isFixedSizeBinary(e){return(null===e||void 0===e?void 0:e.typeId)===fh.FixedSizeBinary}static isFixedSizeList(e){return(null===e||void 0===e?void 0:e.typeId)===fh.FixedSizeList}static isMap(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Map}static isDictionary(e){return(null===e||void 0===e?void 0:e.typeId)===fh.Dictionary}static isDenseUnion(e){return Nu.isUnion(e)&&e.mode===ch.Dense}static isSparseUnion(e){return Nu.isUnion(e)&&e.mode===ch.Sparse}get typeId(){return fh.NONE}}vu=Symbol.toStringTag,Nu[vu]=((Lu=Nu.prototype).children=null,Lu.ArrayType=Array,Lu[Symbol.toStringTag]="DataType");class Bu extends Nu{toString(){return"Null"}get typeId(){return fh.Null}}bu=Symbol.toStringTag,Bu[bu]=(e=>e[Symbol.toStringTag]="Null")(Bu.prototype);class Hu extends Nu{constructor(e,t){super(),this.isSigned=e,this.bitWidth=t}get typeId(){return fh.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?wh:Eh}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}yu=Symbol.toStringTag,Hu[yu]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Hu.prototype);class zu extends Hu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(class extends Hu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(class extends Hu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(zu.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(class extends Hu{constructor(){super(!0,64)}get ArrayType(){return wh}}.prototype,"ArrayType",{value:wh}),Object.defineProperty(class extends Hu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(class extends Hu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends Hu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(class extends Hu{constructor(){super(!1,64)}get ArrayType(){return Eh}}.prototype,"ArrayType",{value:Eh});class $u extends Nu{constructor(e){super(),this.precision=e}get typeId(){return fh.Float}get ArrayType(){switch(this.precision){case hh.HALF:return Uint16Array;case hh.SINGLE:return Float32Array;case hh.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_u=Symbol.toStringTag,$u[_u]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))($u.prototype);Object.defineProperty(class extends $u{constructor(){super(hh.HALF)}}.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(class extends $u{constructor(){super(hh.SINGLE)}}.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(class extends $u{constructor(){super(hh.DOUBLE)}}.prototype,"ArrayType",{value:Float64Array});class Uu extends Nu{constructor(){super()}get typeId(){return fh.Binary}toString(){return"Binary"}}Su=Symbol.toStringTag,Uu[Su]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(Uu.prototype);class Vu extends Nu{constructor(){super()}get typeId(){return fh.Utf8}toString(){return"Utf8"}}wu=Symbol.toStringTag,Vu[wu]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(Vu.prototype);class Wu extends Nu{constructor(){super()}get typeId(){return fh.Bool}toString(){return"Bool"}}Cu=Symbol.toStringTag,Wu[Cu]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(Wu.prototype);class ju extends Nu{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128;super(),this.scale=e,this.precision=t,this.bitWidth=i}get typeId(){return fh.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}Eu=Symbol.toStringTag,ju[Eu]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(ju.prototype);class Gu extends Nu{constructor(e){super(),this.unit=e}get typeId(){return fh.Date}toString(){return`Date${32*(this.unit+1)}<${uh[this.unit]}>`}}Ou=Symbol.toStringTag,Gu[Ou]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(Gu.prototype);class Yu extends Nu{constructor(e,t){super(),this.unit=e,this.bitWidth=t}get typeId(){return fh.Time}toString(){return`Time${this.bitWidth}<${ph[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return wh}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}xu=Symbol.toStringTag,Yu[xu]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Yu.prototype);class Ku extends Nu{constructor(e,t){super(),this.unit=e,this.timezone=t}get typeId(){return fh.Timestamp}toString(){return`Timestamp<${ph[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Tu=Symbol.toStringTag,Ku[Tu]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(Ku.prototype);class qu extends Nu{constructor(e){super(),this.unit=e}get typeId(){return fh.Interval}toString(){return`Interval<${mh[this.unit]}>`}}ku=Symbol.toStringTag,qu[ku]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(qu.prototype);class Xu extends Nu{constructor(e){super(),this.children=[e]}get typeId(){return fh.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}Iu=Symbol.toStringTag,Xu[Iu]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(Xu.prototype);class Qu extends Nu{constructor(e){super(),this.children=e}get typeId(){return fh.Struct}toString(){return`Struct<{${this.children.map((e=>`${e.name}:${e.type}`)).join(", ")}}>`}}Ru=Symbol.toStringTag,Qu[Ru]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Qu.prototype);class Zu extends Nu{constructor(e,t,i){super(),this.mode=e,this.children=i,this.typeIds=t=Int32Array.from(t),this.typeIdToChildIndex=t.reduce(((e,t,i)=>(e[t]=i)&&e||e),Object.create(null))}get typeId(){return fh.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((e=>`${e.type}`)).join(" | ")}>`}}Au=Symbol.toStringTag,Zu[Au]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(Zu.prototype);class Ju extends Nu{constructor(e){super(),this.byteWidth=e}get typeId(){return fh.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Du=Symbol.toStringTag,Ju[Du]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Ju.prototype);class ep extends Nu{constructor(e,t){super(),this.listSize=e,this.children=[t]}get typeId(){return fh.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}Pu=Symbol.toStringTag,ep[Pu]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ep.prototype);class tp extends Nu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.children=[e],this.keysSorted=t}get typeId(){return fh.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((e=>`${e.name}:${e.type}`)).join(", ")}}>`}}Fu=Symbol.toStringTag,tp[Fu]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(tp.prototype);const ip=(np=-1,()=>++np);var np;class sp extends Nu{constructor(e,t,i,n){super(),this.indices=t,this.dictionary=e,this.isOrdered=n||!1,this.id=null==i?ip():"number"===typeof i?i:i.low}get typeId(){return fh.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function rp(e){const t=e;switch(e.typeId){case fh.Decimal:return e.bitWidth/32;case fh.Timestamp:return 2;case fh.Date:case fh.Interval:return 1+t.unit;case fh.FixedSizeList:return t.listSize;case fh.FixedSizeBinary:return t.byteWidth;default:return 1}}Mu=Symbol.toStringTag,sp[Mu]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(sp.prototype);class op{visitMany(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.map(((e,t)=>this.visit(e,...i.map((e=>e[t])))))}visit(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(e){return function(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("number"===typeof t)return ap(e,t,i);if("string"===typeof t&&t in fh)return ap(e,fh[t],i);if(t&&t instanceof Nu)return ap(e,lp(t),i);if((null===t||void 0===t?void 0:t.type)&&t.type instanceof Nu)return ap(e,lp(t.type),i);return ap(e,fh.NONE,i)}(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}getVisitFnByTypeId(e){return ap(this,e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}visitNull(e){return null}visitBool(e){return null}visitInt(e){return null}visitFloat(e){return null}visitUtf8(e){return null}visitBinary(e){return null}visitFixedSizeBinary(e){return null}visitDate(e){return null}visitTimestamp(e){return null}visitTime(e){return null}visitDecimal(e){return null}visitList(e){return null}visitStruct(e){return null}visitUnion(e){return null}visitDictionary(e){return null}visitInterval(e){return null}visitFixedSizeList(e){return null}visitMap(e){return null}}function ap(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null;switch(t){case fh.Null:n=e.visitNull;break;case fh.Bool:n=e.visitBool;break;case fh.Int:n=e.visitInt;break;case fh.Int8:n=e.visitInt8||e.visitInt;break;case fh.Int16:n=e.visitInt16||e.visitInt;break;case fh.Int32:n=e.visitInt32||e.visitInt;break;case fh.Int64:n=e.visitInt64||e.visitInt;break;case fh.Uint8:n=e.visitUint8||e.visitInt;break;case fh.Uint16:n=e.visitUint16||e.visitInt;break;case fh.Uint32:n=e.visitUint32||e.visitInt;break;case fh.Uint64:n=e.visitUint64||e.visitInt;break;case fh.Float:n=e.visitFloat;break;case fh.Float16:n=e.visitFloat16||e.visitFloat;break;case fh.Float32:n=e.visitFloat32||e.visitFloat;break;case fh.Float64:n=e.visitFloat64||e.visitFloat;break;case fh.Utf8:n=e.visitUtf8;break;case fh.Binary:n=e.visitBinary;break;case fh.FixedSizeBinary:n=e.visitFixedSizeBinary;break;case fh.Date:n=e.visitDate;break;case fh.DateDay:n=e.visitDateDay||e.visitDate;break;case fh.DateMillisecond:n=e.visitDateMillisecond||e.visitDate;break;case fh.Timestamp:n=e.visitTimestamp;break;case fh.TimestampSecond:n=e.visitTimestampSecond||e.visitTimestamp;break;case fh.TimestampMillisecond:n=e.visitTimestampMillisecond||e.visitTimestamp;break;case fh.TimestampMicrosecond:n=e.visitTimestampMicrosecond||e.visitTimestamp;break;case fh.TimestampNanosecond:n=e.visitTimestampNanosecond||e.visitTimestamp;break;case fh.Time:n=e.visitTime;break;case fh.TimeSecond:n=e.visitTimeSecond||e.visitTime;break;case fh.TimeMillisecond:n=e.visitTimeMillisecond||e.visitTime;break;case fh.TimeMicrosecond:n=e.visitTimeMicrosecond||e.visitTime;break;case fh.TimeNanosecond:n=e.visitTimeNanosecond||e.visitTime;break;case fh.Decimal:n=e.visitDecimal;break;case fh.List:n=e.visitList;break;case fh.Struct:n=e.visitStruct;break;case fh.Union:n=e.visitUnion;break;case fh.DenseUnion:n=e.visitDenseUnion||e.visitUnion;break;case fh.SparseUnion:n=e.visitSparseUnion||e.visitUnion;break;case fh.Dictionary:n=e.visitDictionary;break;case fh.Interval:n=e.visitInterval;break;case fh.IntervalDayTime:n=e.visitIntervalDayTime||e.visitInterval;break;case fh.IntervalYearMonth:n=e.visitIntervalYearMonth||e.visitInterval;break;case fh.FixedSizeList:n=e.visitFixedSizeList;break;case fh.Map:n=e.visitMap}if("function"===typeof n)return n;if(!i)return()=>null;throw new Error(`Unrecognized type '${fh[t]}'`)}function lp(e){switch(e.typeId){case fh.Null:return fh.Null;case fh.Int:{const{bitWidth:t,isSigned:i}=e;switch(t){case 8:return i?fh.Int8:fh.Uint8;case 16:return i?fh.Int16:fh.Uint16;case 32:return i?fh.Int32:fh.Uint32;case 64:return i?fh.Int64:fh.Uint64}return fh.Int}case fh.Float:switch(e.precision){case hh.HALF:return fh.Float16;case hh.SINGLE:return fh.Float32;case hh.DOUBLE:return fh.Float64}return fh.Float;case fh.Binary:return fh.Binary;case fh.Utf8:return fh.Utf8;case fh.Bool:return fh.Bool;case fh.Decimal:return fh.Decimal;case fh.Time:switch(e.unit){case ph.SECOND:return fh.TimeSecond;case ph.MILLISECOND:return fh.TimeMillisecond;case ph.MICROSECOND:return fh.TimeMicrosecond;case ph.NANOSECOND:return fh.TimeNanosecond}return fh.Time;case fh.Timestamp:switch(e.unit){case ph.SECOND:return fh.TimestampSecond;case ph.MILLISECOND:return fh.TimestampMillisecond;case ph.MICROSECOND:return fh.TimestampMicrosecond;case ph.NANOSECOND:return fh.TimestampNanosecond}return fh.Timestamp;case fh.Date:switch(e.unit){case uh.DAY:return fh.DateDay;case uh.MILLISECOND:return fh.DateMillisecond}return fh.Date;case fh.Interval:switch(e.unit){case mh.DAY_TIME:return fh.IntervalDayTime;case mh.YEAR_MONTH:return fh.IntervalYearMonth}return fh.Interval;case fh.Map:return fh.Map;case fh.List:return fh.List;case fh.Struct:return fh.Struct;case fh.Union:switch(e.mode){case ch.Dense:return fh.DenseUnion;case ch.Sparse:return fh.SparseUnion}return fh.Union;case fh.FixedSizeBinary:return fh.FixedSizeBinary;case fh.FixedSizeList:return fh.FixedSizeList;case fh.Dictionary:return fh.Dictionary}throw new Error(`Unrecognized type '${fh[e.typeId]}'`)}op.prototype.visitInt8=null,op.prototype.visitInt16=null,op.prototype.visitInt32=null,op.prototype.visitInt64=null,op.prototype.visitUint8=null,op.prototype.visitUint16=null,op.prototype.visitUint32=null,op.prototype.visitUint64=null,op.prototype.visitFloat16=null,op.prototype.visitFloat32=null,op.prototype.visitFloat64=null,op.prototype.visitDateDay=null,op.prototype.visitDateMillisecond=null,op.prototype.visitTimestampSecond=null,op.prototype.visitTimestampMillisecond=null,op.prototype.visitTimestampMicrosecond=null,op.prototype.visitTimestampNanosecond=null,op.prototype.visitTimeSecond=null,op.prototype.visitTimeMillisecond=null,op.prototype.visitTimeMicrosecond=null,op.prototype.visitTimeNanosecond=null,op.prototype.visitDenseUnion=null,op.prototype.visitSparseUnion=null,op.prototype.visitIntervalDayTime=null,op.prototype.visitIntervalYearMonth=null;const dp=new Float64Array(1),cp=new Uint32Array(dp.buffer);function hp(e){const t=(31744&e)>>10,i=(1023&e)/1024,n=Math.pow(-1,(32768&e)>>15);switch(t){case 31:return n*(i?Number.NaN:1/0);case 0:return n*(i?6103515625e-14*i:0)}return n*Math.pow(2,t-15)*(1+i)}class up extends op{}function pp(e){return(t,i,n)=>{if(t.setValid(i,null!=n))return e(t,i,n)}}const mp=(e,t,i)=>{e[t]=Math.trunc(i%4294967296),e[t+1]=Math.trunc(i/4294967296)},gp=(e,t,i,n)=>{if(i+1<t.length){const{[i]:s,[i+1]:r}=t;e.set(n.subarray(0,r-s),s)}},fp=(e,t,i)=>{let{values:n}=e;n[t]=i},vp=(e,t,i)=>{let{values:n}=e;n[t]=i},bp=(e,t,i)=>{let{values:n}=e;n[t]=function(e){if(e!==e)return 32256;dp[0]=e;const t=(2147483648&cp[1])>>16&65535;let i=2146435072&cp[1],n=0;return i>=1089470464?cp[0]>0?i=31744:(i=(2080374784&i)>>16,n=(1048575&cp[1])>>10):i<=1056964608?(n=1048576+(1048575&cp[1]),n=1048576+(n<<(i>>20)-998)>>21,i=0):(i=i-1056964608>>10,n=512+(1048575&cp[1])>>10),t|i|65535&n}(i)},yp=(e,t,i)=>{let{values:n}=e;((e,t,i)=>{e[t]=Math.trunc(i/864e5)})(n,t,i.valueOf())},_p=(e,t,i)=>{let{values:n}=e;mp(n,2*t,i.valueOf())},Sp=(e,t,i)=>{let{values:n}=e;return mp(n,2*t,i/1e3)},wp=(e,t,i)=>{let{values:n}=e;return mp(n,2*t,i)},Cp=(e,t,i)=>{let{values:n}=e;return((e,t,i)=>{e[t]=Math.trunc(1e3*i%4294967296),e[t+1]=Math.trunc(1e3*i/4294967296)})(n,2*t,i)},Ep=(e,t,i)=>{let{values:n}=e;return((e,t,i)=>{e[t]=Math.trunc(1e6*i%4294967296),e[t+1]=Math.trunc(1e6*i/4294967296)})(n,2*t,i)},Op=(e,t,i)=>{let{values:n}=e;n[t]=i},xp=(e,t,i)=>{let{values:n}=e;n[t]=i},Tp=(e,t,i)=>{let{values:n}=e;n[t]=i},kp=(e,t,i)=>{let{values:n}=e;n[t]=i},Ip=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[n];Pp.visit(s,e.valueOffsets[t],i)},Rp=(e,t,i)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],s=e.children[n];Pp.visit(s,t,i)},Ap=(e,t,i)=>{let{values:n}=e;n.set(i.subarray(0,2),2*t)},Dp=(e,t,i)=>{let{values:n}=e;n[t]=12*i[0]+i[1]%12};up.prototype.visitBool=pp(((e,t,i)=>{let{offset:n,values:s}=e;const r=n+t;i?s[r>>3]|=1<<r%8:s[r>>3]&=~(1<<r%8)})),up.prototype.visitInt=pp(fp),up.prototype.visitInt8=pp(fp),up.prototype.visitInt16=pp(fp),up.prototype.visitInt32=pp(fp),up.prototype.visitInt64=pp(fp),up.prototype.visitUint8=pp(fp),up.prototype.visitUint16=pp(fp),up.prototype.visitUint32=pp(fp),up.prototype.visitUint64=pp(fp),up.prototype.visitFloat=pp(((e,t,i)=>{switch(e.type.precision){case hh.HALF:return bp(e,t,i);case hh.SINGLE:case hh.DOUBLE:return vp(e,t,i)}})),up.prototype.visitFloat16=pp(bp),up.prototype.visitFloat32=pp(vp),up.prototype.visitFloat64=pp(vp),up.prototype.visitUtf8=pp(((e,t,i)=>{let{values:n,valueOffsets:s}=e;gp(n,s,t,Xh(i))})),up.prototype.visitBinary=pp(((e,t,i)=>{let{values:n,valueOffsets:s}=e;return gp(n,s,t,i)})),up.prototype.visitFixedSizeBinary=pp(((e,t,i)=>{let{stride:n,values:s}=e;s.set(i.subarray(0,n),n*t)})),up.prototype.visitDate=pp(((e,t,i)=>{e.type.unit===uh.DAY?yp(e,t,i):_p(e,t,i)})),up.prototype.visitDateDay=pp(yp),up.prototype.visitDateMillisecond=pp(_p),up.prototype.visitTimestamp=pp(((e,t,i)=>{switch(e.type.unit){case ph.SECOND:return Sp(e,t,i);case ph.MILLISECOND:return wp(e,t,i);case ph.MICROSECOND:return Cp(e,t,i);case ph.NANOSECOND:return Ep(e,t,i)}})),up.prototype.visitTimestampSecond=pp(Sp),up.prototype.visitTimestampMillisecond=pp(wp),up.prototype.visitTimestampMicrosecond=pp(Cp),up.prototype.visitTimestampNanosecond=pp(Ep),up.prototype.visitTime=pp(((e,t,i)=>{switch(e.type.unit){case ph.SECOND:return Op(e,t,i);case ph.MILLISECOND:return xp(e,t,i);case ph.MICROSECOND:return Tp(e,t,i);case ph.NANOSECOND:return kp(e,t,i)}})),up.prototype.visitTimeSecond=pp(Op),up.prototype.visitTimeMillisecond=pp(xp),up.prototype.visitTimeMicrosecond=pp(Tp),up.prototype.visitTimeNanosecond=pp(kp),up.prototype.visitDecimal=pp(((e,t,i)=>{let{values:n,stride:s}=e;n.set(i.subarray(0,s),s*t)})),up.prototype.visitList=pp(((e,t,i)=>{const n=e.children[0],s=e.valueOffsets,r=Pp.getVisitFn(n);if(Array.isArray(i))for(let o=-1,a=s[t],l=s[t+1];a<l;)r(n,a++,i[++o]);else for(let o=-1,a=s[t],l=s[t+1];a<l;)r(n,a++,i.get(++o))})),up.prototype.visitStruct=pp(((e,t,i)=>{const n=e.type.children.map((e=>Pp.getVisitFn(e.type))),s=i instanceof Map?((e,t)=>(i,n,s,r)=>n&&i(n,e,t.get(s.name)))(t,i):i instanceof Xm?((e,t)=>(i,n,s,r)=>n&&i(n,e,t.get(r)))(t,i):Array.isArray(i)?((e,t)=>(i,n,s,r)=>n&&i(n,e,t[r]))(t,i):((e,t)=>(i,n,s,r)=>n&&i(n,e,t[s.name]))(t,i);e.type.children.forEach(((t,i)=>s(n[i],e.children[i],t,i)))})),up.prototype.visitUnion=pp(((e,t,i)=>{e.type.mode===ch.Dense?Ip(e,t,i):Rp(e,t,i)})),up.prototype.visitDenseUnion=pp(Ip),up.prototype.visitSparseUnion=pp(Rp),up.prototype.visitDictionary=pp(((e,t,i)=>{var n;null===(n=e.dictionary)||void 0===n||n.set(e.values[t],i)})),up.prototype.visitInterval=pp(((e,t,i)=>{e.type.unit===mh.DAY_TIME?Ap(e,t,i):Dp(e,t,i)})),up.prototype.visitIntervalDayTime=pp(Ap),up.prototype.visitIntervalYearMonth=pp(Dp),up.prototype.visitFixedSizeList=pp(((e,t,i)=>{const{stride:n}=e,s=e.children[0],r=Pp.getVisitFn(s);if(Array.isArray(i))for(let o=-1,a=t*n;++o<n;)r(s,a+o,i[o]);else for(let o=-1,a=t*n;++o<n;)r(s,a+o,i.get(o))})),up.prototype.visitMap=pp(((e,t,i)=>{const n=e.children[0],{valueOffsets:s}=e,r=Pp.getVisitFn(n);let{[t]:o,[t+1]:a}=s;const l=i instanceof Map?i.entries():Object.entries(i);for(const d of l)if(r(n,o,d),++o>=a)break}));const Pp=new up,Fp=Symbol.for("parent"),Mp=Symbol.for("rowIndex");class Lp{constructor(e,t){return this[Fp]=e,this[Mp]=t,new Proxy(this,new Bp)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[Mp],t=this[Fp],i=t.type.children,n={};for(let s=-1,r=i.length;++s<r;)n[i[s].name]=om.visit(t.children[s],e);return n}toString(){return`{${[...this].map((e=>{let[t,i]=e;return`${zh(t)}: ${zh(i)}`})).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Np(this[Fp],this[Mp])}}class Np{constructor(e,t){this.childIndex=0,this.children=e.children,this.rowIndex=t,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,om.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Lp.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Fp]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Mp]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Bp{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Fp].type.children.map((e=>e.name))}has(e,t){return-1!==e[Fp].type.children.findIndex((e=>e.name===t))}getOwnPropertyDescriptor(e,t){if(-1!==e[Fp].type.children.findIndex((e=>e.name===t)))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const i=e[Fp].type.children.findIndex((e=>e.name===t));if(-1!==i){const n=om.visit(e[Fp].children[i],e[Mp]);return Reflect.set(e,t,n),n}}set(e,t,i){const n=e[Fp].type.children.findIndex((e=>e.name===t));return-1!==n?(Pp.visit(e[Fp].children[n],e[Mp],i),Reflect.set(e,t,i)):!(!Reflect.has(e,t)&&"symbol"!==typeof t)&&Reflect.set(e,t,i)}}class Hp extends op{}function zp(e){return(t,i)=>t.getValid(i)?e(t,i):null}const $p=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Up=e=>new Date(e),Vp=(e,t,i)=>{if(i+1>=t.length)return null;const n=t[i],s=t[i+1];return e.subarray(n,s)},Wp=(e,t)=>{let{values:i}=e;return((e,t)=>Up(((e,t)=>864e5*e[t])(e,t)))(i,t)},jp=(e,t)=>{let{values:i}=e;return((e,t)=>Up($p(e,t)))(i,2*t)},Gp=(e,t)=>{let{stride:i,values:n}=e;return n[i*t]},Yp=(e,t)=>{let{values:i}=e;return i[t]},Kp=(e,t)=>{let{values:i}=e;return 1e3*$p(i,2*t)},qp=(e,t)=>{let{values:i}=e;return $p(i,2*t)},Xp=(e,t)=>{let{values:i}=e;return((e,t)=>e[t+1]/1e3*4294967296+(e[t]>>>0)/1e3)(i,2*t)},Qp=(e,t)=>{let{values:i}=e;return((e,t)=>e[t+1]/1e6*4294967296+(e[t]>>>0)/1e6)(i,2*t)},Zp=(e,t)=>{let{values:i}=e;return i[t]},Jp=(e,t)=>{let{values:i}=e;return i[t]},em=(e,t)=>{let{values:i}=e;return i[t]},tm=(e,t)=>{let{values:i}=e;return i[t]},im=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return om.visit(n,e.valueOffsets[t])},nm=(e,t)=>{const i=e.type.typeIdToChildIndex[e.typeIds[t]],n=e.children[i];return om.visit(n,t)},sm=(e,t)=>{let{values:i}=e;return i.subarray(2*t,2*(t+1))},rm=(e,t)=>{let{values:i}=e;const n=i[t],s=new Int32Array(2);return s[0]=Math.trunc(n/12),s[1]=Math.trunc(n%12),s};Hp.prototype.visitNull=zp(((e,t)=>null)),Hp.prototype.visitBool=zp(((e,t)=>{let{offset:i,values:n}=e;const s=i+t;return 0!==(n[s>>3]&1<<s%8)})),Hp.prototype.visitInt=zp(((e,t)=>{let{values:i}=e;return i[t]})),Hp.prototype.visitInt8=zp(Gp),Hp.prototype.visitInt16=zp(Gp),Hp.prototype.visitInt32=zp(Gp),Hp.prototype.visitInt64=zp(Yp),Hp.prototype.visitUint8=zp(Gp),Hp.prototype.visitUint16=zp(Gp),Hp.prototype.visitUint32=zp(Gp),Hp.prototype.visitUint64=zp(Yp),Hp.prototype.visitFloat=zp(((e,t)=>{let{type:i,values:n}=e;return i.precision!==hh.HALF?n[t]:hp(n[t])})),Hp.prototype.visitFloat16=zp(((e,t)=>{let{stride:i,values:n}=e;return hp(n[i*t])})),Hp.prototype.visitFloat32=zp(Gp),Hp.prototype.visitFloat64=zp(Gp),Hp.prototype.visitUtf8=zp(((e,t)=>{let{values:i,valueOffsets:n}=e;const s=Vp(i,n,t);return null!==s?Kh(s):null})),Hp.prototype.visitBinary=zp(((e,t)=>{let{values:i,valueOffsets:n}=e;return Vp(i,n,t)})),Hp.prototype.visitFixedSizeBinary=zp(((e,t)=>{let{stride:i,values:n}=e;return n.subarray(i*t,i*(t+1))})),Hp.prototype.visitDate=zp(((e,t)=>e.type.unit===uh.DAY?Wp(e,t):jp(e,t))),Hp.prototype.visitDateDay=zp(Wp),Hp.prototype.visitDateMillisecond=zp(jp),Hp.prototype.visitTimestamp=zp(((e,t)=>{switch(e.type.unit){case ph.SECOND:return Kp(e,t);case ph.MILLISECOND:return qp(e,t);case ph.MICROSECOND:return Xp(e,t);case ph.NANOSECOND:return Qp(e,t)}})),Hp.prototype.visitTimestampSecond=zp(Kp),Hp.prototype.visitTimestampMillisecond=zp(qp),Hp.prototype.visitTimestampMicrosecond=zp(Xp),Hp.prototype.visitTimestampNanosecond=zp(Qp),Hp.prototype.visitTime=zp(((e,t)=>{switch(e.type.unit){case ph.SECOND:return Zp(e,t);case ph.MILLISECOND:return Jp(e,t);case ph.MICROSECOND:return em(e,t);case ph.NANOSECOND:return tm(e,t)}})),Hp.prototype.visitTimeSecond=zp(Zp),Hp.prototype.visitTimeMillisecond=zp(Jp),Hp.prototype.visitTimeMicrosecond=zp(em),Hp.prototype.visitTimeNanosecond=zp(tm),Hp.prototype.visitDecimal=zp(((e,t)=>{let{values:i,stride:n}=e;return fu.decimal(i.subarray(n*t,n*(t+1)))})),Hp.prototype.visitList=zp(((e,t)=>{const{valueOffsets:i,stride:n,children:s}=e,{[t*n]:r,[t*n+1]:o}=i,a=s[0].slice(r,o-r);return new Xm([a])})),Hp.prototype.visitStruct=zp(((e,t)=>new Lp(e,t))),Hp.prototype.visitUnion=zp(((e,t)=>e.type.mode===ch.Dense?im(e,t):nm(e,t))),Hp.prototype.visitDenseUnion=zp(im),Hp.prototype.visitSparseUnion=zp(nm),Hp.prototype.visitDictionary=zp(((e,t)=>{var i;return null===(i=e.dictionary)||void 0===i?void 0:i.get(e.values[t])})),Hp.prototype.visitInterval=zp(((e,t)=>e.type.unit===mh.DAY_TIME?sm(e,t):rm(e,t))),Hp.prototype.visitIntervalDayTime=zp(sm),Hp.prototype.visitIntervalYearMonth=zp(rm),Hp.prototype.visitFixedSizeList=zp(((e,t)=>{const{stride:i,children:n}=e,s=n[0].slice(t*i,i);return new Xm([s])})),Hp.prototype.visitMap=zp(((e,t)=>{const{valueOffsets:i,children:n}=e,{[t]:s,[t+1]:r}=i,o=n[0];return new dm(o.slice(s,r-s))}));const om=new Hp,am=Symbol.for("keys"),lm=Symbol.for("vals");class dm{constructor(e){return this[am]=new Xm([e.children[0]]).memoize(),this[lm]=e.children[1],new Proxy(this,new hm)}[Symbol.iterator](){return new cm(this[am],this[lm])}get size(){return this[am].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[am],t=this[lm],i={};for(let n=-1,s=e.length;++n<s;)i[e.get(n)]=om.visit(t,n);return i}toString(){return`{${[...this].map((e=>{let[t,i]=e;return`${zh(t)}: ${zh(i)}`})).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class cm{constructor(e,t){this.keys=e,this.vals=t,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),om.visit(this.vals,e)]})}}class hm{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[am].toArray().map(String)}has(e,t){return e[am].includes(t)}getOwnPropertyDescriptor(e,t){if(-1!==e[am].indexOf(t))return{writable:!0,enumerable:!0,configurable:!0}}get(e,t){if(Reflect.has(e,t))return e[t];const i=e[am].indexOf(t);if(-1!==i){const n=om.visit(Reflect.get(e,lm),i);return Reflect.set(e,t,n),n}}set(e,t,i){const n=e[am].indexOf(t);return-1!==n?(Pp.visit(Reflect.get(e,lm),n,i),Reflect.set(e,t,i)):!!Reflect.has(e,t)&&Reflect.set(e,t,i)}}let um;function pm(e,t,i,n){const{length:s=0}=e;let r="number"!==typeof t?0:t,o="number"!==typeof i?s:i;return r<0&&(r=(r%s+s)%s),o<0&&(o=(o%s+s)%s),o<r&&(um=r,r=o,o=um),o>s&&(o=s),n?n(e,r,o):[r,o]}Object.defineProperties(dm.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[am]:{writable:!0,enumerable:!1,configurable:!1,value:null},[lm]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const mm=e=>e!==e;function gm(e){if("object"!==typeof e||null===e)return mm(e)?mm:t=>t===e;if(e instanceof Date){const t=e.valueOf();return e=>e instanceof Date&&e.valueOf()===t}return ArrayBuffer.isView(e)?t=>!!t&&function(e,t){let i=0;const n=e.length;if(n!==t.length)return!1;if(n>0)do{if(e[i]!==t[i])return!1}while(++i<n);return!0}(e,t):e instanceof Map?function(e){let t=-1;const i=[];for(const n of e.values())i[++t]=gm(n);return fm(i)}(e):Array.isArray(e)?function(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=gm(e[i]);return fm(t)}(e):e instanceof Xm?function(e){const t=[];for(let i=-1,n=e.length;++i<n;)t[i]=gm(e.get(i));return fm(t)}(e):function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Object.keys(e);if(!t&&0===i.length)return()=>!1;const n=[];for(let s=-1,r=i.length;++s<r;)n[s]=gm(e[i[s]]);return fm(n,i)}(e,!0)}function fm(e,t){return i=>{if(!i||"object"!==typeof i)return!1;switch(i.constructor){case Array:return function(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t[n]))return!1;return!0}(e,i);case Map:return vm(e,i,i.keys());case dm:case Lp:case Object:case void 0:return vm(e,i,t||Object.keys(i))}return i instanceof Xm&&function(e,t){const i=e.length;if(t.length!==i)return!1;for(let n=-1;++n<i;)if(!e[n](t.get(n)))return!1;return!0}(e,i)}}function vm(e,t,i){const n=i[Symbol.iterator](),s=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),r=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=r.next(),d=n.next(),c=s.next();for(;o<a&&!d.done&&!c.done&&!l.done&&(d.value===c.value&&e[o](l.value));++o,d=n.next(),c=s.next(),l=r.next());return!!(o===a&&d.done&&c.done&&l.done)||(n.return&&n.return(),s.return&&s.return(),r.return&&r.return(),!1)}class bm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;this.numChunks=e,this.getChunkIterator=t,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function ym(e){return e.reduce(((e,t)=>e+t.nullCount),0)}function _m(e){return e.reduce(((e,t,i)=>(e[i+1]=e[i]+t.length,e)),new Uint32Array(e.length+1))}function Sm(e,t,i,n){const s=[];for(let r=-1,o=e.length;++r<o;){const o=e[r],a=t[r],{length:l}=o;if(a>=n)break;if(i>=a+l)continue;if(a>=i&&a+l<=n){s.push(o);continue}const d=Math.max(0,i-a),c=Math.min(n-a,l);s.push(o.slice(d,c-d))}return 0===s.length&&s.push(e[0].slice(0,0)),s}function wm(e,t,i,n){let s=0,r=0,o=t.length-1;do{if(s>=o-1)return i<t[o]?n(e,s,i-t[s]):null;r=s+Math.trunc(.5*(o-s)),i<t[r]?o=r:s=r}while(s<o)}function Cm(e,t){return e.getValid(t)}function Em(e){function t(t,i,n){return e(t[i],n)}return function(e){return wm(this.data,this._offsets,e,t)}}function Om(e){let t;function i(i,n,s){return e(i[n],s,t)}return function(e,n){const s=this.data;t=n;const r=wm(s,this._offsets,e,i);return t=void 0,r}}function xm(e){let t;function i(i,n,s){let r=s,o=0,a=0;for(let l=n-1,d=i.length;++l<d;){const n=i[l];if(~(o=e(n,t,r)))return a+o;r=0,a+=n.length}return-1}return function(e,n){t=e;const s=this.data,r="number"!==typeof n?i(s,0,0):wm(s,this._offsets,n,i);return t=void 0,r}}function Tm(e,t,i,n){return 0!==(i&1<<n)}function km(e,t,i,n){return(i&1<<n)>>n}function Im(e,t,i){const n=i.byteLength+7&-8;if(e>0||i.byteLength<n){const s=new Uint8Array(n);return s.set(e%8===0?i.subarray(e>>3):Rm(new Am(i,e,t,null,Tm)).subarray(0,n)),s}return i}function Rm(e){const t=[];let i=0,n=0,s=0;for(const o of e)o&&(s|=1<<n),8===++n&&(t[i++]=s,s=n=0);(0===i||n>0)&&(t[i++]=s);const r=new Uint8Array(t.length+7&-8);return r.set(t),r}class Am{constructor(e,t,i,n,s){this.bytes=e,this.length=i,this.context=n,this.get=s,this.bit=t%8,this.byteIndex=t>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Dm(e,t,i){if(i-t<=0)return 0;if(i-t<8){let n=0;for(const s of new Am(e,t,i-t,e,km))n+=s;return n}const n=i>>3<<3,s=t+(t%8===0?0:8-t%8);return Dm(e,t,s)+Dm(e,n,i)+function(e,t,i){let n=0,s=Math.trunc(t);const r=new DataView(e.buffer,e.byteOffset,e.byteLength),o=void 0===i?e.byteLength:s+i;for(;o-s>=4;)n+=Pm(r.getUint32(s)),s+=4;for(;o-s>=2;)n+=Pm(r.getUint16(s)),s+=2;for(;o-s>=1;)n+=Pm(r.getUint8(s)),s+=1;return n}(e,s>>3,n-s>>3)}function Pm(e){let t=Math.trunc(e);return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24}class Fm extends op{}function Mm(e,t,i){if(void 0===t)return-1;if(null===t)return function(e,t){const{nullBitmap:i}=e;if(!i||e.nullCount<=0)return-1;let n=0;for(const s of new Am(i,e.offset+(t||0),e.length,i,Tm)){if(!s)return n;++n}return-1}(e,i);const n=om.getVisitFn(e),s=gm(t);for(let r=(i||0)-1,o=e.length;++r<o;)if(s(n(e,r)))return r;return-1}function Lm(e,t,i){const n=om.getVisitFn(e),s=gm(t);for(let r=(i||0)-1,o=e.length;++r<o;)if(s(n(e,r)))return r;return-1}Fm.prototype.visitNull=function(e,t){return null===t&&e.length>0?0:-1},Fm.prototype.visitBool=Mm,Fm.prototype.visitInt=Mm,Fm.prototype.visitInt8=Mm,Fm.prototype.visitInt16=Mm,Fm.prototype.visitInt32=Mm,Fm.prototype.visitInt64=Mm,Fm.prototype.visitUint8=Mm,Fm.prototype.visitUint16=Mm,Fm.prototype.visitUint32=Mm,Fm.prototype.visitUint64=Mm,Fm.prototype.visitFloat=Mm,Fm.prototype.visitFloat16=Mm,Fm.prototype.visitFloat32=Mm,Fm.prototype.visitFloat64=Mm,Fm.prototype.visitUtf8=Mm,Fm.prototype.visitBinary=Mm,Fm.prototype.visitFixedSizeBinary=Mm,Fm.prototype.visitDate=Mm,Fm.prototype.visitDateDay=Mm,Fm.prototype.visitDateMillisecond=Mm,Fm.prototype.visitTimestamp=Mm,Fm.prototype.visitTimestampSecond=Mm,Fm.prototype.visitTimestampMillisecond=Mm,Fm.prototype.visitTimestampMicrosecond=Mm,Fm.prototype.visitTimestampNanosecond=Mm,Fm.prototype.visitTime=Mm,Fm.prototype.visitTimeSecond=Mm,Fm.prototype.visitTimeMillisecond=Mm,Fm.prototype.visitTimeMicrosecond=Mm,Fm.prototype.visitTimeNanosecond=Mm,Fm.prototype.visitDecimal=Mm,Fm.prototype.visitList=Mm,Fm.prototype.visitStruct=Mm,Fm.prototype.visitUnion=Mm,Fm.prototype.visitDenseUnion=Lm,Fm.prototype.visitSparseUnion=Lm,Fm.prototype.visitDictionary=Mm,Fm.prototype.visitInterval=Mm,Fm.prototype.visitIntervalDayTime=Mm,Fm.prototype.visitIntervalYearMonth=Mm,Fm.prototype.visitFixedSizeList=Mm,Fm.prototype.visitMap=Mm;const Nm=new Fm;class Bm extends op{}function Hm(e){const{type:t}=e;if(0===e.nullCount&&1===e.stride&&(t.typeId===fh.Timestamp||t instanceof Hu&&64!==t.bitWidth||t instanceof Yu&&64!==t.bitWidth||t instanceof $u&&t.precision!==hh.HALF))return new bm(e.data.length,(t=>{const i=e.data[t];return i.values.subarray(0,i.length)[Symbol.iterator]()}));let i=0;return new bm(e.data.length,(t=>{const n=e.data[t].length,s=e.slice(i,i+n);return i+=n,new zm(s)}))}class zm{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Bm.prototype.visitNull=Hm,Bm.prototype.visitBool=Hm,Bm.prototype.visitInt=Hm,Bm.prototype.visitInt8=Hm,Bm.prototype.visitInt16=Hm,Bm.prototype.visitInt32=Hm,Bm.prototype.visitInt64=Hm,Bm.prototype.visitUint8=Hm,Bm.prototype.visitUint16=Hm,Bm.prototype.visitUint32=Hm,Bm.prototype.visitUint64=Hm,Bm.prototype.visitFloat=Hm,Bm.prototype.visitFloat16=Hm,Bm.prototype.visitFloat32=Hm,Bm.prototype.visitFloat64=Hm,Bm.prototype.visitUtf8=Hm,Bm.prototype.visitBinary=Hm,Bm.prototype.visitFixedSizeBinary=Hm,Bm.prototype.visitDate=Hm,Bm.prototype.visitDateDay=Hm,Bm.prototype.visitDateMillisecond=Hm,Bm.prototype.visitTimestamp=Hm,Bm.prototype.visitTimestampSecond=Hm,Bm.prototype.visitTimestampMillisecond=Hm,Bm.prototype.visitTimestampMicrosecond=Hm,Bm.prototype.visitTimestampNanosecond=Hm,Bm.prototype.visitTime=Hm,Bm.prototype.visitTimeSecond=Hm,Bm.prototype.visitTimeMillisecond=Hm,Bm.prototype.visitTimeMicrosecond=Hm,Bm.prototype.visitTimeNanosecond=Hm,Bm.prototype.visitDecimal=Hm,Bm.prototype.visitList=Hm,Bm.prototype.visitStruct=Hm,Bm.prototype.visitUnion=Hm,Bm.prototype.visitDenseUnion=Hm,Bm.prototype.visitSparseUnion=Hm,Bm.prototype.visitDictionary=Hm,Bm.prototype.visitInterval=Hm,Bm.prototype.visitIntervalDayTime=Hm,Bm.prototype.visitIntervalYearMonth=Hm,Bm.prototype.visitFixedSizeList=Hm,Bm.prototype.visitMap=Hm;const $m=new Bm,Um=(e,t)=>e+t;class Vm extends op{visitNull(e,t){return 0}visitInt(e,t){return e.type.bitWidth/8}visitFloat(e,t){return e.type.ArrayType.BYTES_PER_ELEMENT}visitBool(e,t){return 1/8}visitDecimal(e,t){return e.type.bitWidth/8}visitDate(e,t){return 4*(e.type.unit+1)}visitTime(e,t){return e.type.bitWidth/8}visitTimestamp(e,t){return e.type.unit===ph.SECOND?4:8}visitInterval(e,t){return 4*(e.type.unit+1)}visitStruct(e,t){return e.children.reduce(((e,i)=>e+Gm.visit(i,t)),0)}visitFixedSizeBinary(e,t){return e.type.byteWidth}visitMap(e,t){return 8+e.children.reduce(((e,i)=>e+Gm.visit(i,t)),0)}visitDictionary(e,t){var i;return e.type.indices.bitWidth/8+((null===(i=e.dictionary)||void 0===i?void 0:i.getByteLength(e.values[t]))||0)}}const Wm=(e,t)=>{let{type:i,children:n,typeIds:s,valueOffsets:r}=e;const o=i.typeIdToChildIndex[s[t]];return 8+Gm.visit(n[o],r[t])},jm=(e,t)=>{let{children:i}=e;return 4+Gm.visitMany(i,i.map((()=>t))).reduce(Um,0)};Vm.prototype.visitUtf8=(e,t)=>{let{valueOffsets:i}=e;return i[t+1]-i[t]+8},Vm.prototype.visitBinary=(e,t)=>{let{valueOffsets:i}=e;return i[t+1]-i[t]+8},Vm.prototype.visitList=(e,t)=>{let{valueOffsets:i,stride:n,children:s}=e;const r=s[0],{[t*n]:o}=i,{[t*n+1]:a}=i,l=Gm.getVisitFn(r.type),d=r.slice(o,a-o);let c=8;for(let h=-1,u=a-o;++h<u;)c+=l(d,h);return c},Vm.prototype.visitFixedSizeList=(e,t)=>{let{stride:i,children:n}=e;const s=n[0],r=s.slice(t*i,i),o=Gm.getVisitFn(s.type);let a=0;for(let l=-1,d=r.length;++l<d;)a+=o(r,l);return a},Vm.prototype.visitUnion=(e,t)=>e.type.mode===ch.Dense?Wm(e,t):jm(e,t),Vm.prototype.visitDenseUnion=Wm,Vm.prototype.visitSparseUnion=jm;const Gm=new Vm;var Ym;const Km={},qm={};class Xm{constructor(e){var t,i,n;const s=e[0]instanceof Xm?e.flatMap((e=>e.data)):e;if(0===s.length||s.some((e=>!(e instanceof Zm))))throw new TypeError("Vector constructor expects an Array of Data instances.");const r=null===(t=s[0])||void 0===t?void 0:t.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:e,set:t,indexOf:i,byteLength:n}=Km[r.typeId],o=s[0];this.isValid=e=>Cm(o,e),this.get=t=>e(o,t),this.set=(e,i)=>t(o,e,i),this.indexOf=e=>i(o,e),this.getByteLength=e=>n(o,e),this._offsets=[0,o.length];break}default:Object.setPrototypeOf(this,qm[r.typeId]),this._offsets=_m(s)}this.data=s,this.type=r,this.stride=rp(r),this.numChildren=null!==(n=null===(i=r.children)||void 0===i?void 0:i.length)&&void 0!==n?n:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((e,t)=>e+t.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=ym(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${fh[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}includes(e,t){return this.indexOf(e,t)>0}getByteLength(e){return 0}[Symbol.iterator](){return $m.visit(this)}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Xm(this.data.concat(t.flatMap((e=>e.data)).flat(Number.POSITIVE_INFINITY)))}slice(e,t){return new Xm(pm(this,e,t,((e,t,i)=>{let{data:n,_offsets:s}=e;return Sm(n,s,t,i)})))}toJSON(){return[...this]}toArray(){const{type:e,data:t,length:i,stride:n,ArrayType:s}=this;switch(e.typeId){case fh.Int:case fh.Float:case fh.Decimal:case fh.Time:case fh.Timestamp:switch(t.length){case 0:return new s;case 1:return t[0].values.subarray(0,i*n);default:return t.reduce(((e,t)=>{let{values:i,length:s}=t;return e.array.set(i.subarray(0,s*n),e.offset),e.offset+=s*n,e}),{array:new s(i*n),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var t;return this.getChildAt(null===(t=this.type.children)||void 0===t?void 0:t.findIndex((t=>t.name===e)))}getChildAt(e){return e>-1&&e<this.numChildren?new Xm(this.data.map((t=>{let{children:i}=t;return i[e]}))):null}get isMemoized(){return!!Nu.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Nu.isDictionary(this.type)){const e=new Qm(this.data[0].dictionary),t=this.data.map((t=>{const i=t.clone();return i.dictionary=e,i}));return new Xm(t)}return new Qm(this)}unmemoize(){if(Nu.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),t=this.data.map((t=>{const i=t.clone();return i.dictionary=e,i}));return new Xm(t)}return this}}Ym=Symbol.toStringTag,Xm[Ym]=(e=>{e.type=Nu.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._nullCount=-1,e._byteLength=-1,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(fh).map((e=>fh[e])).filter((e=>"number"===typeof e&&e!==fh.NONE));for(const i of t){const t=om.getVisitFnByTypeId(i),n=Pp.getVisitFnByTypeId(i),s=Nm.getVisitFnByTypeId(i),r=Gm.getVisitFnByTypeId(i);Km[i]={get:t,set:n,indexOf:s,byteLength:r},qm[i]=Object.create(e,{isValid:{value:Em(Cm)},get:{value:Em(om.getVisitFnByTypeId(i))},set:{value:Om(Pp.getVisitFnByTypeId(i))},indexOf:{value:xm(Nm.getVisitFnByTypeId(i))},getByteLength:{value:Em(Gm.getVisitFnByTypeId(i))}})}return"Vector"})(Xm.prototype);class Qm extends Xm{constructor(e){super(e.data);const t=this.get,i=this.set,n=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(e){const i=s[e];if(void 0!==i)return i;const n=t.call(this,e);return s[e]=n,n}}),Object.defineProperty(this,"set",{value(e,t){i.call(this,e,t),s[e]=t}}),Object.defineProperty(this,"slice",{value:(e,t)=>new Qm(n.call(this,e,t))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Xm(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Zm{constructor(e,t,i,n,s){let r,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0;this.type=e,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(t||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(n||0,-1)),s instanceof Zm?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=rp(e),s&&((r=s[0])&&(this.valueOffsets=r),(r=s[1])&&(this.values=r),(r=s[2])&&(this.nullBitmap=r),(r=s[3])&&(this.typeIds=r))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let e=0;const{valueOffsets:t,values:i,nullBitmap:n,typeIds:s}=this;return t&&(e+=t.byteLength),i&&(e+=i.byteLength),n&&(e+=n.byteLength),s&&(e+=s.byteLength),this.children.reduce(((e,t)=>e+t.byteLength),e)}get nullCount(){let e,t=this._nullCount;return t<=-1&&(e=this.nullBitmap)&&(this._nullCount=t=this.length-Dm(e,this.offset,this.offset+this.length)),t}getValid(e){if(this.nullable&&this.nullCount>0){const t=this.offset+e;return 0!==(this.nullBitmap[t>>3]&1<<t%8)}return!0}setValid(e,t){if(!this.nullable)return t;if(!this.nullBitmap||this.nullBitmap.byteLength<=e>>3){const{nullBitmap:e}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:e,_nullCount:0})}const{nullBitmap:i,offset:n}=this,s=n+e>>3,r=(n+e)%8,o=i[s]>>r&1;return t?0===o&&(i[s]|=1<<r,this._nullCount=this.nullCount+1):1===o&&(i[s]&=~(1<<r),this._nullCount=this.nullCount-1),t}clone(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.type,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.offset,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._nullCount,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.children;return new Zm(e,t,i,n,s,r,this.dictionary)}slice(e,t){const{stride:i,typeId:n,children:s}=this,r=+(0===this._nullCount)-1,o=16===n?i:1,a=this._sliceBuffers(e,t,i,n);return this.clone(this.type,this.offset+e,t,r,a,0===s.length||this.valueOffsets?s:this._sliceChildren(s,o*e,o*t))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===fh.Null)return this.clone(this.type,0,e,0);const{length:t,nullCount:i}=this,n=new Uint8Array((e+63&-64)>>3).fill(255,0,t>>3);n[t>>3]=(1<<t-(-8&t))-1,i>0&&n.set(Im(this.offset,t,this.nullBitmap),0);const s=this.buffers;return s[vh.VALIDITY]=n,this.clone(this.type,0,e,i+(e-t),s)}_sliceBuffers(e,t,i,n){let s;const{buffers:r}=this;return(s=r[vh.TYPE])&&(r[vh.TYPE]=s.subarray(e,e+t)),(s=r[vh.OFFSET])&&(r[vh.OFFSET]=s.subarray(e,e+t+1))||(s=r[vh.DATA])&&(r[vh.DATA]=6===n?s:s.subarray(i*e,i*(e+t))),r}_sliceChildren(e,t,i){return e.map((e=>e.slice(t,i)))}}Zm.prototype.children=Object.freeze([]);class Jm extends op{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{type:t,offset:i=0,length:n=0}=e;return new Zm(t,i,n,0)}visitBool(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length>>3,nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitInt(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length,nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitFloat(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length,nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitUtf8(e){const{type:t,offset:i=0}=e,n=iu(e.data),s=iu(e.nullBitmap),r=tu(e.valueOffsets),{length:o=r.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,o,a,[r,n,s])}visitBinary(e){const{type:t,offset:i=0}=e,n=iu(e.data),s=iu(e.nullBitmap),r=tu(e.valueOffsets),{length:o=r.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,o,a,[r,n,s])}visitFixedSizeBinary(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitDate(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitTimestamp(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitTime(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitDecimal(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitList(e){const{type:t,offset:i=0,child:n}=e,s=iu(e.nullBitmap),r=tu(e.valueOffsets),{length:o=r.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,o,a,[r,void 0,s],[n])}visitStruct(e){const{type:t,offset:i=0,children:n=[]}=e,s=iu(e.nullBitmap),{length:r=n.reduce(((e,t)=>{let{length:i}=t;return Math.max(e,i)}),0),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,void 0,s],n)}visitUnion(e){const{type:t,offset:i=0,children:n=[]}=e,s=iu(e.nullBitmap),r=eu(t.ArrayType,e.typeIds),{length:o=r.length,nullCount:a=(e.nullBitmap?-1:0)}=e;if(Nu.isSparseUnion(t))return new Zm(t,i,o,a,[void 0,void 0,s,r],n);const l=tu(e.valueOffsets);return new Zm(t,i,o,a,[l,void 0,s,r],n)}visitDictionary(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.indices.ArrayType,e.data),{dictionary:r=new Xm([(new Jm).visit({type:t.dictionary})])}=e,{length:o=s.length,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,o,a,[void 0,s,n],[],r)}visitInterval(e){const{type:t,offset:i=0}=e,n=iu(e.nullBitmap),s=eu(t.ArrayType,e.data),{length:r=s.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,s,n])}visitFixedSizeList(e){const{type:t,offset:i=0,child:n=(new Jm).visit({type:t.valueType})}=e,s=iu(e.nullBitmap),{length:r=n.length/rp(t),nullCount:o=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,r,o,[void 0,void 0,s],[n])}visitMap(e){const{type:t,offset:i=0,child:n=(new Jm).visit({type:t.childType})}=e,s=iu(e.nullBitmap),r=tu(e.valueOffsets),{length:o=r.length-1,nullCount:a=(e.nullBitmap?-1:0)}=e;return new Zm(t,i,o,a,[r,void 0,s],[n])}}function eg(e){return(new Jm).visit(e)}class tg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;this.fields=e||[],this.metadata=t||new Map,i||(i=sg(e)),this.dictionaries=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((e=>e.name))}toString(){return`Schema<{ ${this.fields.map(((e,t)=>`${t}: ${e}`)).join(", ")} }>`}select(e){const t=new Set(e),i=this.fields.filter((e=>t.has(e.name)));return new tg(i,this.metadata)}selectAt(e){const t=e.map((e=>this.fields[e])).filter(Boolean);return new tg(t,this.metadata)}assign(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const n=t[0]instanceof tg?t[0]:Array.isArray(t[0])?new tg(t[0]):new tg(t),s=[...this.fields],r=ng(ng(new Map,this.metadata),n.metadata),o=n.fields.filter((e=>{const t=s.findIndex((t=>t.name===e.name));return!~t||(s[t]=e.clone({metadata:ng(ng(new Map,s[t].metadata),e.metadata)}))&&!1})),a=sg(o,new Map);return new tg([...s,...o],r,new Map([...this.dictionaries,...a]))}}tg.prototype.fields=null,tg.prototype.metadata=null,tg.prototype.dictionaries=null;class ig{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;this.name=e,this.type=t,this.nullable=i,this.metadata=n||new Map}static new(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let[n,s,r,o]=t;return t[0]&&"object"===typeof t[0]&&(({name:n}=t[0]),void 0===s&&(s=t[0].type),void 0===r&&(r=t[0].nullable),void 0===o&&(o=t[0].metadata)),new ig(`${n}`,s,r,o)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];let[n,s,r,o]=t;return t[0]&&"object"===typeof t[0]?({name:n=this.name,type:s=this.type,nullable:r=this.nullable,metadata:o=this.metadata}=t[0]):[n=this.name,s=this.type,r=this.nullable,o=this.metadata]=t,ig.new(n,s,r,o)}}function ng(e,t){return new Map([...e||new Map,...t||new Map])}function sg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;for(let i=-1,n=e.length;++i<n;){const n=e[i].type;if(Nu.isDictionary(n))if(t.has(n.id)){if(t.get(n.id)!==n.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else t.set(n.id,n.dictionary);n.children&&n.children.length>0&&sg(n.children,t)}return t}ig.prototype.type=null,ig.prototype.name=null,ig.prototype.nullable=null,ig.prototype.metadata=null;class rg extends op{compareSchemas(e,t){return e===t||t instanceof e.constructor&&this.compareManyFields(e.fields,t.fields)}compareManyFields(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every(((e,i)=>this.compareFields(e,t[i])))}compareFields(e,t){return e===t||t instanceof e.constructor&&e.name===t.name&&e.nullable===t.nullable&&this.visit(e.type,t.type)}}function og(e,t){return t instanceof e.constructor}function ag(e,t){return e===t||og(e,t)}function lg(e,t){return e===t||og(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function dg(e,t){return e===t||og(e,t)&&e.precision===t.precision}function cg(e,t){return e===t||og(e,t)&&e.unit===t.unit}function hg(e,t){return e===t||og(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ug(e,t){return e===t||og(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function pg(e,t){return e===t||og(e,t)&&e.mode===t.mode&&e.typeIds.every(((e,i)=>e===t.typeIds[i]))&&gg.compareManyFields(e.children,t.children)}function mg(e,t){return e===t||og(e,t)&&e.unit===t.unit}rg.prototype.visitNull=ag,rg.prototype.visitBool=ag,rg.prototype.visitInt=lg,rg.prototype.visitInt8=lg,rg.prototype.visitInt16=lg,rg.prototype.visitInt32=lg,rg.prototype.visitInt64=lg,rg.prototype.visitUint8=lg,rg.prototype.visitUint16=lg,rg.prototype.visitUint32=lg,rg.prototype.visitUint64=lg,rg.prototype.visitFloat=dg,rg.prototype.visitFloat16=dg,rg.prototype.visitFloat32=dg,rg.prototype.visitFloat64=dg,rg.prototype.visitUtf8=ag,rg.prototype.visitBinary=ag,rg.prototype.visitFixedSizeBinary=function(e,t){return e===t||og(e,t)&&e.byteWidth===t.byteWidth},rg.prototype.visitDate=cg,rg.prototype.visitDateDay=cg,rg.prototype.visitDateMillisecond=cg,rg.prototype.visitTimestamp=hg,rg.prototype.visitTimestampSecond=hg,rg.prototype.visitTimestampMillisecond=hg,rg.prototype.visitTimestampMicrosecond=hg,rg.prototype.visitTimestampNanosecond=hg,rg.prototype.visitTime=ug,rg.prototype.visitTimeSecond=ug,rg.prototype.visitTimeMillisecond=ug,rg.prototype.visitTimeMicrosecond=ug,rg.prototype.visitTimeNanosecond=ug,rg.prototype.visitDecimal=ag,rg.prototype.visitList=function(e,t){return e===t||og(e,t)&&e.children.length===t.children.length&&gg.compareManyFields(e.children,t.children)},rg.prototype.visitStruct=function(e,t){return e===t||og(e,t)&&e.children.length===t.children.length&&gg.compareManyFields(e.children,t.children)},rg.prototype.visitUnion=pg,rg.prototype.visitDenseUnion=pg,rg.prototype.visitSparseUnion=pg,rg.prototype.visitDictionary=function(e,t){return e===t||og(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&gg.visit(e.indices,t.indices)&&gg.visit(e.dictionary,t.dictionary)},rg.prototype.visitInterval=mg,rg.prototype.visitIntervalDayTime=mg,rg.prototype.visitIntervalYearMonth=mg,rg.prototype.visitFixedSizeList=function(e,t){return e===t||og(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&gg.compareManyFields(e.children,t.children)},rg.prototype.visitMap=function(e,t){return e===t||og(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&gg.compareManyFields(e.children,t.children)};const gg=new rg;function fg(e,t){return gg.compareSchemas(e,t)}var vg,bg;class yg{constructor(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof tg))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=eg({nullCount:0,type:new Qu(this.schema.fields),children:this.schema.fields.map((e=>eg({type:e.type,nullCount:0})))})]=t,!(this.data instanceof Zm))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=_g(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:i,children:n,length:s}=Object.keys(e).reduce(((t,i,n)=>(t.children[n]=e[i],t.length=Math.max(t.length,e[i].length),t.fields[n]=ig.new({name:i,type:e[i].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),r=new tg(i),o=eg({type:new Qu(i),length:s,children:n,nullCount:0});[this.schema,this.data]=_g(r,o.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Sg(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return om.visit(this.data,e)}set(e,t){return Pp.visit(this.data,e,t)}indexOf(e,t){return Nm.visit(this.data,e,t)}getByteLength(e){return Gm.visit(this.data,e)}[Symbol.iterator](){return $m.visit(new Xm([this.data]))}toArray(){return[...this]}concat(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Og(this.schema,[this,...t])}slice(e,t){const[i]=new Xm([this.data]).slice(e,t).data;return new yg(this.schema,i)}getChild(e){var t;return this.getChildAt(null===(t=this.schema.fields)||void 0===t?void 0:t.findIndex((t=>t.name===e)))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Xm([this.data.children[e]]):null}setChild(e,t){var i;return this.setChildAt(null===(i=this.schema.fields)||void 0===i?void 0:i.findIndex((t=>t.name===e)),t)}setChildAt(e,t){let i=this.schema,n=this.data;if(e>-1&&e<this.numCols){t||(t=new Xm([eg({type:new Bu,length:this.numRows})]));const s=i.fields.slice(),r=n.children.slice(),o=s[e].clone({type:t.type});[s[e],r[e]]=[o,t.data[0]],i=new tg(s,new Map(this.schema.metadata)),n=eg({type:new Qu(s),children:r})}return new yg(i,n)}select(e){const t=this.schema.select(e),i=new Qu(t.fields),n=[];for(const s of e){const e=this.schema.fields.findIndex((e=>e.name===s));~e&&(n[e]=this.data.children[e])}return new yg(t,eg({type:i,length:this.numRows,children:n}))}selectAt(e){const t=this.schema.selectAt(e),i=e.map((e=>this.data.children[e])).filter(Boolean),n=eg({type:new Qu(t.fields),length:this.numRows,children:i});return new yg(t,n)}}function _g(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.reduce(((e,t)=>Math.max(e,t.length)),0);var n;const s=[...e.fields],r=[...t],o=(i+63&-64)>>3;for(const[a,l]of e.fields.entries()){const e=t[a];e&&e.length===i||(s[a]=l.clone({nullable:!0}),r[a]=null!==(n=null===e||void 0===e?void 0:e._changeLengthAndBackfillNullBitmap(i))&&void 0!==n?n:eg({type:l.type,length:i,nullCount:i,nullBitmap:new Uint8Array(o)}))}return[e.assign(s),eg({type:new Qu(s),length:i,children:r})]}function Sg(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;for(let n=-1,s=e.length;++n<s;){const s=e[n].type,r=t[n];if(Nu.isDictionary(s))if(i.has(s.id)){if(i.get(s.id)!==r.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else r.dictionary&&i.set(s.id,r.dictionary);s.children&&s.children.length>0&&Sg(s.children,r.children,i)}return i}vg=Symbol.toStringTag,yg[vg]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(yg.prototype);class wg extends yg{constructor(e){const t=e.fields.map((e=>eg({type:e.type})));super(e,eg({type:new Qu(e.fields),nullCount:0,children:t}))}}function Cg(e,t){return function(e,t){const i=[...e.fields],n=[],s={numBatches:t.reduce(((e,t)=>Math.max(e,t.length)),0)};let r=0,o=0,a=-1;const l=t.length;let d,c=[];for(;s.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)c[a]=d=t[a].shift(),o=Math.min(o,d?d.length:o);Number.isFinite(o)&&(c=Eg(i,o,c,t,s),o>0&&(n[r++]=eg({type:new Qu(i),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(i),n.map((t=>new yg(e,t)))]}(e,t.map((e=>e.data.concat())))}function Eg(e,t,i,n,s){var r;const o=(t+63&-64)>>3;for(let a=-1,l=n.length;++a<l;){const l=i[a],d=null===l||void 0===l?void 0:l.length;if(d>=t)d===t?i[a]=l:(i[a]=l.slice(0,t),s.numBatches=Math.max(s.numBatches,n[a].unshift(l.slice(t,d-t))));else{const n=e[a];e[a]=n.clone({nullable:!0}),i[a]=null!==(r=null===l||void 0===l?void 0:l._changeLengthAndBackfillNullBitmap(t))&&void 0!==r?r:eg({type:n.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return i}class Og{constructor(){for(var e,t,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];if(0===n.length)return this.batches=[],this.schema=new tg([]),this._offsets=[0],this;let r,o;n[0]instanceof tg&&(r=n.shift()),n[n.length-1]instanceof Uint32Array&&(o=n.pop());const a=e=>{if(e){if(e instanceof yg)return[e];if(e instanceof Og)return e.batches;if(e instanceof Zm){if(e.type instanceof Qu)return[new yg(new tg(e.type.children),e)]}else{if(Array.isArray(e))return e.flatMap((e=>a(e)));if("function"===typeof e[Symbol.iterator])return[...e].flatMap((e=>a(e)));if("object"===typeof e){const t=Object.keys(e),i=t.map((t=>new Xm([e[t]]))),n=new tg(t.map(((e,t)=>new ig(String(e),i[t].type)))),[,s]=Cg(n,i);return 0===s.length?[new yg(e)]:s}}}return[]},l=n.flatMap((e=>a(e)));if(r=null!==(t=null!==r&&void 0!==r?r:null===(e=l[0])||void 0===e?void 0:e.schema)&&void 0!==t?t:new tg([]),!(r instanceof tg))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const d of l){if(!(d instanceof yg))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!fg(r,d.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=l,this._offsets=null!==o&&void 0!==o?o:_m(this.data)}get data(){return this.batches.map((e=>{let{data:t}=e;return t}))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((e,t)=>e+t.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=ym(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}set(e,t){}indexOf(e,t){return-1}getByteLength(e){return 0}[Symbol.iterator](){return this.batches.length>0?$m.visit(new Xm(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(){const e=this.schema;for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];const s=this.data.concat(i.flatMap((e=>{let{data:t}=e;return t})));return new Og(e,s.map((t=>new yg(e,t))))}slice(e,t){const i=this.schema;[e,t]=pm({length:this.numRows},e,t);const n=Sm(this.data,this._offsets,e,t);return new Og(i,n.map((e=>new yg(i,e))))}getChild(e){return this.getChildAt(this.schema.fields.findIndex((t=>t.name===e)))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const t=this.data.map((t=>t.children[e]));if(0===t.length){const{type:i}=this.schema.fields[e],n=eg({type:i,length:0,nullCount:0});t.push(n._changeLengthAndBackfillNullBitmap(this.numRows))}return new Xm(t)}return null}setChild(e,t){var i;return this.setChildAt(null===(i=this.schema.fields)||void 0===i?void 0:i.findIndex((t=>t.name===e)),t)}setChildAt(e,t){let i=this.schema,n=[...this.batches];if(e>-1&&e<this.numCols){t||(t=new Xm([eg({type:new Bu,length:this.numRows})]));const s=i.fields.slice(),r=s[e].clone({type:t.type}),o=this.schema.fields.map(((e,t)=>this.getChildAt(t)));[s[e],o[e]]=[r,t],[i,n]=Cg(i,o)}return new Og(i,n)}select(e){const t=this.schema.fields.reduce(((e,t,i)=>e.set(t.name,i)),new Map);return this.selectAt(e.map((e=>t.get(e))).filter((e=>e>-1)))}selectAt(e){const t=this.schema.selectAt(e),i=this.batches.map((t=>t.selectAt(e)));return new Og(t,i)}assign(e){const t=this.schema.fields,[i,n]=e.schema.fields.reduce(((e,i,n)=>{const[s,r]=e,o=t.findIndex((e=>e.name===i.name));return~o?r[o]=n:s.push(n),e}),[[],[]]),s=this.schema.assign(e.schema),r=[...t.map(((e,t)=>[t,n[t]])).map((t=>{let[i,n]=t;return void 0===n?this.getChildAt(i):e.getChildAt(n)})),...i.map((t=>e.getChildAt(t)))].filter(Boolean);return new Og(...Cg(s,r))}}bg=Symbol.toStringTag,Og[bg]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Em(Cm),e.get=Em(om.getVisitFn(fh.Struct)),e.set=Om(Pp.getVisitFn(fh.Struct)),e.indexOf=xm(Nm.getVisitFn(fh.Struct)),e.getByteLength=Em(Gm.getVisitFn(fh.Struct)),"Table"))(Og.prototype);class xg{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,t,i,n){return e.prep(8,24),e.writeInt64(n),e.pad(4),e.writeInt32(i),e.writeInt64(t),e.offset()}}const Tg=new Int32Array(2),kg=new Float32Array(Tg.buffer),Ig=new Float64Array(Tg.buffer),Rg=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class Ag{constructor(e,t){this.low=0|e,this.high=0|t}static create(e,t){return 0==e&&0==t?Ag.ZERO:new Ag(e,t)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(e){return this.low==e.low&&this.high==e.high}}var Dg,Pg,Fg,Mg,Lg;Ag.ZERO=new Ag(0,0),function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"}(Dg||(Dg={}));class Ng{constructor(e){this.bytes_=e,this.position_=0}static allocate(e){return new Ng(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return new Ag(this.readInt32(e),this.readInt32(e+4))}readUint64(e){return new Ag(this.readUint32(e),this.readUint32(e+4))}readFloat32(e){return Tg[0]=this.readInt32(e),kg[0]}readFloat64(e){return Tg[Rg?0:1]=this.readInt32(e),Tg[Rg?1:0]=this.readInt32(e+4),Ig[0]}writeInt8(e,t){this.bytes_[e]=t}writeUint8(e,t){this.bytes_[e]=t}writeInt16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeUint16(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8}writeInt32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeUint32(e,t){this.bytes_[e]=t,this.bytes_[e+1]=t>>8,this.bytes_[e+2]=t>>16,this.bytes_[e+3]=t>>24}writeInt64(e,t){this.writeInt32(e,t.low),this.writeInt32(e+4,t.high)}writeUint64(e,t){this.writeUint32(e,t.low),this.writeUint32(e+4,t.high)}writeFloat32(e,t){kg[0]=t,this.writeInt32(e,Tg[0])}writeFloat64(e,t){Ig[0]=t,this.writeInt32(e,Tg[Rg?0:1]),this.writeInt32(e+4,Tg[Rg?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let t=0;t<4;t++)e+=String.fromCharCode(this.readInt8(this.position_+4+t));return e}__offset(e,t){const i=e-this.readInt32(e);return t<this.readInt16(i)?this.readInt16(i+t):0}__union(e,t){return e.bb_pos=t+this.readInt32(t),e.bb=this,e}__string(e,t){e+=this.readInt32(e);const i=this.readInt32(e);let n="",s=0;if(e+=4,t===Dg.UTF8_BYTES)return this.bytes_.subarray(e,e+i);for(;s<i;){let t;const i=this.readUint8(e+s++);if(i<192)t=i;else{const n=this.readUint8(e+s++);if(i<224)t=(31&i)<<6|63&n;else{const r=this.readUint8(e+s++);if(i<240)t=(15&i)<<12|(63&n)<<6|63&r;else{t=(7&i)<<18|(63&n)<<12|(63&r)<<6|63&this.readUint8(e+s++)}}}t<65536?n+=String.fromCharCode(t):(t-=65536,n+=String.fromCharCode(55296+(t>>10),56320+(1023&t)))}return n}__union_with_string(e,t){return"string"===typeof e?this.__string(t):this.__union(e,t)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+4}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=0;t<4;t++)if(e.charCodeAt(t)!=this.readInt8(this.position()+4+t))return!1;return!0}createLong(e,t){return Ag.create(e,t)}createScalarList(e,t){const i=[];for(let n=0;n<t;++n)null!==e(n)&&i.push(e(n));return i}createObjList(e,t){const i=[];for(let n=0;n<t;++n){const t=e(n);null!==t&&i.push(t.unpack())}return i}}class Bg{constructor(e){let t;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,t=e||1024,this.bb=Ng.allocate(t),this.space=t}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,t){e>this.minalign&&(this.minalign=e);const i=1+~(this.bb.capacity()-this.space+t)&e-1;for(;this.space<i+e+t;){const e=this.bb.capacity();this.bb=Bg.growByteBuffer(this.bb),this.space+=this.bb.capacity()-e}this.pad(i)}pad(e){for(let t=0;t<e;t++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,t,i){(this.force_defaults||t!=i)&&(this.addInt8(t),this.slot(e))}addFieldInt16(e,t,i){(this.force_defaults||t!=i)&&(this.addInt16(t),this.slot(e))}addFieldInt32(e,t,i){(this.force_defaults||t!=i)&&(this.addInt32(t),this.slot(e))}addFieldInt64(e,t,i){!this.force_defaults&&t.equals(i)||(this.addInt64(t),this.slot(e))}addFieldFloat32(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat32(t),this.slot(e))}addFieldFloat64(e,t,i){(this.force_defaults||t!=i)&&(this.addFloat64(t),this.slot(e))}addFieldOffset(e,t,i){(this.force_defaults||t!=i)&&(this.addOffset(t),this.slot(e))}addFieldStruct(e,t,i){t!=i&&(this.nested(t),this.slot(e))}nested(e){if(e!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(e){null!==this.vtable&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const t=e.capacity();if(3221225472&t)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=t<<1,n=Ng.allocate(i);return n.setPosition(i-t),n.bytes().set(e.bytes(),i-t),n}addOffset(e){this.prep(4,0),this.writeInt32(this.offset()-e+4)}startObject(e){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=e;for(let t=0;t<e;t++)this.vtable[t]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let t=this.vtable_in_use-1;for(;t>=0&&0==this.vtable[t];t--);const i=t+1;for(;t>=0;t--)this.addInt16(0!=this.vtable[t]?e-this.vtable[t]:0);this.addInt16(e-this.object_start);const n=2*(i+2);this.addInt16(n);let s=0;const r=this.space;e:for(t=0;t<this.vtables.length;t++){const e=this.bb.capacity()-this.vtables[t];if(n==this.bb.readInt16(e)){for(let t=2;t<n;t+=2)if(this.bb.readInt16(r+t)!=this.bb.readInt16(e+t))continue e;s=this.vtables[t];break}}return s?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,s-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,t,i){const n=i?4:0;if(t){const e=t;if(this.prep(this.minalign,8+n),4!=e.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let t=3;t>=0;t--)this.writeInt8(e.charCodeAt(t))}this.prep(this.minalign,4+n),this.addOffset(e),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,t){this.finish(e,t,!0)}requiredField(e,t){const i=this.bb.capacity()-e,n=i-this.bb.readInt32(i);if(!(0!=this.bb.readInt16(n+t)))throw new Error("FlatBuffers: field "+t+" must be set")}startVector(e,t,i){this.notNested(),this.vector_num_elems=t,this.prep(4,e*t),this.prep(i,e*t)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const t=this.createString(e);return this.string_maps.set(e,t),t}createString(e){if(!e)return 0;let t;if(e instanceof Uint8Array)t=e;else{t=[];let i=0;for(;i<e.length;){let n;const s=e.charCodeAt(i++);if(s<55296||s>=56320)n=s;else{n=(s<<10)+e.charCodeAt(i++)+-56613888}n<128?t.push(n):(n<2048?t.push(n>>6&31|192):(n<65536?t.push(n>>12&15|224):t.push(n>>18&7|240,n>>12&63|128),t.push(n>>6&63|128)),t.push(63&n|128))}}this.addInt8(0),this.startVector(1,t.length,1),this.bb.setPosition(this.space-=t.length);for(let i=0,n=this.space,s=this.bb.bytes();i<t.length;i++)s[n++]=t[i];return this.endVector()}createLong(e,t){return Ag.create(e,t)}createObjectOffset(e){return null===e?0:"string"===typeof e?this.createString(e):e.pack(this)}createObjectOffsetList(e){const t=[];for(let i=0;i<e.length;++i){const n=e[i];if(null===n)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");t.push(this.createObjectOffset(n))}return t}createStructOffsetList(e,t){return t(this,e.length),this.createObjectOffsetList(e),this.endVector()}}class Hg{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new Hg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+4),(t||new Hg).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,t,i){return Hg.startKeyValue(e),Hg.addKey(e,t),Hg.addValue(e,i),Hg.endKeyValue(e)}}!function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"}(Pg||(Pg={})),function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"}(Fg||(Fg={})),function(e){e[e.DenseArray=0]="DenseArray"}(Mg||(Mg={}));class zg{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInt(e,t){return(t||new zg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,t){return e.setPosition(e.position()+4),(t||new zg).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startInt(e){e.startObject(2)}static addBitWidth(e,t){e.addFieldInt32(0,t,0)}static addIsSigned(e,t){e.addFieldInt8(1,+t,0)}static endInt(e){return e.endObject()}static createInt(e,t,i){return zg.startInt(e),zg.addBitWidth(e,t),zg.addIsSigned(e,i),zg.endInt(e)}}class $g{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryEncoding(e,t){return(t||new $g).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,t){return e.setPosition(e.position()+4),(t||new $g).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}indexType(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new zg).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Mg.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addIndexType(e,t){e.addFieldOffset(1,t,0)}static addIsOrdered(e,t){e.addFieldInt8(2,+t,0)}static addDictionaryKind(e,t){e.addFieldInt16(3,t,Mg.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}!function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList"}(Lg||(Lg={}));class Ug{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new Ug).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+4),(t||new Ug).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Lg.NONE}type(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__union(e,this.bb_pos+t):null}dictionary(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new $g).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}children(e,t){const i=this.bb.__offset(this.bb_pos,14);return i?(t||new Ug).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,16);return i?(t||new Hg).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addNullable(e,t){e.addFieldInt8(1,+t,0)}static addTypeType(e,t){e.addFieldInt8(2,t,Lg.NONE)}static addType(e,t){e.addFieldOffset(3,t,0)}static addDictionary(e,t){e.addFieldOffset(4,t,0)}static addChildren(e,t){e.addFieldOffset(5,t,0)}static createChildrenVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startChildrenVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(6,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endField(e){return e.endObject()}}class Vg{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new Vg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+4),(t||new Vg).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Fg.Little}fields(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Ug).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Hg).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb.__vector(this.bb_pos+t)+8*e):this.bb.createLong(0,0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,t){e.addFieldInt16(0,t,Fg.Little)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addCustomMetadata(e,t){e.addFieldOffset(2,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static addFeatures(e,t){e.addFieldOffset(3,t,0)}static createFeaturesVector(e,t){e.startVector(8,t.length,8);for(let i=t.length-1;i>=0;i--)e.addInt64(t[i]);return e.endVector()}static startFeaturesVector(e,t){e.startVector(8,t,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,t){e.finish(t)}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,void 0,!0)}static createSchema(e,t,i,n,s){return Vg.startSchema(e),Vg.addEndianness(e,t),Vg.addFields(e,i),Vg.addCustomMetadata(e,n),Vg.addFeatures(e,s),Vg.endSchema(e)}}class Wg{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFooter(e,t){return(t||new Wg).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,t){return e.setPosition(e.position()+4),(t||new Wg).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Pg.V1}schema(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Vg).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}dictionaries(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new xg).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,t){const i=this.bb.__offset(this.bb_pos,10);return i?(t||new xg).__init(this.bb.__vector(this.bb_pos+i)+24*e,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Hg).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,Pg.V1)}static addSchema(e,t){e.addFieldOffset(1,t,0)}static addDictionaries(e,t){e.addFieldOffset(2,t,0)}static startDictionariesVector(e,t){e.startVector(24,t,8)}static addRecordBatches(e,t){e.addFieldOffset(3,t,0)}static startRecordBatchesVector(e,t){e.startVector(24,t,8)}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,t){e.finish(t)}static finishSizePrefixedFooterBuffer(e,t){e.finish(t,void 0,!0)}}var jg=Ag,Gg=Bg,Yg=Ng;class Kg{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dh.V4,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.schema=e,this.version=t,i&&(this._recordBatches=i),n&&(this._dictionaryBatches=n)}static decode(e){e=new Yg(iu(e));const t=Wg.getRootAsFooter(e),i=tg.decode(t.schema());return new qg(i,t)}static encode(e){const t=new Gg,i=tg.encode(t,e.schema);Wg.startRecordBatchesVector(t,e.numRecordBatches);for(const r of[...e.recordBatches()].slice().reverse())Xg.encode(t,r);const n=t.endVector();Wg.startDictionariesVector(t,e.numDictionaries);for(const r of[...e.dictionaryBatches()].slice().reverse())Xg.encode(t,r);const s=t.endVector();return Wg.startFooter(t),Wg.addSchema(t,i),Wg.addVersion(t,dh.V4),Wg.addRecordBatches(t,n),Wg.addDictionaries(t,s),Wg.finishFooterBuffer(t,Wg.endFooter(t)),t.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let e,t=-1,i=this.numRecordBatches;++t<i;)(e=this.getRecordBatch(t))&&(yield e)}*dictionaryBatches(){for(let e,t=-1,i=this.numDictionaries;++t<i;)(e=this.getDictionaryBatch(t))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class qg extends Kg{constructor(e,t){super(e,t.version()),this._footer=t}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const t=this._footer.recordBatches(e);if(t)return Xg.decode(t)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const t=this._footer.dictionaries(e);if(t)return Xg.decode(t)}return null}}class Xg{constructor(e,t,i){this.metaDataLength=e,this.offset="number"===typeof i?i:i.low,this.bodyLength="number"===typeof t?t:t.low}static decode(e){return new Xg(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,t){const{metaDataLength:i}=t,n=new jg(t.offset,0),s=new jg(t.bodyLength,0);return xg.createBlock(e,n,i,s)}}const Qg={fromIterable:e=>Zg(function*(e){let t,i,n,s,r=!1,o=[],a=0;function l(){return"peek"===n?Jh(o,s)[0]:([i,o,a]=Jh(o,s),i)}({cmd:n,size:s}=yield null);const d=(c=e,su(Uint8Array,c))[Symbol.iterator]();var c;try{do{if(({done:t,value:i}=Number.isNaN(s-a)?d.next():d.next(s-a)),!t&&i.byteLength>0&&(o.push(i),a+=i.byteLength),t||s<=a)do{({cmd:n,size:s}=yield l())}while(s<a)}while(!t)}catch(_b){(r=!0)&&"function"===typeof d.throw&&d.throw(_b)}finally{!1===r&&"function"===typeof d.return&&d.return(null)}return null}(e)),fromAsyncIterable:e=>Zg(function(e){return Wh(this,arguments,(function*(){let t,i,n,s,r=!1,o=[],a=0;function l(){return"peek"===n?Jh(o,s)[0]:([i,o,a]=Jh(o,s),i)}({cmd:n,size:s}=yield yield Vh(null));const d=(c=e,ru(Uint8Array,c))[Symbol.asyncIterator]();var c;try{do{if(({done:t,value:i}=Number.isNaN(s-a)?yield Vh(d.next()):yield Vh(d.next(s-a))),!t&&i.byteLength>0&&(o.push(i),a+=i.byteLength),t||s<=a)do{({cmd:n,size:s}=yield yield Vh(l()))}while(s<a)}while(!t)}catch(_b){(r=!0)&&"function"===typeof d.throw&&(yield Vh(d.throw(_b)))}finally{!1===r&&"function"===typeof d.return&&(yield Vh(d.return(new Uint8Array(0))))}return yield Vh(null)}))}(e)),fromDOMStream:e=>Zg(function(e){return Wh(this,arguments,(function*(){let t,i,n,s=!1,r=!1,o=[],a=0;function l(){return"peek"===i?Jh(o,n)[0]:([t,o,a]=Jh(o,n),t)}({cmd:i,size:n}=yield yield Vh(null));const d=new Jg(e);try{do{if(({done:s,value:t}=Number.isNaN(n-a)?yield Vh(d.read()):yield Vh(d.read(n-a))),!s&&t.byteLength>0&&(o.push(iu(t)),a+=t.byteLength),s||n<=a)do{({cmd:i,size:n}=yield yield Vh(l()))}while(n<a)}while(!s)}catch(_b){(r=!0)&&(yield Vh(d.cancel(_b)))}finally{!1===r?yield Vh(d.cancel()):e.locked&&d.releaseLock()}return yield Vh(null)}))}(e)),fromNodeStream:e=>Zg(function(e){return Wh(this,arguments,(function*(){const t=[];let i,n,s,r="error",o=!1,a=null,l=0,d=[];function c(){return"peek"===i?Jh(d,n)[0]:([s,d,l]=Jh(d,n),s)}if(({cmd:i,size:n}=yield yield Vh(null)),e.isTTY)return yield yield Vh(new Uint8Array(0)),yield Vh(null);try{t[0]=ef(e,"end"),t[1]=ef(e,"error");do{if(t[2]=ef(e,"readable"),[r,a]=yield Vh(Promise.race(t.map((e=>e[2])))),"error"===r)break;if((o="end"===r)||(Number.isFinite(n-l)?(s=iu(e.read(n-l)),s.byteLength<n-l&&(s=iu(e.read()))):s=iu(e.read()),s.byteLength>0&&(d.push(s),l+=s.byteLength)),o||n<=l)do{({cmd:i,size:n}=yield yield Vh(c()))}while(n<l)}while(!o)}finally{yield Vh(h(t,"error"===r?a:null))}return yield Vh(null);function h(t,i){return s=d=null,new Promise(((n,s)=>{for(const[i,r]of t)e.off(i,r);try{const t=e.destroy;t&&t.call(e,i),i=void 0}catch(_b){i=_b||i}finally{null!=i?s(i):n()}}))}}))}(e)),toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},Zg=e=>(e.next(),e);class Jg{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return $h(this,void 0,void 0,(function*(){const{reader:t,source:i}=this;t&&(yield t.cancel(e).catch((()=>{}))),i&&i.locked&&this.releaseLock()}))}read(e){return $h(this,void 0,void 0,(function*(){if(0===e)return{done:null==this.reader,value:new Uint8Array(0)};const t=yield this.reader.read();return!t.done&&(t.value=iu(t)),t}))}}const ef=(e,t)=>{const i=e=>n([t,e]);let n;return[t,i,new Promise((s=>(n=s)&&e.once(t,i)))]};const tf=Object.freeze({done:!0,value:void 0});class nf{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class sf{tee(){return this._getDOMStream().tee()}pipe(e,t){return this._getNodeStream().pipe(e,t)}pipeTo(e,t){return this._getDOMStream().pipeTo(e,t)}pipeThrough(e,t){return this._getDOMStream().pipeThrough(e,t)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class rf extends sf{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((e=>this._closedPromiseResolve=e))}get closed(){return this._closedPromise}cancel(e){return $h(this,void 0,void 0,(function*(){yield this.return(e)}))}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(tf);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Qg.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Qg.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return $h(this,void 0,void 0,(function*(){return yield this.abort(e),tf}))}return(e){return $h(this,void 0,void 0,(function*(){return yield this.close(),tf}))}read(e){return $h(this,void 0,void 0,(function*(){return(yield this.next(e,"read")).value}))}peek(e){return $h(this,void 0,void 0,(function*(){return(yield this.next(e,"peek")).value}))}next(){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((e,t)=>{this.resolvers.push({resolve:e,reject:t})})):Promise.resolve(tf)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class of extends rf{write(e){if((e=iu(e)).byteLength>0)return super.write(e)}toString(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Kh(this.toUint8Array(!0)):this.toUint8Array(!1).then(Kh)}toUint8Array(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Jh(this._values)[0]:(()=>$h(this,void 0,void 0,(function*(){var e,t;const i=[];let n=0;try{for(var s,r=Gh(this);!(s=yield r.next()).done;){const e=s.value;i.push(e),n+=e.byteLength}}catch(o){e={error:o}}finally{try{s&&!s.done&&(t=r.return)&&(yield t.call(r))}finally{if(e)throw e.error}}return Jh(i,n)[0]})))()}}class af{constructor(e){e&&(this.source=new df(Qg.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class lf{constructor(e){e instanceof lf?this.source=e.source:e instanceof of?this.source=new cf(Qg.fromAsyncIterable(e)):Hh(e)?this.source=new cf(Qg.fromNodeStream(e)):Bh(e)?this.source=new cf(Qg.fromDOMStream(e)):Lh(e)?this.source=new cf(Qg.fromDOMStream(e.body)):Ah(e)?this.source=new cf(Qg.fromIterable(e)):(Rh(e)||Dh(e))&&(this.source=new cf(Qg.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class df{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return this.source.next({cmd:t,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||tf)}return(e){return Object.create(this.source.return&&this.source.return(e)||tf)}}class cf{constructor(e){this.source=e,this._closedPromise=new Promise((e=>this._closedPromiseResolve=e))}cancel(e){return $h(this,void 0,void 0,(function*(){yield this.return(e)}))}get closed(){return this._closedPromise}read(e){return $h(this,void 0,void 0,(function*(){return(yield this.next(e,"read")).value}))}peek(e){return $h(this,void 0,void 0,(function*(){return(yield this.next(e,"peek")).value}))}next(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"read";return $h(this,void 0,void 0,(function*(){return yield this.source.next({cmd:t,size:e})}))}throw(e){return $h(this,void 0,void 0,(function*(){const t=this.source.throw&&(yield this.source.throw(e))||tf;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)}))}return(e){return $h(this,void 0,void 0,(function*(){const t=this.source.return&&(yield this.source.return(e))||tf;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(t)}))}}class hf extends af{constructor(e,t){super(),this.position=0,this.buffer=iu(e),this.size="undefined"===typeof t?this.buffer.byteLength:t}readInt32(e){const{buffer:t,byteOffset:i}=this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:t,size:i,position:n}=this;return t&&n<i?("number"!==typeof e&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,n+Math.min(i-n,e)),t.subarray(n,this.position)):null}readAt(e,t){const i=this.buffer,n=Math.min(this.size,e+t);return i?i.subarray(e,n):new Uint8Array(t)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class uf extends lf{constructor(e,t){super(),this.position=0,this._handle=e,"number"===typeof t?this.size=t:this._pending=(()=>$h(this,void 0,void 0,(function*(){this.size=(yield e.stat()).size,delete this._pending})))()}readInt32(e){return $h(this,void 0,void 0,(function*(){const{buffer:t,byteOffset:i}=yield this.readAt(e,4);return new DataView(t,i).getInt32(0,!0)}))}seek(e){return $h(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size}))}read(e){return $h(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:t,size:i,position:n}=this;if(t&&n<i){"number"!==typeof e&&(e=Number.POSITIVE_INFINITY);let s=n,r=0,o=0;const a=Math.min(i,s+Math.min(i-s,e)),l=new Uint8Array(Math.max(0,(this.position=a)-s));for(;(s+=o)<a&&(r+=o)<l.byteLength;)({bytesRead:o}=yield t.read(l,r,l.byteLength-r,s));return l}return null}))}readAt(e,t){return $h(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:i,size:n}=this;if(i&&e+t<n){const s=Math.min(n,e+t),r=new Uint8Array(s-e);return(yield i.read(r,0,t,e)).buffer}return new Uint8Array(t)}))}close(){return $h(this,void 0,void 0,(function*(){const e=this._handle;this._handle=null,e&&(yield e.close())}))}throw(e){return $h(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:e}}))}return(e){return $h(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:e}}))}}function pf(e){return e<0&&(e=4294967295+e+1),`0x${e.toString(16)}`}const mf=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class gf{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const t=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),i=new Uint32Array([e.buffer[1]>>>16,65535&e.buffer[1],e.buffer[0]>>>16,65535&e.buffer[0]]);let n=t[3]*i[3];this.buffer[0]=65535&n;let s=n>>>16;return n=t[2]*i[3],s+=n,n=t[3]*i[2]>>>0,s+=n,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<n?65536:0,this.buffer[1]+=s>>>16,this.buffer[1]+=t[1]*i[3]+t[2]*i[2]+t[3]*i[1],this.buffer[1]+=t[0]*i[3]+t[1]*i[2]+t[2]*i[1]+t[3]*i[0]<<16,this}_plus(e){const t=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],t<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=t}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${pf(this.buffer[1])} ${pf(this.buffer[0])}`}}class ff extends gf{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return ff.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return ff.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const i=e.length,n=new ff(t);for(let s=0;s<i;){const t=8<i-s?8:i-s,r=new ff(new Uint32Array([Number.parseInt(e.slice(s,s+t),10),0])),o=new ff(new Uint32Array([mf[t],0]));n.times(o),n.plus(r),s+=t}return n}static convertArray(e){const t=new Uint32Array(2*e.length);for(let i=-1,n=e.length;++i<n;)ff.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new ff(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new ff(new Uint32Array(e.buffer)).plus(t)}}class vf extends gf{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const t=this.buffer[1]|0,i=e.buffer[1]|0;return t<i||t===i&&this.buffer[0]<e.buffer[0]}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return vf.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);return vf.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(2);const i=e.startsWith("-"),n=e.length,s=new vf(t);for(let r=i?1:0;r<n;){const t=8<n-r?8:n-r,i=new vf(new Uint32Array([Number.parseInt(e.slice(r,r+t),10),0])),o=new vf(new Uint32Array([mf[t],0]));s.times(o),s.plus(i),r+=t}return i?s.negate():s}static convertArray(e){const t=new Uint32Array(2*e.length);for(let i=-1,n=e.length;++i<n;)vf.from(e[i],new Uint32Array(t.buffer,t.byteOffset+2*i*4,2));return t}static multiply(e,t){return new vf(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new vf(new Uint32Array(e.buffer)).plus(t)}}class bf{constructor(e){this.buffer=e}high(){return new vf(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new vf(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(e){const t=new ff(new Uint32Array([this.buffer[3],0])),i=new ff(new Uint32Array([this.buffer[2],0])),n=new ff(new Uint32Array([this.buffer[1],0])),s=new ff(new Uint32Array([this.buffer[0],0])),r=new ff(new Uint32Array([e.buffer[3],0])),o=new ff(new Uint32Array([e.buffer[2],0])),a=new ff(new Uint32Array([e.buffer[1],0])),l=new ff(new Uint32Array([e.buffer[0],0]));let d=ff.multiply(s,l);this.buffer[0]=d.low();const c=new ff(new Uint32Array([d.high(),0]));d=ff.multiply(n,l),c.plus(d),d=ff.multiply(s,a),c.plus(d),this.buffer[1]=c.low(),this.buffer[3]=c.lessThan(d)?1:0,this.buffer[2]=c.high();return new ff(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(ff.multiply(i,l)).plus(ff.multiply(n,a)).plus(ff.multiply(s,o)),this.buffer[3]+=ff.multiply(t,l).plus(ff.multiply(i,a)).plus(ff.multiply(n,o)).plus(ff.multiply(s,r)).low(),this}plus(e){const t=new Uint32Array(4);return t[3]=this.buffer[3]+e.buffer[3]>>>0,t[2]=this.buffer[2]+e.buffer[2]>>>0,t[1]=this.buffer[1]+e.buffer[1]>>>0,t[0]=this.buffer[0]+e.buffer[0]>>>0,t[0]<this.buffer[0]>>>0&&++t[1],t[1]<this.buffer[1]>>>0&&++t[2],t[2]<this.buffer[2]>>>0&&++t[3],this.buffer[3]=t[3],this.buffer[2]=t[2],this.buffer[1]=t[1],this.buffer[0]=t[0],this}hex(){return`${pf(this.buffer[3])} ${pf(this.buffer[2])} ${pf(this.buffer[1])} ${pf(this.buffer[0])}`}static multiply(e,t){return new bf(new Uint32Array(e.buffer)).times(t)}static add(e,t){return new bf(new Uint32Array(e.buffer)).plus(t)}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return bf.fromString("string"===typeof e?e:e.toString(),t)}static fromNumber(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);return bf.fromString(e.toString(),t)}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint32Array(4);const i=e.startsWith("-"),n=e.length,s=new bf(t);for(let r=i?1:0;r<n;){const t=8<n-r?8:n-r,i=new bf(new Uint32Array([Number.parseInt(e.slice(r,r+t),10),0,0,0])),o=new bf(new Uint32Array([mf[t],0,0,0]));s.times(o),s.plus(i),r+=t}return i?s.negate():s}static convertArray(e){const t=new Uint32Array(4*e.length);for(let i=-1,n=e.length;++i<n;)bf.from(e[i],new Uint32Array(t.buffer,t.byteOffset+16*i,4));return t}}class yf extends op{constructor(e,t,i,n){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=t,this.buffers=i,this.dictionaries=n}visit(e){return super.visit(e instanceof ig?e.type:e)}visitNull(e){let{length:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t})}visitBool(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e){return e.mode===ch.Sparse?this.visitSparseUnion(e):this.visitDenseUnion(e)}visitDenseUnion(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e){let{length:t,nullCount:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextFieldNode();return eg({type:e,length:t,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return t>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,t){return this.readData(e,t)}readTypeIds(e,t){return this.readData(e,t)}readData(e){let{length:t,offset:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return this.bytes.subarray(i,i+t)}readDictionary(e){return this.dictionaries.get(e.id)}}class _f extends yf{constructor(e,t,i,n){super(new Uint8Array(0),t,i,n),this.sources=e}readNullBitmap(e,t){let{offset:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.nextBufferRange();return t<=0?new Uint8Array(0):Rm(this.sources[i])}readOffsets(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return eu(Uint8Array,eu(Int32Array,this.sources[t]))}readTypeIds(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();return eu(Uint8Array,eu(e.ArrayType,this.sources[t]))}readData(e){let{offset:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.nextBufferRange();const{sources:i}=this;return Nu.isTimestamp(e)||(Nu.isInt(e)||Nu.isTime(e))&&64===e.bitWidth||Nu.isDate(e)&&e.unit===uh.MILLISECOND?eu(Uint8Array,vf.convertArray(i[t])):Nu.isDecimal(e)?eu(Uint8Array,bf.convertArray(i[t])):Nu.isBinary(e)||Nu.isFixedSizeBinary(e)?function(e){const t=e.join(""),i=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2)i[n>>1]=Number.parseInt(t.slice(n,n+2),16);return i}(i[t]):Nu.isBool(e)?Rm(i[t]):Nu.isUtf8(e)?Xh(i[t].join("")):eu(Uint8Array,eu(e.ArrayType,i[t].map((e=>+e))))}}var Sf,wf,Cf,Ef,Of,xf,Tf,kf;!function(e){e[e.BUFFER=0]="BUFFER"}(Sf||(Sf={})),function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"}(wf||(wf={}));class If{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBodyCompression(e,t){return(t||new If).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,t){return e.setPosition(e.position()+4),(t||new If).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):wf.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Sf.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,t){e.addFieldInt8(0,t,wf.LZ4_FRAME)}static addMethod(e,t){e.addFieldInt8(1,t,Sf.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,t,i){return If.startBodyCompression(e),If.addCodec(e,t),If.addMethod(e,i),If.endBodyCompression(e)}}class Rf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,t,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(t),e.offset()}}class Af{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,t,i){return e.prep(8,16),e.writeInt64(i),e.writeInt64(t),e.offset()}}class Df{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRecordBatch(e,t){return(t||new Df).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,t){return e.setPosition(e.position()+4),(t||new Df).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}nodes(e,t){const i=this.bb.__offset(this.bb_pos,6);return i?(t||new Af).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,t){const i=this.bb.__offset(this.bb_pos,8);return i?(t||new Rf).__init(this.bb.__vector(this.bb_pos+i)+16*e,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new If).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addNodes(e,t){e.addFieldOffset(1,t,0)}static startNodesVector(e,t){e.startVector(16,t,8)}static addBuffers(e,t){e.addFieldOffset(2,t,0)}static startBuffersVector(e,t){e.startVector(16,t,8)}static addCompression(e,t){e.addFieldOffset(3,t,0)}static endRecordBatch(e){return e.endObject()}}class Pf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDictionaryBatch(e,t){return(t||new Pf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,t){return e.setPosition(e.position()+4),(t||new Pf).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}data(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new Df).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startDictionaryBatch(e){e.startObject(3)}static addId(e,t){e.addFieldInt64(0,t,e.createLong(0,0))}static addData(e,t){e.addFieldOffset(1,t,0)}static addIsDelta(e,t){e.addFieldInt8(2,+t,0)}static endDictionaryBatch(e){return e.endObject()}}!function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"}(Cf||(Cf={}));class Ff{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFloatingPoint(e,t){return(t||new Ff).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,t){return e.setPosition(e.position()+4),(t||new Ff).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Cf.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,t){e.addFieldInt16(0,t,Cf.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,t){return Ff.startFloatingPoint(e),Ff.addPrecision(e,t),Ff.endFloatingPoint(e)}}class Mf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDecimal(e,t){return(t||new Mf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,t){return e.setPosition(e.position()+4),(t||new Mf).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,t){e.addFieldInt32(0,t,0)}static addScale(e,t){e.addFieldInt32(1,t,0)}static addBitWidth(e,t){e.addFieldInt32(2,t,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,t,i,n){return Mf.startDecimal(e),Mf.addPrecision(e,t),Mf.addScale(e,i),Mf.addBitWidth(e,n),Mf.endDecimal(e)}}!function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"}(Ef||(Ef={}));class Lf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsDate(e,t){return(t||new Lf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,t){return e.setPosition(e.position()+4),(t||new Lf).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Ef.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,Ef.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,t){return Lf.startDate(e),Lf.addUnit(e,t),Lf.endDate(e)}}!function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"}(Of||(Of={}));class Nf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTime(e,t){return(t||new Nf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,t){return e.setPosition(e.position()+4),(t||new Nf).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Of.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,Of.MILLISECOND)}static addBitWidth(e,t){e.addFieldInt32(1,t,32)}static endTime(e){return e.endObject()}static createTime(e,t,i){return Nf.startTime(e),Nf.addUnit(e,t),Nf.addBitWidth(e,i),Nf.endTime(e)}}class Bf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsTimestamp(e,t){return(t||new Bf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,t){return e.setPosition(e.position()+4),(t||new Bf).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Of.SECOND}timezone(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,t){e.addFieldInt16(0,t,Of.SECOND)}static addTimezone(e,t){e.addFieldOffset(1,t,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,t,i){return Bf.startTimestamp(e),Bf.addUnit(e,t),Bf.addTimezone(e,i),Bf.endTimestamp(e)}}!function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(xf||(xf={}));class Hf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsInterval(e,t){return(t||new Hf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,t){return e.setPosition(e.position()+4),(t||new Hf).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):xf.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,t){e.addFieldInt16(0,t,xf.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,t){return Hf.startInterval(e),Hf.addUnit(e,t),Hf.endInterval(e)}}!function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"}(Tf||(Tf={}));class zf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUnion(e,t){return(t||new zf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,t){return e.setPosition(e.position()+4),(t||new zf).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Tf.Sparse}typeIds(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb.__vector(this.bb_pos+t)+4*e):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,t){e.addFieldInt16(0,t,Tf.Sparse)}static addTypeIds(e,t){e.addFieldOffset(1,t,0)}static createTypeIdsVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addInt32(t[i]);return e.endVector()}static startTypeIdsVector(e,t){e.startVector(4,t,4)}static endUnion(e){return e.endObject()}static createUnion(e,t,i){return zf.startUnion(e),zf.addMode(e,t),zf.addTypeIds(e,i),zf.endUnion(e)}}class $f{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeBinary(e,t){return(t||new $f).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,t){return e.setPosition(e.position()+4),(t||new $f).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,t){return $f.startFixedSizeBinary(e),$f.addByteWidth(e,t),$f.endFixedSizeBinary(e)}}class Uf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsFixedSizeList(e,t){return(t||new Uf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,t){return e.setPosition(e.position()+4),(t||new Uf).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,t){e.addFieldInt32(0,t,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,t){return Uf.startFixedSizeList(e),Uf.addListSize(e,t),Uf.endFixedSizeList(e)}}class Vf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMap(e,t){return(t||new Vf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,t){return e.setPosition(e.position()+4),(t||new Vf).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return!!e&&!!this.bb.readInt8(this.bb_pos+e)}static startMap(e){e.startObject(1)}static addKeysSorted(e,t){e.addFieldInt8(0,+t,0)}static endMap(e){return e.endObject()}static createMap(e,t){return Vf.startMap(e),Vf.addKeysSorted(e,t),Vf.endMap(e)}}!function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"}(kf||(kf={}));class Wf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsMessage(e,t){return(t||new Wf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,t){return e.setPosition(e.position()+4),(t||new Wf).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Pg.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):kf.NONE}header(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__union(e,this.bb_pos+t):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):this.bb.createLong(0,0)}customMetadata(e,t){const i=this.bb.__offset(this.bb_pos,12);return i?(t||new Hg).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+4*e),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,t){e.addFieldInt16(0,t,Pg.V1)}static addHeaderType(e,t){e.addFieldInt8(1,t,kf.NONE)}static addHeader(e,t){e.addFieldOffset(2,t,0)}static addBodyLength(e,t){e.addFieldInt64(3,t,e.createLong(0,0))}static addCustomMetadata(e,t){e.addFieldOffset(4,t,0)}static createCustomMetadataVector(e,t){e.startVector(4,t.length,4);for(let i=t.length-1;i>=0;i--)e.addOffset(t[i]);return e.endVector()}static startCustomMetadataVector(e,t){e.startVector(4,t,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,t){e.finish(t)}static finishSizePrefixedMessageBuffer(e,t){e.finish(t,void 0,!0)}static createMessage(e,t,i,n,s,r){return Wf.startMessage(e),Wf.addVersion(e,t),Wf.addHeaderType(e,i),Wf.addHeader(e,n),Wf.addBodyLength(e,s),Wf.addCustomMetadata(e,r),Wf.endMessage(e)}}class jf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsNull(e,t){return(t||new jf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,t){return e.setPosition(e.position()+4),(t||new jf).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return jf.startNull(e),jf.endNull(e)}}class Gf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBinary(e,t){return(t||new Gf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,t){return e.setPosition(e.position()+4),(t||new Gf).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Gf.startBinary(e),Gf.endBinary(e)}}class Yf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsBool(e,t){return(t||new Yf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,t){return e.setPosition(e.position()+4),(t||new Yf).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Yf.startBool(e),Yf.endBool(e)}}class Kf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsUtf8(e,t){return(t||new Kf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,t){return e.setPosition(e.position()+4),(t||new Kf).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Kf.startUtf8(e),Kf.endUtf8(e)}}class qf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsList(e,t){return(t||new qf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,t){return e.setPosition(e.position()+4),(t||new qf).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return qf.startList(e),qf.endList(e)}}class Xf{constructor(){this.bb=null,this.bb_pos=0}__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsStruct_(e,t){return(t||new Xf).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,t){return e.setPosition(e.position()+4),(t||new Xf).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Xf.startStruct_(e),Xf.endStruct_(e)}}var Qf=Ag;const Zf=new class extends op{visit(e,t){return null==e||null==t?void 0:super.visit(e,t)}visitNull(e,t){return jf.startNull(t),jf.endNull(t)}visitInt(e,t){return zg.startInt(t),zg.addBitWidth(t,e.bitWidth),zg.addIsSigned(t,e.isSigned),zg.endInt(t)}visitFloat(e,t){return Ff.startFloatingPoint(t),Ff.addPrecision(t,e.precision),Ff.endFloatingPoint(t)}visitBinary(e,t){return Gf.startBinary(t),Gf.endBinary(t)}visitBool(e,t){return Yf.startBool(t),Yf.endBool(t)}visitUtf8(e,t){return Kf.startUtf8(t),Kf.endUtf8(t)}visitDecimal(e,t){return Mf.startDecimal(t),Mf.addScale(t,e.scale),Mf.addPrecision(t,e.precision),Mf.addBitWidth(t,e.bitWidth),Mf.endDecimal(t)}visitDate(e,t){return Lf.startDate(t),Lf.addUnit(t,e.unit),Lf.endDate(t)}visitTime(e,t){return Nf.startTime(t),Nf.addUnit(t,e.unit),Nf.addBitWidth(t,e.bitWidth),Nf.endTime(t)}visitTimestamp(e,t){const i=e.timezone&&t.createString(e.timezone)||void 0;return Bf.startTimestamp(t),Bf.addUnit(t,e.unit),void 0!==i&&Bf.addTimezone(t,i),Bf.endTimestamp(t)}visitInterval(e,t){return Hf.startInterval(t),Hf.addUnit(t,e.unit),Hf.endInterval(t)}visitList(e,t){return qf.startList(t),qf.endList(t)}visitStruct(e,t){return Xf.startStruct_(t),Xf.endStruct_(t)}visitUnion(e,t){zf.startTypeIdsVector(t,e.typeIds.length);const i=zf.createTypeIdsVector(t,e.typeIds);return zf.startUnion(t),zf.addMode(t,e.mode),zf.addTypeIds(t,i),zf.endUnion(t)}visitDictionary(e,t){const i=this.visit(e.indices,t);return $g.startDictionaryEncoding(t),$g.addId(t,new Qf(e.id,0)),$g.addIsOrdered(t,e.isOrdered),void 0!==i&&$g.addIndexType(t,i),$g.endDictionaryEncoding(t)}visitFixedSizeBinary(e,t){return $f.startFixedSizeBinary(t),$f.addByteWidth(t,e.byteWidth),$f.endFixedSizeBinary(t)}visitFixedSizeList(e,t){return Uf.startFixedSizeList(t),Uf.addListSize(t,e.listSize),Uf.endFixedSizeList(t)}visitMap(e,t){return Vf.startMap(t),Vf.addKeysSorted(t,e.keysSorted),Vf.endMap(t)}};function Jf(e){return new cv(e.count,tv(e.columns),iv(e.columns))}function ev(e,t){return(e.children||[]).filter(Boolean).map((e=>ig.fromJSON(e,t)))}function tv(e){return(e||[]).reduce(((e,t)=>{return[...e,new pv(t.count,(i=t.VALIDITY,(i||[]).reduce(((e,t)=>e+ +(0===t)),0))),...tv(t.children)];var i}),[])}function iv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(let i=-1,n=(e||[]).length;++i<n;){const n=e[i];n.VALIDITY&&t.push(new uv(t.length,n.VALIDITY.length)),n.TYPE&&t.push(new uv(t.length,n.TYPE.length)),n.OFFSET&&t.push(new uv(t.length,n.OFFSET.length)),n.DATA&&t.push(new uv(t.length,n.DATA.length)),t=iv(n.children,t)}return t}function nv(e){return new Map(Object.entries(e||{}))}function sv(e){return new Hu(e.isSigned,e.bitWidth)}function rv(e,t){const i=e.type.name;switch(i){case"NONE":case"null":return new Bu;case"binary":return new Uu;case"utf8":return new Vu;case"bool":return new Wu;case"list":return new Xu((t||[])[0]);case"struct":case"struct_":return new Qu(t||[])}switch(i){case"int":{const t=e.type;return new Hu(t.isSigned,t.bitWidth)}case"floatingpoint":{const t=e.type;return new $u(hh[t.precision])}case"decimal":{const t=e.type;return new ju(t.scale,t.precision,t.bitWidth)}case"date":{const t=e.type;return new Gu(uh[t.unit])}case"time":{const t=e.type;return new Yu(ph[t.unit],t.bitWidth)}case"timestamp":{const t=e.type;return new Ku(ph[t.unit],t.timezone)}case"interval":{const t=e.type;return new qu(mh[t.unit])}case"union":{const i=e.type;return new Zu(ch[i.mode],i.typeIds||[],t||[])}case"fixedsizebinary":{const t=e.type;return new Ju(t.byteWidth)}case"fixedsizelist":{const i=e.type;return new ep(i.listSize,(t||[])[0])}case"map":{const i=e.type;return new tp((t||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${i}"`)}var ov=Ag,av=Bg,lv=Ng;class dv{constructor(e,t,i,n){this._version=t,this._headerType=i,this.body=new Uint8Array(0),n&&(this._createHeader=()=>n),this._bodyLength="number"===typeof e?e:e.low}static fromJSON(e,t){const i=new dv(0,dh.V4,t);return i._createHeader=function(e,t){return()=>{switch(t){case gh.Schema:return tg.fromJSON(e);case gh.RecordBatch:return cv.fromJSON(e);case gh.DictionaryBatch:return hv.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${gh[t]}, type: ${t} }`)}}(e,t),i}static decode(e){e=new lv(iu(e));const t=Wf.getRootAsMessage(e),i=t.bodyLength(),n=t.version(),s=t.headerType(),r=new dv(i,n,s);return r._createHeader=function(e,t){return()=>{switch(t){case gh.Schema:return tg.decode(e.header(new Vg));case gh.RecordBatch:return cv.decode(e.header(new Df),e.version());case gh.DictionaryBatch:return hv.decode(e.header(new Pf),e.version())}throw new Error(`Unrecognized Message type: { name: ${gh[t]}, type: ${t} }`)}}(t,s),r}static encode(e){const t=new av;let i=-1;return e.isSchema()?i=tg.encode(t,e.header()):e.isRecordBatch()?i=cv.encode(t,e.header()):e.isDictionaryBatch()&&(i=hv.encode(t,e.header())),Wf.startMessage(t),Wf.addVersion(t,dh.V4),Wf.addHeader(t,i),Wf.addHeaderType(t,e.headerType),Wf.addBodyLength(t,new ov(e.bodyLength,0)),Wf.finishMessageBuffer(t,Wf.endMessage(t)),t.asUint8Array()}static from(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e instanceof tg)return new dv(0,dh.V4,gh.Schema,e);if(e instanceof cv)return new dv(t,dh.V4,gh.RecordBatch,e);if(e instanceof hv)return new dv(t,dh.V4,gh.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===gh.Schema}isRecordBatch(){return this.headerType===gh.RecordBatch}isDictionaryBatch(){return this.headerType===gh.DictionaryBatch}}class cv{constructor(e,t,i){this._nodes=t,this._buffers=i,this._length="number"===typeof e?e:e.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class hv{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._data=e,this._isDelta=i,this._id="number"===typeof t?t:t.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class uv{constructor(e,t){this.offset="number"===typeof e?e:e.low,this.length="number"===typeof t?t:t.low}}class pv{constructor(e,t){this.length="number"===typeof e?e:e.low,this.nullCount="number"===typeof t?t:t.low}}function mv(e,t){const i=[];for(let n,s=-1,r=-1,o=e.childrenLength();++s<o;)(n=e.children(s))&&(i[++r]=ig.decode(n,t));return i}function gv(e){const t=new Map;if(e)for(let i,n,s=-1,r=Math.trunc(e.customMetadataLength());++s<r;)(i=e.customMetadata(s))&&null!=(n=i.key())&&t.set(n,i.value());return t}function fv(e){return new Hu(e.isSigned(),e.bitWidth())}function vv(e,t){const i=e.typeType();switch(i){case Lg.NONE:case Lg.Null:return new Bu;case Lg.Binary:return new Uu;case Lg.Utf8:return new Vu;case Lg.Bool:return new Wu;case Lg.List:return new Xu((t||[])[0]);case Lg.Struct_:return new Qu(t||[])}switch(i){case Lg.Int:{const t=e.type(new zg);return new Hu(t.isSigned(),t.bitWidth())}case Lg.FloatingPoint:{const t=e.type(new Ff);return new $u(t.precision())}case Lg.Decimal:{const t=e.type(new Mf);return new ju(t.scale(),t.precision(),t.bitWidth())}case Lg.Date:{const t=e.type(new Lf);return new Gu(t.unit())}case Lg.Time:{const t=e.type(new Nf);return new Yu(t.unit(),t.bitWidth())}case Lg.Timestamp:{const t=e.type(new Bf);return new Ku(t.unit(),t.timezone())}case Lg.Interval:{const t=e.type(new Hf);return new qu(t.unit())}case Lg.Union:{const i=e.type(new zf);return new Zu(i.mode(),i.typeIdsArray()||[],t||[])}case Lg.FixedSizeBinary:{const t=e.type(new $f);return new Ju(t.byteWidth())}case Lg.FixedSizeList:{const i=e.type(new Uf);return new ep(i.listSize(),(t||[])[0])}case Lg.Map:{const i=e.type(new Vf);return new tp((t||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Lg[i]}" (${i})`)}ig.encode=function(e,t){let i=-1,n=-1,s=-1;const r=t.type;let o=t.typeId;Nu.isDictionary(r)?(o=r.dictionary.typeId,s=Zf.visit(r,e),n=Zf.visit(r.dictionary,e)):n=Zf.visit(r,e);const a=(r.children||[]).map((t=>ig.encode(e,t))),l=Ug.createChildrenVector(e,a),d=t.metadata&&t.metadata.size>0?Ug.createCustomMetadataVector(e,[...t.metadata].map((t=>{let[i,n]=t;const s=e.createString(`${i}`),r=e.createString(`${n}`);return Hg.startKeyValue(e),Hg.addKey(e,s),Hg.addValue(e,r),Hg.endKeyValue(e)}))):-1;t.name&&(i=e.createString(t.name));Ug.startField(e),Ug.addType(e,n),Ug.addTypeType(e,o),Ug.addChildren(e,l),Ug.addNullable(e,!!t.nullable),-1!==i&&Ug.addName(e,i);-1!==s&&Ug.addDictionary(e,s);-1!==d&&Ug.addCustomMetadata(e,d);return Ug.endField(e)},ig.decode=function(e,t){let i,n,s,r,o,a;t&&(a=e.dictionary())?t.has(i=a.id().low)?(r=(r=a.indexType())?fv(r):new zu,o=new sp(t.get(i),r,i,a.isOrdered()),n=new ig(e.name(),o,e.nullable(),gv(e))):(r=(r=a.indexType())?fv(r):new zu,t.set(i,s=vv(e,mv(e,t))),o=new sp(s,r,i,a.isOrdered()),n=new ig(e.name(),o,e.nullable(),gv(e))):(s=vv(e,mv(e,t)),n=new ig(e.name(),s,e.nullable(),gv(e)));return n||null},ig.fromJSON=function(e,t){let i,n,s,r,o,a;return t&&(r=e.dictionary)?t.has(i=r.id)?(n=(n=r.indexType)?sv(n):new zu,a=new sp(t.get(i),n,i,r.isOrdered),s=new ig(e.name,a,e.nullable,nv(e.customMetadata))):(n=(n=r.indexType)?sv(n):new zu,t.set(i,o=rv(e,ev(e,t))),a=new sp(o,n,i,r.isOrdered),s=new ig(e.name,a,e.nullable,nv(e.customMetadata))):(o=rv(e,ev(e,t)),s=new ig(e.name,o,e.nullable,nv(e.customMetadata))),s||null},tg.encode=function(e,t){const i=t.fields.map((t=>ig.encode(e,t)));Vg.startFieldsVector(e,i.length);const n=Vg.createFieldsVector(e,i),s=t.metadata&&t.metadata.size>0?Vg.createCustomMetadataVector(e,[...t.metadata].map((t=>{let[i,n]=t;const s=e.createString(`${i}`),r=e.createString(`${n}`);return Hg.startKeyValue(e),Hg.addKey(e,s),Hg.addValue(e,r),Hg.endKeyValue(e)}))):-1;Vg.startSchema(e),Vg.addFields(e,n),Vg.addEndianness(e,bv?Fg.Little:Fg.Big),-1!==s&&Vg.addCustomMetadata(e,s);return Vg.endSchema(e)},tg.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;const i=function(e,t){const i=[];for(let n,s=-1,r=-1,o=e.fieldsLength();++s<o;)(n=e.fields(s))&&(i[++r]=ig.decode(n,t));return i}(e,t);return new tg(i,gv(e),t)},tg.fromJSON=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;return new tg(function(e,t){return(e.fields||[]).filter(Boolean).map((e=>ig.fromJSON(e,t)))}(e,t),nv(e.customMetadata),t)},cv.encode=function(e,t){const i=t.nodes||[],n=t.buffers||[];Df.startNodesVector(e,i.length);for(const o of i.slice().reverse())pv.encode(e,o);const s=e.endVector();Df.startBuffersVector(e,n.length);for(const o of n.slice().reverse())uv.encode(e,o);const r=e.endVector();return Df.startRecordBatch(e),Df.addLength(e,new ov(t.length,0)),Df.addNodes(e,s),Df.addBuffers(e,r),Df.endRecordBatch(e)},cv.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dh.V4;if(null!==e.compression())throw new Error("Record batch compression not implemented");return new cv(e.length(),function(e){const t=[];for(let i,n=-1,s=-1,r=e.nodesLength();++n<r;)(i=e.nodes(n))&&(t[++s]=pv.decode(i));return t}(e),function(e,t){const i=[];for(let n,s=-1,r=-1,o=e.buffersLength();++s<o;)(n=e.buffers(s))&&(t<dh.V4&&(n.bb_pos+=8*(s+1)),i[++r]=uv.decode(n));return i}(e,t))},cv.fromJSON=Jf,hv.encode=function(e,t){const i=cv.encode(e,t.data);return Pf.startDictionaryBatch(e),Pf.addId(e,new ov(t.id,0)),Pf.addIsDelta(e,t.isDelta),Pf.addData(e,i),Pf.endDictionaryBatch(e)},hv.decode=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:dh.V4;return new hv(cv.decode(e.data(),t),e.id(),e.isDelta())},hv.fromJSON=function(e){return new hv(Jf(e.data),e.id,e.isDelta)},pv.encode=function(e,t){return Af.createFieldNode(e,new ov(t.length,0),new ov(t.nullCount,0))},pv.decode=function(e){return new pv(e.length(),e.nullCount())},uv.encode=function(e,t){return Rf.createBuffer(e,new ov(t.offset,0),new ov(t.length,0))},uv.decode=function(e){return new uv(e.offset(),e.length())};const bv=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]})(),yv=e=>`Expected ${gh[e]} Message in stream, but was null or length 0.`,_v=e=>`Header pointer of flatbuffer-encoded ${gh[e]} Message is null or length 0.`,Sv=(e,t)=>`Expected to read ${e} metadata bytes, but only read ${t}.`,wv=(e,t)=>`Expected to read ${e} bytes for message body, but only read ${t}.`;class Cv{constructor(e){this.source=e instanceof af?e:new af(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||-1===e.value&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?tf:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(yv(e));return t.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const t=iu(this.source.read(e));if(t.byteLength<e)throw new Error(wv(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}readSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=gh.Schema,i=this.readMessage(t),n=null===i||void 0===i?void 0:i.header();if(e&&!n)throw new Error(_v(t));return n}readMetadataLength(){const e=this.source.read(xv),t=e&&new Ng(e),i=(null===t||void 0===t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}}readMetadata(e){const t=this.source.read(e);if(!t)return tf;if(t.byteLength<e)throw new Error(Sv(e,t.byteLength));return{done:!1,value:dv.decode(t)}}}class Ev{constructor(e,t){this.source=e instanceof lf?e:Mh(e)?new uf(e,t):new lf(e)}[Symbol.asyncIterator](){return this}next(){return $h(this,void 0,void 0,(function*(){let e;return(e=yield this.readMetadataLength()).done||-1===e.value&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?tf:e}))}throw(e){return $h(this,void 0,void 0,(function*(){return yield this.source.throw(e)}))}return(e){return $h(this,void 0,void 0,(function*(){return yield this.source.return(e)}))}readMessage(e){return $h(this,void 0,void 0,(function*(){let t;if((t=yield this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(yv(e));return t.value}))}readMessageBody(e){return $h(this,void 0,void 0,(function*(){if(e<=0)return new Uint8Array(0);const t=iu(yield this.source.read(e));if(t.byteLength<e)throw new Error(wv(e,t.byteLength));return t.byteOffset%8===0&&t.byteOffset+t.byteLength<=t.buffer.byteLength?t:t.slice()}))}readSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return $h(this,void 0,void 0,(function*(){const t=gh.Schema,i=yield this.readMessage(t),n=null===i||void 0===i?void 0:i.header();if(e&&!n)throw new Error(_v(t));return n}))}readMetadataLength(){return $h(this,void 0,void 0,(function*(){const e=yield this.source.read(xv),t=e&&new Ng(e),i=(null===t||void 0===t?void 0:t.readInt32(0))||0;return{done:0===i,value:i}}))}readMetadata(e){return $h(this,void 0,void 0,(function*(){const t=yield this.source.read(e);if(!t)return tf;if(t.byteLength<e)throw new Error(Sv(e,t.byteLength));return{done:!1,value:dv.decode(t)}}))}}class Ov extends Cv{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof nf?e:new nf(e)}next(){const{_json:e}=this;if(!this._schema){this._schema=!0;return{done:!1,value:dv.fromJSON(e.schema,gh.Schema)}}if(this._dictionaryIndex<e.dictionaries.length){const t=e.dictionaries[this._dictionaryIndex++];this._body=t.data.columns;return{done:!1,value:dv.fromJSON(t,gh.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const t=e.batches[this._batchIndex++];this._body=t.columns;return{done:!1,value:dv.fromJSON(t,gh.RecordBatch)}}return this._body=[],tf}readMessageBody(e){return function e(t){return(t||[]).reduce(((t,i)=>[...t,...i.VALIDITY&&[i.VALIDITY]||[],...i.TYPE&&[i.TYPE]||[],...i.OFFSET&&[i.OFFSET]||[],...i.DATA&&[i.DATA]||[],...e(i.children)]),[])}(this._body)}readMessage(e){let t;if((t=this.next()).done)return null;if(null!=e&&t.value.headerType!==e)throw new Error(yv(e));return t.value}readSchema(){const e=gh.Schema,t=this.readMessage(e),i=null===t||void 0===t?void 0:t.header();if(!t||!i)throw new Error(_v(e));return i}}const xv=4,Tv="ARROW1",kv=new Uint8Array(6);for(let Sb=0;Sb<6;Sb+=1)kv[Sb]=Tv.codePointAt(Sb);function Iv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let i=-1,n=kv.length;++i<n;)if(kv[i]!==e[t+i])return!1;return!0}const Rv=kv.length,Av=Rv+xv,Dv=2*Rv+xv;class Pv extends sf{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const t=this._impl.open(e);return Rh(t)?t.then((()=>this)):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Qg.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Qg.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof Pv?e:Ph(e)?function(e){return new Fv(new Vv(e))}(e):Mh(e)?function(e){return $h(this,void 0,void 0,(function*(){const{size:t}=yield e.stat(),i=new uf(e,t);return t>=Dv&&Iv(yield i.readAt(0,Rv+7&-8))?new Nv(new Uv(i)):new Mv(new zv(i))}))}(e):Rh(e)?(()=>$h(this,void 0,void 0,(function*(){return yield Pv.from(yield e)})))():Lh(e)||Bh(e)||Hh(e)||Dh(e)?function(e){return $h(this,void 0,void 0,(function*(){const t=yield e.peek(Rv+7&-8);return t&&t.byteLength>=4?Iv(t)?new Lv(new $v(yield e.read())):new Mv(new zv(e)):new Mv(new zv(function(){return Wh(this,arguments,(function*(){}))}()))}))}(new lf(e)):function(e){const t=e.peek(Rv+7&-8);return t&&t.byteLength>=4?Iv(t)?new Lv(new $v(e.read())):new Fv(new Hv(e)):new Fv(new Hv(function*(){}()))}(new af(e))}static readAll(e){return e instanceof Pv?e.isSync()?jv(e):Gv(e):Ph(e)||ArrayBuffer.isView(e)||Ah(e)||Fh(e)?jv(e):Gv(e)}}class Fv extends Pv{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Wh(this,arguments,(function*(){yield Vh(yield*jh(Gh(this[Symbol.iterator]())))}))}}class Mv extends Pv{constructor(e){super(e),this._impl=e}readAll(){var e,t;return $h(this,void 0,void 0,(function*(){const i=new Array;try{for(var n,s=Gh(this);!(n=yield s.next()).done;){const e=n.value;i.push(e)}}catch(r){e={error:r}}finally{try{n&&!n.done&&(t=s.return)&&(yield t.call(s))}finally{if(e)throw e.error}}return i}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Lv extends Fv{constructor(e){super(e),this._impl=e}}class Nv extends Mv{constructor(e){super(e),this._impl=e}}class Bv{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Map;this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,t){const i=this._loadVectors(e,t,this.schema.fields),n=eg({type:new Qu(this.schema.fields),length:e.length,children:i});return new yg(this.schema,n)}_loadDictionaryBatch(e,t){const{id:i,isDelta:n}=e,{dictionaries:s,schema:r}=this,o=s.get(i);if(n||!o){const s=r.dictionaries.get(i),a=this._loadVectors(e.data,t,[s]);return(o&&n?o.concat(new Xm(a)):new Xm(a)).memoize()}return o.memoize()}_loadVectors(e,t,i){return new yf(t,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}class Hv extends Bv{constructor(e,t){super(t),this._reader=Ph(e)?new Ov(this._handle=e):new Cv(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=Wv(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):tf}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):tf}next(){if(this.closed)return tf;let e;const{_reader:t}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),n=t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,n)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),n=t.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,s)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new wg(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class zv extends Bv{constructor(e,t){super(t),this._reader=new Ev(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return $h(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(e){return $h(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=Wv(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(e){return $h(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):tf}))}return(e){return $h(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):tf}))}next(){return $h(this,void 0,void 0,(function*(){if(this.closed)return tf;let e;const{_reader:t}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else{if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),n=yield t.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,n)}}if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),n=yield t.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,n);this.dictionaries.set(i.id,s)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new wg(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(e){return $h(this,void 0,void 0,(function*(){return yield this._reader.readMessage(e)}))}}class $v extends Hv{constructor(e,t){super(e instanceof hf?e:new hf(e),t)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var t;if(this.closed)return null;this._footer||this.open();const i=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const e=this._reader.readMessage(gh.RecordBatch);if(null===e||void 0===e?void 0:e.isRecordBatch()){const t=e.header(),i=this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null}_readDictionaryBatch(e){var t;const i=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const e=this._reader.readMessage(gh.DictionaryBatch);if(null===e||void 0===e?void 0:e.isDictionaryBatch()){const t=e.header(),i=this._reader.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,n)}}}_readFooter(){const{_handle:e}=this,t=e.size-Av,i=e.readInt32(t),n=e.readAt(t-i,i);return Kg.decode(n)}_readNextMessageAndValidate(e){var t;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class Uv extends zv{constructor(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const s="number"!==typeof i[0]?i.shift():void 0,r=i[0]instanceof Map?i.shift():void 0;super(e instanceof uf?e:new uf(e,s),r)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(e){const t=Object.create(null,{open:{get:()=>super.open}});return $h(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const e of this._footer.dictionaryBatches())e&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield t.open.call(this,e)}))}readRecordBatch(e){var t;return $h(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const i=null===(t=this._footer)||void 0===t?void 0:t.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const e=yield this._reader.readMessage(gh.RecordBatch);if(null===e||void 0===e?void 0:e.isRecordBatch()){const t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength);return this._loadRecordBatch(t,i)}}return null}))}_readDictionaryBatch(e){var t;return $h(this,void 0,void 0,(function*(){const i=null===(t=this._footer)||void 0===t?void 0:t.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const e=yield this._reader.readMessage(gh.DictionaryBatch);if(null===e||void 0===e?void 0:e.isDictionaryBatch()){const t=e.header(),i=yield this._reader.readMessageBody(e.bodyLength),n=this._loadDictionaryBatch(t,i);this.dictionaries.set(t.id,n)}}}))}_readFooter(){return $h(this,void 0,void 0,(function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const t=e.size-Av,i=yield e.readInt32(t),n=yield e.readAt(t-i,i);return Kg.decode(n)}))}_readNextMessageAndValidate(e){return $h(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const t=this._footer.getRecordBatch(this._recordBatchIndex);if(t&&(yield this._handle.seek(t.offset)))return yield this._reader.readMessage(e)}return null}))}}class Vv extends Hv{constructor(e,t){super(e,t)}_loadVectors(e,t,i){return new _f(t,e.nodes,e.buffers,this.dictionaries).visitMany(i)}}function Wv(e,t){return t&&"boolean"===typeof t.autoDestroy?t.autoDestroy:e.autoDestroy}function*jv(e){const t=Pv.from(e);try{if(!t.open({autoDestroy:!1}).closed)do{yield t}while(!t.reset().open().closed)}finally{t.cancel()}}function Gv(e){return Wh(this,arguments,(function*(){const t=yield Vh(Pv.from(e));try{if(!(yield Vh(t.open({autoDestroy:!1}))).closed)do{yield yield Vh(t)}while(!(yield Vh(t.reset().open())).closed)}finally{yield Vh(t.cancel())}}))}class Yv extends op{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof yg?t.data.children:t.data)),t=new Yv;for(var i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return t.visitMany(e(n)),t}visit(e){if(e instanceof Xm)return this.visitMany(e.data),this;const{type:t}=e;if(!Nu.isDictionary(t)){const{length:i,nullCount:n}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Nu.isNull(t)||Kv.call(this,n<=0?new Uint8Array(0):Im(e.offset,i,e.nullBitmap)),this.nodes.push(new pv(i,n))}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Kv(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new uv(this._byteLength,t)),this._byteLength+=t,this}function qv(e){return Kv.call(this,e.values.subarray(0,e.length*e.stride))}function Xv(e){const{length:t,values:i,valueOffsets:n}=e,s=n[0],r=n[t],o=Math.min(r-s,i.byteLength-s);return Kv.call(this,ou(-n[0],t,n)),Kv.call(this,i.subarray(s,s+o)),this}function Qv(e){const{length:t,valueOffsets:i}=e;return i&&Kv.call(this,ou(i[0],t,i)),this.visit(e.children[0])}function Zv(e){return this.visitMany(e.type.children.map(((t,i)=>e.children[i])).filter(Boolean))[0]}Yv.prototype.visitBool=function(e){let t;return e.nullCount>=e.length?Kv.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Kv.call(this,Im(e.offset,e.length,t)):Kv.call(this,Rm(e.values))},Yv.prototype.visitInt=qv,Yv.prototype.visitFloat=qv,Yv.prototype.visitUtf8=Xv,Yv.prototype.visitBinary=Xv,Yv.prototype.visitFixedSizeBinary=qv,Yv.prototype.visitDate=qv,Yv.prototype.visitTimestamp=qv,Yv.prototype.visitTime=qv,Yv.prototype.visitDecimal=qv,Yv.prototype.visitList=Qv,Yv.prototype.visitStruct=Zv,Yv.prototype.visitUnion=function(e){const{type:t,length:i,typeIds:n,valueOffsets:s}=e;if(Kv.call(this,n),t.mode===ch.Sparse)return Zv.call(this,e);if(t.mode===ch.Dense){if(e.offset<=0)return Kv.call(this,s),Zv.call(this,e);{const r=n.reduce(((e,t)=>Math.max(e,t)),n[0]),o=new Int32Array(r+1),a=new Int32Array(r+1).fill(-1),l=new Int32Array(i),d=ou(-s[0],i,s);for(let e,t,s=-1;++s<i;)-1===(t=a[e=n[s]])&&(t=a[e]=d[e]),l[s]=d[s]-t,++o[e];Kv.call(this,l);for(let n,s=-1,c=t.children.length;++s<c;)if(n=e.children[s]){const e=t.typeIds[s],r=Math.min(i,o[e]);this.visit(n.slice(a[e],r))}}}return this},Yv.prototype.visitInterval=qv,Yv.prototype.visitFixedSizeList=Qv,Yv.prototype.visitMap=Qv;class Jv extends sf{constructor(e){super(),this._position=0,this._started=!1,this._sink=new of,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ih(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!==typeof e.autoDestroy||e.autoDestroy,this._writeLegacyIpcFormat="boolean"===typeof e.writeLegacyIpcFormat&&e.writeLegacyIpcFormat}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,t){throw new Error('"throughDOM" not available in this environment')}toString(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toString(e)}toUint8Array(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._sink.toUint8Array(e)}writeAll(e){return Rh(e)?e.then((e=>this.writeAll(e))):Dh(e)?nb(this,e):ib(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sink,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e===this._sink||e instanceof of?this._sink=e:(this._sink=new of,e&&(e=>Ih(e)&&kh(e.abort)&&kh(e.getWriter)&&!Nh(e))(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&(e=>Ih(e)&&kh(e.end)&&kh(e.write)&&Th(e.writable)&&!Nh(e))(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,t&&fg(t,this._schema)||(null==t?(this._position=0,this._schema=null):(this._started=!0,this._schema=t,this._writeSchema(t))),this}write(e){let t=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==e)return this.finish()&&void 0;if(e instanceof Og&&!(t=e.schema))return this.finish()&&void 0;if(e instanceof yg&&!(t=e.schema))return this.finish()&&void 0;if(t&&!fg(t,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,t)}e instanceof yg?e instanceof wg||this._writeRecordBatch(e):e instanceof Og?this.writeAll(e.batches):Ah(e)&&this.writeAll(e)}_writeMessage(e){const t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:8)-1,i=dv.encode(e),n=i.byteLength,s=this._writeLegacyIpcFormat?4:8,r=n+s+t&~t,o=r-n-s;return e.headerType===gh.RecordBatch?this._recordBatchBlocks.push(new Xg(r,e.bodyLength,this._position)):e.headerType===gh.DictionaryBatch&&this._dictionaryBlocks.push(new Xg(r,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(r-s)),n>0&&this._write(i),this._writePadding(o)}_write(e){if(this._started){const t=iu(e);t&&t.byteLength>0&&(this._sink.write(t),this._position+=t.byteLength)}return this}_writeSchema(e){return this._writeMessage(dv.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(kv)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:t,nodes:i,bufferRegions:n,buffers:s}=Yv.assemble(e),r=new cv(e.numRows,i,n),o=dv.from(r,t);return this._writeDictionaries(e)._writeMessage(o)._writeBodyBuffers(s)}_writeDictionaryBatch(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._dictionaryDeltaOffsets.set(t,e.length+(this._dictionaryDeltaOffsets.get(t)||0));const{byteLength:n,nodes:s,bufferRegions:r,buffers:o}=Yv.assemble(new Xm([e])),a=new cv(e.length,s,r),l=new hv(a,t,i),d=dv.from(l,n);return this._writeMessage(d)._writeBodyBuffers(o)}_writeBodyBuffers(e){let t,i,n;for(let s=-1,r=e.length;++s<r;)(t=e[s])&&(i=t.byteLength)>0&&(this._write(t),(n=(i+7&-8)-i)>0&&this._writePadding(n));return this}_writeDictionaries(e){for(let[t,i]of e.dictionaries){let e=this._dictionaryDeltaOffsets.get(t)||0;if(0===e||(i=null===i||void 0===i?void 0:i.slice(e)).length>0)for(const n of i.data)this._writeDictionaryBatch(n,t,e>0),e+=n.length}return this}}class eb extends Jv{static writeAll(e,t){const i=new eb(t);return Rh(e)?e.then((e=>i.writeAll(e))):Dh(e)?nb(i,e):ib(i,e)}}class tb extends Jv{static writeAll(e){const t=new tb;return Rh(e)?e.then((e=>t.writeAll(e))):Dh(e)?nb(t,e):ib(t,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeFooter(e){const t=Kg.encode(new Kg(e,dh.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(t)._write(Int32Array.of(t.byteLength))._writeMagic()}}function ib(e,t){let i=t;t instanceof Og&&(i=t.batches,e.reset(void 0,t.schema));for(const n of i)e.write(n);return e.finish()}function nb(e,t){var i,n,s,r;return $h(this,void 0,void 0,(function*(){try{for(i=Gh(t);!(n=yield i.next()).done;){const t=n.value;e.write(t)}}catch(o){s={error:o}}finally{try{n&&!n.done&&(r=i.return)&&(yield r.call(i))}finally{if(s)throw s.error}}return e.finish()}))}function sb(e){const t=Pv.from(e);return Rh(t)?t.then((e=>sb(e))):t.isAsync()?t.readAll().then((e=>new Og(e))):new Og(t.readAll())}function rb(e){return("stream"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stream")?eb:tb).writeAll(e).toUint8Array(!0)}var ob,ab=function(){function e(e,t,i,n){var s=this;this.getCell=function(e,t){var i=e<s.headerRows&&t<s.headerColumns,n=e>=s.headerRows&&t<s.headerColumns,r=e<s.headerRows&&t>=s.headerColumns;if(i){var o=["blank"];return t>0&&o.push("level"+e),{type:"blank",classNames:o.join(" "),content:""}}if(r)return{type:"columns",classNames:(o=["col_heading","level"+e,"col"+(l=t-s.headerColumns)]).join(" "),content:s.getContent(s.columnsTable,l,e)};if(n){o=["row_heading","level"+t,"row"+(a=e-s.headerRows)];return{type:"index",id:"T_".concat(s.uuid,"level").concat(t,"_row").concat(a),classNames:o.join(" "),content:s.getContent(s.indexTable,a,t)}}o=["data","row"+(a=e-s.headerRows),"col"+(l=t-s.headerColumns)];var a,l,d=s.styler?s.getContent(s.styler.displayValuesTable,a,l):s.getContent(s.dataTable,a,l);return{type:"data",id:"T_".concat(s.uuid,"row").concat(a,"_col").concat(l),classNames:o.join(" "),content:d}},this.getContent=function(e,t,i){var n=e.getChildAt(i);return null===n?"":s.getColumnTypeId(e,i)===fh.Timestamp?s.nanosToDate(n.get(t)):n.get(t)},this.dataTable=sb(e),this.indexTable=sb(t),this.columnsTable=sb(i),this.styler=n?{caption:n.caption,displayValuesTable:sb(n.displayValues),styles:n.styles,uuid:n.uuid}:void 0}return Object.defineProperty(e.prototype,"rows",{get:function(){return this.indexTable.numRows+this.columnsTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this.indexTable.numCols+this.columnsTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this.rows-this.dataRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headerColumns",{get:function(){return this.columns-this.dataColumns},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataRows",{get:function(){return this.dataTable.numRows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataColumns",{get:function(){return this.dataTable.numCols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uuid",{get:function(){return this.styler&&this.styler.uuid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"caption",{get:function(){return this.styler&&this.styler.caption},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"styles",{get:function(){return this.styler&&this.styler.styles},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this.dataTable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this.indexTable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"columnTable",{get:function(){return this.columnsTable},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{data:rb(this.dataTable),index:rb(this.indexTable),columns:rb(this.columnsTable)}},e.prototype.getColumnTypeId=function(e,t){return e.schema.fields[t].type.typeId},e.prototype.nanosToDate=function(e){return new Date(e/1e6)},e}(),lb=function(){return lb=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},lb.apply(this,arguments)};!function(e){e.COMPONENT_READY="streamlit:componentReady",e.SET_COMPONENT_VALUE="streamlit:setComponentValue",e.SET_FRAME_HEIGHT="streamlit:setFrameHeight"}(ob||(ob={}));var db=function(){function e(){}return e.API_VERSION=1,e.RENDER_EVENT="streamlit:render",e.events=new EventTarget,e.registeredMessageListener=!1,e.setComponentReady=function(){e.registeredMessageListener||(window.addEventListener("message",e.onMessageEvent),e.registeredMessageListener=!0),e.sendBackMsg(ob.COMPONENT_READY,{apiVersion:e.API_VERSION})},e.setFrameHeight=function(t){void 0===t&&(t=document.body.scrollHeight),t!==e.lastFrameHeight&&(e.lastFrameHeight=t,e.sendBackMsg(ob.SET_FRAME_HEIGHT,{height:t}))},e.setComponentValue=function(t){var i;t instanceof ab?(i="dataframe",t=t.serialize()):!function(e){var t=!1;try{t=e instanceof BigInt64Array||e instanceof BigUint64Array}catch(_b){}return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array||t}(t)?t instanceof ArrayBuffer?(i="bytes",t=new Uint8Array(t)):i="json":(i="bytes",t=new Uint8Array(t.buffer)),e.sendBackMsg(ob.SET_COMPONENT_VALUE,{value:t,dataType:i})},e.onMessageEvent=function(t){if(t.data.type===e.RENDER_EVENT)e.onRenderMessage(t.data)},e.onRenderMessage=function(t){var i=t.args;null==i&&(console.error("Got null args in onRenderMessage. This should never happen"),i={});var n=t.dfs&&t.dfs.length>0?e.argsDataframeToObject(t.dfs):{};i=lb(lb({},i),n);var s=Boolean(t.disabled),r=t.theme;r&&cb(r);var o={disabled:s,args:i,theme:r},a=new CustomEvent(e.RENDER_EVENT,{detail:o});e.events.dispatchEvent(a)},e.argsDataframeToObject=function(t){var i=t.map((function(t){var i=t.key,n=t.value;return[i,e.toArrowTable(n)]}));return Object.fromEntries(i)},e.toArrowTable=function(e){var t,i=(t=e.data).data,n=t.index,s=t.columns,r=t.styler;return new ab(i,n,s,r)},e.sendBackMsg=function(e,t){window.parent.postMessage(lb({isStreamlitMessage:!0,type:e},t),"*")},e}(),cb=function(e){var t=document.createElement("style");document.head.appendChild(t),t.innerHTML="\n    :root {\n      --primary-color: ".concat(e.primaryColor,";\n      --background-color: ").concat(e.backgroundColor,";\n      --secondary-background-color: ").concat(e.secondaryBackgroundColor,";\n      --text-color: ").concat(e.textColor,";\n      --font: ").concat(e.font,";\n    }\n\n    body {\n      background-color: var(--background-color);\n      color: var(--text-color);\n    }\n  ")};var hb=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}hb(t,e),t.prototype.componentDidMount=function(){db.setFrameHeight()},t.prototype.componentDidUpdate=function(){db.setFrameHeight()}}(d.PureComponent);var ub=i(579);function pb(e){const t=Array.isArray(e)?[]:{},i=[{source:e,target:t}];for(;i.length>0;){var n;const{source:e,target:t}=null!==(n=i.pop())&&void 0!==n?n:{};for(const n in e)if("string"===typeof e[n]&&e[n].startsWith("js$")){const[i,s]=e[n].slice(3).split("."),r=vb[i];r&&t&&(t[n]=r[s])}else"object"===typeof e[n]&&null!==e[n]?(t[n]=Array.isArray(e[n])?[]:{},i.push({source:e[n],target:t[n]})):t[n]=e[n]}return t}const mb={numberFormatter(e,t,i,n,s,r){const o=Za(0,0,i,n,0,r),[a,l]=fb(i,n,r);return Q("span",{style:{color:a,backgroundColor:l,...xo("style",n,r&&"function"===typeof r.getOptions?r.getOptions():{},[])},textContent:o})},stringReplacer(e,t,i,n,s,r){var o;const a=xo("replacements",n,r&&"function"===typeof r.getOptions?r.getOptions():{},[]);return null!==(o=null===a||void 0===a?void 0:a[String(i)])&&void 0!==o?o:i},barFormatter:(e,t,i,n,s,r)=>mb.stackedBarFormatter(e,t,[i],n,s,r),stackedBarFormatter(e,t,i,n,s,r){if(!Array.isArray(i))return"";const o=r&&"function"===typeof r.getOptions?r.getOptions():{},a=xo("min",n,o,0),l=xo("max",n,o,100),d=xo("style",n,o,[]),c=Q("div",{className:"progress",style:{gap:"1px"}});for(let h of i){const[e,t]=fb(h,n,r),i=(h-a)/l*100,s=Za(0,0,h,n,0,r);c.appendChild(Q("div",{className:"progress-bar",role:"progressbar",ariaValueNow:s,ariaValueMin:"0",ariaValueMax:"100",textContent:s,style:{minWidth:"2em",width:`${i}%`,color:e,backgroundColor:t,...d}}))}return c}},gb={numberArraySorter(e,t){const i=e.reduce(((e,t)=>e+t),0),n=t.reduce(((e,t)=>e+t),0);return i-n}};function fb(e,t,i){const n=xo("colors",t,i&&"function"===typeof i.getOptions?i.getOptions():{},[]);for(let[s,r,o]of n){if(r||(r="unset"),o||(o="transparent"),null==s)return[r,o];if(e<=s)return[r,o]}return[]}const vb={Formatters:el,FieldType:y,Filters:Ya,OperatorType:C,ExportServices:{ExcelExportService:new class{constructor(){this._fileFormat=_.xlsx,this._columnHeaders=[],this._hasColumnTitlePreHeader=!1,this._hasGroupedItems=!1,this._pubSubService=null,this._regularCellExcelFormats={},this._groupTotalExcelFormats={},this.className="ExcelExportService"}get _datasetIdPropName(){return this._gridOptions?.datasetIdPropertyName??"id"}get _dataView(){return this._grid?.getData()}get _gridOptions(){return this._grid?.getOptions()||{}}get stylesheet(){return this._stylesheet}get stylesheetFormats(){return this._stylesheetFormats}get groupTotalExcelFormats(){return this._groupTotalExcelFormats}get regularCellExcelFormats(){return this._regularCellExcelFormats}dispose(){this._pubSubService?.unsubscribeAll()}init(e,t){if(this._grid=e,this._pubSubService=t.get("PubSubService"),this._locales=this._gridOptions?.locales??g.locales,this._translaterService=this._gridOptions?.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToExcel(e){if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableExcelExport"?');return this._pubSubService?.publish("onBeforeExportToExcel",!0),this._excelExportOptions=Se(!0,{},{...eh,...this._gridOptions.excelExportOptions,...e}),this._fileFormat=this._excelExportOptions.format||_.xlsx,this._regularCellExcelFormats={},this._groupTotalExcelFormats={},new Promise((e=>{const t={name:this._excelExportOptions.sheetName||"Sheet1"};this._workbook=new $c,this._sheet=this._workbook.createWorksheet(t),this._stylesheet=this._workbook.getStyleSheet();const i=this._stylesheet.createFormat({font:{bold:!0}}),n=this._stylesheet.createFormat({format:"@"}),s=this._stylesheet.createFormat({format:"0"});this._stylesheetFormats={boldFormat:i,numberFormat:s,stringFormat:n},this._sheet.setColumnFormats([i]);const r=this.getDataOutput();window.setTimeout((async()=>{this._gridOptions?.excelExportOptions?.customExcelHeader&&this._gridOptions.excelExportOptions.customExcelHeader(this._workbook,this._sheet);const t=this._grid?.getColumns()||[];this._sheet.setColumns(this.getColumnStyles(t));const i=this._sheet.data;let n=i;Array.isArray(i)&&Array.isArray(r)&&(n=this._sheet.data.concat(r)),this._sheet.setData(n),this._workbook.addWorksheet(this._sheet);let s=this._excelExportOptions?.mimeType;void 0===s&&(s=this._fileFormat===_.xls?"application/vnd.ms-excel":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");const o=`${this._excelExportOptions.filename}.${this._fileFormat}`;Uc(this._workbook,o,{mimeType:s}).then((()=>{this._pubSubService?.publish("onAfterExportToExcel",{filename:o,mimeType:s}),e(!0)}))}))}))}getExcelColumnNameByIndex(e){const t="ZABCDEFGHIJKLMNOPQRSTUVWXY";let i=Math.floor(e/26);const n=Math.floor(e%26);return 0===n&&i--,e>26?this.getExcelColumnNameByIndex(i)+t[n]:t[n]+""}getDataOutput(){const e=this._grid?.getColumns()||[],t=[],i=this._gridOptions?.excelExportOptions,n=i?.columnHeaderStyle;let s=this._stylesheetFormats.boldFormat.id;if(n&&(s=this._stylesheet.createFormat(n).id),this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping){const i=this._stylesheet.createFormat({alignment:{horizontal:"center"},font:{bold:!0}});t.push(this.getColumnGroupedHeaderTitlesData(e,{style:i?.id})),this._hasColumnTitlePreHeader=!0}return t.push(this.getColumnHeaderData(e,{style:s})),this.pushAllGridRowDataToArray(t,e),t}getColumnStyles(e){const t=this._dataView.getGrouping(),i=[];return Array.isArray(t)&&t.length>0&&i.push({bestFit:!0,columnStyles:this._gridOptions?.excelExportOptions?.customColumnWidth??10}),e.forEach((e=>{const t=e.excludeFromExport??!1;(void 0===e.width||e.width>0)&&!t&&i.push({bestFit:!0,width:e.excelExportOptions?.width??this._gridOptions?.excelExportOptions?.customColumnWidth??10})})),i}getColumnGroupedHeaderTitlesData(e,t){let i=[];this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(e)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0&&(i=this._groupedColumnHeaders.map((e=>({value:e.title,metadata:t}))));let n=0;const s=this._groupedColumnHeaders.length;for(let r=0;r<s;r++)if(r+1===s||r+1<s&&this._groupedColumnHeaders[r].title!==this._groupedColumnHeaders[r+1].title){const e=this.getExcelColumnNameByIndex(n+1),t=this.getExcelColumnNameByIndex(r+1);this._sheet.mergeCells(`${e}1`,`${t}1`),n=r+1}return i}getColumnHeaderData(e,t){let i=[];this._columnHeaders=this.getColumnHeaders(e)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0&&(i=this._columnHeaders.map((e=>({value:Ze(e.title),metadata:t}))));const n=this.getGroupColumnTitle();return n&&i.unshift({value:n,metadata:t}),i}getGroupColumnTitle(){let e=this._excelExportOptions.groupingColumnHeaderTitle;!e&&this._gridOptions.enableTranslate&&this._translaterService?.translate?e=this._translaterService.translate(`${z(this._gridOptions)}GROUP_BY`):e||(e=this._locales?.TEXT_GROUP_BY);const t=this._dataView.getGrouping();return Array.isArray(t)&&t.length>0?(this._hasGroupedItems=!0,e):(this._hasGroupedItems=!1,null)}getColumnGroupedHeaderTitles(e){const t=[];return Array.isArray(e)&&e.forEach((e=>{let i="";i=e.columnGroupKey&&this._gridOptions.enableTranslate&&this._translaterService?.translate?this._translaterService.translate(e.columnGroupKey):e.columnGroup||"";const n=e.excludeFromExport||!1;(void 0===e.width||e.width>0)&&!n&&t.push({key:e.field||e.id,title:i||""})})),t}getColumnHeaders(e){const t=[];return Array.isArray(e)&&e.forEach((e=>{let i="";i=(e.nameKey||e.nameKey)&&this._gridOptions.enableTranslate&&this._translaterService?.translate?this._translaterService.translate(e.nameKey||e.nameKey):te(e.name||"","innerHTML")||ze(e.field);const n=e.excludeFromExport||!1;(void 0===e.width||e.width>0)&&!n&&t.push({key:(e.field||e.id)+"",title:i})})),t}pushAllGridRowDataToArray(e,t){const i=this._dataView.getLength();for(let n=0;n<i;n++){const i=this._dataView.getItem(n);i&&!i.hasOwnProperty("getItem")&&(null!==i[this._datasetIdPropName]&&void 0!==i[this._datasetIdPropName]?e.push(this.readRegularRowData(t,n,i,n)):this._hasGroupedItems&&void 0===i.__groupTotals?e.push([this.readGroupedRowTitle(i)]):i.__groupTotals&&e.push(this.readGroupedTotalRows(t,i,n)))}return e}readRegularRowData(e,t,i,n){let s=0;const r=[],o=e.length;let a=1,l=0;const d=this._dataView.getItemMetadata(t);for(let c=0;c<o;c++){const o=e[c];if(o.excludeFromExport)continue;this._hasGroupedItems&&0===s&&r.push("");let h=1;if(this._gridOptions.enableCellRowSpan){const e=this._grid.getParentRowSpanByCell(t,c,!1);if(e){if(e.start!==t){r.push("");continue}h=e.end-e.start+1}}let u,p=1;if(d?.columns){const t=d.columns,i=t[o.id]||t[c];!isNaN(a)&&+a>1||"*"===a&&c>0||(a=i?.colspan??1),"*"===a?p=e.length-c:(p=a,(o.id in t||c in t)&&(u=o.id,l=c))}if(h>1&&!isNaN(a)&&1===+a&&o.id===u){const e=t+(this._hasColumnTitlePreHeader?3:2),i=this.getExcelColumnNameByIndex(c+1),n=this.getExcelColumnNameByIndex(c+1);this._sheet.mergeCells(`${i}${e}`,`${n}${e+h-1}`)}if("*"===a&&c>0||!isNaN(a)&&+a>1&&o.id!==u){const e=t+(this._hasColumnTitlePreHeader?3:2);if("number"===typeof a&&p-1===1){const t=this.getExcelColumnNameByIndex(l+1),i=this.getExcelColumnNameByIndex(c+1);this._sheet.mergeCells(`${t}${e}`,`${i}${e+h-1}`),r.push("")}else if("*"===a&&1===p){const t=this.getExcelColumnNameByIndex(c+1);this._sheet.mergeCells(`A${e}`,`${t}${e+h-1}`)}else r.push("");"number"===typeof a&&!isNaN(a)&&+a>1&&(p=a--)}else{let e="";const a=$(o),l={...this._excelExportOptions};if(!1!==o.exportWithFormatter&&U(a)&&(l.exportWithFormatter=!0),e=ko(t,c,o,i,this._grid,l),!this._regularCellExcelFormats.hasOwnProperty(o.id)){const e=o.excelExportOptions?.autoDetectCellFormat??this._excelExportOptions?.autoDetectCellFormat,t=Gc(this._stylesheet,this._stylesheetFormats,o,this._grid,e);o.excelExportOptions?.style&&(t.excelFormatId=this._stylesheet.createFormat(o.excelExportOptions.style).id),o.excelExportOptions?.valueParserCallback&&(t.getDataValueParser=o.excelExportOptions.valueParserCallback),this._regularCellExcelFormats[o.id]=t}"string"===typeof e&&(o.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(e=Ze(e));const{excelFormatId:d,getDataValueParser:h}=this._regularCellExcelFormats[o.id];e=h(e,{columnDef:o,excelFormatId:d,stylesheet:this._stylesheet,gridOptions:this._gridOptions,dataRowIdx:n,dataContext:i}),r.push(e),s++}}return r}readGroupedRowTitle(e){const t=Ze(e.title);if(this._excelExportOptions?.addGroupIndentation){const i=this._excelExportOptions?.groupCollapsedSymbol||"\u2b9e",n=this._excelExportOptions?.groupExpandedSymbol||"\u2b9f";return(e.collapsed?i:n)+" "+Ce(5*e.level)+t}return t}readGroupedTotalRows(e,t,i){const n=[this._excelExportOptions.groupingAggregatorRowText||""];return e.forEach((e=>{let s="";const r=$(e),o=e.excludeFromExport||!1;if(e.exportCustomGroupTotalsFormatter){const i=e.exportCustomGroupTotalsFormatter(t,e,this._grid);s=i instanceof HTMLElement?i.textContent||"":i}const a=e.excelExportOptions?.autoDetectCellFormat??this._excelExportOptions?.autoDetectCellFormat;if(r===y.number&&!1!==a){let n=this._groupTotalExcelFormats[e.id];n?.groupType||(n=qc(this._stylesheet,this._stylesheetFormats,e,this._grid,"group"),e.groupTotalsExcelExportOptions?.style&&(n.excelFormat=this._stylesheet.createFormat(e.groupTotalsExcelExportOptions.style)),this._groupTotalExcelFormats[e.id]=n);const r=e.groupTotalsExcelExportOptions?.valueParserCallback??Yc;if(void 0!==t[n.groupType]?.[e.field]){const o=r(t,{columnDef:e,groupType:n.groupType,excelFormatId:n.excelFormat?.id,stylesheet:this._stylesheet,dataRowIdx:i});s="object"===typeof o&&o.hasOwnProperty("metadata")?o:s={value:o,metadata:{style:n.excelFormat?.id}}}}else if(e.groupTotalsFormatter){const i=e.groupTotalsFormatter(t,e,this._grid);s=i instanceof HTMLElement?i.textContent||"":i}"string"===typeof s&&(e.sanitizeDataExport||this._excelExportOptions.sanitizeDataExport)&&(s=Ze(s)),(void 0===e.width||e.width>0)&&!o&&n.push(s)})),n}},TextExportService:new class{constructor(){this._delimiter=",",this._exportQuoteWrapper="",this._fileFormat=_.csv,this._lineCarriageReturn="\n",this._columnHeaders=[],this._hasGroupedItems=!1,this.className="TextExportService"}get _datasetIdPropName(){return this._gridOptions&&this._gridOptions.datasetIdPropertyName||"id"}get _dataView(){return this._grid?.getData()}get _gridOptions(){return this._grid?.getOptions()??{}}dispose(){this._pubSubService?.unsubscribeAll()}init(e,t){if(this._grid=e,this._pubSubService=t.get("PubSubService"),this._locales=this._gridOptions&&this._gridOptions.locales||g.locales,this._translaterService=this._gridOptions?.translater,this._gridOptions.enableTranslate&&(!this._translaterService||!this._translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be passed in the "translater" Grid Options when "enableTranslate" is enabled. (example: this.gridOptions = { enableTranslate: true, translater: this.translaterService })')}exportToFile(e){if(!this._grid||!this._dataView||!this._pubSubService)throw new Error('[Slickgrid-Universal] it seems that the SlickGrid & DataView objects and/or PubSubService are not initialized did you forget to enable the grid option flag "enableTextExport"?');return new Promise((t=>{this._pubSubService?.publish("onBeforeExportToTextFile",!0),this._exportOptions=Se(!0,{},{...lh,...this._gridOptions.textExportOptions,...e}),this._delimiter=this._exportOptions.delimiterOverride||this._exportOptions.delimiter||"",this._fileFormat=this._exportOptions.format||_.csv;const i=this.getDataOutput();window.setTimeout((()=>{const e={filename:`${this._exportOptions.filename}.${this._fileFormat}`,format:this._fileFormat||_.csv,mimeType:this._exportOptions.mimeType||"text/plain",useUtf8WithBom:!this._exportOptions||!this._exportOptions.hasOwnProperty("useUtf8WithBom")||this._exportOptions.useUtf8WithBom};this.startDownloadFile({...e,content:i}),this._pubSubService?.publish("onAfterExportToTextFile",e),t(!0)}),0)}))}startDownloadFile(e){const t=de(e.content);let i;i=e.format===_.csv?new oh("utf-8").encode(t):t;const n=new Blob([e.useUtf8WithBom?"\ufeff":"",i],{type:e.mimeType});if("function"===typeof navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(n,e.filename);else{const t=document.createElement("a"),i=URL.createObjectURL(n);t.textContent="download",t.href=i,t.setAttribute("download",e.filename),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}getDataOutput(){const e=this._grid.getColumns()||[];let t=this._exportOptions.groupingColumnHeaderTitle;!t&&this._gridOptions.enableTranslate&&this._translaterService?.translate&&this._translaterService?.getCurrentLanguage?.()?t=this._translaterService.translate(`${z(this._gridOptions)}GROUP_BY`):t||(t=this._locales&&this._locales.TEXT_GROUP_BY),this._exportQuoteWrapper=this._fileFormat===_.csv?'"':"";let i="";const n=this._dataView.getGrouping();if(n&&Array.isArray(n)&&n.length>0?(this._hasGroupedItems=!0,i+=this._fileFormat===_.csv?`"${t}"${this._delimiter}`:`${t}${this._delimiter}`):this._hasGroupedItems=!1,this._gridOptions.createPreHeaderPanel&&this._gridOptions.showPreHeaderPanel&&!this._gridOptions.enableDraggableGrouping&&(this._groupedColumnHeaders=this.getColumnGroupedHeaderTitles(e)||[],this._groupedColumnHeaders&&Array.isArray(this._groupedColumnHeaders)&&this._groupedColumnHeaders.length>0)){i+=this._groupedColumnHeaders.map((e=>`${this._exportQuoteWrapper}${e.title}${this._exportQuoteWrapper}`)).join(this._delimiter)+this._lineCarriageReturn}if(this._columnHeaders=this.getColumnHeaders(e)||[],this._columnHeaders&&Array.isArray(this._columnHeaders)&&this._columnHeaders.length>0){i+=this._columnHeaders.map((e=>Ze(`${this._exportQuoteWrapper}${e.title}${this._exportQuoteWrapper}`))).join(this._delimiter)+this._lineCarriageReturn}return i+=this.getAllGridRowData(e,this._lineCarriageReturn),i}getAllGridRowData(e,t){const i=[],n=this._dataView.getLength();for(let s=0;s<n;s++){const t=this._dataView.getItem(s);t&&!t.hasOwnProperty("getItem")&&(null!==t[this._datasetIdPropName]&&void 0!==t[this._datasetIdPropName]?i.push(this.readRegularRowData(e,s,t)):this._hasGroupedItems&&void 0===t.__groupTotals?i.push(this.readGroupedTitleRow(t)):t.__groupTotals&&i.push(this.readGroupedTotalRow(e,t)))}return i.join(t)}getColumnGroupedHeaderTitles(e){const t=[];return e&&Array.isArray(e)&&e.forEach((e=>{let i="";i=e.columnGroupKey&&this._gridOptions.enableTranslate&&this._translaterService?.translate&&this._translaterService?.getCurrentLanguage?.()?this._translaterService.translate(e.columnGroupKey):e.columnGroup||"";const n=e.excludeFromExport||!1;(void 0===e.width||e.width>0)&&!n&&t.push({key:e.field||e.id,title:i||""})})),t}getColumnHeaders(e){const t=[];return e&&Array.isArray(e)&&e.forEach((e=>{let i="";i=(e.nameKey||e.nameKey)&&this._gridOptions.enableTranslate&&this._translaterService?.translate&&this._translaterService?.getCurrentLanguage?.()?this._translaterService.translate(e.nameKey||e.nameKey):te(e.name||"","innerHTML")||ze(e.field);const n=e.excludeFromExport||!1;(void 0===e.width||e.width>0)&&!n&&t.push({key:e.field||e.id,title:i||""})})),t}readRegularRowData(e,t,i){let n=0;const s=[],r=this._exportQuoteWrapper;let o=1;const a=this._dataView.getItemMetadata(t);for(let l=0,d=e.length;l<d;l++){const d=e[l];if(d.excludeFromExport)continue;if(this._hasGroupedItems&&0===n){const e=this._fileFormat===_.csv?'""':"";s.push(e)}if(this._gridOptions.enableCellRowSpan){const e=this._grid.getParentRowSpanByCell(t,l,!1);if(e&&e.start!==t){s.push("");continue}}let c;if(a?.columns){const e=a?.columns,t=e[d.id]||e[l];!isNaN(o)&&+o>1||"*"===o&&l>0||(o=t?.colspan??1),"*"!==o&&(d.id in e||l in e)&&(c=d.id)}if("*"===o&&l>0||!isNaN(o)&&+o>1&&d.id!==c)s.push(""),!isNaN(o)&&+o>1&&o--;else{let e=ko(t,l,d,i,this._grid,this._exportOptions);(d.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(e=Ze(e)),this._fileFormat===_.csv&&e&&(e=e.toString().replace(/"/gi,'""'));const n=d?.exportCsvForceToKeepAsString?"=":"";s.push(n+r+e+r)}n++}return s.join(this._delimiter)}readGroupedTitleRow(e){let t=Ze(e.title);const i=this._exportQuoteWrapper;return t=Ce(5*e.level)+t,this._fileFormat===_.csv&&(t=t.toString().replace(/"/gi,'""')),i+t+i}readGroupedTotalRow(e,t){const i=this._exportOptions.delimiter,n=this._exportOptions.format,s=this._exportOptions.groupingAggregatorRowText||"",r=this._exportQuoteWrapper,o=[`${r}${s}${r}`];return e.forEach((e=>{let i="";const s=e.excludeFromExport||!1;if(e.groupTotalsFormatter){const n=e.groupTotalsFormatter(t,e,this._grid);i=n instanceof HTMLElement?n.textContent||"":n}(e.sanitizeDataExport||this._exportOptions.sanitizeDataExport)&&(i=Ze(i)),n===_.csv&&(i=i.toString().replace(/"/gi,'""')),(void 0===e.width||e.width>0)&&!s&&o.push(r+i+r)})),o.join(i)}}},StreamlitSlickGridFormatters:mb,StreamlitSlickGridSorters:gb},bb=function(e){var t=function(t){function i(e){var i=t.call(this,e)||this;return i.componentDidMount=function(){db.events.addEventListener(db.RENDER_EVENT,i.onRenderEvent),db.setComponentReady()},i.componentDidUpdate=function(){null!=i.state.componentError&&db.setFrameHeight()},i.componentWillUnmount=function(){db.events.removeEventListener(db.RENDER_EVENT,i.onRenderEvent)},i.onRenderEvent=function(e){i.setState({renderData:e.detail})},i.state={renderData:void 0,componentError:void 0},i}return hb(i,t),i.prototype.render=function(){return null!=this.state.componentError?d.createElement("div",null,d.createElement("h1",null,"Component Error"),d.createElement("span",null,this.state.componentError.message)):null==this.state.renderData?null:d.createElement(e,{width:window.innerWidth,disabled:this.state.renderData.disabled,args:this.state.renderData.args,theme:this.state.renderData.theme})},i.getDerivedStateFromError=function(e){return{componentError:e}},i}(d.PureComponent);return yh()(t,e)}((function(e){let{args:t,disabled:i,theme:n}=e;const[s,r]=(0,d.useState)((()=>pb(t.columns))),[o,a]=(0,d.useState)((()=>pb(t.options))),[l,c]=(0,d.useState)(t.data),[h,u]=(0,d.useState)(null),[p,m]=(0,d.useState)(0),g=!o.enableRowSelection,f=g?"streamlit-slickgrid-wrapper row-selection-disabled":"streamlit-slickgrid-wrapper row-selection-enabled",v=(0,d.useCallback)((()=>{try{const e=document.querySelector("#streamlit-slickgrid");if(e){e.querySelectorAll(".slick-cell.active").forEach((e=>e.classList.remove("active")))}}catch(e){console.warn("Failed to clear active classes:",e)}}),[]),b=(0,d.useCallback)((()=>{try{const e=document.querySelector("#streamlit-slickgrid");if(e){e.querySelectorAll(".slick-cell.selected").forEach((e=>e.classList.remove("selected")))}}catch(e){console.warn("Failed to clear selected classes:",e)}}),[]),y=(0,d.useCallback)((()=>n?{"--slickgrid-bg-color":n.backgroundColor||"#ffffff","--slickgrid-secondary-bg-color":n.secondaryBackgroundColor||"#f0f2f6","--slickgrid-text-color":n.textColor||"#262730","--slickgrid-primary-color":n.primaryColor||"#ff4b4b"}:{}),[n]);(0,d.useEffect)((()=>{r(pb(t.columns)),a(pb(t.options)),c(t.data)}),[t,t.data,t.columns,t.options]);const _=(0,d.useCallback)((e=>{var t,i;if(null!==(t=e.detail.eventData)&&void 0!==t&&null!==(i=t.target)&&void 0!==i&&i.classList.contains("slick-group-toggle"))return;const n=e.detail.args.grid.data,s=[n.rows[e.detail.args.row][n.idProperty],e.detail.args.cell];if(h&&h[0]===s[0]&&h[1]===s[1]){const t=p+1;m(t),t%2===0?setTimeout((()=>{const t=e.detail.args.grid;t.getSelectionModel&&t.getSelectionModel().setSelectedRanges([]),b(),v(),db.setComponentValue(null)}),0):(setTimeout((()=>{const t=document.querySelector("#streamlit-slickgrid");if(t){const i=t.querySelector(`[data-row="${e.detail.args.row}"]`);if(i){i.querySelectorAll(".slick-cell").forEach((e=>e.classList.add("selected")))}}g&&b()}),0),db.setComponentValue(s))}else u(s),m(1),db.setComponentValue(s)}),[h,p,b,v]),S=(0,d.useCallback)((()=>{db.setFrameHeight()}),[]);return(0,ub.jsx)("div",{className:f,style:y(),children:(0,ub.jsx)(fd,{gridId:"streamlit-slickgrid",columnDefinitions:s,gridOptions:o,dataset:l,onReactGridCreated:S,onClick:t.onClick?_:void 0})})})),yb=document.getElementById("root");(0,c.createRoot)(yb).render((0,ub.jsx)(bb,{}))})();
//# sourceMappingURL=main.576488e0.js.map